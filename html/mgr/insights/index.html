
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Insights plugin &#8212; Ceph Documentation</title>
    <link rel="stylesheet" href="../../_static/nature.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../_static/graphviz.css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../_static/language_data.js"></script>
    <script type="text/javascript" src="../../_static/js/ceph.js"></script>
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../../genindex/" />
    <link rel="search" title="Search" href="../../search/" />
    <link rel="next" title="Ansible Orchestrator" href="../ansible/" />
    <link rel="prev" title="DeepSea orchestrator integration" href="../deepsea/" />
    <script type="text/javascript" src="http://ayni.ceph.com/public/js/ceph.js"></script>

  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex/" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../py-modindex/" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="../ansible/" title="Ansible Orchestrator"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="../deepsea/" title="DeepSea orchestrator integration"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../">Ceph Documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../" accesskey="U">Ceph Manager Daemon</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            

<div id="dev-warning" class="admonition note" style="display:none;">
  <p class="first admonition-title">Notice</p>
  <p class="last">This document is for a development version of Ceph.</p>
</div>

<div id="eol-warning" class="admonition warning" style="display:none;">
  <p class="first admonition-title">Warning</p>
  <p class="last">This document is for an unsupported version of Ceph.</p>
</div>
  <div id="docubetter" align="right" style="display:none; padding: 15px; font-weight: bold;">
    <a id="edit-on-github" href="https://github.com/ceph/ceph/edit/master/doc/mgr/insights.rst" rel="nofollow">Edit on GitHub</a> | <a href="https://github.com/ceph/ceph/projects/4">Report a Documentation Bug</a>
  </div>

  
  <div class="section" id="insights-plugin">
<h1>Insights plugin<a class="headerlink" href="#insights-plugin" title="Permalink to this headline">¶</a></h1>
<p>The insights plugin collects and exposes system information to the Insights Core
data analysis framework. It is intended to replace explicit interrogation of
Ceph CLIs and daemon admin sockets, reducing the API surface that Insights
depends on. The insights reports contains the following:</p>
<ul class="simple">
<li><strong>Health reports</strong>. In addition to reporting the current health of the
cluster, the insights module reports a summary of the last 24 hours of health
checks. This feature is important for catching cluster health issues that are
transient and may not be present at the moment the report is generated. Health
checks are deduplicated to avoid unbounded data growth.</li>
<li><strong>Crash reports</strong>. A summary of any daemon crashes in the past 24 hours is
included in the insights report. Crashes are reported as the number of crashes
per daemon type (e.g. <cite>ceph-osd</cite>) within the time window. Full details of a
crash may be obtained using the <a class="reference external" href="../crash">crash module</a>.</li>
<li>Software version, storage utilization, cluster maps, placement group summary,
monitor status, cluster configuration, and OSD metadata.</li>
</ul>
<div class="section" id="enabling">
<h2>Enabling<a class="headerlink" href="#enabling" title="Permalink to this headline">¶</a></h2>
<p>The <em>insights</em> module is enabled with:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ceph</span> <span class="n">mgr</span> <span class="n">module</span> <span class="n">enable</span> <span class="n">insights</span>
</pre></div>
</div>
</div>
<div class="section" id="commands">
<h2>Commands<a class="headerlink" href="#commands" title="Permalink to this headline">¶</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ceph</span> <span class="n">insights</span>
</pre></div>
</div>
<p>Generate the full report.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ceph</span> <span class="n">insights</span> <span class="n">prune</span><span class="o">-</span><span class="n">health</span> <span class="o">&lt;</span><span class="n">hours</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>Remove historical health data older than &lt;hours&gt;. Passing <cite>0</cite> for &lt;hours&gt; will
clear all health data.</p>
<p>This command is useful for cleaning the health history before automated nightly
reports are generated, which may contain spurious health checks accumulated
while performing system maintenance, or other health checks that have been
resolved. There is no need to prune health data to reclaim storage space;
garbage collection is performed regularly to remove old health data from
persistent storage.</p>
</div>
</div>



          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../../">
              <img class="logo" src="../../_static/logo.png" alt="Logo"/>
            </a></p>
<h3><a href="../../">Table Of Contents</a></h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../start/intro/">Intro to Ceph</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../start/">Installation (ceph-deploy)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../install/">Installation (Manual)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../start/kube-helm/">Installation (Kubernetes + Helm)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../rados/">Ceph Storage Cluster</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../cephfs/">Ceph Filesystem</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../rbd/">Ceph Block Device</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../radosgw/">Ceph Object Gateway</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../">Ceph Manager Daemon</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../administrator/">Installation and Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../plugins/">Writing plugins</a></li>
<li class="toctree-l2"><a class="reference internal" href="../orchestrator_modules/">Writing orchestrator plugins</a></li>
<li class="toctree-l2"><a class="reference internal" href="../dashboard/">Dashboard plugin</a></li>
<li class="toctree-l2"><a class="reference internal" href="../diskprediction/">DiskPrediction plugin</a></li>
<li class="toctree-l2"><a class="reference internal" href="../localpool/">Local pool plugin</a></li>
<li class="toctree-l2"><a class="reference internal" href="../restful/">RESTful plugin</a></li>
<li class="toctree-l2"><a class="reference internal" href="../zabbix/">Zabbix plugin</a></li>
<li class="toctree-l2"><a class="reference internal" href="../prometheus/">Prometheus plugin</a></li>
<li class="toctree-l2"><a class="reference internal" href="../influx/">Influx plugin</a></li>
<li class="toctree-l2"><a class="reference internal" href="../hello/">Hello plugin</a></li>
<li class="toctree-l2"><a class="reference internal" href="../telegraf/">Telegraf plugin</a></li>
<li class="toctree-l2"><a class="reference internal" href="../telemetry/">Telemetry plugin</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iostat/">Iostat plugin</a></li>
<li class="toctree-l2"><a class="reference internal" href="../crash/">Crash plugin</a></li>
<li class="toctree-l2"><a class="reference internal" href="../orchestrator_cli/">Orchestrator CLI plugin</a></li>
<li class="toctree-l2"><a class="reference internal" href="../rook/">Rook plugin</a></li>
<li class="toctree-l2"><a class="reference internal" href="../deepsea/">DeepSea plugin</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Insights plugin</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#enabling">Enabling</a></li>
<li class="toctree-l3"><a class="reference internal" href="#commands">Commands</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../ansible/">Ansible plugin</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../api/">API Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../architecture/">Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../dev/">Developer Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../dev/internals/">Ceph Internals</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../governance/">Governance</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../ceph-volume/">ceph-volume</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../releases/">Ceph Releases</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../glossary/">Glossary</a></li>
</ul>


<!-- ugly kludge to make genindex look like it's part of the toc -->
<ul style="margin-top: -10px"><li class="toctree-l1"><a class="reference internal" href="../../genindex/">Index</a></li></ul>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search/" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex/" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../../py-modindex/" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="../ansible/" title="Ansible Orchestrator"
             >next</a> |</li>
        <li class="right" >
          <a href="../deepsea/" title="DeepSea orchestrator integration"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../">Ceph Documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../" >Ceph Manager Daemon</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2016, Red Hat, Inc, and contributors. Licensed under Creative Commons Attribution Share Alike 3.0 (CC-BY-SA-3.0).
    </div>
  </body>
</html>