

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Cephadm &mdash; Ceph Documentation</title>
  

  
  <link rel="stylesheet" href="../_static/ceph.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/ceph.css" type="text/css" />
  <link rel="stylesheet" href="../_static/graphviz.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/custom.css" type="text/css" />

  
  
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../_static/doctools.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex/" />
    <link rel="search" title="Search" href="../search/" />
    <link rel="next" title="Compatibility and Stability" href="compatibility/" />
    <link rel="prev" title="在 FreeBSD 上手动部署" href="../install/manual-freebsd-deployment/" /> 
</head>

<body class="wy-body-for-nav">

   
  <header class="top-bar">
    <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../" class="icon icon-home"></a> &raquo;</li>
      <li>Cephadm</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/cephadm/index.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
  </header>
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #eee" >
          

          
            <a href="../">
          

          
            
            <img src="../_static/logo.png" class="logo" alt="Logo"/>
          
          </a>

          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search/" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../start/">Ceph 简介</a></li>
<li class="toctree-l1"><a class="reference internal" href="../install/">安装 Ceph</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Cephadm</a><ul>
<li class="toctree-l2"><a class="reference internal" href="compatibility/">Compatibility and Stability</a></li>
<li class="toctree-l2"><a class="reference internal" href="install/">部署个全新的 Ceph 集群</a></li>
<li class="toctree-l2"><a class="reference internal" href="adoption/">现有集群切换到 cephadm</a></li>
<li class="toctree-l2"><a class="reference internal" href="host-management/">Host Management</a></li>
<li class="toctree-l2"><a class="reference internal" href="services/">Service Management</a></li>
<li class="toctree-l2"><a class="reference internal" href="upgrade/">升级 Ceph</a></li>
<li class="toctree-l2"><a class="reference internal" href="operations/">Cephadm operations</a></li>
<li class="toctree-l2"><a class="reference internal" href="client-setup/">Client Setup</a></li>
<li class="toctree-l2"><a class="reference internal" href="troubleshooting/">Troubleshooting</a></li>
<li class="toctree-l2"><a class="reference internal" href="../dev/cephadm/">Cephadm Feature Planning</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../rados/">Ceph 存储集群</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cephfs/">Ceph 文件系统</a></li>
<li class="toctree-l1"><a class="reference internal" href="../rbd/">Ceph 块设备</a></li>
<li class="toctree-l1"><a class="reference internal" href="../radosgw/">Ceph 对象网关</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mgr/">Ceph 管理器守护进程</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mgr/dashboard/">Ceph 仪表盘</a></li>
<li class="toctree-l1"><a class="reference internal" href="../monitoring/">监控概览</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/">API 文档</a></li>
<li class="toctree-l1"><a class="reference internal" href="../architecture/">体系结构</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dev/developer_guide/">开发者指南</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dev/internals/">Ceph 内幕</a></li>
<li class="toctree-l1"><a class="reference internal" href="../governance/">项目管理</a></li>
<li class="toctree-l1"><a class="reference internal" href="../foundation/">Ceph 基金会</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ceph-volume/">ceph-volume</a></li>
<li class="toctree-l1"><a class="reference internal" href="../releases/general/">Ceph 版本（总目录）</a></li>
<li class="toctree-l1"><a class="reference internal" href="../releases/">Ceph 版本（索引）</a></li>
<li class="toctree-l1"><a class="reference internal" href="../security/">Security</a></li>
<li class="toctree-l1"><a class="reference internal" href="../hardware-monitoring/">硬件监控</a></li>
<li class="toctree-l1"><a class="reference internal" href="../glossary/">Ceph 术语</a></li>
<li class="toctree-l1"><a class="reference internal" href="../jaegertracing/">Tracing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../translation_cn/">中文版翻译资源</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../">Ceph</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
<div id="dev-warning" class="admonition note">
  <p class="first admonition-title">Notice</p>
  <p class="last">This document is for a development version of Ceph.</p>
</div>
  <div id="docubetter" align="right" style="padding: 5px; font-weight: bold;">
    <a href="https://pad.ceph.com/p/Report_Documentation_Bugs">Report a Documentation Bug</a>
  </div>

  
  <section id="cephadm">
<span id="id1"></span><h1>Cephadm<a class="headerlink" href="#cephadm" title="Permalink to this heading"></a></h1>
<p><code class="docutils literal notranslate"><span class="pre">cephadm</span></code> is a utility that is used to manage a Ceph cluster.</p>
<p>Here is a list of some of the things that <code class="docutils literal notranslate"><span class="pre">cephadm</span></code> can do:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">cephadm</span></code> can add a Ceph container to the cluster.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cephadm</span></code> can remove a Ceph container from the cluster.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cephadm</span></code> can update Ceph containers.</p></li>
</ul>
<p><code class="docutils literal notranslate"><span class="pre">cephadm</span></code> does not rely on external configuration tools like Ansible, Rook,
or Salt. However, those external configuration tools can be used to automate
operations not performed by cephadm itself. To learn more about these external
configuration tools, visit their pages:</p>
<blockquote>
<div><ul class="simple">
<li><p><a class="reference external" href="https://github.com/ceph/cephadm-ansible">https://github.com/ceph/cephadm-ansible</a></p></li>
<li><p><a class="reference external" href="https://rook.io/docs/rook/v1.10/Getting-Started/intro/">https://rook.io/docs/rook/v1.10/Getting-Started/intro/</a></p></li>
<li><p><a class="reference external" href="https://github.com/ceph/ceph-salt">https://github.com/ceph/ceph-salt</a></p></li>
</ul>
</div></blockquote>
<p><code class="docutils literal notranslate"><span class="pre">cephadm</span></code> manages the full lifecycle of a Ceph cluster. This lifecycle starts
with the bootstrapping process, when <code class="docutils literal notranslate"><span class="pre">cephadm</span></code> creates a tiny Ceph cluster on
a single node. This cluster consists of one monitor and one manager.
<code class="docutils literal notranslate"><span class="pre">cephadm</span></code> then uses the orchestration interface to expand the cluster, adding
hosts and provisioning Ceph daemons and services. Management of this lifecycle
can be performed either via the Ceph command-line interface (CLI) or via the
dashboard (GUI).</p>
<p>To use <code class="docutils literal notranslate"><span class="pre">cephadm</span></code> to get started with Ceph, follow the instructions in
<a class="reference internal" href="install/#cephadm-deploying-new-cluster"><span class="std std-ref">部署个全新的 Ceph 集群</span></a>.</p>
<p><code class="docutils literal notranslate"><span class="pre">cephadm</span></code> was introduced in Ceph release v15.2.0 (Octopus) and does not
support older versions of Ceph.</p>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="compatibility/">Compatibility and Stability</a><ul>
<li class="toctree-l2"><a class="reference internal" href="compatibility/#compatibility-with-podman-versions">Compatibility with Podman Versions</a></li>
<li class="toctree-l2"><a class="reference internal" href="compatibility/#stability">Stability</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="install/">部署个全新的 Ceph 集群</a><ul>
<li class="toctree-l2"><a class="reference internal" href="install/#cephadm-host-requirements">准备事项</a></li>
<li class="toctree-l2"><a class="reference internal" href="install/#cephadm">安装 cephadm</a></li>
<li class="toctree-l2"><a class="reference internal" href="install/#bootstrap-a-new-cluster">Bootstrap a new cluster</a></li>
<li class="toctree-l2"><a class="reference internal" href="install/#enable-ceph-cli">Enable Ceph CLI</a></li>
<li class="toctree-l2"><a class="reference internal" href="install/#adding-hosts">Adding Hosts</a></li>
<li class="toctree-l2"><a class="reference internal" href="install/#adding-additional-mons">Adding additional MONs</a></li>
<li class="toctree-l2"><a class="reference internal" href="install/#adding-storage">Adding Storage</a></li>
<li class="toctree-l2"><a class="reference internal" href="install/#using-ceph">Using Ceph</a></li>
<li class="toctree-l2"><a class="reference internal" href="install/#different-deployment-scenarios">Different deployment scenarios</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="adoption/">现有集群切换到 cephadm</a><ul>
<li class="toctree-l2"><a class="reference internal" href="adoption/#id1">局限性</a></li>
<li class="toctree-l2"><a class="reference internal" href="adoption/#id2">准备工作</a></li>
<li class="toctree-l2"><a class="reference internal" href="adoption/#adoption-process">Adoption process</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="host-management/">Host Management</a><ul>
<li class="toctree-l2"><a class="reference internal" href="host-management/#listing-hosts">Listing Hosts</a></li>
<li class="toctree-l2"><a class="reference internal" href="host-management/#adding-hosts">Adding Hosts</a></li>
<li class="toctree-l2"><a class="reference internal" href="host-management/#removing-hosts">Removing Hosts</a></li>
<li class="toctree-l2"><a class="reference internal" href="host-management/#host-labels">Host labels</a></li>
<li class="toctree-l2"><a class="reference internal" href="host-management/#maintenance-mode">Maintenance Mode</a></li>
<li class="toctree-l2"><a class="reference internal" href="host-management/#rescanning-host-devices">Rescanning Host Devices</a></li>
<li class="toctree-l2"><a class="reference internal" href="host-management/#creating-many-hosts-at-once">Creating many hosts at once</a></li>
<li class="toctree-l2"><a class="reference internal" href="host-management/#setting-the-initial-crush-location-of-host">Setting the initial CRUSH location of host</a></li>
<li class="toctree-l2"><a class="reference internal" href="host-management/#removing-a-host-from-the-crush-map">Removing a host from the CRUSH map</a></li>
<li class="toctree-l2"><a class="reference internal" href="host-management/#os-tuning-profiles">OS Tuning Profiles</a></li>
<li class="toctree-l2"><a class="reference internal" href="host-management/#ssh-configuration">SSH Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="host-management/#fully-qualified-domain-names-vs-bare-host-names">Fully qualified domain names vs bare host names</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="services/">Service Management</a><ul>
<li class="toctree-l2"><a class="reference internal" href="services/mon/">MON Service</a></li>
<li class="toctree-l2"><a class="reference internal" href="services/mgr/">MGR Service</a></li>
<li class="toctree-l2"><a class="reference internal" href="services/osd/">OSD Service</a></li>
<li class="toctree-l2"><a class="reference internal" href="services/rgw/">RGW Service</a></li>
<li class="toctree-l2"><a class="reference internal" href="services/mds/">MDS Service</a></li>
<li class="toctree-l2"><a class="reference internal" href="services/nfs/">NFS Service</a></li>
<li class="toctree-l2"><a class="reference internal" href="services/iscsi/">iSCSI Service</a></li>
<li class="toctree-l2"><a class="reference internal" href="services/custom-container/">Custom Container Service</a></li>
<li class="toctree-l2"><a class="reference internal" href="services/monitoring/">Monitoring Services</a></li>
<li class="toctree-l2"><a class="reference internal" href="services/snmp-gateway/">SNMP Gateway Service</a></li>
<li class="toctree-l2"><a class="reference internal" href="services/tracing/">如何追踪各服务</a></li>
<li class="toctree-l2"><a class="reference internal" href="services/smb/">SMB Service</a></li>
<li class="toctree-l2"><a class="reference internal" href="services/mgmt-gateway/">Management Gateway</a></li>
<li class="toctree-l2"><a class="reference internal" href="services/oauth2-proxy/">OAuth2 Proxy</a></li>
<li class="toctree-l2"><a class="reference internal" href="services/#service-status">Service Status</a></li>
<li class="toctree-l2"><a class="reference internal" href="services/#daemon-status">Daemon Status</a></li>
<li class="toctree-l2"><a class="reference internal" href="services/#service-specification">Service Specification</a></li>
<li class="toctree-l2"><a class="reference internal" href="services/#daemon-placement">Daemon Placement</a></li>
<li class="toctree-l2"><a class="reference internal" href="services/#extra-container-arguments">Extra Container Arguments</a></li>
<li class="toctree-l2"><a class="reference internal" href="services/#extra-entrypoint-arguments">Extra Entrypoint Arguments</a></li>
<li class="toctree-l2"><a class="reference internal" href="services/#custom-config-files">Custom Config Files</a></li>
<li class="toctree-l2"><a class="reference internal" href="services/#removing-a-service">Removing a Service</a></li>
<li class="toctree-l2"><a class="reference internal" href="services/#disabling-automatic-deployment-of-daemons">Disabling automatic deployment of daemons</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="upgrade/">升级 Ceph</a><ul>
<li class="toctree-l2"><a class="reference internal" href="upgrade/#starting-the-upgrade">Starting the upgrade</a></li>
<li class="toctree-l2"><a class="reference internal" href="upgrade/#monitoring-the-upgrade">Monitoring the upgrade</a></li>
<li class="toctree-l2"><a class="reference internal" href="upgrade/#canceling-an-upgrade">Canceling an upgrade</a></li>
<li class="toctree-l2"><a class="reference internal" href="upgrade/#post-upgrade-actions">Post upgrade actions</a></li>
<li class="toctree-l2"><a class="reference internal" href="upgrade/#potential-problems">Potential problems</a></li>
<li class="toctree-l2"><a class="reference internal" href="upgrade/#using-customized-container-images">Using customized container images</a></li>
<li class="toctree-l2"><a class="reference internal" href="upgrade/#staggered-upgrade">Staggered Upgrade</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="operations/">Cephadm operations</a><ul>
<li class="toctree-l2"><a class="reference internal" href="operations/#watching-cephadm-log-messages">Watching cephadm log messages</a></li>
<li class="toctree-l2"><a class="reference internal" href="operations/#ceph-daemon-control">Ceph daemon control</a></li>
<li class="toctree-l2"><a class="reference internal" href="operations/#ceph-daemon-logs">Ceph daemon logs</a></li>
<li class="toctree-l2"><a class="reference internal" href="operations/#per-node-cephadm-logs">Per-node cephadm logs</a></li>
<li class="toctree-l2"><a class="reference internal" href="operations/#data-location">Data location</a></li>
<li class="toctree-l2"><a class="reference internal" href="operations/#health-checks">Health checks</a></li>
<li class="toctree-l2"><a class="reference internal" href="operations/#client-keyrings-and-configs">Client keyrings and configs</a></li>
<li class="toctree-l2"><a class="reference internal" href="operations/#etc-ceph-ceph-conf">/etc/ceph/ceph.conf</a></li>
<li class="toctree-l2"><a class="reference internal" href="operations/#limiting-password-less-sudo-access">Limiting Password-less sudo Access</a></li>
<li class="toctree-l2"><a class="reference internal" href="operations/#purging-a-cluster">Purging a cluster</a></li>
<li class="toctree-l2"><a class="reference internal" href="operations/#replacing-a-device">Replacing a device</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="client-setup/">Client Setup</a><ul>
<li class="toctree-l2"><a class="reference internal" href="client-setup/#config-file-setup">Config File Setup</a></li>
<li class="toctree-l2"><a class="reference internal" href="client-setup/#keyring-setup">Keyring Setup</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="troubleshooting/">Troubleshooting</a><ul>
<li class="toctree-l2"><a class="reference internal" href="troubleshooting/#pausing-or-disabling-cephadm">Pausing or Disabling cephadm</a></li>
<li class="toctree-l2"><a class="reference internal" href="troubleshooting/#per-service-and-per-daemon-events">Per-service and Per-daemon Events</a></li>
<li class="toctree-l2"><a class="reference internal" href="troubleshooting/#checking-cephadm-logs">Checking Cephadm Logs</a></li>
<li class="toctree-l2"><a class="reference internal" href="troubleshooting/#gathering-log-files">Gathering Log Files</a></li>
<li class="toctree-l2"><a class="reference internal" href="troubleshooting/#collecting-systemd-status">Collecting Systemd Status</a></li>
<li class="toctree-l2"><a class="reference internal" href="troubleshooting/#list-all-downloaded-container-images">List all Downloaded Container Images</a></li>
<li class="toctree-l2"><a class="reference internal" href="troubleshooting/#manually-running-containers">Manually Running Containers</a></li>
<li class="toctree-l2"><a class="reference internal" href="troubleshooting/#ssh-errors">SSH Errors</a></li>
<li class="toctree-l2"><a class="reference internal" href="troubleshooting/#failed-to-infer-cidr-network-error">Failed to Infer CIDR network error</a></li>
<li class="toctree-l2"><a class="reference internal" href="troubleshooting/#accessing-the-admin-socket">Accessing the Admin Socket</a></li>
<li class="toctree-l2"><a class="reference internal" href="troubleshooting/#running-various-ceph-tools">Running Various Ceph Tools</a></li>
<li class="toctree-l2"><a class="reference internal" href="troubleshooting/#restoring-the-monitor-quorum">Restoring the Monitor Quorum</a></li>
<li class="toctree-l2"><a class="reference internal" href="troubleshooting/#manually-deploying-a-manager-daemon">Manually Deploying a Manager Daemon</a></li>
<li class="toctree-l2"><a class="reference internal" href="troubleshooting/#capturing-core-dumps">Capturing Core Dumps</a></li>
<li class="toctree-l2"><a class="reference internal" href="troubleshooting/#running-the-debugger-with-cephadm">Running the Debugger with cephadm</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../dev/cephadm/">Cephadm Feature Planning</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../dev/cephadm/developing-cephadm/">Developing with cephadm</a></li>
<li class="toctree-l2"><a class="reference internal" href="../dev/cephadm/host-maintenance/">Host Maintenance</a></li>
<li class="toctree-l2"><a class="reference internal" href="../dev/cephadm/compliance-check/">Compliance Check</a></li>
<li class="toctree-l2"><a class="reference internal" href="../dev/cephadm/design/storage_devices_and_osds/">存储设备和 OSD 管理</a></li>
<li class="toctree-l2"><a class="reference internal" href="../dev/cephadm/scalability-notes/">Notes and Thoughts on Cephadm’s scalability</a></li>
</ul>
</li>
</ul>
</div>
</section>



<div id="support-the-ceph-foundation" class="admonition note">
  <p class="first admonition-title">Brought to you by the Ceph Foundation</p>
  <p class="last">The Ceph Documentation is a community resource funded and hosted by the non-profit <a href="https://ceph.io/en/foundation/">Ceph Foundation</a>. If you would like to support this and our other efforts, please consider <a href="https://ceph.io/en/foundation/join/">joining now</a>.</p>
</div>


           </div>
           
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../install/manual-freebsd-deployment/" class="btn btn-neutral float-left" title="在 FreeBSD 上手动部署" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="compatibility/" class="btn btn-neutral float-right" title="Compatibility and Stability" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2016, Ceph authors and contributors. Licensed under Creative Commons Attribution Share Alike 3.0 (CC-BY-SA-3.0).</p>
  </div>

   

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>