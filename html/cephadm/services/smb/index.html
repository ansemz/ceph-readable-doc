

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>SMB Service &mdash; Ceph Documentation</title>
  

  
  <link rel="stylesheet" href="../../../_static/ceph.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/ceph.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/graphviz.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/css/custom.css" type="text/css" />

  
  
    <link rel="shortcut icon" href="../../../_static/favicon.ico"/>
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../../" src="../../../_static/documentation_options.js"></script>
        <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
        <script src="../../../_static/jquery.js"></script>
        <script src="../../../_static/underscore.js"></script>
        <script src="../../../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../../../_static/doctools.js"></script>
    
    <script type="text/javascript" src="../../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../../genindex/" />
    <link rel="search" title="Search" href="../../../search/" />
    <link rel="next" title="Management Gateway" href="../mgmt-gateway/" />
    <link rel="prev" title="如何追踪各服务" href="../tracing/" /> 
</head>

<body class="wy-body-for-nav">

   
  <header class="top-bar">
    <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../" class="icon icon-home"></a> &raquo;</li>
          <li><a href="../../">Cephadm</a> &raquo;</li>
          <li><a href="../">Service Management</a> &raquo;</li>
      <li>SMB Service</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../../_sources/cephadm/services/smb.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
  </header>
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #eee" >
          

          
            <a href="../../../">
          

          
            
            <img src="../../../_static/logo.png" class="logo" alt="Logo"/>
          
          </a>

          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search/" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../start/">Ceph 简介</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../install/">安装 Ceph</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../">Cephadm</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../compatibility/">Compatibility and Stability</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../install/">部署个全新的 Ceph 集群</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../adoption/">现有集群切换到 cephadm</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../host-management/">Host Management</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../">Service Management</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../mon/">MON Service</a></li>
<li class="toctree-l3"><a class="reference internal" href="../mgr/">MGR Service</a></li>
<li class="toctree-l3"><a class="reference internal" href="../osd/">OSD Service</a></li>
<li class="toctree-l3"><a class="reference internal" href="../rgw/">RGW Service</a></li>
<li class="toctree-l3"><a class="reference internal" href="../mds/">MDS Service</a></li>
<li class="toctree-l3"><a class="reference internal" href="../nfs/">NFS Service</a></li>
<li class="toctree-l3"><a class="reference internal" href="../iscsi/">iSCSI Service</a></li>
<li class="toctree-l3"><a class="reference internal" href="../custom-container/">Custom Container Service</a></li>
<li class="toctree-l3"><a class="reference internal" href="../monitoring/">Monitoring Services</a></li>
<li class="toctree-l3"><a class="reference internal" href="../snmp-gateway/">SNMP Gateway Service</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tracing/">如何追踪各服务</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">SMB Service</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#deploying-samba-containers">Deploying Samba Containers</a></li>
<li class="toctree-l4"><a class="reference internal" href="#service-specification">Service Specification</a></li>
<li class="toctree-l4"><a class="reference internal" href="#limitations">Limitations</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../mgmt-gateway/">Management Gateway</a></li>
<li class="toctree-l3"><a class="reference internal" href="../oauth2-proxy/">OAuth2 Proxy</a></li>
<li class="toctree-l3"><a class="reference internal" href="../#service-status">Service Status</a></li>
<li class="toctree-l3"><a class="reference internal" href="../#daemon-status">Daemon Status</a></li>
<li class="toctree-l3"><a class="reference internal" href="../#service-specification">Service Specification</a></li>
<li class="toctree-l3"><a class="reference internal" href="../#daemon-placement">Daemon Placement</a></li>
<li class="toctree-l3"><a class="reference internal" href="../#removing-a-service">Removing a Service</a></li>
<li class="toctree-l3"><a class="reference internal" href="../#disabling-automatic-deployment-of-daemons">Disabling automatic deployment of daemons</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../upgrade/">Ceph 的升级</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../operations/">Cephadm operations</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../client-setup/">Client Setup</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../troubleshooting/">Troubleshooting</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../dev/cephadm/">Cephadm Feature Planning</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../rados/">Ceph 存储集群</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../cephfs/">Ceph 文件系统</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../rbd/">Ceph 块设备</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../radosgw/">Ceph 对象网关</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../mgr/">Ceph 管理器守护进程</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../mgr/dashboard/">Ceph 仪表盘</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../monitoring/">监控概览</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../api/">API 文档</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../architecture/">体系结构</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../dev/developer_guide/">开发者指南</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../dev/internals/">Ceph 内幕</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../governance/">项目管理</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../foundation/">Ceph 基金会</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../ceph-volume/">ceph-volume</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../releases/general/">Ceph 版本（总目录）</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../releases/">Ceph 版本（索引）</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../security/">Security</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../hardware-monitoring/">Hardware monitoring</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../glossary/">Ceph 术语</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../jaegertracing/">Tracing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../translation_cn/">中文版翻译资源</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../">Ceph</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
<div id="dev-warning" class="admonition note">
  <p class="first admonition-title">Notice</p>
  <p class="last">This document is for a development version of Ceph.</p>
</div>
  <div id="docubetter" align="right" style="padding: 5px; font-weight: bold;">
    <a href="https://pad.ceph.com/p/Report_Documentation_Bugs">Report a Documentation Bug</a>
  </div>

  
  <section id="smb-service">
<span id="deploy-cephadm-smb-samba"></span><h1>SMB Service<a class="headerlink" href="#smb-service" title="Permalink to this heading"></a></h1>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>SMB support is under active development and many features may be
missing or immature. A Ceph MGR module, named smb, is available to help
organize and manage SMB related featues. Unless the smb module
has been determined to be unsuitable for your needs we recommend using that
module over directly using the smb service spec.</p>
</div>
<section id="deploying-samba-containers">
<h2>Deploying Samba Containers<a class="headerlink" href="#deploying-samba-containers" title="Permalink to this heading"></a></h2>
<p>Cephadm deploys <a class="reference external" href="http://www.samba.org">Samba</a> servers using container images
built by the <a class="reference external" href="http://github.com/samba-in-kubernetes/samba-container">samba-container project</a>.</p>
<p>In order to host SMB Shares with access to CephFS file systems, deploy
Samba Containers with the following command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><style type="text/css">
span.prompt1:before {
  content: "# ";
}
</style><span class="prompt1">ceph<span class="w"> </span>orch<span class="w"> </span>apply<span class="w"> </span>smb<span class="w"> </span>&lt;cluster_id&gt;<span class="w"> </span>&lt;config_uri&gt;<span class="w"> </span><span class="o">[</span>--features<span class="w"> </span>...<span class="o">]</span><span class="w"> </span><span class="o">[</span>--placement<span class="w"> </span>...<span class="o">]</span><span class="w"> </span>...</span>
</pre></div></div><p>There are a number of additional parameters that the command accepts. See
the Service Specification for a description of these options.</p>
</section>
<section id="service-specification">
<h2>Service Specification<a class="headerlink" href="#service-specification" title="Permalink to this heading"></a></h2>
<p>An SMB Service can be applied using a specification. An example in YAML follows:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">service_type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">smb</span>
<span class="nt">service_id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">tango</span>
<span class="nt">placement</span><span class="p">:</span>
<span class="w">  </span><span class="nt">hosts</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ceph0</span>
<span class="nt">spec</span><span class="p">:</span>
<span class="w">  </span><span class="nt">cluster_id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">tango</span>
<span class="w">  </span><span class="nt">features</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">domain</span>
<span class="w">  </span><span class="nt">config_uri</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">rados://.smb/tango/scc.toml</span>
<span class="w">  </span><span class="nt">custom_dns</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;192.168.76.204&quot;</span>
<span class="w">  </span><span class="nt">join_sources</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;rados:mon-config-key:smb/config/tango/join1.json&quot;</span>
<span class="w">  </span><span class="nt">include_ceph_users</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">client.smb.fs.cluster.tango</span>
</pre></div>
</div>
<p>The specification can then be applied by running the following command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span class="prompt1">ceph<span class="w"> </span>orch<span class="w"> </span>apply<span class="w"> </span>-i<span class="w"> </span>smb.yaml</span>
</pre></div></div><section id="service-spec-options">
<h3>Service Spec Options<a class="headerlink" href="#service-spec-options" title="Permalink to this heading"></a></h3>
<p>Fields specific to the <code class="docutils literal notranslate"><span class="pre">spec</span></code> section of the SMB Service are described below.</p>
<dl>
<dt>cluster_id</dt><dd><p>A short name identifying the SMB “cluster”. In this case a cluster is
simply a management unit of one or more Samba services sharing a common
configuration, and may not provide actual clustering or availability
mechanisms.</p>
</dd>
<dt>features</dt><dd><p>A list of pre-defined terms enabling specific deployment characteristics.
An empty list is valid. Supported terms:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">domain</span></code>: Enable domain member mode</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">clustered</span></code>: Enable Samba native cluster mode</p></li>
</ul>
</dd>
<dt>config_uri</dt><dd><p>A string containing a (standard or de-facto) URI that identifies a
configuration source that should be loaded by the samba-container as the
primary configuration file.
Supported URI schemes include <code class="docutils literal notranslate"><span class="pre">http:</span></code>, <code class="docutils literal notranslate"><span class="pre">https:</span></code>, <code class="docutils literal notranslate"><span class="pre">rados:</span></code>, and
<code class="docutils literal notranslate"><span class="pre">rados:mon-config-key:</span></code>.</p>
</dd>
<dt>user_sources</dt><dd><p>A list of strings with (standard or de-facto) URI values that will
be used to identify where credentials for authentication are located.
See <code class="docutils literal notranslate"><span class="pre">config_uri</span></code> for the supported list of URI schemes.</p>
</dd>
<dt>join_sources</dt><dd><p>A list of strings with (standard or de-facto) URI values that will
be used to identify where authentication data that will be used to
perform domain joins are located. Each join source is tried in sequence
until one succeeds.
See <code class="docutils literal notranslate"><span class="pre">config_uri</span></code> for the supported list of URI schemes.</p>
</dd>
<dt>custom_dns</dt><dd><p>A list of IP addresses that will be used as the DNS servers for a Samba
container. This features allows Samba Containers to integrate with
Active Directory even if the Ceph host nodes are not tied into the Active
Directory DNS domain(s).</p>
</dd>
<dt>include_ceph_users</dt><dd><p>A list of cephx user (aka entity) names that the Samba Containers may use.
The cephx keys for each user in the list will automatically be added to
the keyring in the container.</p>
</dd>
<dt>cluster_meta_uri</dt><dd><p>A string containing a URI that identifies where the cluster structure
metadata will be stored. Required if <code class="docutils literal notranslate"><span class="pre">clustered</span></code> feature is set. Must be
a RADOS pseudo-URI.</p>
</dd>
<dt>cluster_lock_uri</dt><dd><p>A string containing a URI that identifies where Samba/CTDB will store a
cluster lock. Required if <code class="docutils literal notranslate"><span class="pre">clustered</span></code> feature is set. Must be a RADOS
pseudo-URI.</p>
</dd>
<dt>cluster_public_addrs</dt><dd><p>List of objects; optional. Supported only when using Samba’s clustering.
Assign “virtual” IP addresses that will be managed by the clustering
subsystem and may automatically move between nodes running Samba
containers.
Fields:</p>
<dl class="simple">
<dt>address</dt><dd><p>Required string. An IP address with a required prefix length (example:
<code class="docutils literal notranslate"><span class="pre">192.168.4.51/24</span></code>). This address will be assigned to one of the
host’s network devices and managed automatically.</p>
</dd>
<dt>destination</dt><dd><p>Optional. String or list of strings. A <code class="docutils literal notranslate"><span class="pre">destination</span></code> defines where
the system will assign the managed IPs. Each string value must be a
network address (example <code class="docutils literal notranslate"><span class="pre">192.168.4.0/24</span></code>). One or more destinations
may be supplied. The typical case is to use exactly one destination and
so the value may be supplied as a string, rather than a list with a
single item. Each destination network will be mapped to a device on a
host. Run <code class="docutils literal notranslate"><span class="pre">cephadm</span> <span class="pre">list-networks</span></code> for an example of these mappings.
If destination is not supplied the network is automatically determined
using the address value supplied and taken as the destination.</p>
</dd>
</dl>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If one desires clustering between smbd instances (also known as
High-Availability or “transparent state migration”) the feature flag
<code class="docutils literal notranslate"><span class="pre">clustered</span></code> is needed. If this flag is not specified cephadm may deploy
multiple smb servers but they will lack the coordination needed of an actual
Highly-Avaiable cluster. When the <code class="docutils literal notranslate"><span class="pre">clustered</span></code> flag is specified cephadm
will deploy additional containers that manage this coordination.
Additionally, the cluster_meta_uri and cluster_lock_uri values must be
specified. The former is used by cephadm to describe the smb cluster layout
to the samba containers. The latter is used by Samba’s CTDB component to
manage an internal cluster lock.</p>
</div>
</section>
<section id="configuring-an-smb-service">
<h3>Configuring an SMB Service<a class="headerlink" href="#configuring-an-smb-service" title="Permalink to this heading"></a></h3>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>A Manager module for SMB is under active development. Once that module
is available it will be the preferred method for managing Samba on Ceph
in an end-to-end manner. The following discussion is provided for the sake
of completeness and to explain how the software layers interact.</p>
</div>
<p>Creating an SMB Service spec is not sufficient for complete operation of a
Samba Container on Ceph. It is important to create valid configurations and
place them in locations that the container can read. The complete specification
of these configurations is out of scope for this document. You can refer to the
<a class="reference external" href="https://wiki.samba.org/index.php/Main_Page">documentation for Samba</a> as
well as the <a class="reference external" href="https://github.com/samba-in-kubernetes/samba-container/blob/master/docs/server.md">samba server container</a>
and the <a class="reference external" href="https://github.com/samba-in-kubernetes/sambacc/blob/master/docs/configuration.md">configuation file</a>
it accepts.</p>
<p>When one has composed a configuration it should be stored in a location
that the Samba Container can access. The recommended approach for running
Samba Containers within Ceph orchestration is to store the configuration
in the Ceph cluster. There are a few ways to store the configuration
in ceph:</p>
<section id="rados">
<h4>RADOS<a class="headerlink" href="#rados" title="Permalink to this heading"></a></h4>
<p>A configuration file can be stored as a RADOS object in a pool
named <code class="docutils literal notranslate"><span class="pre">.smb</span></code>. Within the pool there should be a namespace named after the
<code class="docutils literal notranslate"><span class="pre">cluster_id</span></code> value. The URI used to identify this resource should be
constructed like <code class="docutils literal notranslate"><span class="pre">rados://.smb/&lt;cluster_id&gt;/&lt;object_name&gt;</span></code>. Example:
<code class="docutils literal notranslate"><span class="pre">rados://.smb/tango/config.json</span></code>.</p>
<p>The containers are automatically deployed with cephx keys allowing access to
resources in these pools and namespaces. As long as this scheme is used
no additional configuration to read the object is needed.</p>
<p>To copy a configuration file to a RADOS pool, use the <code class="docutils literal notranslate"><span class="pre">rados</span></code> command line
tool. For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span class="prompt1"><span class="c1"># assuming your config file is /tmp/config.json</span></span>
<span class="prompt1">rados<span class="w"> </span>--pool<span class="o">=</span>.smb<span class="w"> </span>--namespace<span class="o">=</span>tango<span class="w"> </span>put<span class="w"> </span>config.json<span class="w"> </span>/tmp/config.json</span>
</pre></div></div></section>
<section id="mon-key-value-store">
<h4>MON Key/Value Store<a class="headerlink" href="#mon-key-value-store" title="Permalink to this heading"></a></h4>
<p>A configuration file can be stored as a value in the Ceph Monitor Key/Value
store.  The key must be named after the cluster like so:
<code class="docutils literal notranslate"><span class="pre">smb/config/&lt;cluster_id&gt;/&lt;name&gt;</span></code>.  This results in a URI that can be used to
identify this configuration constructed like
<code class="docutils literal notranslate"><span class="pre">rados:mon-config-key:smb/config/&lt;cluster_id&gt;/&lt;name&gt;</span></code>.
Example: <code class="docutils literal notranslate"><span class="pre">rados:mon-config-key:smb/config/tango/config.json</span></code>.</p>
<p>The containers are automatically deployed with cephx keys allowing access to
resources with the key-prefix <code class="docutils literal notranslate"><span class="pre">smb/config/&lt;cluster_id&gt;/</span></code>. As long as this
scheme is used no additional configuration to read the value is needed.</p>
<p>To copy a configuration file into the Key/Value store use the <code class="docutils literal notranslate"><span class="pre">ceph</span> <span class="pre">config-key</span>
<span class="pre">put</span> <span class="pre">...</span></code> tool. For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span class="prompt1"><span class="c1"># assuming your config file is /tmp/config.json</span></span>
<span class="prompt1">ceph<span class="w"> </span>config-key<span class="w"> </span><span class="nb">set</span><span class="w"> </span>smb/config/tango/config.json<span class="w"> </span>-i<span class="w"> </span>/tmp/config.json</span>
</pre></div></div></section>
<section id="http-https">
<h4>HTTP/HTTPS<a class="headerlink" href="#http-https" title="Permalink to this heading"></a></h4>
<p>A configuration file can be stored on an HTTP(S) server and automatically read
by the Samba Container. Managing a configuration file on HTTP(S) is left as an
exercise for the reader.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>All URI schemes are supported by parameters that accept URIs. Each
scheme has different performance and security characteristics.</p>
</div>
</section>
</section>
</section>
<section id="limitations">
<h2>Limitations<a class="headerlink" href="#limitations" title="Permalink to this heading"></a></h2>
<p>A non-exhaustive list of important limitations for the SMB service follows:</p>
<ul class="simple">
<li><p>DNS is a critical component of Active Directory. If one is configuring the
SMB service for domain membership, either the Ceph host node must be
configured so that it can resolve the Active Directory (AD) domain or the
<code class="docutils literal notranslate"><span class="pre">custom_dns</span></code> option may be used. In both cases DNS hosts for the AD domain
must still be reachable from whatever network segment the ceph cluster is on.</p></li>
<li><p>Services must bind to TCP port 445. Running multiple SMB services on the same
node is not yet supported and will trigger a port-in-use conflict.</p></li>
</ul>
</section>
</section>



<div id="support-the-ceph-foundation" class="admonition note">
  <p class="first admonition-title">Brought to you by the Ceph Foundation</p>
  <p class="last">The Ceph Documentation is a community resource funded and hosted by the non-profit <a href="https://ceph.io/en/foundation/">Ceph Foundation</a>. If you would like to support this and our other efforts, please consider <a href="https://ceph.io/en/foundation/join/">joining now</a>.</p>
</div>


           </div>
           
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../tracing/" class="btn btn-neutral float-left" title="如何追踪各服务" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../mgmt-gateway/" class="btn btn-neutral float-right" title="Management Gateway" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2016, Ceph authors and contributors. Licensed under Creative Commons Attribution Share Alike 3.0 (CC-BY-SA-3.0).</p>
  </div>

   

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>