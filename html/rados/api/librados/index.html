
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>Librados (C) &#8212; Ceph Documentation</title>
    <link rel="stylesheet" href="../../../_static/nature.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/graphviz.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/css/custom.css" />
    <script id="documentation_options" data-url_root="../../../" src="../../../_static/documentation_options.js"></script>
    <script src="../../../_static/jquery.js"></script>
    <script src="../../../_static/underscore.js"></script>
    <script src="../../../_static/doctools.js"></script>
    <script src="../../../_static/language_data.js"></script>
    <script src="../../../_static/js/ceph.js"></script>
    <link rel="shortcut icon" href="../../../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../../../genindex/" />
    <link rel="search" title="Search" href="../../../search/" />
    <link rel="next" title="LibradosPP (C++)" href="../libradospp/" />
    <link rel="prev" title="librados 简介" href="../librados-intro/" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../genindex/" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../../py-modindex/" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="../libradospp/" title="LibradosPP (C++)"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="../librados-intro/" title="librados 简介"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../../">Ceph Documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../../" >Ceph 存储集群</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="../" accesskey="U">Ceph 存储集群 API</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            

<div id="dev-warning" class="admonition note" style="display:none;">
  <p class="first admonition-title">Notice</p>
  <p class="last">This document is for a development version of Ceph.</p>
</div>

<div id="eol-warning" class="admonition warning" style="display:none;">
  <p class="first admonition-title">Warning</p>
  <p class="last">This document is for an unsupported version of Ceph.</p>
</div>
  <div id="docubetter" align="right" style="display:none; padding: 15px; font-weight: bold;">
    <a id="edit-on-github" href="https://github.com/ceph/ceph/edit/master/doc/rados/api/librados.rst" rel="nofollow">Edit on GitHub</a> | <a href="https://pad.ceph.com/p/Report_Documentation_Bugs">Report a Documentation Bug</a>
  </div>

  
  <div class="section" id="librados-c">
<h1>Librados (C)<a class="headerlink" href="#librados-c" title="Permalink to this headline">¶</a></h1>
<p><cite>librados</cite> 提供了 RADOS 服务的底层访问功能， RADOS 概览参见<a class="reference internal" href="../../../architecture/"><span class="doc">体系结构</span></a>。</p>
<div class="section" id="id1">
<h2>实例：连接并写入一个对象<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h2>
<p>要使用 <cite>Librados</cite> ，先实例化一个 <a class="reference internal" href="#c.rados_t" title="rados_t"><code class="xref c c-type docutils literal notranslate"><span class="pre">rados_t</span></code></a> 变量（集群句柄）、再用指向它的指针调用 c:func:<cite>rados_create()</cite> ：</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">int</span> <span class="n">err</span><span class="p">;</span>
<span class="n">rados_t</span> <span class="n">cluster</span><span class="p">;</span>

<span class="n">err</span> <span class="o">=</span> <span class="n">rados_create</span><span class="p">(</span><span class="o">&amp;</span><span class="n">cluster</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
<span class="k">if</span> <span class="p">(</span><span class="n">err</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">fprintf</span><span class="p">(</span><span class="n">stderr</span><span class="p">,</span> <span class="s">&quot;%s: cannot create a cluster handle: %s</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">argv</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">strerror</span><span class="p">(</span><span class="o">-</span><span class="n">err</span><span class="p">));</span>
        <span class="n">exit</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<p>然后配置 <a class="reference internal" href="#c.rados_t" title="rados_t"><code class="xref c c-type docutils literal notranslate"><span class="pre">rados_t</span></code></a> 以连接集群，可以挨个配置（ <a class="reference internal" href="#c.rados_conf_set" title="rados_conf_set"><code class="xref c c-func docutils literal notranslate"><span class="pre">rados_conf_set()</span></code></a> ）、或用配置文件（ <a class="reference internal" href="#c.rados_conf_read_file" title="rados_conf_read_file"><code class="xref c c-func docutils literal notranslate"><span class="pre">rados_conf_read_file()</span></code></a> ）、或命令行选项（ <a class="reference internal" href="#c.rados_conf_parse_argv" title="rados_conf_parse_argv"><code class="xref c c-func docutils literal notranslate"><span class="pre">rados_conf_parse_argv()</span></code></a> ）、或环境变量（ <a class="reference internal" href="#c.rados_conf_parse_env" title="rados_conf_parse_env"><code class="xref c c-func docutils literal notranslate"><span class="pre">rados_conf_parse_env()</span></code></a> ）：</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">err</span> <span class="o">=</span> <span class="n">rados_conf_read_file</span><span class="p">(</span><span class="n">cluster</span><span class="p">,</span> <span class="s">&quot;/path/to/myceph.conf&quot;</span><span class="p">);</span>
<span class="k">if</span> <span class="p">(</span><span class="n">err</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">fprintf</span><span class="p">(</span><span class="n">stderr</span><span class="p">,</span> <span class="s">&quot;%s: cannot read config file: %s</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">argv</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">strerror</span><span class="p">(</span><span class="o">-</span><span class="n">err</span><span class="p">));</span>
        <span class="n">exit</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<p>集群句柄配置好后，就可以用 <a class="reference internal" href="#c.rados_connect" title="rados_connect"><code class="xref c c-func docutils literal notranslate"><span class="pre">rados_connect()</span></code></a> 连接了：</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">err</span> <span class="o">=</span> <span class="n">rados_connect</span><span class="p">(</span><span class="n">cluster</span><span class="p">);</span>
<span class="k">if</span> <span class="p">(</span><span class="n">err</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">fprintf</span><span class="p">(</span><span class="n">stderr</span><span class="p">,</span> <span class="s">&quot;%s: cannot connect to cluster: %s</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">argv</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">strerror</span><span class="p">(</span><span class="o">-</span><span class="n">err</span><span class="p">));</span>
        <span class="n">exit</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<p>然后打开一个“ IO 上下文”，用 <a class="reference internal" href="#c.rados_ioctx_create" title="rados_ioctx_create"><code class="xref c c-func docutils literal notranslate"><span class="pre">rados_ioctx_create()</span></code></a> 打开<a class="reference internal" href="#c.rados_ioctx_t" title="rados_ioctx_t"><code class="xref c c-type docutils literal notranslate"><span class="pre">rados_ioctx_t</span></code></a> ：</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">rados_ioctx_t</span> <span class="n">io</span><span class="p">;</span>
<span class="kt">char</span> <span class="o">*</span><span class="n">poolname</span> <span class="o">=</span> <span class="s">&quot;mypool&quot;</span><span class="p">;</span>

<span class="n">err</span> <span class="o">=</span> <span class="n">rados_ioctx_create</span><span class="p">(</span><span class="n">cluster</span><span class="p">,</span> <span class="n">poolname</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">io</span><span class="p">);</span>
<span class="k">if</span> <span class="p">(</span><span class="n">err</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">fprintf</span><span class="p">(</span><span class="n">stderr</span><span class="p">,</span> <span class="s">&quot;%s: cannot open rados pool %s: %s</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">argv</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">poolname</span><span class="p">,</span> <span class="n">strerror</span><span class="p">(</span><span class="o">-</span><span class="n">err</span><span class="p">));</span>
        <span class="n">rados_shutdown</span><span class="p">(</span><span class="n">cluster</span><span class="p">);</span>
        <span class="n">exit</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<p>注意，你访问的存储池必须存在。</p>
<p>这时你能用 RADOS 数据修改函数了，例如用 <a class="reference internal" href="#c.rados_write_full" title="rados_write_full"><code class="xref c c-func docutils literal notranslate"><span class="pre">rados_write_full()</span></code></a> 写入名为 <code class="docutils literal notranslate"><span class="pre">greeting</span></code> 的对象：</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">err</span> <span class="o">=</span> <span class="n">rados_write_full</span><span class="p">(</span><span class="n">io</span><span class="p">,</span> <span class="s">&quot;greeting&quot;</span><span class="p">,</span> <span class="s">&quot;hello&quot;</span><span class="p">,</span> <span class="mi">5</span><span class="p">);</span>
<span class="k">if</span> <span class="p">(</span><span class="n">err</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">fprintf</span><span class="p">(</span><span class="n">stderr</span><span class="p">,</span> <span class="s">&quot;%s: cannot write pool %s: %s</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">argv</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">poolname</span><span class="p">,</span> <span class="n">strerror</span><span class="p">(</span><span class="o">-</span><span class="n">err</span><span class="p">));</span>
        <span class="n">rados_ioctx_destroy</span><span class="p">(</span><span class="n">io</span><span class="p">);</span>
        <span class="n">rados_shutdown</span><span class="p">(</span><span class="n">cluster</span><span class="p">);</span>
        <span class="n">exit</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<p>最后，用 <a class="reference internal" href="#c.rados_ioctx_destroy" title="rados_ioctx_destroy"><code class="xref c c-func docutils literal notranslate"><span class="pre">rados_ioctx_destroy()</span></code></a> 和 <a class="reference internal" href="#c.rados_shutdown" title="rados_shutdown"><code class="xref c c-func docutils literal notranslate"><span class="pre">rados_shutdown()</span></code></a> 分别关闭 IO 上下文、到 RADOS 的连接：</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">rados_ioctx_destroy</span><span class="p">(</span><span class="n">io</span><span class="p">);</span>
<span class="n">rados_shutdown</span><span class="p">(</span><span class="n">cluster</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="io">
<span id="asychronous-io"></span><h2>异步 IO<a class="headerlink" href="#io" title="Permalink to this headline">¶</a></h2>
<p>处理大量 IO 时，通常不必等一个完成再开始下一个。 <cite>Librados</cite> 提供了几种操作的异步版本：</p>
<ul class="simple">
<li><p><a class="reference internal" href="#c.rados_aio_write" title="rados_aio_write"><code class="xref c c-func docutils literal notranslate"><span class="pre">rados_aio_write()</span></code></a></p></li>
<li><p><a class="reference internal" href="#c.rados_aio_append" title="rados_aio_append"><code class="xref c c-func docutils literal notranslate"><span class="pre">rados_aio_append()</span></code></a></p></li>
<li><p><a class="reference internal" href="#c.rados_aio_write_full" title="rados_aio_write_full"><code class="xref c c-func docutils literal notranslate"><span class="pre">rados_aio_write_full()</span></code></a></p></li>
<li><p><a class="reference internal" href="#c.rados_aio_read" title="rados_aio_read"><code class="xref c c-func docutils literal notranslate"><span class="pre">rados_aio_read()</span></code></a></p></li>
</ul>
<p>对每种操作，都必须先创建一个 <a class="reference internal" href="#c.rados_completion_t" title="rados_completion_t"><code class="xref c c-type docutils literal notranslate"><span class="pre">rados_completion_t</span></code></a> 数据结构来表达做什么、何时安全或显式地调用 <a class="reference internal" href="#c.rados_aio_create_completion" title="rados_aio_create_completion"><code class="xref c c-func docutils literal notranslate"><span class="pre">rados_aio_create_completion()</span></code></a> 来结束，如果没什么特殊需求，可以仅传递 NULL ：</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">rados_completion_t</span> <span class="n">comp</span><span class="p">;</span>
<span class="n">err</span> <span class="o">=</span> <span class="n">rados_aio_create_completion</span><span class="p">(</span><span class="nb">NULL</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">comp</span><span class="p">);</span>
<span class="k">if</span> <span class="p">(</span><span class="n">err</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">fprintf</span><span class="p">(</span><span class="n">stderr</span><span class="p">,</span> <span class="s">&quot;%s: could not create aio completion: %s</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">argv</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">strerror</span><span class="p">(</span><span class="o">-</span><span class="n">err</span><span class="p">));</span>
        <span class="n">rados_ioctx_destroy</span><span class="p">(</span><span class="n">io</span><span class="p">);</span>
        <span class="n">rados_shutdown</span><span class="p">(</span><span class="n">cluster</span><span class="p">);</span>
        <span class="n">exit</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<p>现在你可以调用任意一种异步 IO 操作了，然后等它出现在内存、所有复制所在的硬盘里：</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">err</span> <span class="o">=</span> <span class="n">rados_aio_write</span><span class="p">(</span><span class="n">io</span><span class="p">,</span> <span class="s">&quot;foo&quot;</span><span class="p">,</span> <span class="n">comp</span><span class="p">,</span> <span class="s">&quot;bar&quot;</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
<span class="k">if</span> <span class="p">(</span><span class="n">err</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">fprintf</span><span class="p">(</span><span class="n">stderr</span><span class="p">,</span> <span class="s">&quot;%s: could not schedule aio write: %s</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">argv</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">strerror</span><span class="p">(</span><span class="o">-</span><span class="n">err</span><span class="p">));</span>
        <span class="n">rados_aio_release</span><span class="p">(</span><span class="n">comp</span><span class="p">);</span>
        <span class="n">rados_ioctx_destroy</span><span class="p">(</span><span class="n">io</span><span class="p">);</span>
        <span class="n">rados_shutdown</span><span class="p">(</span><span class="n">cluster</span><span class="p">);</span>
        <span class="n">exit</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
<span class="p">}</span>
<span class="n">rados_aio_wait_for_complete</span><span class="p">(</span><span class="n">comp</span><span class="p">);</span> <span class="c1">// in memory</span>
<span class="n">rados_aio_wait_for_safe</span><span class="p">(</span><span class="n">comp</span><span class="p">);</span> <span class="c1">// on disk</span>
</pre></div>
</div>
<p>最后，用 <a class="reference internal" href="#c.rados_aio_release" title="rados_aio_release"><code class="xref c c-func docutils literal notranslate"><span class="pre">rados_aio_release()</span></code></a> 释放内存：</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">rados_aio_release</span><span class="p">(</span><span class="n">comp</span><span class="p">);</span>
</pre></div>
</div>
<p>你可以用各种回叫函数告知应用程序何时可以持续写入、或何时读缓冲是满的。例如，如果你追加几个对象时想衡量每个操作的延时，可以调度几个写操作、并把确认和提交时间保存到相应回叫函数，然后用 <a class="reference internal" href="#c.rados_aio_flush" title="rados_aio_flush"><code class="xref c c-func docutils literal notranslate"><span class="pre">rados_aio_flush()</span></code></a> 等它们完成，然后就可以分析延时了：</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="k">typedef</span> <span class="k">struct</span> <span class="p">{</span>
        <span class="k">struct</span> <span class="n">timeval</span> <span class="n">start</span><span class="p">;</span>
        <span class="k">struct</span> <span class="n">timeval</span> <span class="n">ack_end</span><span class="p">;</span>
        <span class="k">struct</span> <span class="n">timeval</span> <span class="n">commit_end</span><span class="p">;</span>
<span class="p">}</span> <span class="n">req_duration</span><span class="p">;</span>

<span class="kt">void</span> <span class="nf">ack_callback</span><span class="p">(</span><span class="n">rados_completion_t</span> <span class="n">comp</span><span class="p">,</span> <span class="kt">void</span> <span class="o">*</span><span class="n">arg</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">req_duration</span> <span class="o">*</span><span class="n">dur</span> <span class="o">=</span> <span class="p">(</span><span class="n">req_duration</span> <span class="o">*</span><span class="p">)</span> <span class="n">arg</span><span class="p">;</span>
        <span class="n">gettimeofday</span><span class="p">(</span><span class="o">&amp;</span><span class="n">dur</span><span class="o">-&gt;</span><span class="n">ack_end</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">commit_callback</span><span class="p">(</span><span class="n">rados_completion_t</span> <span class="n">comp</span><span class="p">,</span> <span class="kt">void</span> <span class="o">*</span><span class="n">arg</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">req_duration</span> <span class="o">*</span><span class="n">dur</span> <span class="o">=</span> <span class="p">(</span><span class="n">req_duration</span> <span class="o">*</span><span class="p">)</span> <span class="n">arg</span><span class="p">;</span>
        <span class="n">gettimeofday</span><span class="p">(</span><span class="o">&amp;</span><span class="n">dur</span><span class="o">-&gt;</span><span class="n">commit_end</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
<span class="p">}</span>

<span class="kt">int</span> <span class="nf">output_append_latency</span><span class="p">(</span><span class="n">rados_ioctx_t</span> <span class="n">io</span><span class="p">,</span> <span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">data</span><span class="p">,</span> <span class="kt">size_t</span> <span class="n">len</span><span class="p">,</span> <span class="kt">size_t</span> <span class="n">num_writes</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">req_duration</span> <span class="n">times</span><span class="p">[</span><span class="n">num_writes</span><span class="p">];</span>
        <span class="n">rados_completion_t</span> <span class="n">comps</span><span class="p">[</span><span class="n">num_writes</span><span class="p">];</span>
        <span class="k">for</span> <span class="p">(</span><span class="kt">size_t</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">num_writes</span><span class="p">;</span> <span class="o">++</span><span class="n">i</span><span class="p">)</span> <span class="p">{</span>
                <span class="n">gettimeofday</span><span class="p">(</span><span class="o">&amp;</span><span class="n">times</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">start</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
                <span class="kt">int</span> <span class="n">err</span> <span class="o">=</span> <span class="n">rados_aio_create_completion</span><span class="p">((</span><span class="kt">void</span><span class="o">*</span><span class="p">)</span> <span class="o">&amp;</span><span class="n">times</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">ack_callback</span><span class="p">,</span> <span class="n">commit_callback</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">comps</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span>
                <span class="k">if</span> <span class="p">(</span><span class="n">err</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
                        <span class="n">fprintf</span><span class="p">(</span><span class="n">stderr</span><span class="p">,</span> <span class="s">&quot;Error creating rados completion: %s</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">strerror</span><span class="p">(</span><span class="o">-</span><span class="n">err</span><span class="p">));</span>
                        <span class="k">return</span> <span class="n">err</span><span class="p">;</span>
                <span class="p">}</span>
                <span class="kt">char</span> <span class="n">obj_name</span><span class="p">[</span><span class="mi">100</span><span class="p">];</span>
                <span class="n">snprintf</span><span class="p">(</span><span class="n">obj_name</span><span class="p">,</span> <span class="k">sizeof</span><span class="p">(</span><span class="n">obj_name</span><span class="p">),</span> <span class="s">&quot;foo%ld&quot;</span><span class="p">,</span> <span class="p">(</span><span class="kt">unsigned</span> <span class="kt">long</span><span class="p">)</span><span class="n">i</span><span class="p">);</span>
                <span class="n">err</span> <span class="o">=</span> <span class="n">rados_aio_append</span><span class="p">(</span><span class="n">io</span><span class="p">,</span> <span class="n">obj_name</span><span class="p">,</span> <span class="n">comps</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">data</span><span class="p">,</span> <span class="n">len</span><span class="p">);</span>
                <span class="k">if</span> <span class="p">(</span><span class="n">err</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
                        <span class="n">fprintf</span><span class="p">(</span><span class="n">stderr</span><span class="p">,</span> <span class="s">&quot;Error from rados_aio_append: %s&quot;</span><span class="p">,</span> <span class="n">strerror</span><span class="p">(</span><span class="o">-</span><span class="n">err</span><span class="p">));</span>
                        <span class="k">return</span> <span class="n">err</span><span class="p">;</span>
                <span class="p">}</span>
        <span class="p">}</span>
        <span class="c1">// wait until all requests finish *and* the callbacks complete</span>
        <span class="n">rados_aio_flush</span><span class="p">(</span><span class="n">io</span><span class="p">);</span>
        <span class="c1">// the latencies can now be analyzed</span>
        <span class="n">printf</span><span class="p">(</span><span class="s">&quot;Request # | Ack latency (s) | Commit latency (s)</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
        <span class="k">for</span> <span class="p">(</span><span class="kt">size_t</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">num_writes</span><span class="p">;</span> <span class="o">++</span><span class="n">i</span><span class="p">)</span> <span class="p">{</span>
                <span class="c1">// don&#39;t forget to free the completions</span>
                <span class="n">rados_aio_release</span><span class="p">(</span><span class="n">comps</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span>
                <span class="k">struct</span> <span class="n">timeval</span> <span class="n">ack_lat</span><span class="p">,</span> <span class="n">commit_lat</span><span class="p">;</span>
                <span class="n">timersub</span><span class="p">(</span><span class="o">&amp;</span><span class="n">times</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">ack_end</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">times</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">start</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">ack_lat</span><span class="p">);</span>
                <span class="n">timersub</span><span class="p">(</span><span class="o">&amp;</span><span class="n">times</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">commit_end</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">times</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">start</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">commit_lat</span><span class="p">);</span>
                <span class="n">printf</span><span class="p">(</span><span class="s">&quot;%9ld | %8ld.%06ld | %10ld.%06ld</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="p">(</span><span class="kt">unsigned</span> <span class="kt">long</span><span class="p">)</span> <span class="n">i</span><span class="p">,</span> <span class="n">ack_lat</span><span class="p">.</span><span class="n">tv_sec</span><span class="p">,</span> <span class="n">ack_lat</span><span class="p">.</span><span class="n">tv_usec</span><span class="p">,</span> <span class="n">commit_lat</span><span class="p">.</span><span class="n">tv_sec</span><span class="p">,</span> <span class="n">commit_lat</span><span class="p">.</span><span class="n">tv_usec</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>注意，所有 <a class="reference internal" href="#c.rados_completion_t" title="rados_completion_t"><code class="xref c c-type docutils literal notranslate"><span class="pre">rados_completion_t</span></code></a> 都必须用 <a class="reference internal" href="#c.rados_aio_release" title="rados_aio_release"><code class="xref c c-func docutils literal notranslate"><span class="pre">rados_aio_release()</span></code></a> 释放内存，以免造成内存泄漏。</p>
</div>
<div class="section" id="api-calls">
<h2>API calls<a class="headerlink" href="#api-calls" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric">Defines</p>
<dl class="define">
<dt id="c.LIBRADOS_ALL_NSPACES">
<span class="target" id="rados__types_8h_1a856cbae08b44becba45c76f5da40ffa2"></span><code class="sig-name descname">LIBRADOS_ALL_NSPACES</code><a class="headerlink" href="#c.LIBRADOS_ALL_NSPACES" title="Permalink to this definition">¶</a></dt>
<dd><p>Pass as nspace argument to rados_ioctx_set_namespace() before calling rados_nobjects_list_open() to return all objects in all namespaces. </p>
</dd></dl>

</div>
<dl class="struct">
<dt id="c.obj_watch_t">
<span class="target" id="structobj__watch__t"></span><em class="property">struct </em><code class="sig-name descname">obj_watch_t</code><a class="headerlink" href="#c.obj_watch_t" title="Permalink to this definition">¶</a></dt>
<dd><em>#include &lt;rados_types.h&gt;</em><p>One item from list_watchers </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric">Public Members</p>
<dl class="variable">
<dt>
<span class="target" id="structobj__watch__t_1a5c521d5238d99ce7014905779cc3a2be"></span><code class="sig-name descname">char obj_watch_t::addr[256]</code></dt>
<dd><p>Address of the Watcher. </p>
</dd></dl>

<dl class="variable">
<dt id="c.obj_watch_t::watcher_id">
<span class="target" id="structobj__watch__t_1a9b773ca6095b61ee6154107d59939a50"></span>int64_t <code class="sig-name descname">watcher_id</code><a class="headerlink" href="#c.obj_watch_t::watcher_id" title="Permalink to this definition">¶</a></dt>
<dd><p>Watcher ID. </p>
</dd></dl>

<dl class="variable">
<dt id="c.obj_watch_t::cookie">
<span class="target" id="structobj__watch__t_1a6c49bc31779a8d2511838a5e0cb5ff31"></span>uint64_t <code class="sig-name descname">cookie</code><a class="headerlink" href="#c.obj_watch_t::cookie" title="Permalink to this definition">¶</a></dt>
<dd><p>Cookie. </p>
</dd></dl>

<dl class="variable">
<dt id="c.obj_watch_t::timeout_seconds">
<span class="target" id="structobj__watch__t_1a5e987bcbc17814f83d559920f5aab1dd"></span>uint32_t <code class="sig-name descname">timeout_seconds</code><a class="headerlink" href="#c.obj_watch_t::timeout_seconds" title="Permalink to this definition">¶</a></dt>
<dd><p>Timeout in Seconds. </p>
</dd></dl>

</div>
</dd></dl>

<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric">xattr comparison operations</p>
<p>Operators for comparing xattrs on objects, and aborting the rados_read_op or rados_write_op transaction if the comparison fails. </p>
<dl class="enum">
<dt id="c.anon_1">
<span class="target" id="librados_8h_1adf764cbdea00d65edcd07bb9953ad2b7"></span>&#64;<code class="sig-name descname">anon_1</code><a class="headerlink" href="#c.anon_1" title="Permalink to this definition">¶</a></dt>
<dd><p><em>Values:</em></p>
<dl class="enumvalue">
<dt id="c.1">
<span class="target" id="librados_8h_1adf764cbdea00d65edcd07bb9953ad2b7a5704c5de1214a67ec3e9583548ee6445"></span><code class="sig-name descname">1</code><a class="headerlink" href="#c.1" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="enumvalue">
<dt id="c.2">
<span class="target" id="librados_8h_1adf764cbdea00d65edcd07bb9953ad2b7ac83502a6846342c73e08b21ed3b14000"></span><code class="sig-name descname">2</code><a class="headerlink" href="#c.2" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="enumvalue">
<dt id="c.3">
<span class="target" id="librados_8h_1adf764cbdea00d65edcd07bb9953ad2b7a7dc00fff37f306f8607ba276efccee5c"></span><code class="sig-name descname">3</code><a class="headerlink" href="#c.3" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="enumvalue">
<dt id="c.4">
<span class="target" id="librados_8h_1adf764cbdea00d65edcd07bb9953ad2b7a5a26abc77163a561d7bf619803c571c8"></span><code class="sig-name descname">4</code><a class="headerlink" href="#c.4" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="enumvalue">
<dt id="c.5">
<span class="target" id="librados_8h_1adf764cbdea00d65edcd07bb9953ad2b7abfdc72e29e7cbad7e278d5bbaf2a33bf"></span><code class="sig-name descname">5</code><a class="headerlink" href="#c.5" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="enumvalue">
<dt id="c.6">
<span class="target" id="librados_8h_1adf764cbdea00d65edcd07bb9953ad2b7ac5321f346c6a7022b0b3b42b83db72ee"></span><code class="sig-name descname">6</code><a class="headerlink" href="#c.6" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric">Operation Flags</p>
<p>Flags for rados_read_op_operate(), rados_write_op_operate(), rados_aio_read_op_operate(), and rados_aio_write_op_operate(). See librados.hpp for details. </p>
<dl class="enum">
<dt id="c.anon_2">
<span class="target" id="librados_8h_1a99fb83031ce9923c84392b4e92f956b5"></span>&#64;<code class="sig-name descname">anon_2</code><a class="headerlink" href="#c.anon_2" title="Permalink to this definition">¶</a></dt>
<dd><p><em>Values:</em></p>
<dl class="enumvalue">
<dt id="c.0">
<span class="target" id="librados_8h_1a99fb83031ce9923c84392b4e92f956b5ad7f7f30ddb552d642d73a687a8bef0d8"></span><code class="sig-name descname">0</code><a class="headerlink" href="#c.0" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="enumvalue">
<dt>
<span class="target" id="librados_8h_1a99fb83031ce9923c84392b4e92f956b5a497824d4474d47b623efbc0e196c453c"></span><code class="sig-name descname">1</code></dt>
<dd></dd></dl>

<dl class="enumvalue">
<dt>
<span class="target" id="librados_8h_1a99fb83031ce9923c84392b4e92f956b5a542458b2695c3dd9a9e670dd85604ff9"></span><code class="sig-name descname">2</code></dt>
<dd></dd></dl>

<dl class="enumvalue">
<dt>
<span class="target" id="librados_8h_1a99fb83031ce9923c84392b4e92f956b5ab107ef49cec1bcf177e55128308ade3e"></span><code class="sig-name descname">4</code></dt>
<dd></dd></dl>

<dl class="enumvalue">
<dt id="c.8">
<span class="target" id="librados_8h_1a99fb83031ce9923c84392b4e92f956b5afb3e7bac2e9fb9b9c54a7ed24750539d"></span><code class="sig-name descname">8</code><a class="headerlink" href="#c.8" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="enumvalue">
<dt id="c.16">
<span class="target" id="librados_8h_1a99fb83031ce9923c84392b4e92f956b5a7c30ed12a974a3082476aaac4528b7e5"></span><code class="sig-name descname">16</code><a class="headerlink" href="#c.16" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="enumvalue">
<dt id="c.32">
<span class="target" id="librados_8h_1a99fb83031ce9923c84392b4e92f956b5afab8b9d5a183456a775969623b452206"></span><code class="sig-name descname">32</code><a class="headerlink" href="#c.32" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="enumvalue">
<dt id="c.64">
<span class="target" id="librados_8h_1a99fb83031ce9923c84392b4e92f956b5ab563d85c24ddc59decad4f6dc15bd1a0"></span><code class="sig-name descname">64</code><a class="headerlink" href="#c.64" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="enumvalue">
<dt id="c.128">
<span class="target" id="librados_8h_1a99fb83031ce9923c84392b4e92f956b5a59cf7ffa6d11abbb38ee4b7b1651ebb8"></span><code class="sig-name descname">128</code><a class="headerlink" href="#c.128" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="enumvalue">
<dt id="c.256">
<span class="target" id="librados_8h_1a99fb83031ce9923c84392b4e92f956b5ae84c8e3954164c76a36c10a665b325e5"></span><code class="sig-name descname">256</code><a class="headerlink" href="#c.256" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="enumvalue">
<dt id="c.512">
<span class="target" id="librados_8h_1a99fb83031ce9923c84392b4e92f956b5a1ecb4c119bd78a9ae5d24c27a26ba04c"></span><code class="sig-name descname">512</code><a class="headerlink" href="#c.512" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="enumvalue">
<dt id="c.1024">
<span class="target" id="librados_8h_1a99fb83031ce9923c84392b4e92f956b5aa70d0f253cbc16c381d826fe9b5662a4"></span><code class="sig-name descname">1024</code><a class="headerlink" href="#c.1024" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric">Alloc hint flags</p>
<p>Flags for rados_write_op_alloc_hint2() and rados_set_alloc_hint2() indicating future IO patterns. </p>
<dl class="enum">
<dt id="c.anon_3">
<span class="target" id="librados_8h_1abc6126af1d45847bc59afa0aa3216b04"></span>&#64;<code class="sig-name descname">anon_3</code><a class="headerlink" href="#c.anon_3" title="Permalink to this definition">¶</a></dt>
<dd><p><em>Values:</em></p>
<dl class="enumvalue">
<dt>
<span class="target" id="librados_8h_1abc6126af1d45847bc59afa0aa3216b04a84edfc171cb9930894729821ddb46edd"></span><code class="sig-name descname">1</code></dt>
<dd></dd></dl>

<dl class="enumvalue">
<dt>
<span class="target" id="librados_8h_1abc6126af1d45847bc59afa0aa3216b04ae76cd323ff2e928df6119d42d59d28fe"></span><code class="sig-name descname">2</code></dt>
<dd></dd></dl>

<dl class="enumvalue">
<dt>
<span class="target" id="librados_8h_1abc6126af1d45847bc59afa0aa3216b04a286c94e77baf5220271a4a259b0db4b3"></span><code class="sig-name descname">4</code></dt>
<dd></dd></dl>

<dl class="enumvalue">
<dt>
<span class="target" id="librados_8h_1abc6126af1d45847bc59afa0aa3216b04a44efcee9a5a7b6b05e26470173acf195"></span><code class="sig-name descname">8</code></dt>
<dd></dd></dl>

<dl class="enumvalue">
<dt>
<span class="target" id="librados_8h_1abc6126af1d45847bc59afa0aa3216b04ab31540f6184e0f8f24531eb6f06c94a5"></span><code class="sig-name descname">16</code></dt>
<dd></dd></dl>

<dl class="enumvalue">
<dt>
<span class="target" id="librados_8h_1abc6126af1d45847bc59afa0aa3216b04a06295da1eca7a3dedf093a82709e17f9"></span><code class="sig-name descname">32</code></dt>
<dd></dd></dl>

<dl class="enumvalue">
<dt>
<span class="target" id="librados_8h_1abc6126af1d45847bc59afa0aa3216b04a93d85b03a9209347ebbfc94bc4888465"></span><code class="sig-name descname">64</code></dt>
<dd></dd></dl>

<dl class="enumvalue">
<dt>
<span class="target" id="librados_8h_1abc6126af1d45847bc59afa0aa3216b04a40322b698c38af5fe15ebf5094597ff4"></span><code class="sig-name descname">128</code></dt>
<dd></dd></dl>

<dl class="enumvalue">
<dt>
<span class="target" id="librados_8h_1abc6126af1d45847bc59afa0aa3216b04a6329e9f57cfb196672c366955ff26452"></span><code class="sig-name descname">256</code></dt>
<dd></dd></dl>

<dl class="enumvalue">
<dt>
<span class="target" id="librados_8h_1abc6126af1d45847bc59afa0aa3216b04ab5aad30114c83da7c50114a58af33cd4"></span><code class="sig-name descname">512</code></dt>
<dd></dd></dl>

</dd></dl>

</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric">Asynchronous I/O</p>
<p>Read and write to objects without blocking. </p>
<dl class="typedef">
<dt id="c.rados_callback_t">
<span class="target" id="librados_8h_1a89fd019a165bb2872bbf9078d806a9e5"></span><em class="property">typedef </em><code class="sig-name descname">rados_callback_t</code><a class="headerlink" href="#c.rados_callback_t" title="Permalink to this definition">¶</a></dt>
<dd><p>Callbacks for asynchrous operations take two parameters:<ul class="simple">
<li><p>cb the completion that has finished</p></li>
<li><p>arg application defined data made available to the callback function </p></li>
</ul>
</p>
</dd></dl>

<dl class="function">
<dt id="c.rados_aio_create_completion">
<span class="target" id="librados_8h_1a5955d25d7b509c9b271bd153a2208a10"></span><a class="reference internal" href="#c.CEPH_RADOS_API" title="CEPH_RADOS_API">CEPH_RADOS_API</a> int <code class="sig-name descname">rados_aio_create_completion</code><span class="sig-paren">(</span>void *<em> cb_arg</em>, <a class="reference internal" href="#c.rados_callback_t" title="rados_callback_t">rados_callback_t</a><em> cb_complete</em>, <a class="reference internal" href="#c.rados_callback_t" title="rados_callback_t">rados_callback_t</a><em> cb_safe</em>, <a class="reference internal" href="#c.rados_completion_t" title="rados_completion_t">rados_completion_t</a> *<em> pc</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rados_aio_create_completion" title="Permalink to this definition">¶</a></dt>
<dd><p>Constructs a completion to use with asynchronous operations</p>
<p>The complete and safe callbacks correspond to operations being acked and committed, respectively. The callbacks are called in order of receipt, so the safe callback may be triggered before the complete callback, and vice versa. This is affected by journalling on the OSDs.</p>
<p>TODO: more complete documentation of this elsewhere (in the RADOS docs?)</p>
<p><dl class="simple">
<dt><strong>Note</strong></dt><dd><p>Read operations only get a complete callback. </p>
</dd>
<dt><strong>Note</strong></dt><dd><p>BUG: this should check for ENOMEM instead of throwing an exception</p>
</dd>
<dt><strong>Return</strong></dt><dd><p>0 </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">cb_arg</span></code>: application-defined data passed to the callback functions </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cb_complete</span></code>: the function to be called when the operation is in memory on all replicas </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cb_safe</span></code>: the function to be called when the operation is on stable storage on all replicas </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pc</span></code>: where to store the completion </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="c.rados_aio_create_completion2">
<span class="target" id="librados_8h_1a42472e5c593d3d34f355597ba2bcbb2a"></span><a class="reference internal" href="#c.CEPH_RADOS_API" title="CEPH_RADOS_API">CEPH_RADOS_API</a> int <code class="sig-name descname">rados_aio_create_completion2</code><span class="sig-paren">(</span>void *<em> cb_arg</em>, <a class="reference internal" href="#c.rados_callback_t" title="rados_callback_t">rados_callback_t</a><em> cb_complete</em>, <a class="reference internal" href="#c.rados_completion_t" title="rados_completion_t">rados_completion_t</a> *<em> pc</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rados_aio_create_completion2" title="Permalink to this definition">¶</a></dt>
<dd><p>Constructs a completion to use with asynchronous operations</p>
<p>The complete callback corresponds to operation being acked.</p>
<p><dl class="simple">
<dt><strong>Note</strong></dt><dd><p>BUG: this should check for ENOMEM instead of throwing an exception</p>
</dd>
<dt><strong>Return</strong></dt><dd><p>0 </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">cb_arg</span></code>: application-defined data passed to the callback functions </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cb_complete</span></code>: the function to be called when the operation is committed on all replicas </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pc</span></code>: where to store the completion </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="c.rados_aio_wait_for_complete">
<span class="target" id="librados_8h_1a7718e4aaf9fe1f806bb981da8f4bd395"></span><a class="reference internal" href="#c.CEPH_RADOS_API" title="CEPH_RADOS_API">CEPH_RADOS_API</a> int <code class="sig-name descname">rados_aio_wait_for_complete</code><span class="sig-paren">(</span><a class="reference internal" href="#c.rados_completion_t" title="rados_completion_t">rados_completion_t</a><em> c</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rados_aio_wait_for_complete" title="Permalink to this definition">¶</a></dt>
<dd><p>Block until an operation completes</p>
<p>This means it is in memory on all replicas.</p>
<p><dl class="simple">
<dt><strong>Note</strong></dt><dd><p>BUG: this should be void</p>
</dd>
<dt><strong>Return</strong></dt><dd><p>0 </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">c</span></code>: operation to wait for </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="c.rados_aio_wait_for_safe">
<span class="target" id="librados_8h_1a748e4c6d57e5873ff9aba518e49178c0"></span><a class="reference internal" href="#c.CEPH_RADOS_API" title="CEPH_RADOS_API">CEPH_RADOS_API</a> int <code class="sig-name descname">rados_aio_wait_for_safe</code><span class="sig-paren">(</span><a class="reference internal" href="#c.rados_completion_t" title="rados_completion_t">rados_completion_t</a><em> c</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rados_aio_wait_for_safe" title="Permalink to this definition">¶</a></dt>
<dd><p>Block until an operation is safe</p>
<p>This means it is on stable storage on all replicas.</p>
<p><dl class="simple">
<dt><strong>Note</strong></dt><dd><p>BUG: this should be void</p>
</dd>
<dt><strong>Return</strong></dt><dd><p>0 </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">c</span></code>: operation to wait for </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="c.rados_aio_is_complete">
<span class="target" id="librados_8h_1a32754a8fa76d9eb04af81c0c2670cb55"></span><a class="reference internal" href="#c.CEPH_RADOS_API" title="CEPH_RADOS_API">CEPH_RADOS_API</a> int <code class="sig-name descname">rados_aio_is_complete</code><span class="sig-paren">(</span><a class="reference internal" href="#c.rados_completion_t" title="rados_completion_t">rados_completion_t</a><em> c</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rados_aio_is_complete" title="Permalink to this definition">¶</a></dt>
<dd><p>Has an asynchronous operation completed?</p>
<p><dl class="simple">
<dt><strong>Warning</strong></dt><dd><p>This does not imply that the complete callback has finished</p>
</dd>
<dt><strong>Return</strong></dt><dd><p>whether c is complete </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">c</span></code>: async operation to inspect </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="c.rados_aio_is_safe">
<span class="target" id="librados_8h_1a94bd058b887430fb0a48f137c024063e"></span><a class="reference internal" href="#c.CEPH_RADOS_API" title="CEPH_RADOS_API">CEPH_RADOS_API</a> int <code class="sig-name descname">rados_aio_is_safe</code><span class="sig-paren">(</span><a class="reference internal" href="#c.rados_completion_t" title="rados_completion_t">rados_completion_t</a><em> c</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rados_aio_is_safe" title="Permalink to this definition">¶</a></dt>
<dd><p>Is an asynchronous operation safe?</p>
<p><dl class="simple">
<dt><strong>Warning</strong></dt><dd><p>This does not imply that the safe callback has finished</p>
</dd>
<dt><strong>Return</strong></dt><dd><p>whether c is safe </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">c</span></code>: async operation to inspect </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="c.rados_aio_wait_for_complete_and_cb">
<span class="target" id="librados_8h_1a3532b567e6effae0af00d15dd9dd84f2"></span><a class="reference internal" href="#c.CEPH_RADOS_API" title="CEPH_RADOS_API">CEPH_RADOS_API</a> int <code class="sig-name descname">rados_aio_wait_for_complete_and_cb</code><span class="sig-paren">(</span><a class="reference internal" href="#c.rados_completion_t" title="rados_completion_t">rados_completion_t</a><em> c</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rados_aio_wait_for_complete_and_cb" title="Permalink to this definition">¶</a></dt>
<dd><p>Block until an operation completes and callback completes</p>
<p>This means it is in memory on all replicas and can be read.</p>
<p><dl class="simple">
<dt><strong>Note</strong></dt><dd><p>BUG: this should be void</p>
</dd>
<dt><strong>Return</strong></dt><dd><p>0 </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">c</span></code>: operation to wait for </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="c.rados_aio_wait_for_safe_and_cb">
<span class="target" id="librados_8h_1ab3d26fbc0efb797ccef41c1c7062bbda"></span><a class="reference internal" href="#c.CEPH_RADOS_API" title="CEPH_RADOS_API">CEPH_RADOS_API</a> int <code class="sig-name descname">rados_aio_wait_for_safe_and_cb</code><span class="sig-paren">(</span><a class="reference internal" href="#c.rados_completion_t" title="rados_completion_t">rados_completion_t</a><em> c</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rados_aio_wait_for_safe_and_cb" title="Permalink to this definition">¶</a></dt>
<dd><p>Block until an operation is safe and callback has completed</p>
<p>This means it is on stable storage on all replicas.</p>
<p><dl class="simple">
<dt><strong>Note</strong></dt><dd><p>BUG: this should be void</p>
</dd>
<dt><strong>Return</strong></dt><dd><p>0 </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">c</span></code>: operation to wait for </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="c.rados_aio_is_complete_and_cb">
<span class="target" id="librados_8h_1a66135ad6d7f62d7dde361f4b0383ff33"></span><a class="reference internal" href="#c.CEPH_RADOS_API" title="CEPH_RADOS_API">CEPH_RADOS_API</a> int <code class="sig-name descname">rados_aio_is_complete_and_cb</code><span class="sig-paren">(</span><a class="reference internal" href="#c.rados_completion_t" title="rados_completion_t">rados_completion_t</a><em> c</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rados_aio_is_complete_and_cb" title="Permalink to this definition">¶</a></dt>
<dd><p>Has an asynchronous operation and callback completed</p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p>whether c is complete </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">c</span></code>: async operation to inspect </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="c.rados_aio_is_safe_and_cb">
<span class="target" id="librados_8h_1ab1965ac4cda83410e829df7137e7dcdb"></span><a class="reference internal" href="#c.CEPH_RADOS_API" title="CEPH_RADOS_API">CEPH_RADOS_API</a> int <code class="sig-name descname">rados_aio_is_safe_and_cb</code><span class="sig-paren">(</span><a class="reference internal" href="#c.rados_completion_t" title="rados_completion_t">rados_completion_t</a><em> c</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rados_aio_is_safe_and_cb" title="Permalink to this definition">¶</a></dt>
<dd><p>Is an asynchronous operation safe and has the callback completed</p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p>whether c is safe </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">c</span></code>: async operation to inspect </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="c.rados_aio_get_return_value">
<span class="target" id="librados_8h_1ad904db01b1c46e7373e5c7ba83dfc573"></span><a class="reference internal" href="#c.CEPH_RADOS_API" title="CEPH_RADOS_API">CEPH_RADOS_API</a> int <code class="sig-name descname">rados_aio_get_return_value</code><span class="sig-paren">(</span><a class="reference internal" href="#c.rados_completion_t" title="rados_completion_t">rados_completion_t</a><em> c</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rados_aio_get_return_value" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the return value of an asychronous operation</p>
<p>The return value is set when the operation is complete or safe, whichever comes first.</p>
<p><dl class="simple">
<dt><strong>Pre</strong></dt><dd><p>The operation is safe or complete</p>
</dd>
<dt><strong>Note</strong></dt><dd><p>BUG: complete callback may never be called when the safe message is received before the complete message</p>
</dd>
<dt><strong>Return</strong></dt><dd><p>return value of the operation </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">c</span></code>: async operation to inspect </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="c.rados_aio_get_version">
<span class="target" id="librados_8h_1a937410eeeb787fd3c543349426c66568"></span><a class="reference internal" href="#c.CEPH_RADOS_API" title="CEPH_RADOS_API">CEPH_RADOS_API</a> uint64_t <code class="sig-name descname">rados_aio_get_version</code><span class="sig-paren">(</span><a class="reference internal" href="#c.rados_completion_t" title="rados_completion_t">rados_completion_t</a><em> c</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rados_aio_get_version" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the internal object version of the target of an asychronous operation</p>
<p>The return value is set when the operation is complete or safe, whichever comes first.</p>
<p><dl class="simple">
<dt><strong>Pre</strong></dt><dd><p>The operation is safe or complete</p>
</dd>
<dt><strong>Note</strong></dt><dd><p>BUG: complete callback may never be called when the safe message is received before the complete message</p>
</dd>
<dt><strong>Return</strong></dt><dd><p>version number of the asychronous operation’s target </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">c</span></code>: async operation to inspect </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="c.rados_aio_release">
<span class="target" id="librados_8h_1adc6dfb15659856f9ca3dae564db4596d"></span><a class="reference internal" href="#c.CEPH_RADOS_API" title="CEPH_RADOS_API">CEPH_RADOS_API</a> void <code class="sig-name descname">rados_aio_release</code><span class="sig-paren">(</span><a class="reference internal" href="#c.rados_completion_t" title="rados_completion_t">rados_completion_t</a><em> c</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rados_aio_release" title="Permalink to this definition">¶</a></dt>
<dd><p>Release a completion</p>
<p>Call this when you no longer need the completion. It may not be freed immediately if the operation is not acked and committed.</p>
<p><dl class="simple">
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">c</span></code>: completion to release </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="c.rados_aio_write">
<span class="target" id="librados_8h_1a6f4f4c4bc2d9a37f462b57541cedc5c8"></span><a class="reference internal" href="#c.CEPH_RADOS_API" title="CEPH_RADOS_API">CEPH_RADOS_API</a> int <code class="sig-name descname">rados_aio_write</code><span class="sig-paren">(</span><a class="reference internal" href="#c.rados_ioctx_t" title="rados_ioctx_t">rados_ioctx_t</a><em> io</em>, const char *<em> oid</em>, <a class="reference internal" href="#c.rados_completion_t" title="rados_completion_t">rados_completion_t</a><em> completion</em>, const char *<em> buf</em>, size_t<em> len</em>, uint64_t<em> off</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rados_aio_write" title="Permalink to this definition">¶</a></dt>
<dd><p>Write data to an object asynchronously</p>
<p>Queues the write and returns. The return value of the completion will be 0 on success, negative error code on failure.</p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p>0 on success, -EROFS if the io context specifies a snap_seq other than LIBRADOS_SNAP_HEAD </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">io</span></code>: the context in which the write will occur </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">oid</span></code>: name of the object </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">completion</span></code>: what to do when the write is safe and complete </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">buf</span></code>: data to write </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">len</span></code>: length of the data, in bytes </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">off</span></code>: byte offset in the object to begin writing at </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="c.rados_aio_append">
<span class="target" id="librados_8h_1a0a24821e17c314590c45f42f87b034d1"></span><a class="reference internal" href="#c.CEPH_RADOS_API" title="CEPH_RADOS_API">CEPH_RADOS_API</a> int <code class="sig-name descname">rados_aio_append</code><span class="sig-paren">(</span><a class="reference internal" href="#c.rados_ioctx_t" title="rados_ioctx_t">rados_ioctx_t</a><em> io</em>, const char *<em> oid</em>, <a class="reference internal" href="#c.rados_completion_t" title="rados_completion_t">rados_completion_t</a><em> completion</em>, const char *<em> buf</em>, size_t<em> len</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rados_aio_append" title="Permalink to this definition">¶</a></dt>
<dd><p>Asynchronously append data to an object</p>
<p>Queues the append and returns.</p>
<p>The return value of the completion will be 0 on success, negative error code on failure.</p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p>0 on success, -EROFS if the io context specifies a snap_seq other than LIBRADOS_SNAP_HEAD </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">io</span></code>: the context to operate in </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">oid</span></code>: the name of the object </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">completion</span></code>: what to do when the append is safe and complete </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">buf</span></code>: the data to append </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">len</span></code>: length of buf (in bytes) </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="c.rados_aio_write_full">
<span class="target" id="librados_8h_1acf7daf8ecc0ba809b8bf6738b21af7ef"></span><a class="reference internal" href="#c.CEPH_RADOS_API" title="CEPH_RADOS_API">CEPH_RADOS_API</a> int <code class="sig-name descname">rados_aio_write_full</code><span class="sig-paren">(</span><a class="reference internal" href="#c.rados_ioctx_t" title="rados_ioctx_t">rados_ioctx_t</a><em> io</em>, const char *<em> oid</em>, <a class="reference internal" href="#c.rados_completion_t" title="rados_completion_t">rados_completion_t</a><em> completion</em>, const char *<em> buf</em>, size_t<em> len</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rados_aio_write_full" title="Permalink to this definition">¶</a></dt>
<dd><p>Asynchronously write an entire object</p>
<p>The object is filled with the provided data. If the object exists, it is atomically truncated and then written. Queues the write_full and returns.</p>
<p>The return value of the completion will be 0 on success, negative error code on failure.</p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p>0 on success, -EROFS if the io context specifies a snap_seq other than LIBRADOS_SNAP_HEAD </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">io</span></code>: the io context in which the write will occur </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">oid</span></code>: name of the object </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">completion</span></code>: what to do when the write_full is safe and complete </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">buf</span></code>: data to write </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">len</span></code>: length of the data, in bytes </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="c.rados_aio_writesame">
<span class="target" id="librados_8h_1aa93b44ecdb77d893c7be8dd20284ccde"></span><a class="reference internal" href="#c.CEPH_RADOS_API" title="CEPH_RADOS_API">CEPH_RADOS_API</a> int <code class="sig-name descname">rados_aio_writesame</code><span class="sig-paren">(</span><a class="reference internal" href="#c.rados_ioctx_t" title="rados_ioctx_t">rados_ioctx_t</a><em> io</em>, const char *<em> oid</em>, <a class="reference internal" href="#c.rados_completion_t" title="rados_completion_t">rados_completion_t</a><em> completion</em>, const char *<em> buf</em>, size_t<em> data_len</em>, size_t<em> write_len</em>, uint64_t<em> off</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rados_aio_writesame" title="Permalink to this definition">¶</a></dt>
<dd><p>Asynchronously write the same buffer multiple times</p>
<p>Queues the writesame and returns.</p>
<p>The return value of the completion will be 0 on success, negative error code on failure.</p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p>0 on success, -EROFS if the io context specifies a snap_seq other than LIBRADOS_SNAP_HEAD </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">io</span></code>: the io context in which the write will occur </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">oid</span></code>: name of the object </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">completion</span></code>: what to do when the writesame is safe and complete </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">buf</span></code>: data to write </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">data_len</span></code>: length of the data, in bytes </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">write_len</span></code>: the total number of bytes to write </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">off</span></code>: byte offset in the object to begin writing at </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="c.rados_aio_remove">
<span class="target" id="librados_8h_1a4b181e57f6ed40346af3b4445fcd0e58"></span><a class="reference internal" href="#c.CEPH_RADOS_API" title="CEPH_RADOS_API">CEPH_RADOS_API</a> int <code class="sig-name descname">rados_aio_remove</code><span class="sig-paren">(</span><a class="reference internal" href="#c.rados_ioctx_t" title="rados_ioctx_t">rados_ioctx_t</a><em> io</em>, const char *<em> oid</em>, <a class="reference internal" href="#c.rados_completion_t" title="rados_completion_t">rados_completion_t</a><em> completion</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rados_aio_remove" title="Permalink to this definition">¶</a></dt>
<dd><p>Asynchronously remove an object</p>
<p>Queues the remove and returns.</p>
<p>The return value of the completion will be 0 on success, negative error code on failure.</p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p>0 on success, -EROFS if the io context specifies a snap_seq other than LIBRADOS_SNAP_HEAD </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">io</span></code>: the context to operate in </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">oid</span></code>: the name of the object </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">completion</span></code>: what to do when the remove is safe and complete </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="c.rados_aio_read">
<span class="target" id="librados_8h_1a1a8fd7f428bd26a8cc0a8c39dca950ad"></span><a class="reference internal" href="#c.CEPH_RADOS_API" title="CEPH_RADOS_API">CEPH_RADOS_API</a> int <code class="sig-name descname">rados_aio_read</code><span class="sig-paren">(</span><a class="reference internal" href="#c.rados_ioctx_t" title="rados_ioctx_t">rados_ioctx_t</a><em> io</em>, const char *<em> oid</em>, <a class="reference internal" href="#c.rados_completion_t" title="rados_completion_t">rados_completion_t</a><em> completion</em>, char *<em> buf</em>, size_t<em> len</em>, uint64_t<em> off</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rados_aio_read" title="Permalink to this definition">¶</a></dt>
<dd><p>Asynchronously read data from an object</p>
<p>The io context determines the snapshot to read from, if any was set by rados_ioctx_snap_set_read().</p>
<p>The return value of the completion will be number of bytes read on success, negative error code on failure.</p>
<p><dl class="simple">
<dt><strong>Note</strong></dt><dd><p>only the ‘complete’ callback of the completion will be called.</p>
</dd>
<dt><strong>Return</strong></dt><dd><p>0 on success, negative error code on failure </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">io</span></code>: the context in which to perform the read </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">oid</span></code>: the name of the object to read from </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">completion</span></code>: what to do when the read is complete </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">buf</span></code>: where to store the results </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">len</span></code>: the number of bytes to read </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">off</span></code>: the offset to start reading from in the object </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="c.rados_aio_flush">
<span class="target" id="librados_8h_1a644b4e62503d9eb0f3b2b618860c6eba"></span><a class="reference internal" href="#c.CEPH_RADOS_API" title="CEPH_RADOS_API">CEPH_RADOS_API</a> int <code class="sig-name descname">rados_aio_flush</code><span class="sig-paren">(</span><a class="reference internal" href="#c.rados_ioctx_t" title="rados_ioctx_t">rados_ioctx_t</a><em> io</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rados_aio_flush" title="Permalink to this definition">¶</a></dt>
<dd><p>Block until all pending writes in an io context are safe</p>
<p>This is not equivalent to calling rados_aio_wait_for_safe() on all write completions, since this waits for the associated callbacks to complete as well.</p>
<p><dl class="simple">
<dt><strong>Note</strong></dt><dd><p>BUG: always returns 0, should be void or accept a timeout</p>
</dd>
<dt><strong>Return</strong></dt><dd><p>0 on success, negative error code on failure </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">io</span></code>: the context to flush </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="c.rados_aio_flush_async">
<span class="target" id="librados_8h_1acb4e47ec4b917eaf11027389b2064b13"></span><a class="reference internal" href="#c.CEPH_RADOS_API" title="CEPH_RADOS_API">CEPH_RADOS_API</a> int <code class="sig-name descname">rados_aio_flush_async</code><span class="sig-paren">(</span><a class="reference internal" href="#c.rados_ioctx_t" title="rados_ioctx_t">rados_ioctx_t</a><em> io</em>, <a class="reference internal" href="#c.rados_completion_t" title="rados_completion_t">rados_completion_t</a><em> completion</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rados_aio_flush_async" title="Permalink to this definition">¶</a></dt>
<dd><p>Schedule a callback for when all currently pending aio writes are safe. This is a non-blocking version of rados_aio_flush().</p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p>0 on success, negative error code on failure </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">io</span></code>: the context to flush </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">completion</span></code>: what to do when the writes are safe </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="c.rados_aio_stat">
<span class="target" id="librados_8h_1a99280f0e640f0849a6fb91ec742f0e80"></span><a class="reference internal" href="#c.CEPH_RADOS_API" title="CEPH_RADOS_API">CEPH_RADOS_API</a> int <code class="sig-name descname">rados_aio_stat</code><span class="sig-paren">(</span><a class="reference internal" href="#c.rados_ioctx_t" title="rados_ioctx_t">rados_ioctx_t</a><em> io</em>, const char *<em> o</em>, <a class="reference internal" href="#c.rados_completion_t" title="rados_completion_t">rados_completion_t</a><em> completion</em>, uint64_t *<em> psize</em>, time_t *<em> pmtime</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rados_aio_stat" title="Permalink to this definition">¶</a></dt>
<dd><p>Asynchronously get object stats (size/mtime)</p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p>0 on success, negative error code on failure </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">io</span></code>: ioctx </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">o</span></code>: object name </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">completion</span></code>: what to do when the stat is complete </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">psize</span></code>: where to store object size </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pmtime</span></code>: where to store modification time </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="c.rados_aio_cmpext">
<span class="target" id="librados_8h_1a4b85a574e0efe90d7ac4683a8ba27895"></span><a class="reference internal" href="#c.CEPH_RADOS_API" title="CEPH_RADOS_API">CEPH_RADOS_API</a> int <code class="sig-name descname">rados_aio_cmpext</code><span class="sig-paren">(</span><a class="reference internal" href="#c.rados_ioctx_t" title="rados_ioctx_t">rados_ioctx_t</a><em> io</em>, const char *<em> o</em>, <a class="reference internal" href="#c.rados_completion_t" title="rados_completion_t">rados_completion_t</a><em> completion</em>, const char *<em> cmp_buf</em>, size_t<em> cmp_len</em>, uint64_t<em> off</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rados_aio_cmpext" title="Permalink to this definition">¶</a></dt>
<dd><p>Asynchronously compare an on-disk object range with a buffer</p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p>0 on success, negative error code on failure, (-MAX_ERRNO - mismatch_off) on mismatch </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">io</span></code>: the context in which to perform the comparison </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">o</span></code>: the name of the object to compare with </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">completion</span></code>: what to do when the comparison is complete </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cmp_buf</span></code>: buffer containing bytes to be compared with object contents </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cmp_len</span></code>: length to compare and size of <code class="docutils literal notranslate"><span class="pre">cmp_buf</span></code> in bytes </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">off</span></code>: object byte offset at which to start the comparison </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="c.rados_aio_cancel">
<span class="target" id="librados_8h_1a59638b9177c9ccf52d19f1d992277503"></span><a class="reference internal" href="#c.CEPH_RADOS_API" title="CEPH_RADOS_API">CEPH_RADOS_API</a> int <code class="sig-name descname">rados_aio_cancel</code><span class="sig-paren">(</span><a class="reference internal" href="#c.rados_ioctx_t" title="rados_ioctx_t">rados_ioctx_t</a><em> io</em>, <a class="reference internal" href="#c.rados_completion_t" title="rados_completion_t">rados_completion_t</a><em> completion</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rados_aio_cancel" title="Permalink to this definition">¶</a></dt>
<dd><p>Cancel async operation</p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p>0 on success, negative error code on failure </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">io</span></code>: ioctx </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">completion</span></code>: completion handle </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="c.rados_aio_exec">
<span class="target" id="librados_8h_1ad52b289c2d0573cf538eebaeed2a1a0e"></span><a class="reference internal" href="#c.CEPH_RADOS_API" title="CEPH_RADOS_API">CEPH_RADOS_API</a> int <code class="sig-name descname">rados_aio_exec</code><span class="sig-paren">(</span><a class="reference internal" href="#c.rados_ioctx_t" title="rados_ioctx_t">rados_ioctx_t</a><em> io</em>, const char *<em> o</em>, <a class="reference internal" href="#c.rados_completion_t" title="rados_completion_t">rados_completion_t</a><em> completion</em>, const char *<em> cls</em>, const char *<em> method</em>, const char *<em> in_buf</em>, size_t<em> in_len</em>, char *<em> buf</em>, size_t<em> out_len</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rados_aio_exec" title="Permalink to this definition">¶</a></dt>
<dd><p>Asynchronously execute an OSD class method on an object</p>
<p>The OSD has a plugin mechanism for performing complicated operations on an object atomically. These plugins are called classes. This function allows librados users to call the custom methods. The input and output formats are defined by the class. Classes in ceph.git can be found in src/cls subdirectories</p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p>0 on success, negative error code on failure </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">io</span></code>: the context in which to call the method </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">o</span></code>: name of the object </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">completion</span></code>: what to do when the exec completes </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cls</span></code>: the name of the class </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">method</span></code>: the name of the method </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">in_buf</span></code>: where to find input </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">in_len</span></code>: length of in_buf in bytes </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">buf</span></code>: where to store output </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">out_len</span></code>: length of buf in bytes </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric">Watch/Notify</p>
<p>Watch/notify is a protocol to help communicate among clients. It can be used to sychronize client state. All that’s needed is a well-known object name (for example, rbd uses the header object of an image).</p>
<p>Watchers register an interest in an object, and receive all notifies on that object. A notify attempts to communicate with all clients watching an object, and blocks on the notifier until each client responds or a timeout is reached.</p>
<p>See rados_watch() and rados_notify() for more details. </p>
<dl class="typedef">
<dt id="c.rados_watchcb_t">
<span class="target" id="librados_8h_1a3ed009a14f2fd15dc7a4fe337f3649d5"></span><em class="property">typedef </em><code class="sig-name descname">rados_watchcb_t</code><a class="headerlink" href="#c.rados_watchcb_t" title="Permalink to this definition">¶</a></dt>
<dd><p>Callback activated when a notify is received on a watched object.</p>
<p><dl class="simple">
<dt><strong>Note</strong></dt><dd><p>BUG: opcode is an internal detail that shouldn’t be exposed </p>
</dd>
<dt><strong>Note</strong></dt><dd><p>BUG: ver is unused </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">opcode</span></code>: undefined </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ver</span></code>: version of the watched object </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">arg</span></code>: application-specific data</p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="typedef">
<dt id="c.rados_watchcb2_t">
<span class="target" id="librados_8h_1ae4042feb1602b9df19dac7ff496920d3"></span><em class="property">typedef </em><code class="sig-name descname">rados_watchcb2_t</code><a class="headerlink" href="#c.rados_watchcb2_t" title="Permalink to this definition">¶</a></dt>
<dd><p>Callback activated when a notify is received on a watched object.</p>
<p><dl class="simple">
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">arg</span></code>: opaque user-defined value provided to rados_watch2() </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">notify_id</span></code>: an id for this notify event </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">handle</span></code>: the watcher handle we are notifying </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">notifier_id</span></code>: the unique client id for the notifier </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">data</span></code>: payload from the notifier </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">datalen</span></code>: length of payload buffer </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="typedef">
<dt id="c.rados_watcherrcb_t">
<span class="target" id="librados_8h_1a03fa31d268200b63ae696a9b7d7806f4"></span><em class="property">typedef </em><code class="sig-name descname">rados_watcherrcb_t</code><a class="headerlink" href="#c.rados_watcherrcb_t" title="Permalink to this definition">¶</a></dt>
<dd><p>Callback activated when we encounter an error with the watch session. This can happen when the location of the objects moves within the cluster and we fail to register our watch with the new object location, or when our connection with the object OSD is otherwise interrupted and we may have missed notify events.</p>
<p><dl class="simple">
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">pre</span></code>: opaque user-defined value provided to rados_watch2() </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">err</span></code>: error code </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="c.rados_watch">
<span class="target" id="librados_8h_1a6f26b36eb0042935caf4338a447e473b"></span><a class="reference internal" href="#c.CEPH_RADOS_API" title="CEPH_RADOS_API">CEPH_RADOS_API</a> int <code class="sig-name descname">rados_watch</code><span class="sig-paren">(</span><a class="reference internal" href="#c.rados_ioctx_t" title="rados_ioctx_t">rados_ioctx_t</a><em> io</em>, const char *<em> o</em>, uint64_t<em> ver</em>, uint64_t *<em> cookie</em>, <a class="reference internal" href="#c.rados_watchcb_t" title="rados_watchcb_t">rados_watchcb_t</a><em> watchcb</em>, void *<em> arg</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rados_watch" title="Permalink to this definition">¶</a></dt>
<dd><p>Register an interest in an object</p>
<p>A watch operation registers the client as being interested in notifications on an object. OSDs keep track of watches on persistent storage, so they are preserved across cluster changes by the normal recovery process. If the client loses its connection to the primary OSD for a watched object, the watch will be removed after 30 seconds. Watches are automatically reestablished when a new connection is made, or a placement group switches OSDs.</p>
<p><dl class="simple">
<dt><strong>Note</strong></dt><dd><p>BUG: librados should provide a way for watchers to notice connection resets </p>
</dd>
<dt><strong>Note</strong></dt><dd><p>BUG: the ver parameter does not work, and -ERANGE will never be returned (See URL tracker.ceph.com/issues/2592)</p>
</dd>
<dt><strong>Return</strong></dt><dd><p>0 on success, negative error code on failure </p>
</dd>
<dt><strong>Return</strong></dt><dd><p>-ERANGE if the version of the object is greater than ver </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">io</span></code>: the pool the object is in </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">o</span></code>: the object to watch </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ver</span></code>: expected version of the object </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cookie</span></code>: where to store the internal id assigned to this watch </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">watchcb</span></code>: what to do when a notify is received on this object </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">arg</span></code>: application defined data to pass when watchcb is called </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="c.rados_watch2">
<span class="target" id="librados_8h_1a1e9999a4cab56748425c53b436c9f3ff"></span><a class="reference internal" href="#c.CEPH_RADOS_API" title="CEPH_RADOS_API">CEPH_RADOS_API</a> int <code class="sig-name descname">rados_watch2</code><span class="sig-paren">(</span><a class="reference internal" href="#c.rados_ioctx_t" title="rados_ioctx_t">rados_ioctx_t</a><em> io</em>, const char *<em> o</em>, uint64_t *<em> cookie</em>, <a class="reference internal" href="#c.rados_watchcb2_t" title="rados_watchcb2_t">rados_watchcb2_t</a><em> watchcb</em>, <a class="reference internal" href="#c.rados_watcherrcb_t" title="rados_watcherrcb_t">rados_watcherrcb_t</a><em> watcherrcb</em>, void *<em> arg</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rados_watch2" title="Permalink to this definition">¶</a></dt>
<dd><p>Register an interest in an object</p>
<p>A watch operation registers the client as being interested in notifications on an object. OSDs keep track of watches on persistent storage, so they are preserved across cluster changes by the normal recovery process. If the client loses its connection to the primary OSD for a watched object, the watch will be removed after a timeout configured with osd_client_watch_timeout. Watches are automatically reestablished when a new connection is made, or a placement group switches OSDs.</p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p>0 on success, negative error code on failure </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">io</span></code>: the pool the object is in </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">o</span></code>: the object to watch </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cookie</span></code>: where to store the internal id assigned to this watch </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">watchcb</span></code>: what to do when a notify is received on this object </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">watcherrcb</span></code>: what to do when the watch session encounters an error </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">arg</span></code>: opaque value to pass to the callback </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="c.rados_watch3">
<span class="target" id="librados_8h_1a6f0f062e55d392a5f3bd8c7d5e8028c4"></span><a class="reference internal" href="#c.CEPH_RADOS_API" title="CEPH_RADOS_API">CEPH_RADOS_API</a> int <code class="sig-name descname">rados_watch3</code><span class="sig-paren">(</span><a class="reference internal" href="#c.rados_ioctx_t" title="rados_ioctx_t">rados_ioctx_t</a><em> io</em>, const char *<em> o</em>, uint64_t *<em> cookie</em>, <a class="reference internal" href="#c.rados_watchcb2_t" title="rados_watchcb2_t">rados_watchcb2_t</a><em> watchcb</em>, <a class="reference internal" href="#c.rados_watcherrcb_t" title="rados_watcherrcb_t">rados_watcherrcb_t</a><em> watcherrcb</em>, uint32_t<em> timeout</em>, void *<em> arg</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rados_watch3" title="Permalink to this definition">¶</a></dt>
<dd><p>Register an interest in an object</p>
<p>A watch operation registers the client as being interested in notifications on an object. OSDs keep track of watches on persistent storage, so they are preserved across cluster changes by the normal recovery process. Watches are automatically reestablished when a new connection is made, or a placement group switches OSDs.</p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p>0 on success, negative error code on failure </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">io</span></code>: the pool the object is in </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">o</span></code>: the object to watch </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cookie</span></code>: where to store the internal id assigned to this watch </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">watchcb</span></code>: what to do when a notify is received on this object </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">watcherrcb</span></code>: what to do when the watch session encounters an error </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">timeout</span></code>: how many seconds the connection will keep after disconnection </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">arg</span></code>: opaque value to pass to the callback </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="c.rados_aio_watch">
<span class="target" id="librados_8h_1ab1ba428538c4691804ebe7093f51d7cb"></span><a class="reference internal" href="#c.CEPH_RADOS_API" title="CEPH_RADOS_API">CEPH_RADOS_API</a> int <code class="sig-name descname">rados_aio_watch</code><span class="sig-paren">(</span><a class="reference internal" href="#c.rados_ioctx_t" title="rados_ioctx_t">rados_ioctx_t</a><em> io</em>, const char *<em> o</em>, <a class="reference internal" href="#c.rados_completion_t" title="rados_completion_t">rados_completion_t</a><em> completion</em>, uint64_t *<em> handle</em>, <a class="reference internal" href="#c.rados_watchcb2_t" title="rados_watchcb2_t">rados_watchcb2_t</a><em> watchcb</em>, <a class="reference internal" href="#c.rados_watcherrcb_t" title="rados_watcherrcb_t">rados_watcherrcb_t</a><em> watcherrcb</em>, void *<em> arg</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rados_aio_watch" title="Permalink to this definition">¶</a></dt>
<dd><p>Asynchronous register an interest in an object</p>
<p>A watch operation registers the client as being interested in notifications on an object. OSDs keep track of watches on persistent storage, so they are preserved across cluster changes by the normal recovery process. If the client loses its connection to the primary OSD for a watched object, the watch will be removed after 30 seconds. Watches are automatically reestablished when a new connection is made, or a placement group switches OSDs.</p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p>0 on success, negative error code on failure </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">io</span></code>: the pool the object is in </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">o</span></code>: the object to watch </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">completion</span></code>: what to do when operation has been attempted </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">handle</span></code>: where to store the internal id assigned to this watch </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">watchcb</span></code>: what to do when a notify is received on this object </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">watcherrcb</span></code>: what to do when the watch session encounters an error </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">arg</span></code>: opaque value to pass to the callback </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="c.rados_aio_watch2">
<span class="target" id="librados_8h_1a07bbf1c8c0fbdf8a1c3e5e5f6399649f"></span><a class="reference internal" href="#c.CEPH_RADOS_API" title="CEPH_RADOS_API">CEPH_RADOS_API</a> int <code class="sig-name descname">rados_aio_watch2</code><span class="sig-paren">(</span><a class="reference internal" href="#c.rados_ioctx_t" title="rados_ioctx_t">rados_ioctx_t</a><em> io</em>, const char *<em> o</em>, <a class="reference internal" href="#c.rados_completion_t" title="rados_completion_t">rados_completion_t</a><em> completion</em>, uint64_t *<em> handle</em>, <a class="reference internal" href="#c.rados_watchcb2_t" title="rados_watchcb2_t">rados_watchcb2_t</a><em> watchcb</em>, <a class="reference internal" href="#c.rados_watcherrcb_t" title="rados_watcherrcb_t">rados_watcherrcb_t</a><em> watcherrcb</em>, uint32_t<em> timeout</em>, void *<em> arg</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rados_aio_watch2" title="Permalink to this definition">¶</a></dt>
<dd><p>Asynchronous register an interest in an object</p>
<p>A watch operation registers the client as being interested in notifications on an object. OSDs keep track of watches on persistent storage, so they are preserved across cluster changes by the normal recovery process. If the client loses its connection to the primary OSD for a watched object, the watch will be removed after the number of seconds that configured in timeout parameter. Watches are automatically reestablished when a new connection is made, or a placement group switches OSDs.</p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p>0 on success, negative error code on failure </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">io</span></code>: the pool the object is in </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">o</span></code>: the object to watch </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">completion</span></code>: what to do when operation has been attempted </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">handle</span></code>: where to store the internal id assigned to this watch </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">watchcb</span></code>: what to do when a notify is received on this object </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">watcherrcb</span></code>: what to do when the watch session encounters an error </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">timeout</span></code>: how many seconds the connection will keep after disconnection </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">arg</span></code>: opaque value to pass to the callback </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="c.rados_watch_check">
<span class="target" id="librados_8h_1a41031bd4a4fe0515507bc62b12c7c34f"></span><a class="reference internal" href="#c.CEPH_RADOS_API" title="CEPH_RADOS_API">CEPH_RADOS_API</a> int <code class="sig-name descname">rados_watch_check</code><span class="sig-paren">(</span><a class="reference internal" href="#c.rados_ioctx_t" title="rados_ioctx_t">rados_ioctx_t</a><em> io</em>, uint64_t<em> cookie</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rados_watch_check" title="Permalink to this definition">¶</a></dt>
<dd><p>Check on the status of a watch</p>
<p>Return the number of milliseconds since the watch was last confirmed. Or, if there has been an error, return that.</p>
<p>If there is an error, the watch is no longer valid, and should be destroyed with rados_unwatch2(). The the user is still interested in the object, a new watch should be created with rados_watch2().</p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p>ms since last confirmed on success, negative error code on failure </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">io</span></code>: the pool the object is in </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cookie</span></code>: the watch handle </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="c.rados_unwatch">
<span class="target" id="librados_8h_1ad83de38adfb370d9e0aa11476a1d0fb2"></span><a class="reference internal" href="#c.CEPH_RADOS_API" title="CEPH_RADOS_API">CEPH_RADOS_API</a> int <code class="sig-name descname">rados_unwatch</code><span class="sig-paren">(</span><a class="reference internal" href="#c.rados_ioctx_t" title="rados_ioctx_t">rados_ioctx_t</a><em> io</em>, const char *<em> o</em>, uint64_t<em> cookie</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rados_unwatch" title="Permalink to this definition">¶</a></dt>
<dd><p>Unregister an interest in an object</p>
<p>Once this completes, no more notifies will be sent to us for this watch. This should be called to clean up unneeded watchers.</p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p>0 on success, negative error code on failure </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">io</span></code>: the pool the object is in </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">o</span></code>: the name of the watched object (ignored) </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cookie</span></code>: which watch to unregister </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="c.rados_unwatch2">
<span class="target" id="librados_8h_1af7468fc1e70070f2e306a6729e10a3ce"></span><a class="reference internal" href="#c.CEPH_RADOS_API" title="CEPH_RADOS_API">CEPH_RADOS_API</a> int <code class="sig-name descname">rados_unwatch2</code><span class="sig-paren">(</span><a class="reference internal" href="#c.rados_ioctx_t" title="rados_ioctx_t">rados_ioctx_t</a><em> io</em>, uint64_t<em> cookie</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rados_unwatch2" title="Permalink to this definition">¶</a></dt>
<dd><p>Unregister an interest in an object</p>
<p>Once this completes, no more notifies will be sent to us for this watch. This should be called to clean up unneeded watchers.</p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p>0 on success, negative error code on failure </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">io</span></code>: the pool the object is in </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cookie</span></code>: which watch to unregister </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="c.rados_aio_unwatch">
<span class="target" id="librados_8h_1a047a573922b6ab012401f52ce8b615f7"></span><a class="reference internal" href="#c.CEPH_RADOS_API" title="CEPH_RADOS_API">CEPH_RADOS_API</a> int <code class="sig-name descname">rados_aio_unwatch</code><span class="sig-paren">(</span><a class="reference internal" href="#c.rados_ioctx_t" title="rados_ioctx_t">rados_ioctx_t</a><em> io</em>, uint64_t<em> cookie</em>, <a class="reference internal" href="#c.rados_completion_t" title="rados_completion_t">rados_completion_t</a><em> completion</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rados_aio_unwatch" title="Permalink to this definition">¶</a></dt>
<dd><p>Asynchronous unregister an interest in an object</p>
<p>Once this completes, no more notifies will be sent to us for this watch. This should be called to clean up unneeded watchers.</p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p>0 on success, negative error code on failure </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">io</span></code>: the pool the object is in </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">completion</span></code>: what to do when operation has been attempted </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cookie</span></code>: which watch to unregister </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="c.rados_notify">
<span class="target" id="librados_8h_1ae3370754262b3593eb320c021782fb6c"></span><a class="reference internal" href="#c.CEPH_RADOS_API" title="CEPH_RADOS_API">CEPH_RADOS_API</a> int <code class="sig-name descname">rados_notify</code><span class="sig-paren">(</span><a class="reference internal" href="#c.rados_ioctx_t" title="rados_ioctx_t">rados_ioctx_t</a><em> io</em>, const char *<em> o</em>, uint64_t<em> ver</em>, const char *<em> buf</em>, int<em> buf_len</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rados_notify" title="Permalink to this definition">¶</a></dt>
<dd><p>Sychronously notify watchers of an object</p>
<p>This blocks until all watchers of the object have received and reacted to the notify, or a timeout is reached.</p>
<p><dl class="simple">
<dt><strong>Note</strong></dt><dd><p>BUG: the timeout is not changeable via the C API </p>
</dd>
<dt><strong>Note</strong></dt><dd><p>BUG: the bufferlist is inaccessible in a rados_watchcb_t</p>
</dd>
<dt><strong>Return</strong></dt><dd><p>0 on success, negative error code on failure </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">io</span></code>: the pool the object is in </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">o</span></code>: the name of the object </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ver</span></code>: obsolete - just pass zero </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">buf</span></code>: data to send to watchers </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">buf_len</span></code>: length of buf in bytes </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="c.rados_aio_notify">
<span class="target" id="librados_8h_1a0829ca833dc01940cf479be41126f9ba"></span><a class="reference internal" href="#c.CEPH_RADOS_API" title="CEPH_RADOS_API">CEPH_RADOS_API</a> int <code class="sig-name descname">rados_aio_notify</code><span class="sig-paren">(</span><a class="reference internal" href="#c.rados_ioctx_t" title="rados_ioctx_t">rados_ioctx_t</a><em> io</em>, const char *<em> o</em>, <a class="reference internal" href="#c.rados_completion_t" title="rados_completion_t">rados_completion_t</a><em> completion</em>, const char *<em> buf</em>, int<em> buf_len</em>, uint64_t<em> timeout_ms</em>, char **<em> reply_buffer</em>, size_t *<em> reply_buffer_len</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rados_aio_notify" title="Permalink to this definition">¶</a></dt>
<dd><p>Sychronously notify watchers of an object</p>
<p>This blocks until all watchers of the object have received and reacted to the notify, or a timeout is reached.</p>
<p>The reply buffer is optional. If specified, the client will get back an encoded buffer that includes the ids of the clients that acknowledged the notify as well as their notify ack payloads (if any). Clients that timed out are not included. Even clients that do not include a notify ack payload are included in the list but have a 0-length payload associated with them. The format:</p>
<p>le32 num_acks { le64 gid global id for the client (for client.1234 that’s 1234) le64 cookie cookie for the client le32 buflen length of reply message buffer u8 * buflen payload } * num_acks le32 num_timeouts { le64 gid global id for the client le64 cookie cookie for the client } * num_timeouts</p>
<p>Note: There may be multiple instances of the same gid if there are multiple watchers registered via the same client.</p>
<p>Note: The buffer must be released with rados_buffer_free() when the user is done with it.</p>
<p>Note: Since the result buffer includes clients that time out, it will be set even when rados_notify() returns an error code (like -ETIMEDOUT).</p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p>0 on success, negative error code on failure </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">io</span></code>: the pool the object is in </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">completion</span></code>: what to do when operation has been attempted </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">o</span></code>: the name of the object </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">buf</span></code>: data to send to watchers </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">buf_len</span></code>: length of buf in bytes </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">timeout_ms</span></code>: notify timeout (in ms) </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">reply_buffer</span></code>: pointer to reply buffer pointer (free with rados_buffer_free) </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">reply_buffer_len</span></code>: pointer to size of reply buffer </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="c.rados_notify2">
<span class="target" id="librados_8h_1ac14c542aeec3a5e5a2438f0e0fc511bd"></span><a class="reference internal" href="#c.CEPH_RADOS_API" title="CEPH_RADOS_API">CEPH_RADOS_API</a> int <code class="sig-name descname">rados_notify2</code><span class="sig-paren">(</span><a class="reference internal" href="#c.rados_ioctx_t" title="rados_ioctx_t">rados_ioctx_t</a><em> io</em>, const char *<em> o</em>, const char *<em> buf</em>, int<em> buf_len</em>, uint64_t<em> timeout_ms</em>, char **<em> reply_buffer</em>, size_t *<em> reply_buffer_len</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rados_notify2" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="c.rados_notify_ack">
<span class="target" id="librados_8h_1aa9190c17b299ea172324ecd2f82559f1"></span><a class="reference internal" href="#c.CEPH_RADOS_API" title="CEPH_RADOS_API">CEPH_RADOS_API</a> int <code class="sig-name descname">rados_notify_ack</code><span class="sig-paren">(</span><a class="reference internal" href="#c.rados_ioctx_t" title="rados_ioctx_t">rados_ioctx_t</a><em> io</em>, const char *<em> o</em>, uint64_t<em> notify_id</em>, uint64_t<em> cookie</em>, const char *<em> buf</em>, int<em> buf_len</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rados_notify_ack" title="Permalink to this definition">¶</a></dt>
<dd><p>Acknolwedge receipt of a notify</p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p>0 on success </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">io</span></code>: the pool the object is in </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">o</span></code>: the name of the object </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">notify_id</span></code>: the notify_id we got on the watchcb2_t callback </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cookie</span></code>: the watcher handle </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">buf</span></code>: payload to return to notifier (optional) </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">buf_len</span></code>: payload length </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="c.rados_watch_flush">
<span class="target" id="librados_8h_1a318a5626111fcebbc9133720a253003c"></span><a class="reference internal" href="#c.CEPH_RADOS_API" title="CEPH_RADOS_API">CEPH_RADOS_API</a> int <code class="sig-name descname">rados_watch_flush</code><span class="sig-paren">(</span><a class="reference internal" href="#c.rados_t" title="rados_t">rados_t</a><em> cluster</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rados_watch_flush" title="Permalink to this definition">¶</a></dt>
<dd><p>Flush watch/notify callbacks</p>
<p>This call will block until all pending watch/notify callbacks have been executed and the queue is empty. It should usually be called after shutting down any watches before shutting down the ioctx or librados to ensure that any callbacks do not misuse the ioctx (for example by calling rados_notify_ack after the ioctx has been destroyed).</p>
<p><dl class="simple">
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">cluster</span></code>: the cluster handle </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="c.rados_aio_watch_flush">
<span class="target" id="librados_8h_1a0d34fe0e1e9d4b5cbbbebf3796bb7547"></span><a class="reference internal" href="#c.CEPH_RADOS_API" title="CEPH_RADOS_API">CEPH_RADOS_API</a> int <code class="sig-name descname">rados_aio_watch_flush</code><span class="sig-paren">(</span><a class="reference internal" href="#c.rados_t" title="rados_t">rados_t</a><em> cluster</em>, <a class="reference internal" href="#c.rados_completion_t" title="rados_completion_t">rados_completion_t</a><em> completion</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rados_aio_watch_flush" title="Permalink to this definition">¶</a></dt>
<dd><p>Flush watch/notify callbacks</p>
<p>This call will be nonblock, and the completion will be called until all pending watch/notify callbacks have been executed and the queue is empty. It should usually be called after shutting down any watches before shutting down the ioctx or librados to ensure that any callbacks do not misuse the ioctx (for example by calling rados_notify_ack after the ioctx has been destroyed).</p>
<p><dl class="simple">
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">cluster</span></code>: the cluster handle </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">completion</span></code>: what to do when operation has been attempted </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric">Mon/OSD/PG Commands</p>
<p>These interfaces send commands relating to the monitor, OSD, or PGs. </p>
<dl class="typedef">
<dt id="c.rados_log_callback_t">
<span class="target" id="librados_8h_1ab4022414e832a8474f354826b71b9e59"></span><em class="property">typedef </em>void<code class="sig-name descname">(* rados_log_callback_t)</code><span class="sig-paren">(</span>void<em> *arg</em>, const char<em> *line</em>, const char<em> *who</em>, uint64_t<em> sec</em>, uint64_t<em> nsec</em>, uint64_t<em> seq</em>, const char<em> *level</em>, const char<em> *msg</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rados_log_callback_t" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="typedef">
<dt id="c.rados_log_callback2_t">
<span class="target" id="librados_8h_1a28a8c7f459154f6f705b2d0f44f094d2"></span><em class="property">typedef </em>void<code class="sig-name descname">(* rados_log_callback2_t)</code><span class="sig-paren">(</span>void<em> *arg</em>, const char<em> *line</em>, const char<em> *channel</em>, const char<em> *who</em>, const char<em> *name</em>, uint64_t<em> sec</em>, uint64_t<em> nsec</em>, uint64_t<em> seq</em>, const char<em> *level</em>, const char<em> *msg</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rados_log_callback2_t" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="c.rados_mon_command">
<span class="target" id="librados_8h_1aa99ad43fce68696b2ef3710436807c70"></span><a class="reference internal" href="#c.CEPH_RADOS_API" title="CEPH_RADOS_API">CEPH_RADOS_API</a> int <code class="sig-name descname">rados_mon_command</code><span class="sig-paren">(</span><a class="reference internal" href="#c.rados_t" title="rados_t">rados_t</a><em> cluster</em>, const char **<em> cmd</em>, size_t<em> cmdlen</em>, const char *<em> inbuf</em>, size_t<em> inbuflen</em>, char **<em> outbuf</em>, size_t *<em> outbuflen</em>, char **<em> outs</em>, size_t *<em> outslen</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rados_mon_command" title="Permalink to this definition">¶</a></dt>
<dd><p>Send monitor command.</p>
<p><p>The result buffers are allocated on the heap; the caller is expected to release that memory with rados_buffer_free(). The buffer and length pointers can all be NULL, in which case they are not filled in.</p>
<dl class="simple">
<dt><strong>Note</strong></dt><dd><p>Takes command string in carefully-formatted JSON; must match defined commands, types, etc.</p>
</dd>
</dl>
</p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p>0 on success, negative error code on failure </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">cluster</span></code>: cluster handle </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cmd</span></code>: an array of char *’s representing the command </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cmdlen</span></code>: count of valid entries in cmd </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">inbuf</span></code>: any bulk input data (crush map, etc.) </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">inbuflen</span></code>: input buffer length </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">outbuf</span></code>: double pointer to output buffer </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">outbuflen</span></code>: pointer to output buffer length </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">outs</span></code>: double pointer to status string </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">outslen</span></code>: pointer to status string length </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="c.rados_mgr_command">
<span class="target" id="librados_8h_1adb3dc8b50a7de27fdc3cfe8df406605a"></span><a class="reference internal" href="#c.CEPH_RADOS_API" title="CEPH_RADOS_API">CEPH_RADOS_API</a> int <code class="sig-name descname">rados_mgr_command</code><span class="sig-paren">(</span><a class="reference internal" href="#c.rados_t" title="rados_t">rados_t</a><em> cluster</em>, const char **<em> cmd</em>, size_t<em> cmdlen</em>, const char *<em> inbuf</em>, size_t<em> inbuflen</em>, char **<em> outbuf</em>, size_t *<em> outbuflen</em>, char **<em> outs</em>, size_t *<em> outslen</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rados_mgr_command" title="Permalink to this definition">¶</a></dt>
<dd><p>Send ceph-mgr command.</p>
<p><p>The result buffers are allocated on the heap; the caller is expected to release that memory with rados_buffer_free(). The buffer and length pointers can all be NULL, in which case they are not filled in.</p>
<dl class="simple">
<dt><strong>Note</strong></dt><dd><p>Takes command string in carefully-formatted JSON; must match defined commands, types, etc.</p>
</dd>
</dl>
</p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p>0 on success, negative error code on failure </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">cluster</span></code>: cluster handle </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cmd</span></code>: an array of char *’s representing the command </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cmdlen</span></code>: count of valid entries in cmd </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">inbuf</span></code>: any bulk input data (crush map, etc.) </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">inbuflen</span></code>: input buffer length </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">outbuf</span></code>: double pointer to output buffer </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">outbuflen</span></code>: pointer to output buffer length </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">outs</span></code>: double pointer to status string </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">outslen</span></code>: pointer to status string length </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="c.rados_mgr_command_target">
<span class="target" id="librados_8h_1a9921c3cb74cba99dfc4100bf433f7ddd"></span><a class="reference internal" href="#c.CEPH_RADOS_API" title="CEPH_RADOS_API">CEPH_RADOS_API</a> int <code class="sig-name descname">rados_mgr_command_target</code><span class="sig-paren">(</span><a class="reference internal" href="#c.rados_t" title="rados_t">rados_t</a><em> cluster</em>, const char *<em> name</em>, const char **<em> cmd</em>, size_t<em> cmdlen</em>, const char *<em> inbuf</em>, size_t<em> inbuflen</em>, char **<em> outbuf</em>, size_t *<em> outbuflen</em>, char **<em> outs</em>, size_t *<em> outslen</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rados_mgr_command_target" title="Permalink to this definition">¶</a></dt>
<dd><p>Send ceph-mgr tell command.</p>
<p><p>The result buffers are allocated on the heap; the caller is expected to release that memory with rados_buffer_free(). The buffer and length pointers can all be NULL, in which case they are not filled in.</p>
<dl class="simple">
<dt><strong>Note</strong></dt><dd><p>Takes command string in carefully-formatted JSON; must match defined commands, types, etc.</p>
</dd>
</dl>
</p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p>0 on success, negative error code on failure </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">cluster</span></code>: cluster handle </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">name</span></code>: mgr name to target </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cmd</span></code>: an array of char *’s representing the command </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cmdlen</span></code>: count of valid entries in cmd </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">inbuf</span></code>: any bulk input data (crush map, etc.) </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">inbuflen</span></code>: input buffer length </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">outbuf</span></code>: double pointer to output buffer </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">outbuflen</span></code>: pointer to output buffer length </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">outs</span></code>: double pointer to status string </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">outslen</span></code>: pointer to status string length </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="c.rados_mon_command_target">
<span class="target" id="librados_8h_1a6e3012a57bd3f377b2cc85be6aacb940"></span><a class="reference internal" href="#c.CEPH_RADOS_API" title="CEPH_RADOS_API">CEPH_RADOS_API</a> int <code class="sig-name descname">rados_mon_command_target</code><span class="sig-paren">(</span><a class="reference internal" href="#c.rados_t" title="rados_t">rados_t</a><em> cluster</em>, const char *<em> name</em>, const char **<em> cmd</em>, size_t<em> cmdlen</em>, const char *<em> inbuf</em>, size_t<em> inbuflen</em>, char **<em> outbuf</em>, size_t *<em> outbuflen</em>, char **<em> outs</em>, size_t *<em> outslen</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rados_mon_command_target" title="Permalink to this definition">¶</a></dt>
<dd><p>Send monitor command to a specific monitor.</p>
<p><p>The result buffers are allocated on the heap; the caller is expected to release that memory with rados_buffer_free(). The buffer and length pointers can all be NULL, in which case they are not filled in.</p>
<dl class="simple">
<dt><strong>Note</strong></dt><dd><p>Takes command string in carefully-formatted JSON; must match defined commands, types, etc.</p>
</dd>
</dl>
</p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p>0 on success, negative error code on failure </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">cluster</span></code>: cluster handle </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">name</span></code>: target monitor’s name </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cmd</span></code>: an array of char *’s representing the command </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cmdlen</span></code>: count of valid entries in cmd </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">inbuf</span></code>: any bulk input data (crush map, etc.) </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">inbuflen</span></code>: input buffer length </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">outbuf</span></code>: double pointer to output buffer </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">outbuflen</span></code>: pointer to output buffer length </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">outs</span></code>: double pointer to status string </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">outslen</span></code>: pointer to status string length </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="c.rados_buffer_free">
<span class="target" id="librados_8h_1ae9e2a3c60e90c9a6ffee2b375323277e"></span><a class="reference internal" href="#c.CEPH_RADOS_API" title="CEPH_RADOS_API">CEPH_RADOS_API</a> void <code class="sig-name descname">rados_buffer_free</code><span class="sig-paren">(</span>char *<em> buf</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rados_buffer_free" title="Permalink to this definition">¶</a></dt>
<dd><p>free a rados-allocated buffer</p>
<p>Release memory allocated by librados calls like rados_mon_command().</p>
<p><dl class="simple">
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">buf</span></code>: buffer pointer </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="c.rados_osd_command">
<span class="target" id="librados_8h_1ac4f964d0905d7fa0e4706472b1b32ece"></span><a class="reference internal" href="#c.CEPH_RADOS_API" title="CEPH_RADOS_API">CEPH_RADOS_API</a> int <code class="sig-name descname">rados_osd_command</code><span class="sig-paren">(</span><a class="reference internal" href="#c.rados_t" title="rados_t">rados_t</a><em> cluster</em>, int<em> osdid</em>, const char **<em> cmd</em>, size_t<em> cmdlen</em>, const char *<em> inbuf</em>, size_t<em> inbuflen</em>, char **<em> outbuf</em>, size_t *<em> outbuflen</em>, char **<em> outs</em>, size_t *<em> outslen</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rados_osd_command" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="c.rados_pg_command">
<span class="target" id="librados_8h_1ae5f01307bed3525328794aefaa1ed0bf"></span><a class="reference internal" href="#c.CEPH_RADOS_API" title="CEPH_RADOS_API">CEPH_RADOS_API</a> int <code class="sig-name descname">rados_pg_command</code><span class="sig-paren">(</span><a class="reference internal" href="#c.rados_t" title="rados_t">rados_t</a><em> cluster</em>, const char *<em> pgstr</em>, const char **<em> cmd</em>, size_t<em> cmdlen</em>, const char *<em> inbuf</em>, size_t<em> inbuflen</em>, char **<em> outbuf</em>, size_t *<em> outbuflen</em>, char **<em> outs</em>, size_t *<em> outslen</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rados_pg_command" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="c.rados_monitor_log">
<span class="target" id="librados_8h_1a1347de47c1844df177a3e96388e57843"></span><a class="reference internal" href="#c.CEPH_RADOS_API" title="CEPH_RADOS_API">CEPH_RADOS_API</a> int <code class="sig-name descname">rados_monitor_log</code><span class="sig-paren">(</span><a class="reference internal" href="#c.rados_t" title="rados_t">rados_t</a><em> cluster</em>, const char *<em> level</em>, <a class="reference internal" href="#c.rados_log_callback_t" title="rados_log_callback_t">rados_log_callback_t</a><em> cb</em>, void *<em> arg</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rados_monitor_log" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="c.rados_monitor_log2">
<span class="target" id="librados_8h_1ace67317b26a3bde6bb991942a55c8d03"></span><a class="reference internal" href="#c.CEPH_RADOS_API" title="CEPH_RADOS_API">CEPH_RADOS_API</a> int <code class="sig-name descname">rados_monitor_log2</code><span class="sig-paren">(</span><a class="reference internal" href="#c.rados_t" title="rados_t">rados_t</a><em> cluster</em>, const char *<em> level</em>, <a class="reference internal" href="#c.rados_log_callback2_t" title="rados_log_callback2_t">rados_log_callback2_t</a><em> cb</em>, void *<em> arg</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rados_monitor_log2" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="c.rados_service_register">
<span class="target" id="librados_8h_1aa278b52c652ae3c6ac9b1c11a6872b40"></span><a class="reference internal" href="#c.CEPH_RADOS_API" title="CEPH_RADOS_API">CEPH_RADOS_API</a> int <code class="sig-name descname">rados_service_register</code><span class="sig-paren">(</span><a class="reference internal" href="#c.rados_t" title="rados_t">rados_t</a><em> cluster</em>, const char *<em> service</em>, const char *<em> daemon</em>, const char *<em> metadata_dict</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rados_service_register" title="Permalink to this definition">¶</a></dt>
<dd><p>register daemon instance for a service</p>
<p>Register us as a daemon providing a particular service. We identify the service (e.g., ‘rgw’) and our instance name (e.g., ‘rgw.$hostname’). The metadata is a map of keys and values with arbitrary static metdata for this instance. The encoding is a series of NULL-terminated strings, alternating key names and values, terminating with an empty key name. For example, “foo\0bar\0this\0that\0\0” is the dict {foo=bar,this=that}.</p>
<p>For the lifetime of the librados instance, regular beacons will be sent to the cluster to maintain our registration in the service map.</p>
<p><dl class="simple">
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">cluster</span></code>: handle </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">service</span></code>: service name </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">daemon</span></code>: daemon instance name </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">metadata_dict</span></code>: static daemon metadata dict </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="c.rados_service_update_status">
<span class="target" id="librados_8h_1a99e8b68c51a17623df10cb16599d93e7"></span><a class="reference internal" href="#c.CEPH_RADOS_API" title="CEPH_RADOS_API">CEPH_RADOS_API</a> int <code class="sig-name descname">rados_service_update_status</code><span class="sig-paren">(</span><a class="reference internal" href="#c.rados_t" title="rados_t">rados_t</a><em> cluster</em>, const char *<em> status_dict</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rados_service_update_status" title="Permalink to this definition">¶</a></dt>
<dd><p>update daemon status</p>
<p>Update our mutable status information in the service map.</p>
<p>The status dict is encoded the same way the daemon metadata is encoded for rados_service_register. For example, “foo\0bar\0this\0that\0\0” is {foo=bar,this=that}.</p>
<p><dl class="simple">
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">cluster</span></code>: rados cluster handle </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">status_dict</span></code>: status dict </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric">Setup and Teardown</p>
<p>These are the first and last functions to that should be called when using librados. </p>
<dl class="function">
<dt id="c.rados_create">
<span class="target" id="librados_8h_1aa9742cf78cb317220fd7d88bfa4c4fe1"></span><a class="reference internal" href="#c.CEPH_RADOS_API" title="CEPH_RADOS_API">CEPH_RADOS_API</a> int <code class="sig-name descname">rados_create</code><span class="sig-paren">(</span><a class="reference internal" href="#c.rados_t" title="rados_t">rados_t</a> *<em> cluster</em>, const char *const<em> id</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rados_create" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a handle for communicating with a RADOS cluster.</p>
<p>Ceph environment variables are read when this is called, so if $CEPH_ARGS specifies everything you need to connect, no further configuration is necessary.</p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p>0 on success, negative error code on failure </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">cluster</span></code>: where to store the handle </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">id</span></code>: the user to connect as (i.e. admin, not client.admin) </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="c.rados_create2">
<span class="target" id="librados_8h_1a1bca04c057fb4c8c1dea33d78aa1f4c8"></span><a class="reference internal" href="#c.CEPH_RADOS_API" title="CEPH_RADOS_API">CEPH_RADOS_API</a> int <code class="sig-name descname">rados_create2</code><span class="sig-paren">(</span><a class="reference internal" href="#c.rados_t" title="rados_t">rados_t</a> *<em> pcluster</em>, const char *const<em> clustername</em>, const char *const<em> name</em>, uint64_t<em> flags</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rados_create2" title="Permalink to this definition">¶</a></dt>
<dd><p>Extended version of rados_create.</p>
<p>Like rados_create, but 1) don’t assume ‘client.’+id; allow full specification of name 2) allow specification of cluster name 3) flags for future expansion </p>
</dd></dl>

<dl class="function">
<dt id="c.rados_create_with_context">
<span class="target" id="librados_8h_1af60d8e0acb6e3220642dc1a9c0254fd6"></span><a class="reference internal" href="#c.CEPH_RADOS_API" title="CEPH_RADOS_API">CEPH_RADOS_API</a> int <code class="sig-name descname">rados_create_with_context</code><span class="sig-paren">(</span><a class="reference internal" href="#c.rados_t" title="rados_t">rados_t</a> *<em> cluster</em>, <a class="reference internal" href="#c.rados_config_t" title="rados_config_t">rados_config_t</a><em> cct</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rados_create_with_context" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize a cluster handle from an existing configuration.</p>
<p>Share configuration state with another rados_t instance.</p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p>0 on success, negative error code on failure </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">cluster</span></code>: where to store the handle </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cct</span></code>: the existing configuration to use </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="c.rados_ping_monitor">
<span class="target" id="librados_8h_1a61b0803b9e25117e18da841af05bedd2"></span><a class="reference internal" href="#c.CEPH_RADOS_API" title="CEPH_RADOS_API">CEPH_RADOS_API</a> int <code class="sig-name descname">rados_ping_monitor</code><span class="sig-paren">(</span><a class="reference internal" href="#c.rados_t" title="rados_t">rados_t</a><em> cluster</em>, const char *<em> mon_id</em>, char **<em> outstr</em>, size_t *<em> outstrlen</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rados_ping_monitor" title="Permalink to this definition">¶</a></dt>
<dd><p>Ping the monitor with ID mon_id, storing the resulting reply in buf (if specified) with a maximum size of len.</p>
<p>The result buffer is allocated on the heap; the caller is expected to release that memory with rados_buffer_free(). The buffer and length pointers can be NULL, in which case they are not filled in.</p>
<p><dl class="simple">
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">cluster</span></code>: cluster handle </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">[in]</span> <span class="pre">mon_id</span></code>: ID of the monitor to ping </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">[out]</span> <span class="pre">outstr</span></code>: double pointer with the resulting reply </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">[out]</span> <span class="pre">outstrlen</span></code>: pointer with the size of the reply in outstr </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="c.rados_connect">
<span class="target" id="librados_8h_1a4176493c4660ee4e575351b27f1e5716"></span><a class="reference internal" href="#c.CEPH_RADOS_API" title="CEPH_RADOS_API">CEPH_RADOS_API</a> int <code class="sig-name descname">rados_connect</code><span class="sig-paren">(</span><a class="reference internal" href="#c.rados_t" title="rados_t">rados_t</a><em> cluster</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rados_connect" title="Permalink to this definition">¶</a></dt>
<dd><p>Connect to the cluster.</p>
<p><dl class="simple">
<dt><strong>Note</strong></dt><dd><p>BUG: Before calling this, calling a function that communicates with the cluster will crash.</p>
</dd>
<dt><strong>Pre</strong></dt><dd><p>The cluster handle is configured with at least a monitor address. If cephx is enabled, a client name and secret must also be set.</p>
</dd>
<dt><strong>Post</strong></dt><dd><p>If this succeeds, any function in librados may be used</p>
</dd>
<dt><strong>Return</strong></dt><dd><p>0 on success, negative error code on failure </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">cluster</span></code>: The cluster to connect to. </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="c.rados_shutdown">
<span class="target" id="librados_8h_1a4c22ecfd1a92786498dc8813e6b87d4b"></span><a class="reference internal" href="#c.CEPH_RADOS_API" title="CEPH_RADOS_API">CEPH_RADOS_API</a> void <code class="sig-name descname">rados_shutdown</code><span class="sig-paren">(</span><a class="reference internal" href="#c.rados_t" title="rados_t">rados_t</a><em> cluster</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rados_shutdown" title="Permalink to this definition">¶</a></dt>
<dd><p>Disconnects from the cluster.</p>
<p>For clean up, this is only necessary after rados_connect() has succeeded.</p>
<p><dl class="simple">
<dt><strong>Warning</strong></dt><dd><p>This does not guarantee any asynchronous writes have completed. To do that, you must call rados_aio_flush() on all open io contexts.</p>
</dd>
<dt><strong>Warning</strong></dt><dd><p>We implicitly call rados_watch_flush() on shutdown. If there are watches being used, this should be done explicitly before destroying the relevant IoCtx. We do it here as a safety measure.</p>
</dd>
<dt><strong>Post</strong></dt><dd><p>the cluster handle cannot be used again</p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">cluster</span></code>: the cluster to shutdown </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric">Configuration</p>
<p>These functions read and update Ceph configuration for a cluster handle. Any configuration changes must be done before connecting to the cluster.</p>
<p>Options that librados users might want to set include:<ul class="simple">
<li><p>mon_host</p></li>
<li><p>auth_supported</p></li>
<li><p>key, keyfile, or keyring when using cephx</p></li>
<li><p>log_file, log_to_stderr, err_to_stderr, and log_to_syslog</p></li>
<li><p>debug_rados, debug_objecter, debug_monc, debug_auth, or debug_ms</p></li>
</ul>
</p>
<p>See docs.ceph.com for information about available configuration options` </p>
<dl class="function">
<dt id="c.rados_conf_read_file">
<span class="target" id="librados_8h_1a5170b2ff56c95ee659d296ffcaa93850"></span><a class="reference internal" href="#c.CEPH_RADOS_API" title="CEPH_RADOS_API">CEPH_RADOS_API</a> int <code class="sig-name descname">rados_conf_read_file</code><span class="sig-paren">(</span><a class="reference internal" href="#c.rados_t" title="rados_t">rados_t</a><em> cluster</em>, const char *<em> path</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rados_conf_read_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Configure the cluster handle using a Ceph config file</p>
<p>If path is NULL, the default locations are searched, and the first found is used. The locations are:<ul class="simple">
<li><p>$CEPH_CONF (environment variable)</p></li>
<li><p>/etc/ceph/ceph.conf</p></li>
<li><p>~/.ceph/config</p></li>
<li><p>ceph.conf (in the current working directory)</p></li>
</ul>
</p>
<p><dl class="simple">
<dt><strong>Pre</strong></dt><dd><p>rados_connect() has not been called on the cluster handle</p>
</dd>
<dt><strong>Return</strong></dt><dd><p>0 on success, negative error code on failure </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">cluster</span></code>: cluster handle to configure </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">path</span></code>: path to a Ceph configuration file </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="c.rados_conf_parse_argv">
<span class="target" id="librados_8h_1a2db871e5def16fffe89cfa6a15d15c7d"></span><a class="reference internal" href="#c.CEPH_RADOS_API" title="CEPH_RADOS_API">CEPH_RADOS_API</a> int <code class="sig-name descname">rados_conf_parse_argv</code><span class="sig-paren">(</span><a class="reference internal" href="#c.rados_t" title="rados_t">rados_t</a><em> cluster</em>, int<em> argc</em>, const char **<em> argv</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rados_conf_parse_argv" title="Permalink to this definition">¶</a></dt>
<dd><p>Configure the cluster handle with command line arguments</p>
<p>argv can contain any common Ceph command line option, including any configuration parameter prefixed by ‘’ and replacing spaces with dashes or underscores. For example, the following options are equivalent:<ul class="simple">
<li><p>mon-host 10.0.0.1:6789</p></li>
<li><p>mon_host 10.0.0.1:6789</p></li>
<li><p>-m 10.0.0.1:6789</p></li>
</ul>
</p>
<p><dl class="simple">
<dt><strong>Pre</strong></dt><dd><p>rados_connect() has not been called on the cluster handle</p>
</dd>
<dt><strong>Return</strong></dt><dd><p>0 on success, negative error code on failure </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">cluster</span></code>: cluster handle to configure </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">argc</span></code>: number of arguments in argv </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">argv</span></code>: arguments to parse </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="c.rados_conf_parse_argv_remainder">
<span class="target" id="librados_8h_1a4b940f3adbd61b9bfc61c70180f99a2a"></span><a class="reference internal" href="#c.CEPH_RADOS_API" title="CEPH_RADOS_API">CEPH_RADOS_API</a> int <code class="sig-name descname">rados_conf_parse_argv_remainder</code><span class="sig-paren">(</span><a class="reference internal" href="#c.rados_t" title="rados_t">rados_t</a><em> cluster</em>, int<em> argc</em>, const char **<em> argv</em>, const char **<em> remargv</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rados_conf_parse_argv_remainder" title="Permalink to this definition">¶</a></dt>
<dd><p>Configure the cluster handle with command line arguments, returning any remainders. Same rados_conf_parse_argv, except for extra remargv argument to hold returns unrecognized arguments.</p>
<p><dl class="simple">
<dt><strong>Pre</strong></dt><dd><p>rados_connect() has not been called on the cluster handle</p>
</dd>
<dt><strong>Return</strong></dt><dd><p>0 on success, negative error code on failure </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">cluster</span></code>: cluster handle to configure </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">argc</span></code>: number of arguments in argv </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">argv</span></code>: arguments to parse </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">remargv</span></code>: char* array for returned unrecognized arguments </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="c.rados_conf_parse_env">
<span class="target" id="librados_8h_1a8d01404bf97ef89f6e8b71253cf387fa"></span><a class="reference internal" href="#c.CEPH_RADOS_API" title="CEPH_RADOS_API">CEPH_RADOS_API</a> int <code class="sig-name descname">rados_conf_parse_env</code><span class="sig-paren">(</span><a class="reference internal" href="#c.rados_t" title="rados_t">rados_t</a><em> cluster</em>, const char *<em> var</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rados_conf_parse_env" title="Permalink to this definition">¶</a></dt>
<dd><p>Configure the cluster handle based on an environment variable</p>
<p>The contents of the environment variable are parsed as if they were Ceph command line options. If var is NULL, the CEPH_ARGS environment variable is used.</p>
<p><dl class="simple">
<dt><strong>Pre</strong></dt><dd><p>rados_connect() has not been called on the cluster handle</p>
</dd>
<dt><strong>Note</strong></dt><dd><p>BUG: this is not threadsafe - it uses a static buffer</p>
</dd>
<dt><strong>Return</strong></dt><dd><p>0 on success, negative error code on failure </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">cluster</span></code>: cluster handle to configure </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">var</span></code>: name of the environment variable to read </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="c.rados_conf_set">
<span class="target" id="librados_8h_1a668b1ea063260d532866f840d3acac9a"></span><a class="reference internal" href="#c.CEPH_RADOS_API" title="CEPH_RADOS_API">CEPH_RADOS_API</a> int <code class="sig-name descname">rados_conf_set</code><span class="sig-paren">(</span><a class="reference internal" href="#c.rados_t" title="rados_t">rados_t</a><em> cluster</em>, const char *<em> option</em>, const char *<em> value</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rados_conf_set" title="Permalink to this definition">¶</a></dt>
<dd><p>Set a configuration option</p>
<p><dl class="simple">
<dt><strong>Pre</strong></dt><dd><p>rados_connect() has not been called on the cluster handle</p>
</dd>
<dt><strong>Return</strong></dt><dd><p>0 on success, negative error code on failure </p>
</dd>
<dt><strong>Return</strong></dt><dd><p>-ENOENT when the option is not a Ceph configuration option </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">cluster</span></code>: cluster handle to configure </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">option</span></code>: option to set </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">value</span></code>: value of the option </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="c.rados_conf_get">
<span class="target" id="librados_8h_1abfc74223915b1454cae8052255502d52"></span><a class="reference internal" href="#c.CEPH_RADOS_API" title="CEPH_RADOS_API">CEPH_RADOS_API</a> int <code class="sig-name descname">rados_conf_get</code><span class="sig-paren">(</span><a class="reference internal" href="#c.rados_t" title="rados_t">rados_t</a><em> cluster</em>, const char *<em> option</em>, char *<em> buf</em>, size_t<em> len</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rados_conf_get" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the value of a configuration option</p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p>0 on success, negative error code on failure </p>
</dd>
<dt><strong>Return</strong></dt><dd><p>-ENAMETOOLONG if the buffer is too short to contain the requested value </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">cluster</span></code>: configuration to read </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">option</span></code>: which option to read </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">buf</span></code>: where to write the configuration value </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">len</span></code>: the size of buf in bytes </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric">Pools</p>
<p>RADOS pools are separate namespaces for objects. Pools may have different crush rules associated with them, so they could have differing replication levels or placement strategies. RADOS permissions are also tied to pools - users can have different read, write, and execute permissions on a per-pool basis. </p>
<dl class="function">
<dt id="c.rados_pool_list">
<span class="target" id="librados_8h_1a7c704b5329e2fbbbcb4707f3b9eb645e"></span><a class="reference internal" href="#c.CEPH_RADOS_API" title="CEPH_RADOS_API">CEPH_RADOS_API</a> int <code class="sig-name descname">rados_pool_list</code><span class="sig-paren">(</span><a class="reference internal" href="#c.rados_t" title="rados_t">rados_t</a><em> cluster</em>, char *<em> buf</em>, size_t<em> len</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rados_pool_list" title="Permalink to this definition">¶</a></dt>
<dd><p>List pools</p>
<p>Gets a list of pool names as NULL-terminated strings. The pool names will be placed in the supplied buffer one after another. After the last pool name, there will be two 0 bytes in a row.</p>
<p>If len is too short to fit all the pool name entries we need, we will fill as much as we can.</p>
<p>Buf may be null to determine the buffer size needed to list all pools.</p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p>length of the buffer we would need to list all pools </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">cluster</span></code>: cluster handle </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">buf</span></code>: output buffer </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">len</span></code>: output buffer length </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="c.rados_inconsistent_pg_list">
<span class="target" id="librados_8h_1a69386d14d9c01818c36118d6fc1862b2"></span><a class="reference internal" href="#c.CEPH_RADOS_API" title="CEPH_RADOS_API">CEPH_RADOS_API</a> int <code class="sig-name descname">rados_inconsistent_pg_list</code><span class="sig-paren">(</span><a class="reference internal" href="#c.rados_t" title="rados_t">rados_t</a><em> cluster</em>, int64_t<em> pool</em>, char *<em> buf</em>, size_t<em> len</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rados_inconsistent_pg_list" title="Permalink to this definition">¶</a></dt>
<dd><p>List inconsistent placement groups of the given pool</p>
<p>Gets a list of inconsistent placement groups as NULL-terminated strings. The placement group names will be placed in the supplied buffer one after another. After the last name, there will be two 0 types in a row.</p>
<p>If len is too short to fit all the placement group entries we need, we will fill as much as we can.</p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p>length of the buffer we would need to list all pools </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">cluster</span></code>: cluster handle </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pool</span></code>: pool ID </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">buf</span></code>: output buffer </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">len</span></code>: output buffer length </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="c.rados_cct">
<span class="target" id="librados_8h_1ad187e4b926e52afb36ae11d0e13c4ead"></span><a class="reference internal" href="#c.CEPH_RADOS_API" title="CEPH_RADOS_API">CEPH_RADOS_API</a> <a class="reference internal" href="#c.rados_config_t" title="rados_config_t">rados_config_t</a> <code class="sig-name descname">rados_cct</code><span class="sig-paren">(</span><a class="reference internal" href="#c.rados_t" title="rados_t">rados_t</a><em> cluster</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rados_cct" title="Permalink to this definition">¶</a></dt>
<dd><p>Get a configuration handle for a rados cluster handle</p>
<p>This handle is valid only as long as the cluster handle is valid.</p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p>config handle for this cluster </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">cluster</span></code>: cluster handle </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="c.rados_get_instance_id">
<span class="target" id="librados_8h_1a3822759cc115c7c765e079a9d641a799"></span><a class="reference internal" href="#c.CEPH_RADOS_API" title="CEPH_RADOS_API">CEPH_RADOS_API</a> uint64_t <code class="sig-name descname">rados_get_instance_id</code><span class="sig-paren">(</span><a class="reference internal" href="#c.rados_t" title="rados_t">rados_t</a><em> cluster</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rados_get_instance_id" title="Permalink to this definition">¶</a></dt>
<dd><p>Get a global id for current instance</p>
<p>This id is a unique representation of current connection to the cluster</p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p>instance global id </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">cluster</span></code>: cluster handle </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="c.rados_get_min_compatible_osd">
<span class="target" id="librados_8h_1a79bcc56c6c3b10a64c86cb99f9c0e248"></span><a class="reference internal" href="#c.CEPH_RADOS_API" title="CEPH_RADOS_API">CEPH_RADOS_API</a> int <code class="sig-name descname">rados_get_min_compatible_osd</code><span class="sig-paren">(</span><a class="reference internal" href="#c.rados_t" title="rados_t">rados_t</a><em> cluster</em>, int8_t *<em> require_osd_release</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rados_get_min_compatible_osd" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets the minimum compatible OSD version</p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p>0 on sucess, negative error code on failure </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">cluster</span></code>: cluster handle </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">[out]</span> <span class="pre">require_osd_release</span></code>: minimum compatible OSD version based upon the current features </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="c.rados_get_min_compatible_client">
<span class="target" id="librados_8h_1aaaddb309976d8321909ac7bb8b7f9c6e"></span><a class="reference internal" href="#c.CEPH_RADOS_API" title="CEPH_RADOS_API">CEPH_RADOS_API</a> int <code class="sig-name descname">rados_get_min_compatible_client</code><span class="sig-paren">(</span><a class="reference internal" href="#c.rados_t" title="rados_t">rados_t</a><em> cluster</em>, int8_t *<em> min_compat_client</em>, int8_t *<em> require_min_compat_client</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rados_get_min_compatible_client" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets the minimum compatible client version</p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p>0 on success, negative error code on failure </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">cluster</span></code>: cluster handle </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">[out]</span> <span class="pre">min_compat_client</span></code>: minimum compatible client version based upon the current features </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">[out]</span> <span class="pre">require_min_compat_client</span></code>: required minimum client version based upon explicit setting </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="c.rados_ioctx_create">
<span class="target" id="librados_8h_1ac24160ffe35b9ace2e2e331ae4090681"></span><a class="reference internal" href="#c.CEPH_RADOS_API" title="CEPH_RADOS_API">CEPH_RADOS_API</a> int <code class="sig-name descname">rados_ioctx_create</code><span class="sig-paren">(</span><a class="reference internal" href="#c.rados_t" title="rados_t">rados_t</a><em> cluster</em>, const char *<em> pool_name</em>, <a class="reference internal" href="#c.rados_ioctx_t" title="rados_ioctx_t">rados_ioctx_t</a> *<em> ioctx</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rados_ioctx_create" title="Permalink to this definition">¶</a></dt>
<dd><p>Create an io context</p>
<p>The io context allows you to perform operations within a particular pool. For more details see rados_ioctx_t.</p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p>0 on success, negative error code on failure </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">cluster</span></code>: which cluster the pool is in </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pool_name</span></code>: name of the pool </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ioctx</span></code>: where to store the io context </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="c.rados_ioctx_create2">
<span class="target" id="librados_8h_1af2a155a7adb7612397b702497bbdc3a5"></span><a class="reference internal" href="#c.CEPH_RADOS_API" title="CEPH_RADOS_API">CEPH_RADOS_API</a> int <code class="sig-name descname">rados_ioctx_create2</code><span class="sig-paren">(</span><a class="reference internal" href="#c.rados_t" title="rados_t">rados_t</a><em> cluster</em>, int64_t<em> pool_id</em>, <a class="reference internal" href="#c.rados_ioctx_t" title="rados_ioctx_t">rados_ioctx_t</a> *<em> ioctx</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rados_ioctx_create2" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="c.rados_ioctx_destroy">
<span class="target" id="librados_8h_1a3f705343b9053c2524465a72c4bdc861"></span><a class="reference internal" href="#c.CEPH_RADOS_API" title="CEPH_RADOS_API">CEPH_RADOS_API</a> void <code class="sig-name descname">rados_ioctx_destroy</code><span class="sig-paren">(</span><a class="reference internal" href="#c.rados_ioctx_t" title="rados_ioctx_t">rados_ioctx_t</a><em> io</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rados_ioctx_destroy" title="Permalink to this definition">¶</a></dt>
<dd><p>The opposite of rados_ioctx_create</p>
<p>This just tells librados that you no longer need to use the io context. It may not be freed immediately if there are pending asynchronous requests on it, but you should not use an io context again after calling this function on it.</p>
<p><dl class="simple">
<dt><strong>Warning</strong></dt><dd><p>This does not guarantee any asynchronous writes have completed. You must call rados_aio_flush() on the io context before destroying it to do that.</p>
</dd>
<dt><strong>Warning</strong></dt><dd><p>If this ioctx is used by rados_watch, the caller needs to be sure that all registered watches are disconnected via rados_unwatch() and that rados_watch_flush() is called. This ensures that a racing watch callback does not make use of a destroyed ioctx.</p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">io</span></code>: the io context to dispose of </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="c.rados_ioctx_cct">
<span class="target" id="librados_8h_1a03cd4b9a87140e7835b6ffb72c8187d2"></span><a class="reference internal" href="#c.CEPH_RADOS_API" title="CEPH_RADOS_API">CEPH_RADOS_API</a> <a class="reference internal" href="#c.rados_config_t" title="rados_config_t">rados_config_t</a> <code class="sig-name descname">rados_ioctx_cct</code><span class="sig-paren">(</span><a class="reference internal" href="#c.rados_ioctx_t" title="rados_ioctx_t">rados_ioctx_t</a><em> io</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rados_ioctx_cct" title="Permalink to this definition">¶</a></dt>
<dd><p>Get configuration handle for a pool handle</p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p>rados_config_t for this cluster </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">io</span></code>: pool handle </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="c.rados_ioctx_get_cluster">
<span class="target" id="librados_8h_1ab251a7fc84fb169edd138d7ec15d8c5e"></span><a class="reference internal" href="#c.CEPH_RADOS_API" title="CEPH_RADOS_API">CEPH_RADOS_API</a> <a class="reference internal" href="#c.rados_t" title="rados_t">rados_t</a> <code class="sig-name descname">rados_ioctx_get_cluster</code><span class="sig-paren">(</span><a class="reference internal" href="#c.rados_ioctx_t" title="rados_ioctx_t">rados_ioctx_t</a><em> io</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rados_ioctx_get_cluster" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the cluster handle used by this rados_ioctx_t Note that this is a weak reference, and should not be destroyed via rados_shutdown().</p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p>the cluster handle for this io context </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">io</span></code>: the io context </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="c.rados_ioctx_pool_stat">
<span class="target" id="librados_8h_1ac3b3523507dc0ac32a83e22a2eee0656"></span><a class="reference internal" href="#c.CEPH_RADOS_API" title="CEPH_RADOS_API">CEPH_RADOS_API</a> int <code class="sig-name descname">rados_ioctx_pool_stat</code><span class="sig-paren">(</span><a class="reference internal" href="#c.rados_ioctx_t" title="rados_ioctx_t">rados_ioctx_t</a><em> io</em>, struct  <a class="reference internal" href="#c.rados_pool_stat_t" title="rados_pool_stat_t">rados_pool_stat_t</a>  *<em> stats</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rados_ioctx_pool_stat" title="Permalink to this definition">¶</a></dt>
<dd><p>Get pool usage statistics</p>
<p>Fills in a <a class="reference internal" href="#structrados__pool__stat__t"><span class="std std-ref">rados_pool_stat_t</span></a> after querying the cluster.</p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p>0 on success, negative error code on failure </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">io</span></code>: determines which pool to query </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">stats</span></code>: where to store the results </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="c.rados_pool_lookup">
<span class="target" id="librados_8h_1ab094a6ef983aa2d1bb54566642b918e5"></span><a class="reference internal" href="#c.CEPH_RADOS_API" title="CEPH_RADOS_API">CEPH_RADOS_API</a> int64_t <code class="sig-name descname">rados_pool_lookup</code><span class="sig-paren">(</span><a class="reference internal" href="#c.rados_t" title="rados_t">rados_t</a><em> cluster</em>, const char *<em> pool_name</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rados_pool_lookup" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the id of a pool</p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p>id of the pool </p>
</dd>
<dt><strong>Return</strong></dt><dd><p>-ENOENT if the pool is not found </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">cluster</span></code>: which cluster the pool is in </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pool_name</span></code>: which pool to look up </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="c.rados_pool_reverse_lookup">
<span class="target" id="librados_8h_1a2e9949fa2709a5c121aef94fbaa9ad46"></span><a class="reference internal" href="#c.CEPH_RADOS_API" title="CEPH_RADOS_API">CEPH_RADOS_API</a> int <code class="sig-name descname">rados_pool_reverse_lookup</code><span class="sig-paren">(</span><a class="reference internal" href="#c.rados_t" title="rados_t">rados_t</a><em> cluster</em>, int64_t<em> id</em>, char *<em> buf</em>, size_t<em> maxlen</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rados_pool_reverse_lookup" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the name of a pool</p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p>length of string stored, or -ERANGE if buffer too small </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">cluster</span></code>: which cluster the pool is in </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">id</span></code>: the id of the pool </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">buf</span></code>: where to store the pool name </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">maxlen</span></code>: size of buffer where name will be stored </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="c.rados_pool_create">
<span class="target" id="librados_8h_1a0007dc3d96a17f5df1effcd3d079f0ec"></span><a class="reference internal" href="#c.CEPH_RADOS_API" title="CEPH_RADOS_API">CEPH_RADOS_API</a> int <code class="sig-name descname">rados_pool_create</code><span class="sig-paren">(</span><a class="reference internal" href="#c.rados_t" title="rados_t">rados_t</a><em> cluster</em>, const char *<em> pool_name</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rados_pool_create" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a pool with default settings</p>
<p>The default crush rule is rule 0.</p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p>0 on success, negative error code on failure </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">cluster</span></code>: the cluster in which the pool will be created </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pool_name</span></code>: the name of the new pool </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="c.rados_pool_create_with_auid">
<span class="target" id="librados_8h_1a4cf2764542b0250789c7955b37246cfa"></span><a class="reference internal" href="#c.CEPH_RADOS_API" title="CEPH_RADOS_API">CEPH_RADOS_API</a> int <code class="sig-name descname">rados_pool_create_with_auid</code><span class="sig-paren">(</span><a class="reference internal" href="#c.rados_t" title="rados_t">rados_t</a><em> cluster</em>, const char *<em> pool_name</em>, uint64_t<em> auid</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rados_pool_create_with_auid" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a pool owned by a specific auid.</p>
<p>DEPRECATED: auid support has been removed, and this call will be removed in a future release.</p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p>0 on success, negative error code on failure </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">cluster</span></code>: the cluster in which the pool will be created </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pool_name</span></code>: the name of the new pool </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">auid</span></code>: the id of the owner of the new pool </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="c.rados_pool_create_with_crush_rule">
<span class="target" id="librados_8h_1a4de57d42b5856c289fde94611b92ef00"></span><a class="reference internal" href="#c.CEPH_RADOS_API" title="CEPH_RADOS_API">CEPH_RADOS_API</a> int <code class="sig-name descname">rados_pool_create_with_crush_rule</code><span class="sig-paren">(</span><a class="reference internal" href="#c.rados_t" title="rados_t">rados_t</a><em> cluster</em>, const char *<em> pool_name</em>, uint8_t<em> crush_rule_num</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rados_pool_create_with_crush_rule" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a pool with a specific CRUSH rule</p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p>0 on success, negative error code on failure </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">cluster</span></code>: the cluster in which the pool will be created </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pool_name</span></code>: the name of the new pool </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">crush_rule_num</span></code>: which rule to use for placement in the new pool1 </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="c.rados_pool_create_with_all">
<span class="target" id="librados_8h_1a26ffba60877db552e0a3e8c31a93ca20"></span><a class="reference internal" href="#c.CEPH_RADOS_API" title="CEPH_RADOS_API">CEPH_RADOS_API</a> int <code class="sig-name descname">rados_pool_create_with_all</code><span class="sig-paren">(</span><a class="reference internal" href="#c.rados_t" title="rados_t">rados_t</a><em> cluster</em>, const char *<em> pool_name</em>, uint64_t<em> auid</em>, uint8_t<em> crush_rule_num</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rados_pool_create_with_all" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a pool with a specific CRUSH rule and auid</p>
<p>DEPRECATED: auid support has been removed and this call will be removed in a future release.</p>
<p>This is a combination of rados_pool_create_with_crush_rule() and rados_pool_create_with_auid().</p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p>0 on success, negative error code on failure </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">cluster</span></code>: the cluster in which the pool will be created </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pool_name</span></code>: the name of the new pool </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">crush_rule_num</span></code>: which rule to use for placement in the new pool2 </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">auid</span></code>: the id of the owner of the new pool </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="c.rados_pool_get_base_tier">
<span class="target" id="librados_8h_1a39453238a28559db6285d37e4f146fda"></span><a class="reference internal" href="#c.CEPH_RADOS_API" title="CEPH_RADOS_API">CEPH_RADOS_API</a> int <code class="sig-name descname">rados_pool_get_base_tier</code><span class="sig-paren">(</span><a class="reference internal" href="#c.rados_t" title="rados_t">rados_t</a><em> cluster</em>, int64_t<em> pool</em>, int64_t *<em> base_tier</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rados_pool_get_base_tier" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the pool that is the base tier for this pool.</p>
<p>The return value is the ID of the pool that should be used to read from/write to. If tiering is not set up for the pool, returns <code class="docutils literal notranslate"><span class="pre">pool</span></code>.</p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p>0 on success, negative error code on failure </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">cluster</span></code>: the cluster the pool is in </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pool</span></code>: ID of the pool to query </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">[out]</span> <span class="pre">base_tier</span></code>: base tier, or <code class="docutils literal notranslate"><span class="pre">pool</span></code> if tiering is not configured </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="c.rados_pool_delete">
<span class="target" id="librados_8h_1a01ebc54925104a5448e683ce84691db6"></span><a class="reference internal" href="#c.CEPH_RADOS_API" title="CEPH_RADOS_API">CEPH_RADOS_API</a> int <code class="sig-name descname">rados_pool_delete</code><span class="sig-paren">(</span><a class="reference internal" href="#c.rados_t" title="rados_t">rados_t</a><em> cluster</em>, const char *<em> pool_name</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rados_pool_delete" title="Permalink to this definition">¶</a></dt>
<dd><p>Delete a pool and all data inside it</p>
<p>The pool is removed from the cluster immediately, but the actual data is deleted in the background.</p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p>0 on success, negative error code on failure </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">cluster</span></code>: the cluster the pool is in </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pool_name</span></code>: which pool to delete </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="c.rados_ioctx_pool_set_auid">
<span class="target" id="librados_8h_1ad14af6de60276a3e7b4d9b7c395f982a"></span><a class="reference internal" href="#c.CEPH_RADOS_API" title="CEPH_RADOS_API">CEPH_RADOS_API</a> int <code class="sig-name descname">rados_ioctx_pool_set_auid</code><span class="sig-paren">(</span><a class="reference internal" href="#c.rados_ioctx_t" title="rados_ioctx_t">rados_ioctx_t</a><em> io</em>, uint64_t<em> auid</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rados_ioctx_pool_set_auid" title="Permalink to this definition">¶</a></dt>
<dd><p>Attempt to change an io context’s associated auid “owner”</p>
<p>DEPRECATED: auid support has been removed and this call has no effect.</p>
<p>Requires that you have write permission on both the current and new auid.</p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p>0 on success, negative error code on failure </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">io</span></code>: reference to the pool to change. </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">auid</span></code>: the auid you wish the io to have. </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="c.rados_ioctx_pool_get_auid">
<span class="target" id="librados_8h_1af05a104c6f02171fa80a947e77e2ca7c"></span><a class="reference internal" href="#c.CEPH_RADOS_API" title="CEPH_RADOS_API">CEPH_RADOS_API</a> int <code class="sig-name descname">rados_ioctx_pool_get_auid</code><span class="sig-paren">(</span><a class="reference internal" href="#c.rados_ioctx_t" title="rados_ioctx_t">rados_ioctx_t</a><em> io</em>, uint64_t *<em> auid</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rados_ioctx_pool_get_auid" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the auid of a pool</p>
<p>DEPRECATED: auid support has been removed and this call always reports CEPH_AUTH_UID_DEFAULT (-1).</p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p>0 on success, negative error code on failure </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">io</span></code>: pool to query </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">auid</span></code>: where to store the auid </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="c.rados_ioctx_pool_requires_alignment">
<span class="target" id="librados_8h_1ab5c09be567bc1feb8984a3b1ece0cd56"></span><a class="reference internal" href="#c.CEPH_RADOS_API" title="CEPH_RADOS_API">CEPH_RADOS_API</a> int <code class="sig-name descname">rados_ioctx_pool_requires_alignment</code><span class="sig-paren">(</span><a class="reference internal" href="#c.rados_ioctx_t" title="rados_ioctx_t">rados_ioctx_t</a><em> io</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rados_ioctx_pool_requires_alignment" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="c.rados_ioctx_pool_requires_alignment2">
<span class="target" id="librados_8h_1a93f78677523b27036638e5b3c1fb8244"></span><a class="reference internal" href="#c.CEPH_RADOS_API" title="CEPH_RADOS_API">CEPH_RADOS_API</a> int <code class="sig-name descname">rados_ioctx_pool_requires_alignment2</code><span class="sig-paren">(</span><a class="reference internal" href="#c.rados_ioctx_t" title="rados_ioctx_t">rados_ioctx_t</a><em> io</em>, int *<em> req</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rados_ioctx_pool_requires_alignment2" title="Permalink to this definition">¶</a></dt>
<dd><p>Test whether the specified pool requires alignment or not.</p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p>0 on success, negative error code on failure </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">io</span></code>: pool to query </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">req</span></code>: 1 if alignment is supported, 0 if not. </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="c.rados_ioctx_pool_required_alignment">
<span class="target" id="librados_8h_1a0cb1c52fe21bf9d9779326b88a64073d"></span><a class="reference internal" href="#c.CEPH_RADOS_API" title="CEPH_RADOS_API">CEPH_RADOS_API</a> uint64_t <code class="sig-name descname">rados_ioctx_pool_required_alignment</code><span class="sig-paren">(</span><a class="reference internal" href="#c.rados_ioctx_t" title="rados_ioctx_t">rados_ioctx_t</a><em> io</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rados_ioctx_pool_required_alignment" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="c.rados_ioctx_pool_required_alignment2">
<span class="target" id="librados_8h_1a72832fdf5bfde1ad344eba3b0cc8821e"></span><a class="reference internal" href="#c.CEPH_RADOS_API" title="CEPH_RADOS_API">CEPH_RADOS_API</a> int <code class="sig-name descname">rados_ioctx_pool_required_alignment2</code><span class="sig-paren">(</span><a class="reference internal" href="#c.rados_ioctx_t" title="rados_ioctx_t">rados_ioctx_t</a><em> io</em>, uint64_t *<em> alignment</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rados_ioctx_pool_required_alignment2" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the alignment flavor of a pool</p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p>0 on success, negative error code on failure </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">io</span></code>: pool to query </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">alignment</span></code>: where to store the alignment flavor </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="c.rados_ioctx_get_id">
<span class="target" id="librados_8h_1a4c3d4ac83a5232c2a4ccec46ddb025bb"></span><a class="reference internal" href="#c.CEPH_RADOS_API" title="CEPH_RADOS_API">CEPH_RADOS_API</a> int64_t <code class="sig-name descname">rados_ioctx_get_id</code><span class="sig-paren">(</span><a class="reference internal" href="#c.rados_ioctx_t" title="rados_ioctx_t">rados_ioctx_t</a><em> io</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rados_ioctx_get_id" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the pool id of the io context</p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p>the id of the pool the io context uses </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">io</span></code>: the io context to query </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="c.rados_ioctx_get_pool_name">
<span class="target" id="librados_8h_1ad607af55d4850b4a079bd53949ab993b"></span><a class="reference internal" href="#c.CEPH_RADOS_API" title="CEPH_RADOS_API">CEPH_RADOS_API</a> int <code class="sig-name descname">rados_ioctx_get_pool_name</code><span class="sig-paren">(</span><a class="reference internal" href="#c.rados_ioctx_t" title="rados_ioctx_t">rados_ioctx_t</a><em> io</em>, char *<em> buf</em>, unsigned<em> maxlen</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rados_ioctx_get_pool_name" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the pool name of the io context</p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p>length of string stored, or -ERANGE if buffer too small </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">io</span></code>: the io context to query </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">buf</span></code>: pointer to buffer where name will be stored </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">maxlen</span></code>: size of buffer where name will be stored </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric">Object Locators</p>
<dl class="function">
<dt id="c.rados_ioctx_locator_set_key">
<span class="target" id="librados_8h_1a2e89c516a1d2d462b3e37f4b71ff8313"></span><a class="reference internal" href="#c.CEPH_RADOS_API" title="CEPH_RADOS_API">CEPH_RADOS_API</a> void <code class="sig-name descname">rados_ioctx_locator_set_key</code><span class="sig-paren">(</span><a class="reference internal" href="#c.rados_ioctx_t" title="rados_ioctx_t">rados_ioctx_t</a><em> io</em>, const char *<em> key</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rados_ioctx_locator_set_key" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the key for mapping objects to pgs within an io context.</p>
<p>The key is used instead of the object name to determine which placement groups an object is put in. This affects all subsequent operations of the io context - until a different locator key is set, all objects in this io context will be placed in the same pg.</p>
<p><dl class="simple">
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">io</span></code>: the io context to change </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">key</span></code>: the key to use as the object locator, or NULL to discard any previously set key </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="c.rados_ioctx_set_namespace">
<span class="target" id="librados_8h_1ab8ee4979c52cf36a32db54a9529b327b"></span><a class="reference internal" href="#c.CEPH_RADOS_API" title="CEPH_RADOS_API">CEPH_RADOS_API</a> void <code class="sig-name descname">rados_ioctx_set_namespace</code><span class="sig-paren">(</span><a class="reference internal" href="#c.rados_ioctx_t" title="rados_ioctx_t">rados_ioctx_t</a><em> io</em>, const char *<em> nspace</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rados_ioctx_set_namespace" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the namespace for objects within an io context</p>
<p>The namespace specification further refines a pool into different domains. The mapping of objects to pgs is also based on this value.</p>
<p><dl class="simple">
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">io</span></code>: the io context to change </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">nspace</span></code>: the name to use as the namespace, or NULL use the default namespace </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="c.rados_ioctx_get_namespace">
<span class="target" id="librados_8h_1aa13cabeebe6e039a8b5c0e0e6a213319"></span><a class="reference internal" href="#c.CEPH_RADOS_API" title="CEPH_RADOS_API">CEPH_RADOS_API</a> int <code class="sig-name descname">rados_ioctx_get_namespace</code><span class="sig-paren">(</span><a class="reference internal" href="#c.rados_ioctx_t" title="rados_ioctx_t">rados_ioctx_t</a><em> io</em>, char *<em> buf</em>, unsigned<em> maxlen</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rados_ioctx_get_namespace" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the namespace for objects within the io context</p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p>length of string stored, or -ERANGE if buffer too small </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">io</span></code>: the io context to query </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">buf</span></code>: pointer to buffer where name will be stored </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">maxlen</span></code>: size of buffer where name will be stored </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric">Listing Objects</p>
<dl class="function">
<dt id="c.rados_nobjects_list_open">
<span class="target" id="librados_8h_1a22e50405d87eb14439239d715a530d6d"></span><a class="reference internal" href="#c.CEPH_RADOS_API" title="CEPH_RADOS_API">CEPH_RADOS_API</a> int <code class="sig-name descname">rados_nobjects_list_open</code><span class="sig-paren">(</span><a class="reference internal" href="#c.rados_ioctx_t" title="rados_ioctx_t">rados_ioctx_t</a><em> io</em>, <a class="reference internal" href="#c.rados_list_ctx_t" title="rados_list_ctx_t">rados_list_ctx_t</a> *<em> ctx</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rados_nobjects_list_open" title="Permalink to this definition">¶</a></dt>
<dd><p>Start listing objects in a pool</p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p>0 on success, negative error code on failure </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">io</span></code>: the pool to list from </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ctx</span></code>: the handle to store list context in </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="c.rados_nobjects_list_get_pg_hash_position">
<span class="target" id="librados_8h_1ad67fee7e912ce55c839b57cceb660709"></span><a class="reference internal" href="#c.CEPH_RADOS_API" title="CEPH_RADOS_API">CEPH_RADOS_API</a> uint32_t <code class="sig-name descname">rados_nobjects_list_get_pg_hash_position</code><span class="sig-paren">(</span><a class="reference internal" href="#c.rados_list_ctx_t" title="rados_list_ctx_t">rados_list_ctx_t</a><em> ctx</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rados_nobjects_list_get_pg_hash_position" title="Permalink to this definition">¶</a></dt>
<dd><p>Return hash position of iterator, rounded to the current PG</p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p>current hash position, rounded to the current pg </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">ctx</span></code>: iterator marking where you are in the listing </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="c.rados_nobjects_list_seek">
<span class="target" id="librados_8h_1a5a7f2778daff7a4efad775cca61ae651"></span><a class="reference internal" href="#c.CEPH_RADOS_API" title="CEPH_RADOS_API">CEPH_RADOS_API</a> uint32_t <code class="sig-name descname">rados_nobjects_list_seek</code><span class="sig-paren">(</span><a class="reference internal" href="#c.rados_list_ctx_t" title="rados_list_ctx_t">rados_list_ctx_t</a><em> ctx</em>, uint32_t<em> pos</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rados_nobjects_list_seek" title="Permalink to this definition">¶</a></dt>
<dd><p>Reposition object iterator to a different hash position</p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p>actual (rounded) position we moved to </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">ctx</span></code>: iterator marking where you are in the listing </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pos</span></code>: hash position to move to </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="c.rados_nobjects_list_seek_cursor">
<span class="target" id="librados_8h_1ad2ebd647ad5ab1752f0152b452fac9d7"></span><a class="reference internal" href="#c.CEPH_RADOS_API" title="CEPH_RADOS_API">CEPH_RADOS_API</a> uint32_t <code class="sig-name descname">rados_nobjects_list_seek_cursor</code><span class="sig-paren">(</span><a class="reference internal" href="#c.rados_list_ctx_t" title="rados_list_ctx_t">rados_list_ctx_t</a><em> ctx</em>, <a class="reference internal" href="#c.rados_object_list_cursor" title="rados_object_list_cursor">rados_object_list_cursor</a><em> cursor</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rados_nobjects_list_seek_cursor" title="Permalink to this definition">¶</a></dt>
<dd><p>Reposition object iterator to a different position</p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p>rounded position we moved to </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">ctx</span></code>: iterator marking where you are in the listing </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cursor</span></code>: position to move to </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="c.rados_nobjects_list_get_cursor">
<span class="target" id="librados_8h_1a2f5296ee7e1f65b8e305fec371464b16"></span><a class="reference internal" href="#c.CEPH_RADOS_API" title="CEPH_RADOS_API">CEPH_RADOS_API</a> int <code class="sig-name descname">rados_nobjects_list_get_cursor</code><span class="sig-paren">(</span><a class="reference internal" href="#c.rados_list_ctx_t" title="rados_list_ctx_t">rados_list_ctx_t</a><em> ctx</em>, <a class="reference internal" href="#c.rados_object_list_cursor" title="rados_object_list_cursor">rados_object_list_cursor</a> *<em> cursor</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rados_nobjects_list_get_cursor" title="Permalink to this definition">¶</a></dt>
<dd><p>Reposition object iterator to a different position</p>
<p>The returned handle must be released with rados_object_list_cursor_free().</p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p>0 on success, negative error code on failure </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">ctx</span></code>: iterator marking where you are in the listing </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cursor</span></code>: where to store cursor </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="c.rados_nobjects_list_next">
<span class="target" id="librados_8h_1adeba815154ac9b24e731a14e04281668"></span><a class="reference internal" href="#c.CEPH_RADOS_API" title="CEPH_RADOS_API">CEPH_RADOS_API</a> int <code class="sig-name descname">rados_nobjects_list_next</code><span class="sig-paren">(</span><a class="reference internal" href="#c.rados_list_ctx_t" title="rados_list_ctx_t">rados_list_ctx_t</a><em> ctx</em>, const char **<em> entry</em>, const char **<em> key</em>, const char **<em> nspace</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rados_nobjects_list_next" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the next object name and locator in the pool</p>
<p><em>entry and *key are valid until next call to rados_nobjects_list_</em></p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p>0 on success, negative error code on failure </p>
</dd>
<dt><strong>Return</strong></dt><dd><p>-ENOENT when there are no more objects to list </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">ctx</span></code>: iterator marking where you are in the listing </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">entry</span></code>: where to store the name of the entry </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">key</span></code>: where to store the object locator (set to NULL to ignore) </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">nspace</span></code>: where to store the object namespace (set to NULL to ignore) </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="c.rados_nobjects_list_close">
<span class="target" id="librados_8h_1af87da9fc306f53098ed4fe9a5fdfbd84"></span><a class="reference internal" href="#c.CEPH_RADOS_API" title="CEPH_RADOS_API">CEPH_RADOS_API</a> void <code class="sig-name descname">rados_nobjects_list_close</code><span class="sig-paren">(</span><a class="reference internal" href="#c.rados_list_ctx_t" title="rados_list_ctx_t">rados_list_ctx_t</a><em> ctx</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rados_nobjects_list_close" title="Permalink to this definition">¶</a></dt>
<dd><p>Close the object listing handle.</p>
<p>This should be called when the handle is no longer needed. The handle should not be used after it has been closed.</p>
<p><dl class="simple">
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">ctx</span></code>: the handle to close </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="c.rados_object_list_begin">
<span class="target" id="librados_8h_1a0d21887b9d2c2a5f1d9b5ae6c26ed058"></span><a class="reference internal" href="#c.CEPH_RADOS_API" title="CEPH_RADOS_API">CEPH_RADOS_API</a> <a class="reference internal" href="#c.rados_object_list_cursor" title="rados_object_list_cursor">rados_object_list_cursor</a> <code class="sig-name descname">rados_object_list_begin</code><span class="sig-paren">(</span><a class="reference internal" href="#c.rados_ioctx_t" title="rados_ioctx_t">rados_ioctx_t</a><em> io</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rados_object_list_begin" title="Permalink to this definition">¶</a></dt>
<dd><p>Get cursor handle pointing to the <em>beginning</em> of a pool.</p>
<p>This is an opaque handle pointing to the start of a pool. It must be released with rados_object_list_cursor_free().</p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p>handle for the pool, NULL on error (pool does not exist) </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">io</span></code>: ioctx for the pool </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="c.rados_object_list_end">
<span class="target" id="librados_8h_1a796c912c2b8dfc01ee29a1a6c6be3a1d"></span><a class="reference internal" href="#c.CEPH_RADOS_API" title="CEPH_RADOS_API">CEPH_RADOS_API</a> <a class="reference internal" href="#c.rados_object_list_cursor" title="rados_object_list_cursor">rados_object_list_cursor</a> <code class="sig-name descname">rados_object_list_end</code><span class="sig-paren">(</span><a class="reference internal" href="#c.rados_ioctx_t" title="rados_ioctx_t">rados_ioctx_t</a><em> io</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rados_object_list_end" title="Permalink to this definition">¶</a></dt>
<dd><p>Get cursor handle pointing to the <em>end</em> of a pool.</p>
<p>This is an opaque handle pointing to the start of a pool. It must be released with rados_object_list_cursor_free().</p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p>handle for the pool, NULL on error (pool does not exist) </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">io</span></code>: ioctx for the pool </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="c.rados_object_list_is_end">
<span class="target" id="librados_8h_1a6a33505dae2e80dfd4490c0844e0e6fa"></span><a class="reference internal" href="#c.CEPH_RADOS_API" title="CEPH_RADOS_API">CEPH_RADOS_API</a> int <code class="sig-name descname">rados_object_list_is_end</code><span class="sig-paren">(</span><a class="reference internal" href="#c.rados_ioctx_t" title="rados_ioctx_t">rados_ioctx_t</a><em> io</em>, <a class="reference internal" href="#c.rados_object_list_cursor" title="rados_object_list_cursor">rados_object_list_cursor</a><em> cur</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rados_object_list_is_end" title="Permalink to this definition">¶</a></dt>
<dd><p>Check if a cursor has reached the end of a pool</p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p>1 if the cursor has reached the end of the pool, 0 otherwise </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">io</span></code>: ioctx </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cur</span></code>: cursor </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="c.rados_object_list_cursor_free">
<span class="target" id="librados_8h_1a8cc7059044982ff45cba5d2c5e1dc7b9"></span><a class="reference internal" href="#c.CEPH_RADOS_API" title="CEPH_RADOS_API">CEPH_RADOS_API</a> void <code class="sig-name descname">rados_object_list_cursor_free</code><span class="sig-paren">(</span><a class="reference internal" href="#c.rados_ioctx_t" title="rados_ioctx_t">rados_ioctx_t</a><em> io</em>, <a class="reference internal" href="#c.rados_object_list_cursor" title="rados_object_list_cursor">rados_object_list_cursor</a><em> cur</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rados_object_list_cursor_free" title="Permalink to this definition">¶</a></dt>
<dd><p>Release a cursor</p>
<p>Release a cursor. The handle may not be used after this point.</p>
<p><dl class="simple">
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">io</span></code>: ioctx </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cur</span></code>: cursor </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="c.rados_object_list_cursor_cmp">
<span class="target" id="librados_8h_1a802ac9d4131ed132af4c471a0a6a3960"></span><a class="reference internal" href="#c.CEPH_RADOS_API" title="CEPH_RADOS_API">CEPH_RADOS_API</a> int <code class="sig-name descname">rados_object_list_cursor_cmp</code><span class="sig-paren">(</span><a class="reference internal" href="#c.rados_ioctx_t" title="rados_ioctx_t">rados_ioctx_t</a><em> io</em>, <a class="reference internal" href="#c.rados_object_list_cursor" title="rados_object_list_cursor">rados_object_list_cursor</a><em> lhs</em>, <a class="reference internal" href="#c.rados_object_list_cursor" title="rados_object_list_cursor">rados_object_list_cursor</a><em> rhs</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rados_object_list_cursor_cmp" title="Permalink to this definition">¶</a></dt>
<dd><p>Compare two cursor positions</p>
<p>Compare two cursors, and indicate whether the first cursor precedes, matches, or follows the second.</p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p>-1, 0, or 1 for lhs &lt; rhs, lhs == rhs, or lhs &gt; rhs </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">io</span></code>: ioctx </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">lhs</span></code>: first cursor </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">rhs</span></code>: second cursor </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="c.rados_object_list">
<span class="target" id="librados_8h_1ac3a07c5a22622012579cdf4630d92e14"></span><a class="reference internal" href="#c.CEPH_RADOS_API" title="CEPH_RADOS_API">CEPH_RADOS_API</a> int <code class="sig-name descname">rados_object_list</code><span class="sig-paren">(</span><a class="reference internal" href="#c.rados_ioctx_t" title="rados_ioctx_t">rados_ioctx_t</a><em> io</em>, const <a class="reference internal" href="#c.rados_object_list_cursor" title="rados_object_list_cursor">rados_object_list_cursor</a><em> start</em>, const <a class="reference internal" href="#c.rados_object_list_cursor" title="rados_object_list_cursor">rados_object_list_cursor</a><em> finish</em>, const size_t<em> result_size</em>, const char *<em> filter_buf</em>, const size_t<em> filter_buf_len</em>, <a class="reference internal" href="#c.rados_object_list_item" title="rados_object_list_item">rados_object_list_item</a>  *<em> results</em>, <a class="reference internal" href="#c.rados_object_list_cursor" title="rados_object_list_cursor">rados_object_list_cursor</a> *<em> next</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rados_object_list" title="Permalink to this definition">¶</a></dt>
<dd><p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p>the number of items set in the results array </p>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="c.rados_object_list_free">
<span class="target" id="librados_8h_1aba19a7cc9a7f89060220b3b1c0971070"></span><a class="reference internal" href="#c.CEPH_RADOS_API" title="CEPH_RADOS_API">CEPH_RADOS_API</a> void <code class="sig-name descname">rados_object_list_free</code><span class="sig-paren">(</span>const size_t<em> result_size</em>, <a class="reference internal" href="#c.rados_object_list_item" title="rados_object_list_item">rados_object_list_item</a>  *<em> results</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rados_object_list_free" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="c.rados_object_list_slice">
<span class="target" id="librados_8h_1a6b85810b3e8c53eda7ecc71d2d89adeb"></span><a class="reference internal" href="#c.CEPH_RADOS_API" title="CEPH_RADOS_API">CEPH_RADOS_API</a> void <code class="sig-name descname">rados_object_list_slice</code><span class="sig-paren">(</span><a class="reference internal" href="#c.rados_ioctx_t" title="rados_ioctx_t">rados_ioctx_t</a><em> io</em>, const <a class="reference internal" href="#c.rados_object_list_cursor" title="rados_object_list_cursor">rados_object_list_cursor</a><em> start</em>, const <a class="reference internal" href="#c.rados_object_list_cursor" title="rados_object_list_cursor">rados_object_list_cursor</a><em> finish</em>, const size_t<em> n</em>, const size_t<em> m</em>, <a class="reference internal" href="#c.rados_object_list_cursor" title="rados_object_list_cursor">rados_object_list_cursor</a> *<em> split_start</em>, <a class="reference internal" href="#c.rados_object_list_cursor" title="rados_object_list_cursor">rados_object_list_cursor</a> *<em> split_finish</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rados_object_list_slice" title="Permalink to this definition">¶</a></dt>
<dd><p>Obtain cursors delineating a subset of a range. Use this when you want to split up the work of iterating over the global namespace. Expected use case is when you are iterating in parallel, with <code class="docutils literal notranslate"><span class="pre">m</span></code> workers, and each worker taking an id <code class="docutils literal notranslate"><span class="pre">n</span></code>.</p>
<p><dl class="simple">
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">io</span></code>: ioctx </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">start</span></code>: start of the range to be sliced up (inclusive) </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">finish</span></code>: end of the range to be sliced up (exclusive) </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">n</span></code>: which of the m chunks you would like to get cursors for </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">m</span></code>: how many chunks to divide start-finish into </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">split_start</span></code>: cursor populated with start of the subrange (inclusive) </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">split_finish</span></code>: cursor populated with end of the subrange (exclusive) </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric">Snapshots</p>
<p>RADOS snapshots are based upon sequence numbers that form a snapshot context. They are pool-specific. The snapshot context consists of the current snapshot sequence number for a pool, and an array of sequence numbers at which snapshots were taken, in descending order. Whenever a snapshot is created or deleted, the snapshot sequence number for the pool is increased. To add a new snapshot, the new snapshot sequence number must be increased and added to the snapshot context.</p>
<p>There are two ways to manage these snapshot contexts:<ol class="arabic simple">
<li><p>within the RADOS cluster These are called pool snapshots, and store the snapshot context in the OSDMap. These represent a snapshot of all the objects in a pool.</p></li>
<li><p>within the RADOS clients These are called self-managed snapshots, and push the responsibility for keeping track of the snapshot context to the clients. For every write, the client must send the snapshot context. In librados, this is accomplished with rados_selfmanaged_snap_set_write_ctx(). These are more difficult to manage, but are restricted to specific objects instead of applying to an entire pool. </p></li>
</ol>
</p>
<dl class="function">
<dt id="c.rados_ioctx_snap_create">
<span class="target" id="librados_8h_1ad51eaaea0ff8775386cb46e8d3482461"></span><a class="reference internal" href="#c.CEPH_RADOS_API" title="CEPH_RADOS_API">CEPH_RADOS_API</a> int <code class="sig-name descname">rados_ioctx_snap_create</code><span class="sig-paren">(</span><a class="reference internal" href="#c.rados_ioctx_t" title="rados_ioctx_t">rados_ioctx_t</a><em> io</em>, const char *<em> snapname</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rados_ioctx_snap_create" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a pool-wide snapshot</p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p>0 on success, negative error code on failure </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">io</span></code>: the pool to snapshot </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">snapname</span></code>: the name of the snapshot </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="c.rados_ioctx_snap_remove">
<span class="target" id="librados_8h_1aa7f436d59ceab1779a342770dd33816b"></span><a class="reference internal" href="#c.CEPH_RADOS_API" title="CEPH_RADOS_API">CEPH_RADOS_API</a> int <code class="sig-name descname">rados_ioctx_snap_remove</code><span class="sig-paren">(</span><a class="reference internal" href="#c.rados_ioctx_t" title="rados_ioctx_t">rados_ioctx_t</a><em> io</em>, const char *<em> snapname</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rados_ioctx_snap_remove" title="Permalink to this definition">¶</a></dt>
<dd><p>Delete a pool snapshot</p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p>0 on success, negative error code on failure </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">io</span></code>: the pool to delete the snapshot from </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">snapname</span></code>: which snapshot to delete </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="c.rados_ioctx_snap_rollback">
<span class="target" id="librados_8h_1a32f26dfcf00f7d5ad2ece4bea0e549b9"></span><a class="reference internal" href="#c.CEPH_RADOS_API" title="CEPH_RADOS_API">CEPH_RADOS_API</a> int <code class="sig-name descname">rados_ioctx_snap_rollback</code><span class="sig-paren">(</span><a class="reference internal" href="#c.rados_ioctx_t" title="rados_ioctx_t">rados_ioctx_t</a><em> io</em>, const char *<em> oid</em>, const char *<em> snapname</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rados_ioctx_snap_rollback" title="Permalink to this definition">¶</a></dt>
<dd><p>Rollback an object to a pool snapshot</p>
<p>The contents of the object will be the same as when the snapshot was taken.</p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p>0 on success, negative error code on failure </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">io</span></code>: the pool in which the object is stored </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">oid</span></code>: the name of the object to rollback </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">snapname</span></code>: which snapshot to rollback to </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="c.rados_rollback">
<span class="target" id="librados_8h_1aba0559b2cf1d82b9527507788a994f78"></span><a class="reference internal" href="#c.CEPH_RADOS_API" title="CEPH_RADOS_API">CEPH_RADOS_API</a> int <code class="sig-name descname">rados_rollback</code><span class="sig-paren">(</span><a class="reference internal" href="#c.rados_ioctx_t" title="rados_ioctx_t">rados_ioctx_t</a><em> io</em>, const char *<em> oid</em>, const char *<em> snapname</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rados_rollback" title="Permalink to this definition">¶</a></dt>
<dd><p><dl class="simple">
<dt><strong>Warning</strong></dt><dd><p>Deprecated: Use rados_ioctx_snap_rollback() instead </p>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="c.rados_ioctx_snap_set_read">
<span class="target" id="librados_8h_1ac0952bef2b12373b2cb7c86d59131fc9"></span><a class="reference internal" href="#c.CEPH_RADOS_API" title="CEPH_RADOS_API">CEPH_RADOS_API</a> void <code class="sig-name descname">rados_ioctx_snap_set_read</code><span class="sig-paren">(</span><a class="reference internal" href="#c.rados_ioctx_t" title="rados_ioctx_t">rados_ioctx_t</a><em> io</em>, <a class="reference internal" href="#c.rados_snap_t" title="rados_snap_t">rados_snap_t</a><em> snap</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rados_ioctx_snap_set_read" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the snapshot from which reads are performed.</p>
<p>Subsequent reads will return data as it was at the time of that snapshot.</p>
<p><dl class="simple">
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">io</span></code>: the io context to change </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">snap</span></code>: the id of the snapshot to set, or LIBRADOS_SNAP_HEAD for no snapshot (i.e. normal operation) </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="c.rados_ioctx_selfmanaged_snap_create">
<span class="target" id="librados_8h_1a0c1349c0fa36033abac30052bee2a8f3"></span><a class="reference internal" href="#c.CEPH_RADOS_API" title="CEPH_RADOS_API">CEPH_RADOS_API</a> int <code class="sig-name descname">rados_ioctx_selfmanaged_snap_create</code><span class="sig-paren">(</span><a class="reference internal" href="#c.rados_ioctx_t" title="rados_ioctx_t">rados_ioctx_t</a><em> io</em>, <a class="reference internal" href="#c.rados_snap_t" title="rados_snap_t">rados_snap_t</a> *<em> snapid</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rados_ioctx_selfmanaged_snap_create" title="Permalink to this definition">¶</a></dt>
<dd><p>Allocate an ID for a self-managed snapshot</p>
<p>Get a unique ID to put in the snaphot context to create a snapshot. A clone of an object is not created until a write with the new snapshot context is completed.</p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p>0 on success, negative error code on failure </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">io</span></code>: the pool in which the snapshot will exist </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">snapid</span></code>: where to store the newly allocated snapshot ID </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="c.rados_aio_ioctx_selfmanaged_snap_create">
<span class="target" id="librados_8h_1aa86ae909fb281b2c349782c2443a7ee0"></span><a class="reference internal" href="#c.CEPH_RADOS_API" title="CEPH_RADOS_API">CEPH_RADOS_API</a> void <code class="sig-name descname">rados_aio_ioctx_selfmanaged_snap_create</code><span class="sig-paren">(</span><a class="reference internal" href="#c.rados_ioctx_t" title="rados_ioctx_t">rados_ioctx_t</a><em> io</em>, <a class="reference internal" href="#c.rados_snap_t" title="rados_snap_t">rados_snap_t</a> *<em> snapid</em>, <a class="reference internal" href="#c.rados_completion_t" title="rados_completion_t">rados_completion_t</a><em> completion</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rados_aio_ioctx_selfmanaged_snap_create" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="c.rados_ioctx_selfmanaged_snap_remove">
<span class="target" id="librados_8h_1a82b319c2e959e354e9f4065111b3451d"></span><a class="reference internal" href="#c.CEPH_RADOS_API" title="CEPH_RADOS_API">CEPH_RADOS_API</a> int <code class="sig-name descname">rados_ioctx_selfmanaged_snap_remove</code><span class="sig-paren">(</span><a class="reference internal" href="#c.rados_ioctx_t" title="rados_ioctx_t">rados_ioctx_t</a><em> io</em>, <a class="reference internal" href="#c.rados_snap_t" title="rados_snap_t">rados_snap_t</a><em> snapid</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rados_ioctx_selfmanaged_snap_remove" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove a self-managed snapshot</p>
<p>This increases the snapshot sequence number, which will cause snapshots to be removed lazily.</p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p>0 on success, negative error code on failure </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">io</span></code>: the pool in which the snapshot will exist </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">snapid</span></code>: where to store the newly allocated snapshot ID </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="c.rados_aio_ioctx_selfmanaged_snap_remove">
<span class="target" id="librados_8h_1a93c13b4a0705e57c8d1f0dd122c216fa"></span><a class="reference internal" href="#c.CEPH_RADOS_API" title="CEPH_RADOS_API">CEPH_RADOS_API</a> void <code class="sig-name descname">rados_aio_ioctx_selfmanaged_snap_remove</code><span class="sig-paren">(</span><a class="reference internal" href="#c.rados_ioctx_t" title="rados_ioctx_t">rados_ioctx_t</a><em> io</em>, <a class="reference internal" href="#c.rados_snap_t" title="rados_snap_t">rados_snap_t</a><em> snapid</em>, <a class="reference internal" href="#c.rados_completion_t" title="rados_completion_t">rados_completion_t</a><em> completion</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rados_aio_ioctx_selfmanaged_snap_remove" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="c.rados_ioctx_selfmanaged_snap_rollback">
<span class="target" id="librados_8h_1ada1171cf52b6b37571cc5d8519da489b"></span><a class="reference internal" href="#c.CEPH_RADOS_API" title="CEPH_RADOS_API">CEPH_RADOS_API</a> int <code class="sig-name descname">rados_ioctx_selfmanaged_snap_rollback</code><span class="sig-paren">(</span><a class="reference internal" href="#c.rados_ioctx_t" title="rados_ioctx_t">rados_ioctx_t</a><em> io</em>, const char *<em> oid</em>, <a class="reference internal" href="#c.rados_snap_t" title="rados_snap_t">rados_snap_t</a><em> snapid</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rados_ioctx_selfmanaged_snap_rollback" title="Permalink to this definition">¶</a></dt>
<dd><p>Rollback an object to a self-managed snapshot</p>
<p>The contents of the object will be the same as when the snapshot was taken.</p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p>0 on success, negative error code on failure </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">io</span></code>: the pool in which the object is stored </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">oid</span></code>: the name of the object to rollback </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">snapid</span></code>: which snapshot to rollback to </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="c.rados_ioctx_selfmanaged_snap_set_write_ctx">
<span class="target" id="librados_8h_1a167b88a0cccb06c553e786cf1190ba22"></span><a class="reference internal" href="#c.CEPH_RADOS_API" title="CEPH_RADOS_API">CEPH_RADOS_API</a> int <code class="sig-name descname">rados_ioctx_selfmanaged_snap_set_write_ctx</code><span class="sig-paren">(</span><a class="reference internal" href="#c.rados_ioctx_t" title="rados_ioctx_t">rados_ioctx_t</a><em> io</em>, <a class="reference internal" href="#c.rados_snap_t" title="rados_snap_t">rados_snap_t</a><em> seq</em>, <a class="reference internal" href="#c.rados_snap_t" title="rados_snap_t">rados_snap_t</a> *<em> snaps</em>, int<em> num_snaps</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rados_ioctx_selfmanaged_snap_set_write_ctx" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the snapshot context for use when writing to objects</p>
<p>This is stored in the io context, and applies to all future writes.</p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p>0 on success, negative error code on failure </p>
</dd>
<dt><strong>Return</strong></dt><dd><p>-EINVAL if snaps are not in descending order </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">io</span></code>: the io context to change </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">seq</span></code>: the newest snapshot sequence number for the pool </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">snaps</span></code>: array of snapshots in sorted by descending id </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">num_snaps</span></code>: how many snaphosts are in the snaps array </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="c.rados_ioctx_snap_list">
<span class="target" id="librados_8h_1a07cbdeb89d3bb57712e2efd9a276b216"></span><a class="reference internal" href="#c.CEPH_RADOS_API" title="CEPH_RADOS_API">CEPH_RADOS_API</a> int <code class="sig-name descname">rados_ioctx_snap_list</code><span class="sig-paren">(</span><a class="reference internal" href="#c.rados_ioctx_t" title="rados_ioctx_t">rados_ioctx_t</a><em> io</em>, <a class="reference internal" href="#c.rados_snap_t" title="rados_snap_t">rados_snap_t</a> *<em> snaps</em>, int<em> maxlen</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rados_ioctx_snap_list" title="Permalink to this definition">¶</a></dt>
<dd><p>List all the ids of pool snapshots</p>
<p>If the output array does not have enough space to fit all the snapshots, -ERANGE is returned and the caller should retry with a larger array.</p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p>number of snapshots on success, negative error code on failure </p>
</dd>
<dt><strong>Return</strong></dt><dd><p>-ERANGE is returned if the snaps array is too short </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">io</span></code>: the pool to read from </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">snaps</span></code>: where to store the results </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">maxlen</span></code>: the number of rados_snap_t that fit in the snaps array </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="c.rados_ioctx_snap_lookup">
<span class="target" id="librados_8h_1a0e3605c1e6ec7e1f74d89e6f5cb6c780"></span><a class="reference internal" href="#c.CEPH_RADOS_API" title="CEPH_RADOS_API">CEPH_RADOS_API</a> int <code class="sig-name descname">rados_ioctx_snap_lookup</code><span class="sig-paren">(</span><a class="reference internal" href="#c.rados_ioctx_t" title="rados_ioctx_t">rados_ioctx_t</a><em> io</em>, const char *<em> name</em>, <a class="reference internal" href="#c.rados_snap_t" title="rados_snap_t">rados_snap_t</a> *<em> id</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rados_ioctx_snap_lookup" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the id of a pool snapshot</p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p>0 on success, negative error code on failure </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">io</span></code>: the pool to read from </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">name</span></code>: the snapshot to find </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">id</span></code>: where to store the result </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="c.rados_ioctx_snap_get_name">
<span class="target" id="librados_8h_1a5c4dd3bc1af3e693559cdd77677d0367"></span><a class="reference internal" href="#c.CEPH_RADOS_API" title="CEPH_RADOS_API">CEPH_RADOS_API</a> int <code class="sig-name descname">rados_ioctx_snap_get_name</code><span class="sig-paren">(</span><a class="reference internal" href="#c.rados_ioctx_t" title="rados_ioctx_t">rados_ioctx_t</a><em> io</em>, <a class="reference internal" href="#c.rados_snap_t" title="rados_snap_t">rados_snap_t</a><em> id</em>, char *<em> name</em>, int<em> maxlen</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rados_ioctx_snap_get_name" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the name of a pool snapshot</p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p>0 on success, negative error code on failure </p>
</dd>
<dt><strong>Return</strong></dt><dd><p>-ERANGE if the name array is too small </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">io</span></code>: the pool to read from </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">id</span></code>: the snapshot to find </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">name</span></code>: where to store the result </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">maxlen</span></code>: the size of the name array </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="c.rados_ioctx_snap_get_stamp">
<span class="target" id="librados_8h_1a43e4b3c47a04540b9dae9526f51446b2"></span><a class="reference internal" href="#c.CEPH_RADOS_API" title="CEPH_RADOS_API">CEPH_RADOS_API</a> int <code class="sig-name descname">rados_ioctx_snap_get_stamp</code><span class="sig-paren">(</span><a class="reference internal" href="#c.rados_ioctx_t" title="rados_ioctx_t">rados_ioctx_t</a><em> io</em>, <a class="reference internal" href="#c.rados_snap_t" title="rados_snap_t">rados_snap_t</a><em> id</em>, time_t *<em> t</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rados_ioctx_snap_get_stamp" title="Permalink to this definition">¶</a></dt>
<dd><p>Find when a pool snapshot occurred</p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p>0 on success, negative error code on failure </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">io</span></code>: the pool the snapshot was taken in </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">id</span></code>: the snapshot to lookup </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">t</span></code>: where to store the result </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric">Synchronous I/O</p>
<p>Writes are replicated to a number of OSDs based on the configuration of the pool they are in. These write functions block until data is in memory on all replicas of the object they’re writing to - they are equivalent to doing the corresponding asynchronous write, and the calling rados_ioctx_wait_for_complete(). For greater data safety, use the asynchronous functions and rados_aio_wait_for_safe(). </p>
<dl class="function">
<dt id="c.rados_get_last_version">
<span class="target" id="librados_8h_1af03c0d22c25c1473d29bc418a16f2131"></span><a class="reference internal" href="#c.CEPH_RADOS_API" title="CEPH_RADOS_API">CEPH_RADOS_API</a> uint64_t <code class="sig-name descname">rados_get_last_version</code><span class="sig-paren">(</span><a class="reference internal" href="#c.rados_ioctx_t" title="rados_ioctx_t">rados_ioctx_t</a><em> io</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rados_get_last_version" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the version of the last object read or written to.</p>
<p>This exposes the internal version number of the last object read or written via this io context</p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p>last read or written object version </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">io</span></code>: the io context to check </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="c.rados_write">
<span class="target" id="librados_8h_1a6c14a0314a6bed507dd815183598376b"></span><a class="reference internal" href="#c.CEPH_RADOS_API" title="CEPH_RADOS_API">CEPH_RADOS_API</a> int <code class="sig-name descname">rados_write</code><span class="sig-paren">(</span><a class="reference internal" href="#c.rados_ioctx_t" title="rados_ioctx_t">rados_ioctx_t</a><em> io</em>, const char *<em> oid</em>, const char *<em> buf</em>, size_t<em> len</em>, uint64_t<em> off</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rados_write" title="Permalink to this definition">¶</a></dt>
<dd><p>Write <em>len</em> bytes from <em>buf</em> into the <em>oid</em> object, starting at offset <em>off</em>. The value of <em>len</em> must be &lt;= UINT_MAX/2.</p>
<p><dl class="simple">
<dt><strong>Note</strong></dt><dd><p>This will never return a positive value not equal to len. </p>
</dd>
<dt><strong>Return</strong></dt><dd><p>0 on success, negative error code on failure </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">io</span></code>: the io context in which the write will occur </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">oid</span></code>: name of the object </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">buf</span></code>: data to write </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">len</span></code>: length of the data, in bytes </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">off</span></code>: byte offset in the object to begin writing at </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="c.rados_write_full">
<span class="target" id="librados_8h_1a8dd9ea7a01a033f6d41ed4af3c801b02"></span><a class="reference internal" href="#c.CEPH_RADOS_API" title="CEPH_RADOS_API">CEPH_RADOS_API</a> int <code class="sig-name descname">rados_write_full</code><span class="sig-paren">(</span><a class="reference internal" href="#c.rados_ioctx_t" title="rados_ioctx_t">rados_ioctx_t</a><em> io</em>, const char *<em> oid</em>, const char *<em> buf</em>, size_t<em> len</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rados_write_full" title="Permalink to this definition">¶</a></dt>
<dd><p>Write <em>len</em> bytes from <em>buf</em> into the <em>oid</em> object. The value of <em>len</em> must be &lt;= UINT_MAX/2.</p>
<p>The object is filled with the provided data. If the object exists, it is atomically truncated and then written.</p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p>0 on success, negative error code on failure </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">io</span></code>: the io context in which the write will occur </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">oid</span></code>: name of the object </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">buf</span></code>: data to write </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">len</span></code>: length of the data, in bytes </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="c.rados_writesame">
<span class="target" id="librados_8h_1a7ec1a7b675f1253764ca1b668f84418d"></span><a class="reference internal" href="#c.CEPH_RADOS_API" title="CEPH_RADOS_API">CEPH_RADOS_API</a> int <code class="sig-name descname">rados_writesame</code><span class="sig-paren">(</span><a class="reference internal" href="#c.rados_ioctx_t" title="rados_ioctx_t">rados_ioctx_t</a><em> io</em>, const char *<em> oid</em>, const char *<em> buf</em>, size_t<em> data_len</em>, size_t<em> write_len</em>, uint64_t<em> off</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rados_writesame" title="Permalink to this definition">¶</a></dt>
<dd><p>Write the same <em>data_len</em> bytes from <em>buf</em> multiple times into the <em>oid</em> object. <em>write_len</em> bytes are written in total, which must be a multiple of <em>data_len</em>. The value of <em>write_len</em> and <em>data_len</em> must be &lt;= UINT_MAX/2.</p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p>0 on success, negative error code on failure </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">io</span></code>: the io context in which the write will occur </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">oid</span></code>: name of the object </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">buf</span></code>: data to write </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">data_len</span></code>: length of the data, in bytes </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">write_len</span></code>: the total number of bytes to write </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">off</span></code>: byte offset in the object to begin writing at </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="c.rados_append">
<span class="target" id="librados_8h_1a540fd1ea20ff7c54bab80f240fcc7e4f"></span><a class="reference internal" href="#c.CEPH_RADOS_API" title="CEPH_RADOS_API">CEPH_RADOS_API</a> int <code class="sig-name descname">rados_append</code><span class="sig-paren">(</span><a class="reference internal" href="#c.rados_ioctx_t" title="rados_ioctx_t">rados_ioctx_t</a><em> io</em>, const char *<em> oid</em>, const char *<em> buf</em>, size_t<em> len</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rados_append" title="Permalink to this definition">¶</a></dt>
<dd><p>Append <em>len</em> bytes from <em>buf</em> into the <em>oid</em> object. The value of <em>len</em> must be &lt;= UINT_MAX/2.</p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p>0 on success, negative error code on failure </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">io</span></code>: the context to operate in </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">oid</span></code>: the name of the object </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">buf</span></code>: the data to append </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">len</span></code>: length of buf (in bytes) </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="c.rados_read">
<span class="target" id="librados_8h_1adba16f73ecb0aa12ed9773e2faa2aeef"></span><a class="reference internal" href="#c.CEPH_RADOS_API" title="CEPH_RADOS_API">CEPH_RADOS_API</a> int <code class="sig-name descname">rados_read</code><span class="sig-paren">(</span><a class="reference internal" href="#c.rados_ioctx_t" title="rados_ioctx_t">rados_ioctx_t</a><em> io</em>, const char *<em> oid</em>, char *<em> buf</em>, size_t<em> len</em>, uint64_t<em> off</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rados_read" title="Permalink to this definition">¶</a></dt>
<dd><p>Read data from an object</p>
<p>The io context determines the snapshot to read from, if any was set by rados_ioctx_snap_set_read().</p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p>number of bytes read on success, negative error code on failure </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">io</span></code>: the context in which to perform the read </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">oid</span></code>: the name of the object to read from </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">buf</span></code>: where to store the results </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">len</span></code>: the number of bytes to read </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">off</span></code>: the offset to start reading from in the object </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="c.rados_checksum">
<span class="target" id="librados_8h_1a9ae5437fd6a2026be264dffda9b4fc89"></span><a class="reference internal" href="#c.CEPH_RADOS_API" title="CEPH_RADOS_API">CEPH_RADOS_API</a> int <code class="sig-name descname">rados_checksum</code><span class="sig-paren">(</span><a class="reference internal" href="#c.rados_ioctx_t" title="rados_ioctx_t">rados_ioctx_t</a><em> io</em>, const char *<em> oid</em>, <a class="reference internal" href="#c.rados_checksum_type_t" title="rados_checksum_type_t">rados_checksum_type_t</a><em> type</em>, const char *<em> init_value</em>, size_t<em> init_value_len</em>, size_t<em> len</em>, uint64_t<em> off</em>, size_t<em> chunk_size</em>, char *<em> pchecksum</em>, size_t<em> checksum_len</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rados_checksum" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute checksum from object data</p>
<p>The io context determines the snapshot to checksum, if any was set by rados_ioctx_snap_set_read(). The length of the init_value and resulting checksum are dependent upon the checksum type:</p>
<p>XXHASH64: le64 XXHASH32: le32 CRC32C: le32</p>
<p>The checksum result is encoded the following manner:</p>
<p>le32 num_checksum_chunks { leXX checksum for chunk (where XX = appropriate size for the checksum type) } * num_checksum_chunks</p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p>negative error code on failure </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">io</span></code>: the context in which to perform the checksum </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">oid</span></code>: the name of the object to checksum </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">type</span></code>: the checksum algorithm to utilize </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">init_value</span></code>: the init value for the algorithm </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">init_value_len</span></code>: the length of the init value </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">len</span></code>: the number of bytes to checksum </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">off</span></code>: the offset to start checksumming in the object </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">chunk_size</span></code>: optional length-aligned chunk size for checksums </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pchecksum</span></code>: where to store the checksum result </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">checksum_len</span></code>: the number of bytes available for the result </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="c.rados_remove">
<span class="target" id="librados_8h_1a7f798a662c135887fa8d2c615f7ddb24"></span><a class="reference internal" href="#c.CEPH_RADOS_API" title="CEPH_RADOS_API">CEPH_RADOS_API</a> int <code class="sig-name descname">rados_remove</code><span class="sig-paren">(</span><a class="reference internal" href="#c.rados_ioctx_t" title="rados_ioctx_t">rados_ioctx_t</a><em> io</em>, const char *<em> oid</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rados_remove" title="Permalink to this definition">¶</a></dt>
<dd><p>Delete an object</p>
<p><dl class="simple">
<dt><strong>Note</strong></dt><dd><p>This does not delete any snapshots of the object.</p>
</dd>
<dt><strong>Return</strong></dt><dd><p>0 on success, negative error code on failure </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">io</span></code>: the pool to delete the object from </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">oid</span></code>: the name of the object to delete </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="c.rados_trunc">
<span class="target" id="librados_8h_1a9d097d3def2362959a3af634076977ee"></span><a class="reference internal" href="#c.CEPH_RADOS_API" title="CEPH_RADOS_API">CEPH_RADOS_API</a> int <code class="sig-name descname">rados_trunc</code><span class="sig-paren">(</span><a class="reference internal" href="#c.rados_ioctx_t" title="rados_ioctx_t">rados_ioctx_t</a><em> io</em>, const char *<em> oid</em>, uint64_t<em> size</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rados_trunc" title="Permalink to this definition">¶</a></dt>
<dd><p>Resize an object</p>
<p>If this enlarges the object, the new area is logically filled with zeroes. If this shrinks the object, the excess data is removed.</p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p>0 on success, negative error code on failure </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">io</span></code>: the context in which to truncate </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">oid</span></code>: the name of the object </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">size</span></code>: the new size of the object in bytes </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="c.rados_cmpext">
<span class="target" id="librados_8h_1ac7faf7936a1af89dbd078fe3a8eaa22c"></span><a class="reference internal" href="#c.CEPH_RADOS_API" title="CEPH_RADOS_API">CEPH_RADOS_API</a> int <code class="sig-name descname">rados_cmpext</code><span class="sig-paren">(</span><a class="reference internal" href="#c.rados_ioctx_t" title="rados_ioctx_t">rados_ioctx_t</a><em> io</em>, const char *<em> o</em>, const char *<em> cmp_buf</em>, size_t<em> cmp_len</em>, uint64_t<em> off</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rados_cmpext" title="Permalink to this definition">¶</a></dt>
<dd><p>Compare an on-disk object range with a buffer</p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p>0 on success, negative error code on failure, (-MAX_ERRNO - mismatch_off) on mismatch </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">io</span></code>: the context in which to perform the comparison </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">o</span></code>: name of the object </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cmp_buf</span></code>: buffer containing bytes to be compared with object contents </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cmp_len</span></code>: length to compare and size of <code class="docutils literal notranslate"><span class="pre">cmp_buf</span></code> in bytes </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">off</span></code>: object byte offset at which to start the comparison </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric">Xattrs</p>
<p>Extended attributes are stored as extended attributes on the files representing an object on the OSDs. Thus, they have the same limitations as the underlying filesystem. On ext4, this means that the total data stored in xattrs cannot exceed 4KB. </p>
<dl class="function">
<dt id="c.rados_getxattr">
<span class="target" id="librados_8h_1a1a42661f155dfdfc25573904f9fe8749"></span><a class="reference internal" href="#c.CEPH_RADOS_API" title="CEPH_RADOS_API">CEPH_RADOS_API</a> int <code class="sig-name descname">rados_getxattr</code><span class="sig-paren">(</span><a class="reference internal" href="#c.rados_ioctx_t" title="rados_ioctx_t">rados_ioctx_t</a><em> io</em>, const char *<em> o</em>, const char *<em> name</em>, char *<em> buf</em>, size_t<em> len</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rados_getxattr" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the value of an extended attribute on an object.</p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p>length of xattr value on success, negative error code on failure </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">io</span></code>: the context in which the attribute is read </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">o</span></code>: name of the object </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">name</span></code>: which extended attribute to read </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">buf</span></code>: where to store the result </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">len</span></code>: size of buf in bytes </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="c.rados_setxattr">
<span class="target" id="librados_8h_1a68c320a11946a5e3de8a07f1f63b0663"></span><a class="reference internal" href="#c.CEPH_RADOS_API" title="CEPH_RADOS_API">CEPH_RADOS_API</a> int <code class="sig-name descname">rados_setxattr</code><span class="sig-paren">(</span><a class="reference internal" href="#c.rados_ioctx_t" title="rados_ioctx_t">rados_ioctx_t</a><em> io</em>, const char *<em> o</em>, const char *<em> name</em>, const char *<em> buf</em>, size_t<em> len</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rados_setxattr" title="Permalink to this definition">¶</a></dt>
<dd><p>Set an extended attribute on an object.</p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p>0 on success, negative error code on failure </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">io</span></code>: the context in which xattr is set </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">o</span></code>: name of the object </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">name</span></code>: which extended attribute to set </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">buf</span></code>: what to store in the xattr </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">len</span></code>: the number of bytes in buf </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="c.rados_rmxattr">
<span class="target" id="librados_8h_1a3ce9090dfd315a5489e66f6e1babe4ed"></span><a class="reference internal" href="#c.CEPH_RADOS_API" title="CEPH_RADOS_API">CEPH_RADOS_API</a> int <code class="sig-name descname">rados_rmxattr</code><span class="sig-paren">(</span><a class="reference internal" href="#c.rados_ioctx_t" title="rados_ioctx_t">rados_ioctx_t</a><em> io</em>, const char *<em> o</em>, const char *<em> name</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rados_rmxattr" title="Permalink to this definition">¶</a></dt>
<dd><p>Delete an extended attribute from an object.</p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p>0 on success, negative error code on failure </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">io</span></code>: the context in which to delete the xattr </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">o</span></code>: the name of the object </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">name</span></code>: which xattr to delete </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="c.rados_getxattrs">
<span class="target" id="librados_8h_1a3cd7a2f9aabdff37d3feaba25adb6001"></span><a class="reference internal" href="#c.CEPH_RADOS_API" title="CEPH_RADOS_API">CEPH_RADOS_API</a> int <code class="sig-name descname">rados_getxattrs</code><span class="sig-paren">(</span><a class="reference internal" href="#c.rados_ioctx_t" title="rados_ioctx_t">rados_ioctx_t</a><em> io</em>, const char *<em> oid</em>, <a class="reference internal" href="#c.rados_xattrs_iter_t" title="rados_xattrs_iter_t">rados_xattrs_iter_t</a> *<em> iter</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rados_getxattrs" title="Permalink to this definition">¶</a></dt>
<dd><p>Start iterating over xattrs on an object.</p>
<p><dl class="simple">
<dt><strong>Post</strong></dt><dd><p>iter is a valid iterator</p>
</dd>
<dt><strong>Return</strong></dt><dd><p>0 on success, negative error code on failure </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">io</span></code>: the context in which to list xattrs </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">oid</span></code>: name of the object </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">iter</span></code>: where to store the iterator </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="c.rados_getxattrs_next">
<span class="target" id="librados_8h_1ab9fe9f160d6d11441ceb4570d56c8630"></span><a class="reference internal" href="#c.CEPH_RADOS_API" title="CEPH_RADOS_API">CEPH_RADOS_API</a> int <code class="sig-name descname">rados_getxattrs_next</code><span class="sig-paren">(</span><a class="reference internal" href="#c.rados_xattrs_iter_t" title="rados_xattrs_iter_t">rados_xattrs_iter_t</a><em> iter</em>, const char **<em> name</em>, const char **<em> val</em>, size_t *<em> len</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rados_getxattrs_next" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the next xattr on the object</p>
<p><dl class="simple">
<dt><strong>Pre</strong></dt><dd><p>iter is a valid iterator</p>
</dd>
<dt><strong>Post</strong></dt><dd><p>name is the NULL-terminated name of the next xattr, and val contains the value of the xattr, which is of length len. If the end of the list has been reached, name and val are NULL, and len is 0.</p>
</dd>
<dt><strong>Return</strong></dt><dd><p>0 on success, negative error code on failure </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">iter</span></code>: iterator to advance </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">name</span></code>: where to store the name of the next xattr </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">val</span></code>: where to store the value of the next xattr </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">len</span></code>: the number of bytes in val </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="c.rados_getxattrs_end">
<span class="target" id="librados_8h_1abbf5f8bb4a12a188bfa122d5ec030824"></span><a class="reference internal" href="#c.CEPH_RADOS_API" title="CEPH_RADOS_API">CEPH_RADOS_API</a> void <code class="sig-name descname">rados_getxattrs_end</code><span class="sig-paren">(</span><a class="reference internal" href="#c.rados_xattrs_iter_t" title="rados_xattrs_iter_t">rados_xattrs_iter_t</a><em> iter</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rados_getxattrs_end" title="Permalink to this definition">¶</a></dt>
<dd><p>Close the xattr iterator.</p>
<p>iter should not be used after this is called.</p>
<p><dl class="simple">
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">iter</span></code>: the iterator to close </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric">Asynchronous Xattrs</p>
<p>Extended attributes are stored as extended attributes on the files representing an object on the OSDs. Thus, they have the same limitations as the underlying filesystem. On ext4, this means that the total data stored in xattrs cannot exceed 4KB. </p>
<dl class="function">
<dt id="c.rados_aio_getxattr">
<span class="target" id="librados_8h_1abc37139524577dc3e9b881fdcc1d80d2"></span><a class="reference internal" href="#c.CEPH_RADOS_API" title="CEPH_RADOS_API">CEPH_RADOS_API</a> int <code class="sig-name descname">rados_aio_getxattr</code><span class="sig-paren">(</span><a class="reference internal" href="#c.rados_ioctx_t" title="rados_ioctx_t">rados_ioctx_t</a><em> io</em>, const char *<em> o</em>, <a class="reference internal" href="#c.rados_completion_t" title="rados_completion_t">rados_completion_t</a><em> completion</em>, const char *<em> name</em>, char *<em> buf</em>, size_t<em> len</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rados_aio_getxattr" title="Permalink to this definition">¶</a></dt>
<dd><p>Asynchronously get the value of an extended attribute on an object.</p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p>length of xattr value on success, negative error code on failure </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">io</span></code>: the context in which the attribute is read </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">o</span></code>: name of the object </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">completion</span></code>: what to do when the getxattr completes </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">name</span></code>: which extended attribute to read </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">buf</span></code>: where to store the result </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">len</span></code>: size of buf in bytes </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="c.rados_aio_setxattr">
<span class="target" id="librados_8h_1aa876ebd1977efb45fa1be1a37b7c1ffd"></span><a class="reference internal" href="#c.CEPH_RADOS_API" title="CEPH_RADOS_API">CEPH_RADOS_API</a> int <code class="sig-name descname">rados_aio_setxattr</code><span class="sig-paren">(</span><a class="reference internal" href="#c.rados_ioctx_t" title="rados_ioctx_t">rados_ioctx_t</a><em> io</em>, const char *<em> o</em>, <a class="reference internal" href="#c.rados_completion_t" title="rados_completion_t">rados_completion_t</a><em> completion</em>, const char *<em> name</em>, const char *<em> buf</em>, size_t<em> len</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rados_aio_setxattr" title="Permalink to this definition">¶</a></dt>
<dd><p>Asynchronously set an extended attribute on an object.</p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p>0 on success, negative error code on failure </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">io</span></code>: the context in which xattr is set </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">o</span></code>: name of the object </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">completion</span></code>: what to do when the setxattr completes </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">name</span></code>: which extended attribute to set </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">buf</span></code>: what to store in the xattr </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">len</span></code>: the number of bytes in buf </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="c.rados_aio_rmxattr">
<span class="target" id="librados_8h_1a53971c5fff31bdd689efdbb08ef8bbfd"></span><a class="reference internal" href="#c.CEPH_RADOS_API" title="CEPH_RADOS_API">CEPH_RADOS_API</a> int <code class="sig-name descname">rados_aio_rmxattr</code><span class="sig-paren">(</span><a class="reference internal" href="#c.rados_ioctx_t" title="rados_ioctx_t">rados_ioctx_t</a><em> io</em>, const char *<em> o</em>, <a class="reference internal" href="#c.rados_completion_t" title="rados_completion_t">rados_completion_t</a><em> completion</em>, const char *<em> name</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rados_aio_rmxattr" title="Permalink to this definition">¶</a></dt>
<dd><p>Asynchronously delete an extended attribute from an object.</p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p>0 on success, negative error code on failure </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">io</span></code>: the context in which to delete the xattr </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">o</span></code>: the name of the object </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">completion</span></code>: what to do when the rmxattr completes </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">name</span></code>: which xattr to delete </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="c.rados_aio_getxattrs">
<span class="target" id="librados_8h_1a409fa5b00c3bd63d5b04e0df50f8eace"></span><a class="reference internal" href="#c.CEPH_RADOS_API" title="CEPH_RADOS_API">CEPH_RADOS_API</a> int <code class="sig-name descname">rados_aio_getxattrs</code><span class="sig-paren">(</span><a class="reference internal" href="#c.rados_ioctx_t" title="rados_ioctx_t">rados_ioctx_t</a><em> io</em>, const char *<em> oid</em>, <a class="reference internal" href="#c.rados_completion_t" title="rados_completion_t">rados_completion_t</a><em> completion</em>, <a class="reference internal" href="#c.rados_xattrs_iter_t" title="rados_xattrs_iter_t">rados_xattrs_iter_t</a> *<em> iter</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rados_aio_getxattrs" title="Permalink to this definition">¶</a></dt>
<dd><p>Asynchronously start iterating over xattrs on an object.</p>
<p><dl class="simple">
<dt><strong>Post</strong></dt><dd><p>iter is a valid iterator</p>
</dd>
<dt><strong>Return</strong></dt><dd><p>0 on success, negative error code on failure </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">io</span></code>: the context in which to list xattrs </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">oid</span></code>: name of the object </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">completion</span></code>: what to do when the getxattrs completes </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">iter</span></code>: where to store the iterator </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric">Hints</p>
<dl class="function">
<dt id="c.rados_set_alloc_hint">
<span class="target" id="librados_8h_1abd78efb9532478e17b10ccbc971b91e7"></span><a class="reference internal" href="#c.CEPH_RADOS_API" title="CEPH_RADOS_API">CEPH_RADOS_API</a> int <code class="sig-name descname">rados_set_alloc_hint</code><span class="sig-paren">(</span><a class="reference internal" href="#c.rados_ioctx_t" title="rados_ioctx_t">rados_ioctx_t</a><em> io</em>, const char *<em> o</em>, uint64_t<em> expected_object_size</em>, uint64_t<em> expected_write_size</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rados_set_alloc_hint" title="Permalink to this definition">¶</a></dt>
<dd><p>Set allocation hint for an object</p>
<p>This is an advisory operation, it will always succeed (as if it was submitted with a LIBRADOS_OP_FLAG_FAILOK flag set) and is not guaranteed to do anything on the backend.</p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p>0 on success, negative error code on failure </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">io</span></code>: the pool the object is in </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">o</span></code>: the name of the object </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">expected_object_size</span></code>: expected size of the object, in bytes </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">expected_write_size</span></code>: expected size of writes to the object, in bytes </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="c.rados_set_alloc_hint2">
<span class="target" id="librados_8h_1a9708cc7393eb0bd1dd4c3d1e0ade2bac"></span><a class="reference internal" href="#c.CEPH_RADOS_API" title="CEPH_RADOS_API">CEPH_RADOS_API</a> int <code class="sig-name descname">rados_set_alloc_hint2</code><span class="sig-paren">(</span><a class="reference internal" href="#c.rados_ioctx_t" title="rados_ioctx_t">rados_ioctx_t</a><em> io</em>, const char *<em> o</em>, uint64_t<em> expected_object_size</em>, uint64_t<em> expected_write_size</em>, uint32_t<em> flags</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rados_set_alloc_hint2" title="Permalink to this definition">¶</a></dt>
<dd><p>Set allocation hint for an object</p>
<p>This is an advisory operation, it will always succeed (as if it was submitted with a LIBRADOS_OP_FLAG_FAILOK flag set) and is not guaranteed to do anything on the backend.</p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p>0 on success, negative error code on failure </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">io</span></code>: the pool the object is in </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">o</span></code>: the name of the object </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">expected_object_size</span></code>: expected size of the object, in bytes </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">expected_write_size</span></code>: expected size of writes to the object, in bytes </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">flags</span></code>: hints about future IO patterns </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric">Object Operations</p>
<p>A single rados operation can do multiple operations on one object atomically. The whole operation will succeed or fail, and no partial results will be visible.</p>
<p>Operations may be either reads, which can return data, or writes, which cannot. The effects of writes are applied and visible all at once, so an operation that sets an xattr and then checks its value will not see the updated value. </p>
<dl class="function">
<dt id="c.rados_create_write_op">
<span class="target" id="librados_8h_1af1a3dddf1756d6ffdb48417b63cc72d6"></span><a class="reference internal" href="#c.CEPH_RADOS_API" title="CEPH_RADOS_API">CEPH_RADOS_API</a> <a class="reference internal" href="#c.rados_write_op_t" title="rados_write_op_t">rados_write_op_t</a> <code class="sig-name descname">rados_create_write_op</code><span class="sig-paren">(</span>void<span class="sig-paren">)</span><a class="headerlink" href="#c.rados_create_write_op" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a new rados_write_op_t write operation. This will store all actions to be performed atomically. You must call rados_release_write_op when you are finished with it.</p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p>non-NULL on success, NULL on memory allocation error. </p>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="c.rados_release_write_op">
<span class="target" id="librados_8h_1a4fe6fc320c2658c6c3820a2d0e39fb2d"></span><a class="reference internal" href="#c.CEPH_RADOS_API" title="CEPH_RADOS_API">CEPH_RADOS_API</a> void <code class="sig-name descname">rados_release_write_op</code><span class="sig-paren">(</span><a class="reference internal" href="#c.rados_write_op_t" title="rados_write_op_t">rados_write_op_t</a><em> write_op</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rados_release_write_op" title="Permalink to this definition">¶</a></dt>
<dd><p>Free a rados_write_op_t, must be called when you’re done with it. <dl class="simple">
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">write_op</span></code>: operation to deallocate, created with rados_create_write_op </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="c.rados_write_op_set_flags">
<span class="target" id="librados_8h_1a3cd5c699edf254c1d35f05276a1c8c6f"></span><a class="reference internal" href="#c.CEPH_RADOS_API" title="CEPH_RADOS_API">CEPH_RADOS_API</a> void <code class="sig-name descname">rados_write_op_set_flags</code><span class="sig-paren">(</span><a class="reference internal" href="#c.rados_write_op_t" title="rados_write_op_t">rados_write_op_t</a><em> write_op</em>, int<em> flags</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rados_write_op_set_flags" title="Permalink to this definition">¶</a></dt>
<dd><p>Set flags for the last operation added to this write_op. At least one op must have been added to the write_op. <dl class="simple">
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">write_op</span></code>: operation to add this action to </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">flags</span></code>: see librados.h constants beginning with LIBRADOS_OP_FLAG </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="c.rados_write_op_assert_exists">
<span class="target" id="librados_8h_1a459637c40a24a01ba53f9d74d74c3d25"></span><a class="reference internal" href="#c.CEPH_RADOS_API" title="CEPH_RADOS_API">CEPH_RADOS_API</a> void <code class="sig-name descname">rados_write_op_assert_exists</code><span class="sig-paren">(</span><a class="reference internal" href="#c.rados_write_op_t" title="rados_write_op_t">rados_write_op_t</a><em> write_op</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rados_write_op_assert_exists" title="Permalink to this definition">¶</a></dt>
<dd><p>Ensure that the object exists before writing <dl class="simple">
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">write_op</span></code>: operation to add this action to </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="c.rados_write_op_assert_version">
<span class="target" id="librados_8h_1a3cbd03eef7f3b8004cabdb96d0ea8e1b"></span><a class="reference internal" href="#c.CEPH_RADOS_API" title="CEPH_RADOS_API">CEPH_RADOS_API</a> void <code class="sig-name descname">rados_write_op_assert_version</code><span class="sig-paren">(</span><a class="reference internal" href="#c.rados_write_op_t" title="rados_write_op_t">rados_write_op_t</a><em> write_op</em>, uint64_t<em> ver</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rados_write_op_assert_version" title="Permalink to this definition">¶</a></dt>
<dd><p>Ensure that the object exists and that its internal version number is equal to “ver” before writing. “ver” should be a version number previously obtained with rados_get_last_version().<ul class="simple">
<li><p>If the object’s version is greater than the asserted version then rados_write_op_operate will return -ERANGE instead of executing the op.</p></li>
<li><p>If the object’s version is less than the asserted version then rados_write_op_operate will return -EOVERFLOW instead of executing the op. <dl class="simple">
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist">
<li><p><code class="docutils literal notranslate"><span class="pre">write_op</span></code>: operation to add this action to </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ver</span></code>: object version number </p></li>
</ul>
</dd>
</dl>
</p></li>
</ul>
</p>
</dd></dl>

<dl class="function">
<dt id="c.rados_write_op_cmpext">
<span class="target" id="librados_8h_1a1304f58547769028259dee8e750fb744"></span><a class="reference internal" href="#c.CEPH_RADOS_API" title="CEPH_RADOS_API">CEPH_RADOS_API</a> void <code class="sig-name descname">rados_write_op_cmpext</code><span class="sig-paren">(</span><a class="reference internal" href="#c.rados_write_op_t" title="rados_write_op_t">rados_write_op_t</a><em> write_op</em>, const char *<em> cmp_buf</em>, size_t<em> cmp_len</em>, uint64_t<em> off</em>, int *<em> prval</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rados_write_op_cmpext" title="Permalink to this definition">¶</a></dt>
<dd><p>Ensure that given object range (extent) satisfies comparison.</p>
<p><dl class="simple">
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">write_op</span></code>: operation to add this action to </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cmp_buf</span></code>: buffer containing bytes to be compared with object contents </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cmp_len</span></code>: length to compare and size of <code class="docutils literal notranslate"><span class="pre">cmp_buf</span></code> in bytes </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">off</span></code>: object byte offset at which to start the comparison </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">prval</span></code>: returned result of comparison, 0 on success, negative error code on failure, (-MAX_ERRNO - mismatch_off) on mismatch </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="c.rados_write_op_cmpxattr">
<span class="target" id="librados_8h_1afbb02f70537541e97839f41d8c5966cb"></span><a class="reference internal" href="#c.CEPH_RADOS_API" title="CEPH_RADOS_API">CEPH_RADOS_API</a> void <code class="sig-name descname">rados_write_op_cmpxattr</code><span class="sig-paren">(</span><a class="reference internal" href="#c.rados_write_op_t" title="rados_write_op_t">rados_write_op_t</a><em> write_op</em>, const char *<em> name</em>, uint8_t<em> comparison_operator</em>, const char *<em> value</em>, size_t<em> value_len</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rados_write_op_cmpxattr" title="Permalink to this definition">¶</a></dt>
<dd><p>Ensure that given xattr satisfies comparison. If the comparison is not satisfied, the return code of the operation will be -ECANCELED <dl class="simple">
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">write_op</span></code>: operation to add this action to </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">name</span></code>: name of the xattr to look up </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">comparison_operator</span></code>: currently undocumented, look for LIBRADOS_CMPXATTR_OP_EQ in librados.h </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">value</span></code>: buffer to compare actual xattr value to </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">value_len</span></code>: length of buffer to compare actual xattr value to </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="c.rados_write_op_omap_cmp">
<span class="target" id="librados_8h_1ae438d976007b3416d0bbc730d855f645"></span><a class="reference internal" href="#c.CEPH_RADOS_API" title="CEPH_RADOS_API">CEPH_RADOS_API</a> void <code class="sig-name descname">rados_write_op_omap_cmp</code><span class="sig-paren">(</span><a class="reference internal" href="#c.rados_write_op_t" title="rados_write_op_t">rados_write_op_t</a><em> write_op</em>, const char *<em> key</em>, uint8_t<em> comparison_operator</em>, const char *<em> val</em>, size_t<em> val_len</em>, int *<em> prval</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rados_write_op_omap_cmp" title="Permalink to this definition">¶</a></dt>
<dd><p>Ensure that the an omap value satisfies a comparison, with the supplied value on the right hand side (i.e. for OP_LT, the comparison is actual_value &lt; value.</p>
<p><dl class="simple">
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">write_op</span></code>: operation to add this action to </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">key</span></code>: which omap value to compare </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">comparison_operator</span></code>: one of LIBRADOS_CMPXATTR_OP_EQ, LIBRADOS_CMPXATTR_OP_LT, or LIBRADOS_CMPXATTR_OP_GT </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">val</span></code>: value to compare with </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">val_len</span></code>: length of value in bytes </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">prval</span></code>: where to store the return value from this action </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="c.rados_write_op_omap_cmp2">
<span class="target" id="librados_8h_1a3277a080706c1b8d575d322c6d11b191"></span><a class="reference internal" href="#c.CEPH_RADOS_API" title="CEPH_RADOS_API">CEPH_RADOS_API</a> void <code class="sig-name descname">rados_write_op_omap_cmp2</code><span class="sig-paren">(</span><a class="reference internal" href="#c.rados_write_op_t" title="rados_write_op_t">rados_write_op_t</a><em> write_op</em>, const char *<em> key</em>, uint8_t<em> comparison_operator</em>, const char *<em> val</em>, size_t<em> key_len</em>, size_t<em> val_len</em>, int *<em> prval</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rados_write_op_omap_cmp2" title="Permalink to this definition">¶</a></dt>
<dd><p>Ensure that the an omap value satisfies a comparison, with the supplied value on the right hand side (i.e. for OP_LT, the comparison is actual_value &lt; value.</p>
<p><dl class="simple">
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">write_op</span></code>: operation to add this action to </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">key</span></code>: which omap value to compare </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">comparison_operator</span></code>: one of LIBRADOS_CMPXATTR_OP_EQ, LIBRADOS_CMPXATTR_OP_LT, or LIBRADOS_CMPXATTR_OP_GT </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">val</span></code>: value to compare with </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">key_len</span></code>: length of key in bytes </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">val_len</span></code>: length of value in bytes </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">prval</span></code>: where to store the return value from this action </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="c.rados_write_op_setxattr">
<span class="target" id="librados_8h_1acc58681b93def974e40fe49a05a291d7"></span><a class="reference internal" href="#c.CEPH_RADOS_API" title="CEPH_RADOS_API">CEPH_RADOS_API</a> void <code class="sig-name descname">rados_write_op_setxattr</code><span class="sig-paren">(</span><a class="reference internal" href="#c.rados_write_op_t" title="rados_write_op_t">rados_write_op_t</a><em> write_op</em>, const char *<em> name</em>, const char *<em> value</em>, size_t<em> value_len</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rados_write_op_setxattr" title="Permalink to this definition">¶</a></dt>
<dd><p>Set an xattr <dl class="simple">
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">write_op</span></code>: operation to add this action to </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">name</span></code>: name of the xattr </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">value</span></code>: buffer to set xattr to </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">value_len</span></code>: length of buffer to set xattr to </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="c.rados_write_op_rmxattr">
<span class="target" id="librados_8h_1a99388a92b5c0de558fcf994683fe4303"></span><a class="reference internal" href="#c.CEPH_RADOS_API" title="CEPH_RADOS_API">CEPH_RADOS_API</a> void <code class="sig-name descname">rados_write_op_rmxattr</code><span class="sig-paren">(</span><a class="reference internal" href="#c.rados_write_op_t" title="rados_write_op_t">rados_write_op_t</a><em> write_op</em>, const char *<em> name</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rados_write_op_rmxattr" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove an xattr <dl class="simple">
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">write_op</span></code>: operation to add this action to </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">name</span></code>: name of the xattr to remove </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="c.rados_write_op_create">
<span class="target" id="librados_8h_1a871253b998c0bf4a0d68f31b51e90b59"></span><a class="reference internal" href="#c.CEPH_RADOS_API" title="CEPH_RADOS_API">CEPH_RADOS_API</a> void <code class="sig-name descname">rados_write_op_create</code><span class="sig-paren">(</span><a class="reference internal" href="#c.rados_write_op_t" title="rados_write_op_t">rados_write_op_t</a><em> write_op</em>, int<em> exclusive</em>, const char *<em> category</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rados_write_op_create" title="Permalink to this definition">¶</a></dt>
<dd><p>Create the object <dl class="simple">
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">write_op</span></code>: operation to add this action to </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">exclusive</span></code>: set to either LIBRADOS_CREATE_EXCLUSIVE or LIBRADOS_CREATE_IDEMPOTENT will error if the object already exists. </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">category</span></code>: category string (DEPRECATED, HAS NO EFFECT) </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="c.rados_write_op_write">
<span class="target" id="librados_8h_1a87fda9540d2afb70031cdc7bf884e6d0"></span><a class="reference internal" href="#c.CEPH_RADOS_API" title="CEPH_RADOS_API">CEPH_RADOS_API</a> void <code class="sig-name descname">rados_write_op_write</code><span class="sig-paren">(</span><a class="reference internal" href="#c.rados_write_op_t" title="rados_write_op_t">rados_write_op_t</a><em> write_op</em>, const char *<em> buffer</em>, size_t<em> len</em>, uint64_t<em> offset</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rados_write_op_write" title="Permalink to this definition">¶</a></dt>
<dd><p>Write to offset <dl class="simple">
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">write_op</span></code>: operation to add this action to </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">offset</span></code>: offset to write to </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">buffer</span></code>: bytes to write </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">len</span></code>: length of buffer </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="c.rados_write_op_write_full">
<span class="target" id="librados_8h_1afff830c06c309f4caff26edd976d362c"></span><a class="reference internal" href="#c.CEPH_RADOS_API" title="CEPH_RADOS_API">CEPH_RADOS_API</a> void <code class="sig-name descname">rados_write_op_write_full</code><span class="sig-paren">(</span><a class="reference internal" href="#c.rados_write_op_t" title="rados_write_op_t">rados_write_op_t</a><em> write_op</em>, const char *<em> buffer</em>, size_t<em> len</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rados_write_op_write_full" title="Permalink to this definition">¶</a></dt>
<dd><p>Write whole object, atomically replacing it. <dl class="simple">
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">write_op</span></code>: operation to add this action to </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">buffer</span></code>: bytes to write </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">len</span></code>: length of buffer </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="c.rados_write_op_writesame">
<span class="target" id="librados_8h_1ad5efc1f03719403a33c877440c2c27d3"></span><a class="reference internal" href="#c.CEPH_RADOS_API" title="CEPH_RADOS_API">CEPH_RADOS_API</a> void <code class="sig-name descname">rados_write_op_writesame</code><span class="sig-paren">(</span><a class="reference internal" href="#c.rados_write_op_t" title="rados_write_op_t">rados_write_op_t</a><em> write_op</em>, const char *<em> buffer</em>, size_t<em> data_len</em>, size_t<em> write_len</em>, uint64_t<em> offset</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rados_write_op_writesame" title="Permalink to this definition">¶</a></dt>
<dd><p>Write the same buffer multiple times <dl class="simple">
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">write_op</span></code>: operation to add this action to </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">buffer</span></code>: bytes to write </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">data_len</span></code>: length of buffer </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">write_len</span></code>: total number of bytes to write, as a multiple of <code class="docutils literal notranslate"><span class="pre">data_len</span></code> </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">offset</span></code>: offset to write to </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="c.rados_write_op_append">
<span class="target" id="librados_8h_1a279d9af15f591158734f8937cc188011"></span><a class="reference internal" href="#c.CEPH_RADOS_API" title="CEPH_RADOS_API">CEPH_RADOS_API</a> void <code class="sig-name descname">rados_write_op_append</code><span class="sig-paren">(</span><a class="reference internal" href="#c.rados_write_op_t" title="rados_write_op_t">rados_write_op_t</a><em> write_op</em>, const char *<em> buffer</em>, size_t<em> len</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rados_write_op_append" title="Permalink to this definition">¶</a></dt>
<dd><p>Append to end of object. <dl class="simple">
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">write_op</span></code>: operation to add this action to </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">buffer</span></code>: bytes to write </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">len</span></code>: length of buffer </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="c.rados_write_op_remove">
<span class="target" id="librados_8h_1ab3c2aacf0028c76b91ef77ed1d3767b6"></span><a class="reference internal" href="#c.CEPH_RADOS_API" title="CEPH_RADOS_API">CEPH_RADOS_API</a> void <code class="sig-name descname">rados_write_op_remove</code><span class="sig-paren">(</span><a class="reference internal" href="#c.rados_write_op_t" title="rados_write_op_t">rados_write_op_t</a><em> write_op</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rados_write_op_remove" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove object <dl class="simple">
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">write_op</span></code>: operation to add this action to </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="c.rados_write_op_truncate">
<span class="target" id="librados_8h_1aaf7ed5ece0b071f94f82b54daffdaae5"></span><a class="reference internal" href="#c.CEPH_RADOS_API" title="CEPH_RADOS_API">CEPH_RADOS_API</a> void <code class="sig-name descname">rados_write_op_truncate</code><span class="sig-paren">(</span><a class="reference internal" href="#c.rados_write_op_t" title="rados_write_op_t">rados_write_op_t</a><em> write_op</em>, uint64_t<em> offset</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rados_write_op_truncate" title="Permalink to this definition">¶</a></dt>
<dd><p>Truncate an object <dl class="simple">
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">write_op</span></code>: operation to add this action to </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">offset</span></code>: Offset to truncate to </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="c.rados_write_op_zero">
<span class="target" id="librados_8h_1ae24820c042da2d7d18a0a08e87b9e4a0"></span><a class="reference internal" href="#c.CEPH_RADOS_API" title="CEPH_RADOS_API">CEPH_RADOS_API</a> void <code class="sig-name descname">rados_write_op_zero</code><span class="sig-paren">(</span><a class="reference internal" href="#c.rados_write_op_t" title="rados_write_op_t">rados_write_op_t</a><em> write_op</em>, uint64_t<em> offset</em>, uint64_t<em> len</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rados_write_op_zero" title="Permalink to this definition">¶</a></dt>
<dd><p>Zero part of an object <dl class="simple">
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">write_op</span></code>: operation to add this action to </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">offset</span></code>: Offset to zero </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">len</span></code>: length to zero </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="c.rados_write_op_exec">
<span class="target" id="librados_8h_1a4a5e172333ae4886b913f8189a56209e"></span><a class="reference internal" href="#c.CEPH_RADOS_API" title="CEPH_RADOS_API">CEPH_RADOS_API</a> void <code class="sig-name descname">rados_write_op_exec</code><span class="sig-paren">(</span><a class="reference internal" href="#c.rados_write_op_t" title="rados_write_op_t">rados_write_op_t</a><em> write_op</em>, const char *<em> cls</em>, const char *<em> method</em>, const char *<em> in_buf</em>, size_t<em> in_len</em>, int *<em> prval</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rados_write_op_exec" title="Permalink to this definition">¶</a></dt>
<dd><p>Execute an OSD class method on an object See rados_exec() for general description.</p>
<p><dl class="simple">
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">write_op</span></code>: operation to add this action to </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cls</span></code>: the name of the class </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">method</span></code>: the name of the method </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">in_buf</span></code>: where to find input </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">in_len</span></code>: length of in_buf in bytes </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">prval</span></code>: where to store the return value from the method </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="c.rados_write_op_omap_set">
<span class="target" id="librados_8h_1adfed001930bd8fa7baf874849b784a4d"></span><a class="reference internal" href="#c.CEPH_RADOS_API" title="CEPH_RADOS_API">CEPH_RADOS_API</a> void <code class="sig-name descname">rados_write_op_omap_set</code><span class="sig-paren">(</span><a class="reference internal" href="#c.rados_write_op_t" title="rados_write_op_t">rados_write_op_t</a><em> write_op</em>, char const *const *<em> keys</em>, char const *const *<em> vals</em>, const size_t *<em> lens</em>, size_t<em> num</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rados_write_op_omap_set" title="Permalink to this definition">¶</a></dt>
<dd><p>Set key/value pairs on an object</p>
<p><dl class="simple">
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">write_op</span></code>: operation to add this action to </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">keys</span></code>: array of null-terminated char arrays representing keys to set </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">vals</span></code>: array of pointers to values to set </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">lens</span></code>: array of lengths corresponding to each value </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">num</span></code>: number of key/value pairs to set </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="c.rados_write_op_omap_set2">
<span class="target" id="librados_8h_1a704989cb33d60842b06e88af421065bd"></span><a class="reference internal" href="#c.CEPH_RADOS_API" title="CEPH_RADOS_API">CEPH_RADOS_API</a> void <code class="sig-name descname">rados_write_op_omap_set2</code><span class="sig-paren">(</span><a class="reference internal" href="#c.rados_write_op_t" title="rados_write_op_t">rados_write_op_t</a><em> write_op</em>, char const *const *<em> keys</em>, char const *const *<em> vals</em>, const size_t *<em> key_lens</em>, const size_t *<em> val_lens</em>, size_t<em> num</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rados_write_op_omap_set2" title="Permalink to this definition">¶</a></dt>
<dd><p>Set key/value pairs on an object</p>
<p><dl class="simple">
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">write_op</span></code>: operation to add this action to </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">keys</span></code>: array of null-terminated char arrays representing keys to set </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">vals</span></code>: array of pointers to values to set </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">key_lens</span></code>: array of lengths corresponding to each key </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">val_lens</span></code>: array of lengths corresponding to each value </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">num</span></code>: number of key/value pairs to set </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="c.rados_write_op_omap_rm_keys">
<span class="target" id="librados_8h_1ab67e77fa008171af93d6449f87451342"></span><a class="reference internal" href="#c.CEPH_RADOS_API" title="CEPH_RADOS_API">CEPH_RADOS_API</a> void <code class="sig-name descname">rados_write_op_omap_rm_keys</code><span class="sig-paren">(</span><a class="reference internal" href="#c.rados_write_op_t" title="rados_write_op_t">rados_write_op_t</a><em> write_op</em>, char const *const *<em> keys</em>, size_t<em> keys_len</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rados_write_op_omap_rm_keys" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove key/value pairs from an object</p>
<p><dl class="simple">
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">write_op</span></code>: operation to add this action to </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">keys</span></code>: array of null-terminated char arrays representing keys to remove </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">keys_len</span></code>: number of key/value pairs to remove </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="c.rados_write_op_omap_rm_keys2">
<span class="target" id="librados_8h_1abbe37bee03e213978bdf728b482a0b37"></span><a class="reference internal" href="#c.CEPH_RADOS_API" title="CEPH_RADOS_API">CEPH_RADOS_API</a> void <code class="sig-name descname">rados_write_op_omap_rm_keys2</code><span class="sig-paren">(</span><a class="reference internal" href="#c.rados_write_op_t" title="rados_write_op_t">rados_write_op_t</a><em> write_op</em>, char const *const *<em> keys</em>, const size_t *<em> key_lens</em>, size_t<em> keys_len</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rados_write_op_omap_rm_keys2" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove key/value pairs from an object</p>
<p><dl class="simple">
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">write_op</span></code>: operation to add this action to </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">keys</span></code>: array of char arrays representing keys to remove </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">key_lens</span></code>: array of size_t values representing length of each key </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">keys_len</span></code>: number of key/value pairs to remove </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="c.rados_write_op_omap_rm_range2">
<span class="target" id="librados_8h_1a2f9bec97334d693bb64301134678d3b5"></span><a class="reference internal" href="#c.CEPH_RADOS_API" title="CEPH_RADOS_API">CEPH_RADOS_API</a> void <code class="sig-name descname">rados_write_op_omap_rm_range2</code><span class="sig-paren">(</span><a class="reference internal" href="#c.rados_write_op_t" title="rados_write_op_t">rados_write_op_t</a><em> write_op</em>, const char *<em> key_begin</em>, size_t<em> key_begin_len</em>, const char *<em> key_end</em>, size_t<em> key_end_len</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rados_write_op_omap_rm_range2" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove key/value pairs from an object whose keys are in the range [key_begin, key_end)</p>
<p><dl class="simple">
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">write_op</span></code>: operation to add this action to </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">key_begin</span></code>: the lower bound of the key range to remove </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">key_begin_len</span></code>: length of key_begin </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">key_end</span></code>: the upper bound of the key range to remove </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">key_end_len</span></code>: length of key_end </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="c.rados_write_op_omap_clear">
<span class="target" id="librados_8h_1a3ccb37b35d552479d894897804532957"></span><a class="reference internal" href="#c.CEPH_RADOS_API" title="CEPH_RADOS_API">CEPH_RADOS_API</a> void <code class="sig-name descname">rados_write_op_omap_clear</code><span class="sig-paren">(</span><a class="reference internal" href="#c.rados_write_op_t" title="rados_write_op_t">rados_write_op_t</a><em> write_op</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rados_write_op_omap_clear" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove all key/value pairs from an object</p>
<p><dl class="simple">
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">write_op</span></code>: operation to add this action to </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="c.rados_write_op_set_alloc_hint">
<span class="target" id="librados_8h_1a10d567a2123f01032d653bfeae40dcc3"></span><a class="reference internal" href="#c.CEPH_RADOS_API" title="CEPH_RADOS_API">CEPH_RADOS_API</a> void <code class="sig-name descname">rados_write_op_set_alloc_hint</code><span class="sig-paren">(</span><a class="reference internal" href="#c.rados_write_op_t" title="rados_write_op_t">rados_write_op_t</a><em> write_op</em>, uint64_t<em> expected_object_size</em>, uint64_t<em> expected_write_size</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rados_write_op_set_alloc_hint" title="Permalink to this definition">¶</a></dt>
<dd><p>Set allocation hint for an object</p>
<p><dl class="simple">
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">write_op</span></code>: operation to add this action to </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">expected_object_size</span></code>: expected size of the object, in bytes </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">expected_write_size</span></code>: expected size of writes to the object, in bytes </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="c.rados_write_op_set_alloc_hint2">
<span class="target" id="librados_8h_1a099324b07bafcea221c8bddbd7e72c4b"></span><a class="reference internal" href="#c.CEPH_RADOS_API" title="CEPH_RADOS_API">CEPH_RADOS_API</a> void <code class="sig-name descname">rados_write_op_set_alloc_hint2</code><span class="sig-paren">(</span><a class="reference internal" href="#c.rados_write_op_t" title="rados_write_op_t">rados_write_op_t</a><em> write_op</em>, uint64_t<em> expected_object_size</em>, uint64_t<em> expected_write_size</em>, uint32_t<em> flags</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rados_write_op_set_alloc_hint2" title="Permalink to this definition">¶</a></dt>
<dd><p>Set allocation hint for an object</p>
<p><dl class="simple">
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">write_op</span></code>: operation to add this action to </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">expected_object_size</span></code>: expected size of the object, in bytes </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">expected_write_size</span></code>: expected size of writes to the object, in bytes </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">flags</span></code>: hints about future IO patterns </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="c.rados_write_op_operate">
<span class="target" id="librados_8h_1ad8ed722b0defa7d4f6f8bd7b2329680a"></span><a class="reference internal" href="#c.CEPH_RADOS_API" title="CEPH_RADOS_API">CEPH_RADOS_API</a> int <code class="sig-name descname">rados_write_op_operate</code><span class="sig-paren">(</span><a class="reference internal" href="#c.rados_write_op_t" title="rados_write_op_t">rados_write_op_t</a><em> write_op</em>, <a class="reference internal" href="#c.rados_ioctx_t" title="rados_ioctx_t">rados_ioctx_t</a><em> io</em>, const char *<em> oid</em>, time_t *<em> mtime</em>, int<em> flags</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rados_write_op_operate" title="Permalink to this definition">¶</a></dt>
<dd><p>Perform a write operation synchronously <dl class="simple">
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">write_op</span></code>: operation to perform </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">io</span></code>: the ioctx that the object is in </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">oid</span></code>: the object id </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">mtime</span></code>: the time to set the mtime to, NULL for the current time </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">flags</span></code>: flags to apply to the entire operation (LIBRADOS_OPERATION_*) </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="c.rados_write_op_operate2">
<span class="target" id="librados_8h_1abe8562ae793f79e6bf50ea936023efa6"></span><a class="reference internal" href="#c.CEPH_RADOS_API" title="CEPH_RADOS_API">CEPH_RADOS_API</a> int <code class="sig-name descname">rados_write_op_operate2</code><span class="sig-paren">(</span><a class="reference internal" href="#c.rados_write_op_t" title="rados_write_op_t">rados_write_op_t</a><em> write_op</em>, <a class="reference internal" href="#c.rados_ioctx_t" title="rados_ioctx_t">rados_ioctx_t</a><em> io</em>, const char *<em> oid</em>, struct timespec *<em> mtime</em>, int<em> flags</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rados_write_op_operate2" title="Permalink to this definition">¶</a></dt>
<dd><p>Perform a write operation synchronously <dl class="simple">
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">write_op</span></code>: operation to perform </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">io</span></code>: the ioctx that the object is in </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">oid</span></code>: the object id </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">mtime</span></code>: the time to set the mtime to, NULL for the current time </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">flags</span></code>: flags to apply to the entire operation (LIBRADOS_OPERATION_*) </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="c.rados_aio_write_op_operate">
<span class="target" id="librados_8h_1a509289b47a1b11d70465cd5158731354"></span><a class="reference internal" href="#c.CEPH_RADOS_API" title="CEPH_RADOS_API">CEPH_RADOS_API</a> int <code class="sig-name descname">rados_aio_write_op_operate</code><span class="sig-paren">(</span><a class="reference internal" href="#c.rados_write_op_t" title="rados_write_op_t">rados_write_op_t</a><em> write_op</em>, <a class="reference internal" href="#c.rados_ioctx_t" title="rados_ioctx_t">rados_ioctx_t</a><em> io</em>, <a class="reference internal" href="#c.rados_completion_t" title="rados_completion_t">rados_completion_t</a><em> completion</em>, const char *<em> oid</em>, time_t *<em> mtime</em>, int<em> flags</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rados_aio_write_op_operate" title="Permalink to this definition">¶</a></dt>
<dd><p>Perform a write operation asynchronously <dl class="simple">
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">write_op</span></code>: operation to perform </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">io</span></code>: the ioctx that the object is in </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">completion</span></code>: what to do when operation has been attempted </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">oid</span></code>: the object id </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">mtime</span></code>: the time to set the mtime to, NULL for the current time </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">flags</span></code>: flags to apply to the entire operation (LIBRADOS_OPERATION_*) </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="c.rados_create_read_op">
<span class="target" id="librados_8h_1a36fb813c7253dd8af8ff063bc6101412"></span><a class="reference internal" href="#c.CEPH_RADOS_API" title="CEPH_RADOS_API">CEPH_RADOS_API</a> <a class="reference internal" href="#c.rados_read_op_t" title="rados_read_op_t">rados_read_op_t</a> <code class="sig-name descname">rados_create_read_op</code><span class="sig-paren">(</span>void<span class="sig-paren">)</span><a class="headerlink" href="#c.rados_create_read_op" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a new rados_read_op_t write operation. This will store all actions to be performed atomically. You must call rados_release_read_op when you are finished with it (after it completes, or you decide not to send it in the first place).</p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p>non-NULL on success, NULL on memory allocation error. </p>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="c.rados_release_read_op">
<span class="target" id="librados_8h_1a46da900e0e90ace24ffc63539f86241e"></span><a class="reference internal" href="#c.CEPH_RADOS_API" title="CEPH_RADOS_API">CEPH_RADOS_API</a> void <code class="sig-name descname">rados_release_read_op</code><span class="sig-paren">(</span><a class="reference internal" href="#c.rados_read_op_t" title="rados_read_op_t">rados_read_op_t</a><em> read_op</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rados_release_read_op" title="Permalink to this definition">¶</a></dt>
<dd><p>Free a rados_read_op_t, must be called when you’re done with it. <dl class="simple">
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">read_op</span></code>: operation to deallocate, created with rados_create_read_op </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="c.rados_read_op_set_flags">
<span class="target" id="librados_8h_1afe7176da810543a5eb538222f942962f"></span><a class="reference internal" href="#c.CEPH_RADOS_API" title="CEPH_RADOS_API">CEPH_RADOS_API</a> void <code class="sig-name descname">rados_read_op_set_flags</code><span class="sig-paren">(</span><a class="reference internal" href="#c.rados_read_op_t" title="rados_read_op_t">rados_read_op_t</a><em> read_op</em>, int<em> flags</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rados_read_op_set_flags" title="Permalink to this definition">¶</a></dt>
<dd><p>Set flags for the last operation added to this read_op. At least one op must have been added to the read_op. <dl class="simple">
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">read_op</span></code>: operation to add this action to </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">flags</span></code>: see librados.h constants beginning with LIBRADOS_OP_FLAG </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="c.rados_read_op_assert_exists">
<span class="target" id="librados_8h_1a8cdac9f1af075afcd19dfcc7d7f7bfc8"></span><a class="reference internal" href="#c.CEPH_RADOS_API" title="CEPH_RADOS_API">CEPH_RADOS_API</a> void <code class="sig-name descname">rados_read_op_assert_exists</code><span class="sig-paren">(</span><a class="reference internal" href="#c.rados_read_op_t" title="rados_read_op_t">rados_read_op_t</a><em> read_op</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rados_read_op_assert_exists" title="Permalink to this definition">¶</a></dt>
<dd><p>Ensure that the object exists before reading <dl class="simple">
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">read_op</span></code>: operation to add this action to </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="c.rados_read_op_assert_version">
<span class="target" id="librados_8h_1a2ff9a1cb23a586796efa7f7d91449643"></span><a class="reference internal" href="#c.CEPH_RADOS_API" title="CEPH_RADOS_API">CEPH_RADOS_API</a> void <code class="sig-name descname">rados_read_op_assert_version</code><span class="sig-paren">(</span><a class="reference internal" href="#c.rados_read_op_t" title="rados_read_op_t">rados_read_op_t</a><em> read_op</em>, uint64_t<em> ver</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rados_read_op_assert_version" title="Permalink to this definition">¶</a></dt>
<dd><p>Ensure that the object exists and that its internal version number is equal to “ver” before reading. “ver” should be a version number previously obtained with rados_get_last_version().<ul class="simple">
<li><p>If the object’s version is greater than the asserted version then rados_read_op_operate will return -ERANGE instead of executing the op.</p></li>
<li><p>If the object’s version is less than the asserted version then rados_read_op_operate will return -EOVERFLOW instead of executing the op. <dl class="simple">
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist">
<li><p><code class="docutils literal notranslate"><span class="pre">read_op</span></code>: operation to add this action to </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ver</span></code>: object version number </p></li>
</ul>
</dd>
</dl>
</p></li>
</ul>
</p>
</dd></dl>

<dl class="function">
<dt id="c.rados_read_op_cmpext">
<span class="target" id="librados_8h_1a74b68be5015267e70715f1b9cbd7cab9"></span><a class="reference internal" href="#c.CEPH_RADOS_API" title="CEPH_RADOS_API">CEPH_RADOS_API</a> void <code class="sig-name descname">rados_read_op_cmpext</code><span class="sig-paren">(</span><a class="reference internal" href="#c.rados_read_op_t" title="rados_read_op_t">rados_read_op_t</a><em> read_op</em>, const char *<em> cmp_buf</em>, size_t<em> cmp_len</em>, uint64_t<em> off</em>, int *<em> prval</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rados_read_op_cmpext" title="Permalink to this definition">¶</a></dt>
<dd><p>Ensure that given object range (extent) satisfies comparison.</p>
<p><dl class="simple">
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">read_op</span></code>: operation to add this action to </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cmp_buf</span></code>: buffer containing bytes to be compared with object contents </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cmp_len</span></code>: length to compare and size of <code class="docutils literal notranslate"><span class="pre">cmp_buf</span></code> in bytes </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">off</span></code>: object byte offset at which to start the comparison </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">prval</span></code>: returned result of comparison, 0 on success, negative error code on failure, (-MAX_ERRNO - mismatch_off) on mismatch </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="c.rados_read_op_cmpxattr">
<span class="target" id="librados_8h_1a3eb67a54e426d4d1ffc1b8f21c5cfce0"></span><a class="reference internal" href="#c.CEPH_RADOS_API" title="CEPH_RADOS_API">CEPH_RADOS_API</a> void <code class="sig-name descname">rados_read_op_cmpxattr</code><span class="sig-paren">(</span><a class="reference internal" href="#c.rados_read_op_t" title="rados_read_op_t">rados_read_op_t</a><em> read_op</em>, const char *<em> name</em>, uint8_t<em> comparison_operator</em>, const char *<em> value</em>, size_t<em> value_len</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rados_read_op_cmpxattr" title="Permalink to this definition">¶</a></dt>
<dd><p>Ensure that the an xattr satisfies a comparison If the comparison is not satisfied, the return code of the operation will be -ECANCELED <dl class="simple">
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">read_op</span></code>: operation to add this action to </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">name</span></code>: name of the xattr to look up </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">comparison_operator</span></code>: currently undocumented, look for LIBRADOS_CMPXATTR_OP_EQ in librados.h </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">value</span></code>: buffer to compare actual xattr value to </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">value_len</span></code>: length of buffer to compare actual xattr value to </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="c.rados_read_op_getxattrs">
<span class="target" id="librados_8h_1abe53268cfc8f01c5208265391390acd7"></span><a class="reference internal" href="#c.CEPH_RADOS_API" title="CEPH_RADOS_API">CEPH_RADOS_API</a> void <code class="sig-name descname">rados_read_op_getxattrs</code><span class="sig-paren">(</span><a class="reference internal" href="#c.rados_read_op_t" title="rados_read_op_t">rados_read_op_t</a><em> read_op</em>, <a class="reference internal" href="#c.rados_xattrs_iter_t" title="rados_xattrs_iter_t">rados_xattrs_iter_t</a> *<em> iter</em>, int *<em> prval</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rados_read_op_getxattrs" title="Permalink to this definition">¶</a></dt>
<dd><p>Start iterating over xattrs on an object.</p>
<p><dl class="simple">
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">read_op</span></code>: operation to add this action to </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">iter</span></code>: where to store the iterator </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">prval</span></code>: where to store the return value of this action </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="c.rados_read_op_omap_cmp">
<span class="target" id="librados_8h_1a9d9c8a790a67cc917da5b707f56b7b68"></span><a class="reference internal" href="#c.CEPH_RADOS_API" title="CEPH_RADOS_API">CEPH_RADOS_API</a> void <code class="sig-name descname">rados_read_op_omap_cmp</code><span class="sig-paren">(</span><a class="reference internal" href="#c.rados_read_op_t" title="rados_read_op_t">rados_read_op_t</a><em> read_op</em>, const char *<em> key</em>, uint8_t<em> comparison_operator</em>, const char *<em> val</em>, size_t<em> val_len</em>, int *<em> prval</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rados_read_op_omap_cmp" title="Permalink to this definition">¶</a></dt>
<dd><p>Ensure that the an omap value satisfies a comparison, with the supplied value on the right hand side (i.e. for OP_LT, the comparison is actual_value &lt; value.</p>
<p><dl class="simple">
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">read_op</span></code>: operation to add this action to </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">key</span></code>: which omap value to compare </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">comparison_operator</span></code>: one of LIBRADOS_CMPXATTR_OP_EQ, LIBRADOS_CMPXATTR_OP_LT, or LIBRADOS_CMPXATTR_OP_GT </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">val</span></code>: value to compare with </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">val_len</span></code>: length of value in bytes </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">prval</span></code>: where to store the return value from this action </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="c.rados_read_op_omap_cmp2">
<span class="target" id="librados_8h_1aeb3515d9b9b2e6f54cb2d1d7c1930cc5"></span><a class="reference internal" href="#c.CEPH_RADOS_API" title="CEPH_RADOS_API">CEPH_RADOS_API</a> void <code class="sig-name descname">rados_read_op_omap_cmp2</code><span class="sig-paren">(</span><a class="reference internal" href="#c.rados_read_op_t" title="rados_read_op_t">rados_read_op_t</a><em> read_op</em>, const char *<em> key</em>, uint8_t<em> comparison_operator</em>, const char *<em> val</em>, size_t<em> key_len</em>, size_t<em> val_len</em>, int *<em> prval</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rados_read_op_omap_cmp2" title="Permalink to this definition">¶</a></dt>
<dd><p>Ensure that the an omap value satisfies a comparison, with the supplied value on the right hand side (i.e. for OP_LT, the comparison is actual_value &lt; value.</p>
<p><dl class="simple">
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">read_op</span></code>: operation to add this action to </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">key</span></code>: which omap value to compare </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">comparison_operator</span></code>: one of LIBRADOS_CMPXATTR_OP_EQ, LIBRADOS_CMPXATTR_OP_LT, or LIBRADOS_CMPXATTR_OP_GT </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">val</span></code>: value to compare with </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">key_len</span></code>: length of key in bytes </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">val_len</span></code>: length of value in bytes </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">prval</span></code>: where to store the return value from this action </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="c.rados_read_op_stat">
<span class="target" id="librados_8h_1ac306f89b05d84ed0c83342a60c746ca7"></span><a class="reference internal" href="#c.CEPH_RADOS_API" title="CEPH_RADOS_API">CEPH_RADOS_API</a> void <code class="sig-name descname">rados_read_op_stat</code><span class="sig-paren">(</span><a class="reference internal" href="#c.rados_read_op_t" title="rados_read_op_t">rados_read_op_t</a><em> read_op</em>, uint64_t *<em> psize</em>, time_t *<em> pmtime</em>, int *<em> prval</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rados_read_op_stat" title="Permalink to this definition">¶</a></dt>
<dd><p>Get object size and mtime <dl class="simple">
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">read_op</span></code>: operation to add this action to </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">psize</span></code>: where to store object size </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pmtime</span></code>: where to store modification time </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">prval</span></code>: where to store the return value of this action </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="c.rados_read_op_read">
<span class="target" id="librados_8h_1aa67f45909d4132b50c8407364729aa7a"></span><a class="reference internal" href="#c.CEPH_RADOS_API" title="CEPH_RADOS_API">CEPH_RADOS_API</a> void <code class="sig-name descname">rados_read_op_read</code><span class="sig-paren">(</span><a class="reference internal" href="#c.rados_read_op_t" title="rados_read_op_t">rados_read_op_t</a><em> read_op</em>, uint64_t<em> offset</em>, size_t<em> len</em>, char *<em> buffer</em>, size_t *<em> bytes_read</em>, int *<em> prval</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rados_read_op_read" title="Permalink to this definition">¶</a></dt>
<dd><p>Read bytes from offset into buffer.</p>
<p>prlen will be filled with the number of bytes read if successful. A short read can only occur if the read reaches the end of the object.</p>
<p><dl class="simple">
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">read_op</span></code>: operation to add this action to </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">offset</span></code>: offset to read from </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">len</span></code>: length of buffer </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">buffer</span></code>: where to put the data </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">bytes_read</span></code>: where to store the number of bytes read by this action </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">prval</span></code>: where to store the return value of this action </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="c.rados_read_op_checksum">
<span class="target" id="librados_8h_1a26d4f26fdeb2164f4bfcd49c5976cfaa"></span><a class="reference internal" href="#c.CEPH_RADOS_API" title="CEPH_RADOS_API">CEPH_RADOS_API</a> void <code class="sig-name descname">rados_read_op_checksum</code><span class="sig-paren">(</span><a class="reference internal" href="#c.rados_read_op_t" title="rados_read_op_t">rados_read_op_t</a><em> read_op</em>, <a class="reference internal" href="#c.rados_checksum_type_t" title="rados_checksum_type_t">rados_checksum_type_t</a><em> type</em>, const char *<em> init_value</em>, size_t<em> init_value_len</em>, uint64_t<em> offset</em>, size_t<em> len</em>, size_t<em> chunk_size</em>, char *<em> pchecksum</em>, size_t<em> checksum_len</em>, int *<em> prval</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rados_read_op_checksum" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute checksum from object data</p>
<p><dl class="simple">
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">read_op</span></code>: operation to add this action to </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">type</span></code>: the checksum algorithm to utilize </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">init_value</span></code>: the init value for the algorithm </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">init_value_len</span></code>: the length of the init value </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">offset</span></code>: the offset to start checksumming in the object </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">len</span></code>: the number of bytes to checksum </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">chunk_size</span></code>: optional length-aligned chunk size for checksums </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pchecksum</span></code>: where to store the checksum result for this action </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">checksum_len</span></code>: the number of bytes available for the result </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">prval</span></code>: where to store the return value for this action </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="c.rados_read_op_exec">
<span class="target" id="librados_8h_1a1f87378777c8b7cc7bab5add93055a74"></span><a class="reference internal" href="#c.CEPH_RADOS_API" title="CEPH_RADOS_API">CEPH_RADOS_API</a> void <code class="sig-name descname">rados_read_op_exec</code><span class="sig-paren">(</span><a class="reference internal" href="#c.rados_read_op_t" title="rados_read_op_t">rados_read_op_t</a><em> read_op</em>, const char *<em> cls</em>, const char *<em> method</em>, const char *<em> in_buf</em>, size_t<em> in_len</em>, char **<em> out_buf</em>, size_t *<em> out_len</em>, int *<em> prval</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rados_read_op_exec" title="Permalink to this definition">¶</a></dt>
<dd><p>Execute an OSD class method on an object See rados_exec() for general description.</p>
<p>The output buffer is allocated on the heap; the caller is expected to release that memory with rados_buffer_free(). The buffer and length pointers can all be NULL, in which case they are not filled in.</p>
<p><dl class="simple">
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">read_op</span></code>: operation to add this action to </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cls</span></code>: the name of the class </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">method</span></code>: the name of the method </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">in_buf</span></code>: where to find input </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">in_len</span></code>: length of in_buf in bytes </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">out_buf</span></code>: where to put librados-allocated output buffer </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">out_len</span></code>: length of out_buf in bytes </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">prval</span></code>: where to store the return value from the method </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="c.rados_read_op_exec_user_buf">
<span class="target" id="librados_8h_1aaab5404d3a37b629e5bc1f5ddd257912"></span><a class="reference internal" href="#c.CEPH_RADOS_API" title="CEPH_RADOS_API">CEPH_RADOS_API</a> void <code class="sig-name descname">rados_read_op_exec_user_buf</code><span class="sig-paren">(</span><a class="reference internal" href="#c.rados_read_op_t" title="rados_read_op_t">rados_read_op_t</a><em> read_op</em>, const char *<em> cls</em>, const char *<em> method</em>, const char *<em> in_buf</em>, size_t<em> in_len</em>, char *<em> out_buf</em>, size_t<em> out_len</em>, size_t *<em> used_len</em>, int *<em> prval</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rados_read_op_exec_user_buf" title="Permalink to this definition">¶</a></dt>
<dd><p>Execute an OSD class method on an object See rados_exec() for general description.</p>
<p>If the output buffer is too small, prval will be set to -ERANGE and used_len will be 0.</p>
<p><dl class="simple">
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">read_op</span></code>: operation to add this action to </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cls</span></code>: the name of the class </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">method</span></code>: the name of the method </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">in_buf</span></code>: where to find input </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">in_len</span></code>: length of in_buf in bytes </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">out_buf</span></code>: user-provided buffer to read into </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">out_len</span></code>: length of out_buf in bytes </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">used_len</span></code>: where to store the number of bytes read into out_buf </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">prval</span></code>: where to store the return value from the method </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="c.rados_read_op_omap_get_vals">
<span class="target" id="librados_8h_1a4dd1b40ee9316fbef97da5dbcae0c8e7"></span><a class="reference internal" href="#c.CEPH_RADOS_API" title="CEPH_RADOS_API">CEPH_RADOS_API</a> void <code class="sig-name descname">rados_read_op_omap_get_vals</code><span class="sig-paren">(</span><a class="reference internal" href="#c.rados_read_op_t" title="rados_read_op_t">rados_read_op_t</a><em> read_op</em>, const char *<em> start_after</em>, const char *<em> filter_prefix</em>, uint64_t<em> max_return</em>, <a class="reference internal" href="#c.rados_omap_iter_t" title="rados_omap_iter_t">rados_omap_iter_t</a> *<em> iter</em>, int *<em> prval</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rados_read_op_omap_get_vals" title="Permalink to this definition">¶</a></dt>
<dd><p>Start iterating over key/value pairs on an object.</p>
<p>They will be returned sorted by key.</p>
<p><dl class="simple">
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">read_op</span></code>: operation to add this action to </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">start_after</span></code>: list keys starting after start_after </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">filter_prefix</span></code>: list only keys beginning with filter_prefix </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">max_return</span></code>: list no more than max_return key/value pairs </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">iter</span></code>: where to store the iterator </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">prval</span></code>: where to store the return value from this action </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="c.rados_read_op_omap_get_vals2">
<span class="target" id="librados_8h_1a1c39c24a1a171b1e0416373eb7e85a31"></span><a class="reference internal" href="#c.CEPH_RADOS_API" title="CEPH_RADOS_API">CEPH_RADOS_API</a> void <code class="sig-name descname">rados_read_op_omap_get_vals2</code><span class="sig-paren">(</span><a class="reference internal" href="#c.rados_read_op_t" title="rados_read_op_t">rados_read_op_t</a><em> read_op</em>, const char *<em> start_after</em>, const char *<em> filter_prefix</em>, uint64_t<em> max_return</em>, <a class="reference internal" href="#c.rados_omap_iter_t" title="rados_omap_iter_t">rados_omap_iter_t</a> *<em> iter</em>, unsigned char *<em> pmore</em>, int *<em> prval</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rados_read_op_omap_get_vals2" title="Permalink to this definition">¶</a></dt>
<dd><p>Start iterating over key/value pairs on an object.</p>
<p>They will be returned sorted by key.</p>
<p><dl class="simple">
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">read_op</span></code>: operation to add this action to </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">start_after</span></code>: list keys starting after start_after </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">filter_prefix</span></code>: list only keys beginning with filter_prefix </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">max_return</span></code>: list no more than max_return key/value pairs </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">iter</span></code>: where to store the iterator </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pmore</span></code>: flag indicating whether there are more keys to fetch </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">prval</span></code>: where to store the return value from this action </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="c.rados_read_op_omap_get_keys">
<span class="target" id="librados_8h_1ae8d0453b0235d998427d90606564c6a4"></span><a class="reference internal" href="#c.CEPH_RADOS_API" title="CEPH_RADOS_API">CEPH_RADOS_API</a> void <code class="sig-name descname">rados_read_op_omap_get_keys</code><span class="sig-paren">(</span><a class="reference internal" href="#c.rados_read_op_t" title="rados_read_op_t">rados_read_op_t</a><em> read_op</em>, const char *<em> start_after</em>, uint64_t<em> max_return</em>, <a class="reference internal" href="#c.rados_omap_iter_t" title="rados_omap_iter_t">rados_omap_iter_t</a> *<em> iter</em>, int *<em> prval</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rados_read_op_omap_get_keys" title="Permalink to this definition">¶</a></dt>
<dd><p>Start iterating over keys on an object.</p>
<p>They will be returned sorted by key, and the iterator will fill in NULL for all values if specified.</p>
<p><dl class="simple">
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">read_op</span></code>: operation to add this action to </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">start_after</span></code>: list keys starting after start_after </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">max_return</span></code>: list no more than max_return keys </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">iter</span></code>: where to store the iterator </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">prval</span></code>: where to store the return value from this action </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="c.rados_read_op_omap_get_keys2">
<span class="target" id="librados_8h_1ac048ab38b2ce74fba02c51f396296356"></span><a class="reference internal" href="#c.CEPH_RADOS_API" title="CEPH_RADOS_API">CEPH_RADOS_API</a> void <code class="sig-name descname">rados_read_op_omap_get_keys2</code><span class="sig-paren">(</span><a class="reference internal" href="#c.rados_read_op_t" title="rados_read_op_t">rados_read_op_t</a><em> read_op</em>, const char *<em> start_after</em>, uint64_t<em> max_return</em>, <a class="reference internal" href="#c.rados_omap_iter_t" title="rados_omap_iter_t">rados_omap_iter_t</a> *<em> iter</em>, unsigned char *<em> pmore</em>, int *<em> prval</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rados_read_op_omap_get_keys2" title="Permalink to this definition">¶</a></dt>
<dd><p>Start iterating over keys on an object.</p>
<p>They will be returned sorted by key, and the iterator will fill in NULL for all values if specified.</p>
<p><dl class="simple">
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">read_op</span></code>: operation to add this action to </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">start_after</span></code>: list keys starting after start_after </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">max_return</span></code>: list no more than max_return keys </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">iter</span></code>: where to store the iterator </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pmore</span></code>: flag indicating whether there are more keys to fetch </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">prval</span></code>: where to store the return value from this action </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="c.rados_read_op_omap_get_vals_by_keys">
<span class="target" id="librados_8h_1a24047194f483c33641575336aa306a65"></span><a class="reference internal" href="#c.CEPH_RADOS_API" title="CEPH_RADOS_API">CEPH_RADOS_API</a> void <code class="sig-name descname">rados_read_op_omap_get_vals_by_keys</code><span class="sig-paren">(</span><a class="reference internal" href="#c.rados_read_op_t" title="rados_read_op_t">rados_read_op_t</a><em> read_op</em>, char const *const *<em> keys</em>, size_t<em> keys_len</em>, <a class="reference internal" href="#c.rados_omap_iter_t" title="rados_omap_iter_t">rados_omap_iter_t</a> *<em> iter</em>, int *<em> prval</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rados_read_op_omap_get_vals_by_keys" title="Permalink to this definition">¶</a></dt>
<dd><p>Start iterating over specific key/value pairs</p>
<p>They will be returned sorted by key.</p>
<p><dl class="simple">
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">read_op</span></code>: operation to add this action to </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">keys</span></code>: array of pointers to null-terminated keys to get </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">keys_len</span></code>: the number of strings in keys </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">iter</span></code>: where to store the iterator </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">prval</span></code>: where to store the return value from this action </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="c.rados_read_op_omap_get_vals_by_keys2">
<span class="target" id="librados_8h_1ae540bb86843ce4db535f691e7c3cfd95"></span><a class="reference internal" href="#c.CEPH_RADOS_API" title="CEPH_RADOS_API">CEPH_RADOS_API</a> void <code class="sig-name descname">rados_read_op_omap_get_vals_by_keys2</code><span class="sig-paren">(</span><a class="reference internal" href="#c.rados_read_op_t" title="rados_read_op_t">rados_read_op_t</a><em> read_op</em>, char const *const *<em> keys</em>, size_t<em> num_keys</em>, const size_t *<em> key_lens</em>, <a class="reference internal" href="#c.rados_omap_iter_t" title="rados_omap_iter_t">rados_omap_iter_t</a> *<em> iter</em>, int *<em> prval</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rados_read_op_omap_get_vals_by_keys2" title="Permalink to this definition">¶</a></dt>
<dd><p>Start iterating over specific key/value pairs</p>
<p>They will be returned sorted by key.</p>
<p><dl class="simple">
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">read_op</span></code>: operation to add this action to </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">keys</span></code>: array of pointers to keys to get </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">num_keys</span></code>: the number of strings in keys </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">key_lens</span></code>: array of size_t’s describing each key len (in bytes) </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">iter</span></code>: where to store the iterator </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">prval</span></code>: where to store the return value from this action </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="c.rados_read_op_operate">
<span class="target" id="librados_8h_1a3178db23e0b3ed2ed5a6b715d6343e03"></span><a class="reference internal" href="#c.CEPH_RADOS_API" title="CEPH_RADOS_API">CEPH_RADOS_API</a> int <code class="sig-name descname">rados_read_op_operate</code><span class="sig-paren">(</span><a class="reference internal" href="#c.rados_read_op_t" title="rados_read_op_t">rados_read_op_t</a><em> read_op</em>, <a class="reference internal" href="#c.rados_ioctx_t" title="rados_ioctx_t">rados_ioctx_t</a><em> io</em>, const char *<em> oid</em>, int<em> flags</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rados_read_op_operate" title="Permalink to this definition">¶</a></dt>
<dd><p>Perform a read operation synchronously <dl class="simple">
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">read_op</span></code>: operation to perform </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">io</span></code>: the ioctx that the object is in </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">oid</span></code>: the object id </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">flags</span></code>: flags to apply to the entire operation (LIBRADOS_OPERATION_*) </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="c.rados_aio_read_op_operate">
<span class="target" id="librados_8h_1ad3289c5789ff988b5b10b545dbc03afa"></span><a class="reference internal" href="#c.CEPH_RADOS_API" title="CEPH_RADOS_API">CEPH_RADOS_API</a> int <code class="sig-name descname">rados_aio_read_op_operate</code><span class="sig-paren">(</span><a class="reference internal" href="#c.rados_read_op_t" title="rados_read_op_t">rados_read_op_t</a><em> read_op</em>, <a class="reference internal" href="#c.rados_ioctx_t" title="rados_ioctx_t">rados_ioctx_t</a><em> io</em>, <a class="reference internal" href="#c.rados_completion_t" title="rados_completion_t">rados_completion_t</a><em> completion</em>, const char *<em> oid</em>, int<em> flags</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rados_aio_read_op_operate" title="Permalink to this definition">¶</a></dt>
<dd><p>Perform a read operation asynchronously <dl class="simple">
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">read_op</span></code>: operation to perform </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">io</span></code>: the ioctx that the object is in </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">completion</span></code>: what to do when operation has been attempted </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">oid</span></code>: the object id </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">flags</span></code>: flags to apply to the entire operation (LIBRADOS_OPERATION_*) </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric">Defines</p>
<dl class="define">
<dt id="c.CEPH_OSD_TMAP_HDR">
<span class="target" id="librados_8h_1a7374c886c3d189e22dab99e8e97b1c4a"></span><code class="sig-name descname">CEPH_OSD_TMAP_HDR</code><a class="headerlink" href="#c.CEPH_OSD_TMAP_HDR" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="define">
<dt id="c.CEPH_OSD_TMAP_SET">
<span class="target" id="librados_8h_1ada41defa6d369f2e04ca53fc40754a37"></span><code class="sig-name descname">CEPH_OSD_TMAP_SET</code><a class="headerlink" href="#c.CEPH_OSD_TMAP_SET" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="define">
<dt id="c.CEPH_OSD_TMAP_CREATE">
<span class="target" id="librados_8h_1a0ba9335b21cd46e0cb4b03bf972f73e9"></span><code class="sig-name descname">CEPH_OSD_TMAP_CREATE</code><a class="headerlink" href="#c.CEPH_OSD_TMAP_CREATE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="define">
<dt id="c.CEPH_OSD_TMAP_RM">
<span class="target" id="librados_8h_1a553821d1fdb398b952d8595b2ea7939a"></span><code class="sig-name descname">CEPH_OSD_TMAP_RM</code><a class="headerlink" href="#c.CEPH_OSD_TMAP_RM" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="define">
<dt id="c.LIBRADOS_VER_MAJOR">
<span class="target" id="librados_8h_1a0e0a428e7c02e984c30aaf54631b9179"></span><code class="sig-name descname">LIBRADOS_VER_MAJOR</code><a class="headerlink" href="#c.LIBRADOS_VER_MAJOR" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="define">
<dt id="c.LIBRADOS_VER_MINOR">
<span class="target" id="librados_8h_1a6921c0c5fa48340c3b43d986b924789d"></span><code class="sig-name descname">LIBRADOS_VER_MINOR</code><a class="headerlink" href="#c.LIBRADOS_VER_MINOR" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="define">
<dt id="c.LIBRADOS_VER_EXTRA">
<span class="target" id="librados_8h_1a1365154562de601650c9195216f47597"></span><code class="sig-name descname">LIBRADOS_VER_EXTRA</code><a class="headerlink" href="#c.LIBRADOS_VER_EXTRA" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="define">
<dt id="c.LIBRADOS_VERSION">
<span class="target" id="librados_8h_1a6a37ef77a4f8ab9670d137329fd9ec3d"></span><code class="sig-name descname">LIBRADOS_VERSION</code><span class="sig-paren">(</span>maj, min, extra<span class="sig-paren">)</span><a class="headerlink" href="#c.LIBRADOS_VERSION" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="define">
<dt id="c.LIBRADOS_VERSION_CODE">
<span class="target" id="librados_8h_1a5931a8379cebc7eed36f7146cfa1afa2"></span><code class="sig-name descname">LIBRADOS_VERSION_CODE</code><a class="headerlink" href="#c.LIBRADOS_VERSION_CODE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="define">
<dt id="c.LIBRADOS_SUPPORTS_WATCH">
<span class="target" id="librados_8h_1a49279ff58e94fe7bc89cf2a9561abc49"></span><code class="sig-name descname">LIBRADOS_SUPPORTS_WATCH</code><a class="headerlink" href="#c.LIBRADOS_SUPPORTS_WATCH" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="define">
<dt id="c.LIBRADOS_SUPPORTS_SERVICES">
<span class="target" id="librados_8h_1ab9cf1e9c7fc1883e66fbbd9724c434bf"></span><code class="sig-name descname">LIBRADOS_SUPPORTS_SERVICES</code><a class="headerlink" href="#c.LIBRADOS_SUPPORTS_SERVICES" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="define">
<dt id="c.LIBRADOS_SUPPORTS_APP_METADATA">
<span class="target" id="librados_8h_1a85878e8cecc477e2f160a7378542851c"></span><code class="sig-name descname">LIBRADOS_SUPPORTS_APP_METADATA</code><a class="headerlink" href="#c.LIBRADOS_SUPPORTS_APP_METADATA" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="define">
<dt id="c.LIBRADOS_LOCK_FLAG_RENEW">
<span class="target" id="librados_8h_1a8422e60e2574925bf18537aac98fff00"></span><code class="sig-name descname">LIBRADOS_LOCK_FLAG_RENEW</code><a class="headerlink" href="#c.LIBRADOS_LOCK_FLAG_RENEW" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="define">
<dt id="c.LIBRADOS_CREATE_EXCLUSIVE">
<span class="target" id="librados_8h_1ac1f2fb141026970b30b31c6b510c40ec"></span><code class="sig-name descname">LIBRADOS_CREATE_EXCLUSIVE</code><a class="headerlink" href="#c.LIBRADOS_CREATE_EXCLUSIVE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="define">
<dt id="c.LIBRADOS_CREATE_IDEMPOTENT">
<span class="target" id="librados_8h_1a9d95de9eadd0c19d2d882207f68cd087"></span><code class="sig-name descname">LIBRADOS_CREATE_IDEMPOTENT</code><a class="headerlink" href="#c.LIBRADOS_CREATE_IDEMPOTENT" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="define">
<dt id="c.CEPH_RADOS_API">
<span class="target" id="librados_8h_1aafc8385a5a2f57cee390b248a5edb1ee"></span><code class="sig-name descname">CEPH_RADOS_API</code><a class="headerlink" href="#c.CEPH_RADOS_API" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="define">
<dt id="c.LIBRADOS_SNAP_HEAD">
<span class="target" id="librados_8h_1a4f7b1b8bdc639f1bc8d66327d53977bd"></span><code class="sig-name descname">LIBRADOS_SNAP_HEAD</code><a class="headerlink" href="#c.LIBRADOS_SNAP_HEAD" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="define">
<dt id="c.LIBRADOS_SNAP_DIR">
<span class="target" id="librados_8h_1a94024e58d58fb0a06c184e5b1e725ccd"></span><code class="sig-name descname">LIBRADOS_SNAP_DIR</code><a class="headerlink" href="#c.LIBRADOS_SNAP_DIR" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="define">
<dt id="c.VOIDPTR_RADOS_T">
<span class="target" id="librados_8h_1a1719ba6b7d7d1c354174867d5433fb11"></span><code class="sig-name descname">VOIDPTR_RADOS_T</code><a class="headerlink" href="#c.VOIDPTR_RADOS_T" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric">Typedefs</p>
<dl class="typedef">
<dt id="c.rados_t">
<span class="target" id="librados_8h_1abda043338e76ae05b784cc194ff15cfa"></span><em class="property">typedef </em><code class="sig-name descname">rados_t</code><a class="headerlink" href="#c.rados_t" title="Permalink to this definition">¶</a></dt>
<dd><p>A handle for interacting with a RADOS cluster. It encapsulates all RADOS client configuration, including username, key for authentication, logging, and debugging. Talking to different clusters  or to the same cluster with different users  requires different cluster handles. </p>
</dd></dl>

<dl class="typedef">
<dt id="c.rados_config_t">
<span class="target" id="librados_8h_1af3fd0fbac3bc0beb1f4b559b8f8f15f8"></span><em class="property">typedef </em><code class="sig-name descname">rados_config_t</code><a class="headerlink" href="#c.rados_config_t" title="Permalink to this definition">¶</a></dt>
<dd><p>A handle for the ceph configuration context for the rados_t cluster instance. This can be used to share configuration context/state (e.g., logging configuration) between librados instance.</p>
<p><dl class="simple">
<dt><strong>Warning</strong></dt><dd><p>The config context does not have independent reference counting. As such, a rados_config_t handle retrieved from a given rados_t is only valid as long as that rados_t. </p>
</dd>
</dl>
</p>
</dd></dl>

<dl class="typedef">
<dt id="c.rados_ioctx_t">
<span class="target" id="librados_8h_1aa892568c6a8b4f1c07785b228014e3e3"></span><em class="property">typedef </em><code class="sig-name descname">rados_ioctx_t</code><a class="headerlink" href="#c.rados_ioctx_t" title="Permalink to this definition">¶</a></dt>
<dd><p>An io context encapsulates a few settings for all I/O operations done on it:<ul class="simple">
<li><p>pool - set when the io context is created (see rados_ioctx_create())</p></li>
<li><p>snapshot context for writes (see rados_ioctx_selfmanaged_snap_set_write_ctx())</p></li>
<li><p>snapshot id to read from (see rados_ioctx_snap_set_read())</p></li>
<li><p>object locator for all single-object operations (see rados_ioctx_locator_set_key())</p></li>
<li><p>namespace for all single-object operations (see rados_ioctx_set_namespace()). Set to LIBRADOS_ALL_NSPACES before rados_nobjects_list_open() will list all objects in all namespaces.</p></li>
</ul>
</p>
<p><dl class="simple">
<dt><strong>Warning</strong></dt><dd><p>Changing any of these settings is not thread-safe - librados users must synchronize any of these changes on their own, or use separate io contexts for each thread </p>
</dd>
</dl>
</p>
</dd></dl>

<dl class="typedef">
<dt id="c.rados_list_ctx_t">
<span class="target" id="librados_8h_1ad0584c3ac7134ce95522fe9cf0505c52"></span><em class="property">typedef </em><code class="sig-name descname">rados_list_ctx_t</code><a class="headerlink" href="#c.rados_list_ctx_t" title="Permalink to this definition">¶</a></dt>
<dd><p>An iterator for listing the objects in a pool. Used with rados_nobjects_list_open(), rados_nobjects_list_next(), and rados_nobjects_list_close(). </p>
</dd></dl>

<dl class="typedef">
<dt id="c.rados_object_list_cursor">
<span class="target" id="librados_8h_1a259249958276daf836c8f5b48b6838b8"></span><em class="property">typedef </em><code class="sig-name descname">rados_object_list_cursor</code><a class="headerlink" href="#c.rados_object_list_cursor" title="Permalink to this definition">¶</a></dt>
<dd><p>The cursor used with rados_enumerate_objects and accompanying methods. </p>
</dd></dl>

<dl class="typedef">
<dt id="c.rados_object_list_item">
<span class="target" id="librados_8h_1aed05bc00fdcf8f4a4166264834fec01b"></span><em class="property">typedef </em>struct <a class="reference internal" href="#c.rados_object_list_item" title="rados_object_list_item">rados_object_list_item</a> <code class="sig-name descname">rados_object_list_item</code><a class="headerlink" href="#c.rados_object_list_item" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="typedef">
<dt id="c.rados_snap_t">
<span class="target" id="librados_8h_1ac997570481a967558a27892037ed0f40"></span><em class="property">typedef </em><code class="sig-name descname">rados_snap_t</code><a class="headerlink" href="#c.rados_snap_t" title="Permalink to this definition">¶</a></dt>
<dd><p>The id of a snapshot. </p>
</dd></dl>

<dl class="typedef">
<dt id="c.rados_xattrs_iter_t">
<span class="target" id="librados_8h_1a44416b1d487862521589e0ead757fe3c"></span><em class="property">typedef </em><code class="sig-name descname">rados_xattrs_iter_t</code><a class="headerlink" href="#c.rados_xattrs_iter_t" title="Permalink to this definition">¶</a></dt>
<dd><p>An iterator for listing extended attrbutes on an object. Used with rados_getxattrs(), rados_getxattrs_next(), and rados_getxattrs_end(). </p>
</dd></dl>

<dl class="typedef">
<dt id="c.rados_omap_iter_t">
<span class="target" id="librados_8h_1aa90e492075bc31d7037695d79a4bf136"></span><em class="property">typedef </em><code class="sig-name descname">rados_omap_iter_t</code><a class="headerlink" href="#c.rados_omap_iter_t" title="Permalink to this definition">¶</a></dt>
<dd><p>An iterator for listing omap key/value pairs on an object. Used with rados_read_op_omap_get_keys(), rados_read_op_omap_get_vals(), rados_read_op_omap_get_vals_by_keys(), rados_omap_get_next(), and rados_omap_get_end(). </p>
</dd></dl>

<dl class="typedef">
<dt id="c.rados_write_op_t">
<span class="target" id="librados_8h_1a8d8e4bd6677c21be8527089d735d8c9f"></span><em class="property">typedef </em><code class="sig-name descname">rados_write_op_t</code><a class="headerlink" href="#c.rados_write_op_t" title="Permalink to this definition">¶</a></dt>
<dd><p>An object write operation stores a number of operations which can be executed atomically. For usage, see:<ul class="simple">
<li><p>Creation and deletion: rados_create_write_op() rados_release_write_op()</p></li>
<li><p>Extended attribute manipulation: rados_write_op_cmpxattr() rados_write_op_cmpxattr(), rados_write_op_setxattr(), rados_write_op_rmxattr()</p></li>
<li><p>Object map key/value pairs: rados_write_op_omap_set(), rados_write_op_omap_rm_keys(), rados_write_op_omap_clear(), rados_write_op_omap_cmp()</p></li>
<li><p>Object properties: rados_write_op_assert_exists(), rados_write_op_assert_version()</p></li>
<li><p>Creating objects: rados_write_op_create()</p></li>
<li><p>IO on objects: rados_write_op_append(), rados_write_op_write(), rados_write_op_zero rados_write_op_write_full(), rados_write_op_writesame(), rados_write_op_remove, rados_write_op_truncate(), rados_write_op_zero(), rados_write_op_cmpext()</p></li>
<li><p>Hints: rados_write_op_set_alloc_hint()</p></li>
<li><p>Performing the operation: rados_write_op_operate(), rados_aio_write_op_operate() </p></li>
</ul>
</p>
</dd></dl>

<dl class="typedef">
<dt id="c.rados_read_op_t">
<span class="target" id="librados_8h_1a6b0c4c8af0568903adcdd3b376c9d0c3"></span><em class="property">typedef </em><code class="sig-name descname">rados_read_op_t</code><a class="headerlink" href="#c.rados_read_op_t" title="Permalink to this definition">¶</a></dt>
<dd><p>An object read operation stores a number of operations which can be executed atomically. For usage, see:<ul class="simple">
<li><p>Creation and deletion: rados_create_read_op() rados_release_read_op()</p></li>
<li><p>Extended attribute manipulation: rados_read_op_cmpxattr(), rados_read_op_getxattr(), rados_read_op_getxattrs()</p></li>
<li><p>Object map key/value pairs: rados_read_op_omap_get_vals(), rados_read_op_omap_get_keys(), rados_read_op_omap_get_vals_by_keys(), rados_read_op_omap_cmp()</p></li>
<li><p>Object properties: rados_read_op_stat(), rados_read_op_assert_exists(), rados_read_op_assert_version()</p></li>
<li><p>IO on objects: rados_read_op_read(), rados_read_op_checksum(), rados_read_op_cmpext()</p></li>
<li><p>Custom operations: rados_read_op_exec(), rados_read_op_exec_user_buf()</p></li>
<li><p>Request properties: rados_read_op_set_flags()</p></li>
<li><p>Performing the operation: rados_read_op_operate(), rados_aio_read_op_operate() </p></li>
</ul>
</p>
</dd></dl>

<dl class="typedef">
<dt id="c.rados_completion_t">
<span class="target" id="librados_8h_1a103477d70e54fcefe12d6efeac226b95"></span><em class="property">typedef </em><code class="sig-name descname">rados_completion_t</code><a class="headerlink" href="#c.rados_completion_t" title="Permalink to this definition">¶</a></dt>
<dd><p>Represents the state of an asynchronous operation - it contains the return value once the operation completes, and can be used to block until the operation is complete or safe. </p>
</dd></dl>

</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric">Enums</p>
<dl class="enum">
<dt id="c.anon_0">
<span class="target" id="librados_8h_1a06fc87d81c62e9abb8790b6e5713c55b"></span>&#64;<code class="sig-name descname">anon_0</code><a class="headerlink" href="#c.anon_0" title="Permalink to this definition">¶</a></dt>
<dd><p><em>Values:</em></p>
<dl class="enumvalue">
<dt id="c.0x1">
<span class="target" id="librados_8h_1a06fc87d81c62e9abb8790b6e5713c55baff6ea20a1a925a1498302cad07b4ff52"></span><code class="sig-name descname">0x1</code><a class="headerlink" href="#c.0x1" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="enumvalue">
<dt id="c.0x2">
<span class="target" id="librados_8h_1a06fc87d81c62e9abb8790b6e5713c55ba2c73bded10de4b1a8754a89e7ae93887"></span><code class="sig-name descname">0x2</code><a class="headerlink" href="#c.0x2" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="enumvalue">
<dt id="c.0x4">
<span class="target" id="librados_8h_1a06fc87d81c62e9abb8790b6e5713c55bab5be2a94eb79badadc9456c45d6f1841"></span><code class="sig-name descname">0x4</code><a class="headerlink" href="#c.0x4" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="enumvalue">
<dt id="c.0x8">
<span class="target" id="librados_8h_1a06fc87d81c62e9abb8790b6e5713c55ba0c8c16bf2b135b5bf519389ed4b79742"></span><code class="sig-name descname">0x8</code><a class="headerlink" href="#c.0x8" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="enumvalue">
<dt id="c.0x10">
<span class="target" id="librados_8h_1a06fc87d81c62e9abb8790b6e5713c55ba1b93fe7705f5b03384def1ad43b73a86"></span><code class="sig-name descname">0x10</code><a class="headerlink" href="#c.0x10" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="enumvalue">
<dt id="c.0x20">
<span class="target" id="librados_8h_1a06fc87d81c62e9abb8790b6e5713c55ba75277c9bba643f4dfcd629549c7aeff7"></span><code class="sig-name descname">0x20</code><a class="headerlink" href="#c.0x20" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="enumvalue">
<dt id="c.0x40">
<span class="target" id="librados_8h_1a06fc87d81c62e9abb8790b6e5713c55ba6701f8ce0bcc4db4e36f1f744bc2751b"></span><code class="sig-name descname">0x40</code><a class="headerlink" href="#c.0x40" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="enumvalue">
<dt id="c.0x80">
<span class="target" id="librados_8h_1a06fc87d81c62e9abb8790b6e5713c55ba2760dc2f6d1a690c3fb4f72046a3cd50"></span><code class="sig-name descname">0x80</code><a class="headerlink" href="#c.0x80" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="enum">
<dt id="c.rados_checksum_type_t">
<span class="target" id="librados_8h_1a21d5ea2e2efa6a927e446514178318da"></span><code class="sig-name descname">rados_checksum_type_t</code><a class="headerlink" href="#c.rados_checksum_type_t" title="Permalink to this definition">¶</a></dt>
<dd><p><em>Values:</em></p>
<dl class="enumvalue">
<dt>
<span class="target" id="librados_8h_1a21d5ea2e2efa6a927e446514178318daa72537a490295370ecaa487f9ff0311e7"></span><code class="sig-name descname">0</code></dt>
<dd></dd></dl>

<dl class="enumvalue">
<dt>
<span class="target" id="librados_8h_1a21d5ea2e2efa6a927e446514178318daa52ec18ad685189812518893f4da1b74a"></span><code class="sig-name descname">1</code></dt>
<dd></dd></dl>

<dl class="enumvalue">
<dt>
<span class="target" id="librados_8h_1a21d5ea2e2efa6a927e446514178318daac161c13163b636a2b5b864bfc13f18e0"></span><code class="sig-name descname">2</code></dt>
<dd></dd></dl>

</dd></dl>

</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric">Functions</p>
<dl class="function">
<dt id="c.rados_version">
<span class="target" id="librados_8h_1a7be6f8d87e887d3d1da13bf77f43b587"></span><a class="reference internal" href="#c.CEPH_RADOS_API" title="CEPH_RADOS_API">CEPH_RADOS_API</a> void <code class="sig-name descname">rados_version</code><span class="sig-paren">(</span>int *<em> major</em>, int *<em> minor</em>, int *<em> extra</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rados_version" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the version of librados.</p>
<p>The version number is major.minor.extra. Note that this is unrelated to the Ceph version number.</p>
<p>TODO: define version semantics, i.e.:<ul class="simple">
<li><p>incrementing major is for backwards-incompatible changes</p></li>
<li><p>incrementing minor is for backwards-compatible changes</p></li>
<li><p>incrementing extra is for bug fixes</p></li>
</ul>
</p>
<p><dl class="simple">
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">major</span></code>: where to store the major version number </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">minor</span></code>: where to store the minor version number </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">extra</span></code>: where to store the extra version number </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="c.rados_cluster_stat">
<span class="target" id="librados_8h_1a865143515247a530c221cead44a3c482"></span><a class="reference internal" href="#c.CEPH_RADOS_API" title="CEPH_RADOS_API">CEPH_RADOS_API</a> int <code class="sig-name descname">rados_cluster_stat</code><span class="sig-paren">(</span><a class="reference internal" href="#c.rados_t" title="rados_t">rados_t</a><em> cluster</em>, struct  <a class="reference internal" href="#c.rados_cluster_stat_t" title="rados_cluster_stat_t">rados_cluster_stat_t</a>  *<em> result</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rados_cluster_stat" title="Permalink to this definition">¶</a></dt>
<dd><p>Read usage info about the cluster</p>
<p>This tells you total space, space used, space available, and number of objects. These are not updated immediately when data is written, they are eventually consistent.</p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p>0 on success, negative error code on failure </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">cluster</span></code>: cluster to query </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">result</span></code>: where to store the results </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="c.rados_cluster_fsid">
<span class="target" id="librados_8h_1ad962962c237c99a9188befff6c7f2ede"></span><a class="reference internal" href="#c.CEPH_RADOS_API" title="CEPH_RADOS_API">CEPH_RADOS_API</a> int <code class="sig-name descname">rados_cluster_fsid</code><span class="sig-paren">(</span><a class="reference internal" href="#c.rados_t" title="rados_t">rados_t</a><em> cluster</em>, char *<em> buf</em>, size_t<em> len</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rados_cluster_fsid" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the fsid of the cluster as a hexadecimal string.</p>
<p>The fsid is a unique id of an entire Ceph cluster.</p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p>0 on success, negative error code on failure </p>
</dd>
<dt><strong>Return</strong></dt><dd><p>-ERANGE if the buffer is too short to contain the fsid </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">cluster</span></code>: where to get the fsid </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">buf</span></code>: where to write the fsid </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">len</span></code>: the size of buf in bytes (should be 37) </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="c.rados_wait_for_latest_osdmap">
<span class="target" id="librados_8h_1a764137a5aa25c7a725b14ac2b5a561a5"></span><a class="reference internal" href="#c.CEPH_RADOS_API" title="CEPH_RADOS_API">CEPH_RADOS_API</a> int <code class="sig-name descname">rados_wait_for_latest_osdmap</code><span class="sig-paren">(</span><a class="reference internal" href="#c.rados_t" title="rados_t">rados_t</a><em> cluster</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rados_wait_for_latest_osdmap" title="Permalink to this definition">¶</a></dt>
<dd><p>Get/wait for the most recent osdmap</p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p>0 on success, negative error code on failure </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">cluster</span></code>: the cluster to shutdown </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="c.rados_omap_get_next">
<span class="target" id="librados_8h_1a662629ba980ffffa8a65b17481b435d6"></span><a class="reference internal" href="#c.CEPH_RADOS_API" title="CEPH_RADOS_API">CEPH_RADOS_API</a> int <code class="sig-name descname">rados_omap_get_next</code><span class="sig-paren">(</span><a class="reference internal" href="#c.rados_omap_iter_t" title="rados_omap_iter_t">rados_omap_iter_t</a><em> iter</em>, char **<em> key</em>, char **<em> val</em>, size_t *<em> len</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rados_omap_get_next" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the next omap key/value pair on the object</p>
<p><dl class="simple">
<dt><strong>Pre</strong></dt><dd><p>iter is a valid iterator</p>
</dd>
<dt><strong>Post</strong></dt><dd><p>key and val are the next key/value pair. key is null-terminated, and val has length len. If the end of the list has been reached, key and val are NULL, and len is 0. key and val will not be accessible after rados_omap_get_end() is called on iter, so if they are needed after that they should be copied.</p>
</dd>
<dt><strong>Return</strong></dt><dd><p>0 on success, negative error code on failure </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">iter</span></code>: iterator to advance </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">key</span></code>: where to store the key of the next omap entry </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">val</span></code>: where to store the value of the next omap entry </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">len</span></code>: where to store the number of bytes in val </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="c.rados_omap_get_next2">
<span class="target" id="librados_8h_1ab0e1c9d8535b4e424bb80fda36ab630d"></span><a class="reference internal" href="#c.CEPH_RADOS_API" title="CEPH_RADOS_API">CEPH_RADOS_API</a> int <code class="sig-name descname">rados_omap_get_next2</code><span class="sig-paren">(</span><a class="reference internal" href="#c.rados_omap_iter_t" title="rados_omap_iter_t">rados_omap_iter_t</a><em> iter</em>, char **<em> key</em>, char **<em> val</em>, size_t *<em> key_len</em>, size_t *<em> val_len</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rados_omap_get_next2" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the next omap key/value pair on the object. Note that it’s perfectly safe to mix calls to rados_omap_get_next and rados_omap_get_next2.</p>
<p><dl class="simple">
<dt><strong>Pre</strong></dt><dd><p>iter is a valid iterator</p>
</dd>
<dt><strong>Post</strong></dt><dd><p>key and val are the next key/value pair. key has length keylen and val has length vallen. If the end of the list has been reached, key and val are NULL, and keylen and vallen is 0. key and val will not be accessible after rados_omap_get_end() is called on iter, so if they are needed after that they should be copied.</p>
</dd>
<dt><strong>Return</strong></dt><dd><p>0 on success, negative error code on failure </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">iter</span></code>: iterator to advance </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">key</span></code>: where to store the key of the next omap entry </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">val</span></code>: where to store the value of the next omap entry </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">key_len</span></code>: where to store the number of bytes in key </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">val_len</span></code>: where to store the number of bytes in val </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="c.rados_omap_iter_size">
<span class="target" id="librados_8h_1ab8ac3ca7223c74cd29897abd0d9dee06"></span><a class="reference internal" href="#c.CEPH_RADOS_API" title="CEPH_RADOS_API">CEPH_RADOS_API</a> unsigned int <code class="sig-name descname">rados_omap_iter_size</code><span class="sig-paren">(</span><a class="reference internal" href="#c.rados_omap_iter_t" title="rados_omap_iter_t">rados_omap_iter_t</a><em> iter</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rados_omap_iter_size" title="Permalink to this definition">¶</a></dt>
<dd><p>Return number of elements in the iterator</p>
<p><dl class="simple">
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">iter</span></code>: the iterator of which to return the size </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="c.rados_omap_get_end">
<span class="target" id="librados_8h_1acb0a5de9aed41fafb7cd6ded011f97a6"></span><a class="reference internal" href="#c.CEPH_RADOS_API" title="CEPH_RADOS_API">CEPH_RADOS_API</a> void <code class="sig-name descname">rados_omap_get_end</code><span class="sig-paren">(</span><a class="reference internal" href="#c.rados_omap_iter_t" title="rados_omap_iter_t">rados_omap_iter_t</a><em> iter</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rados_omap_get_end" title="Permalink to this definition">¶</a></dt>
<dd><p>Close the omap iterator.</p>
<p>iter should not be used after this is called.</p>
<p><dl class="simple">
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">iter</span></code>: the iterator to close </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="c.rados_stat">
<span class="target" id="librados_8h_1ad7a13f3f1c0b5e0fe2c46d4213ecb4ae"></span><a class="reference internal" href="#c.CEPH_RADOS_API" title="CEPH_RADOS_API">CEPH_RADOS_API</a> int <code class="sig-name descname">rados_stat</code><span class="sig-paren">(</span><a class="reference internal" href="#c.rados_ioctx_t" title="rados_ioctx_t">rados_ioctx_t</a><em> io</em>, const char *<em> o</em>, uint64_t *<em> psize</em>, time_t *<em> pmtime</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rados_stat" title="Permalink to this definition">¶</a></dt>
<dd><p>Get object stats (size/mtime)</p>
<p>TODO: when are these set, and by whom? can they be out of date?</p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p>0 on success, negative error code on failure </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">io</span></code>: ioctx </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">o</span></code>: object name </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">psize</span></code>: where to store object size </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pmtime</span></code>: where to store modification time </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="c.rados_exec">
<span class="target" id="librados_8h_1a53adcdedd6b93cd9bde6c0e97a6b4d79"></span><a class="reference internal" href="#c.CEPH_RADOS_API" title="CEPH_RADOS_API">CEPH_RADOS_API</a> int <code class="sig-name descname">rados_exec</code><span class="sig-paren">(</span><a class="reference internal" href="#c.rados_ioctx_t" title="rados_ioctx_t">rados_ioctx_t</a><em> io</em>, const char *<em> oid</em>, const char *<em> cls</em>, const char *<em> method</em>, const char *<em> in_buf</em>, size_t<em> in_len</em>, char *<em> buf</em>, size_t<em> out_len</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rados_exec" title="Permalink to this definition">¶</a></dt>
<dd><p>Execute an OSD class method on an object</p>
<p>The OSD has a plugin mechanism for performing complicated operations on an object atomically. These plugins are called classes. This function allows librados users to call the custom methods. The input and output formats are defined by the class. Classes in ceph.git can be found in src/cls subdirectories</p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p>the length of the output, or -ERANGE if out_buf does not have enough space to store it (For methods that return data). For methods that don’t return data, the return value is method-specific. </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">io</span></code>: the context in which to call the method </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">oid</span></code>: the object to call the method on </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cls</span></code>: the name of the class </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">method</span></code>: the name of the method </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">in_buf</span></code>: where to find input </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">in_len</span></code>: length of in_buf in bytes </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">buf</span></code>: where to store output </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">out_len</span></code>: length of buf in bytes </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="c.rados_cache_pin">
<span class="target" id="librados_8h_1a3d11ce24baf1983c75bc8e3ca3c5cdf4"></span><a class="reference internal" href="#c.CEPH_RADOS_API" title="CEPH_RADOS_API">CEPH_RADOS_API</a> int <code class="sig-name descname">rados_cache_pin</code><span class="sig-paren">(</span><a class="reference internal" href="#c.rados_ioctx_t" title="rados_ioctx_t">rados_ioctx_t</a><em> io</em>, const char *<em> o</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rados_cache_pin" title="Permalink to this definition">¶</a></dt>
<dd><p>Pin an object in the cache tier</p>
<p>When an object is pinned in the cache tier, it stays in the cache tier, and won’t be flushed out.</p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p>0 on success, negative error code on failure </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">io</span></code>: the pool the object is in </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">o</span></code>: the object id </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="c.rados_cache_unpin">
<span class="target" id="librados_8h_1a4e5bf47b06bb1bc606f618a9a3ac19c9"></span><a class="reference internal" href="#c.CEPH_RADOS_API" title="CEPH_RADOS_API">CEPH_RADOS_API</a> int <code class="sig-name descname">rados_cache_unpin</code><span class="sig-paren">(</span><a class="reference internal" href="#c.rados_ioctx_t" title="rados_ioctx_t">rados_ioctx_t</a><em> io</em>, const char *<em> o</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rados_cache_unpin" title="Permalink to this definition">¶</a></dt>
<dd><p>Unpin an object in the cache tier</p>
<p>After an object is unpinned in the cache tier, it can be flushed out</p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p>0 on success, negative error code on failure </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">io</span></code>: the pool the object is in </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">o</span></code>: the object id </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="c.rados_lock_exclusive">
<span class="target" id="librados_8h_1ab16f58c1b95d4d8e9e91f82de5f4f1a9"></span><a class="reference internal" href="#c.CEPH_RADOS_API" title="CEPH_RADOS_API">CEPH_RADOS_API</a> int <code class="sig-name descname">rados_lock_exclusive</code><span class="sig-paren">(</span><a class="reference internal" href="#c.rados_ioctx_t" title="rados_ioctx_t">rados_ioctx_t</a><em> io</em>, const char *<em> oid</em>, const char *<em> name</em>, const char *<em> cookie</em>, const char *<em> desc</em>, struct timeval *<em> duration</em>, uint8_t<em> flags</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rados_lock_exclusive" title="Permalink to this definition">¶</a></dt>
<dd><p>Take an exclusive lock on an object.</p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p>0 on success, negative error code on failure </p>
</dd>
<dt><strong>Return</strong></dt><dd><p>-EBUSY if the lock is already held by another (client, cookie) pair </p>
</dd>
<dt><strong>Return</strong></dt><dd><p>-EEXIST if the lock is already held by the same (client, cookie) pair </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">io</span></code>: the context to operate in </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">oid</span></code>: the name of the object </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">name</span></code>: the name of the lock </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cookie</span></code>: user-defined identifier for this instance of the lock </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">desc</span></code>: user-defined lock description </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">duration</span></code>: the duration of the lock. Set to NULL for infinite duration. </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">flags</span></code>: lock flags </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="c.rados_lock_shared">
<span class="target" id="librados_8h_1a2c6b48376f9bb95c8d2f9e332b4aeaf5"></span><a class="reference internal" href="#c.CEPH_RADOS_API" title="CEPH_RADOS_API">CEPH_RADOS_API</a> int <code class="sig-name descname">rados_lock_shared</code><span class="sig-paren">(</span><a class="reference internal" href="#c.rados_ioctx_t" title="rados_ioctx_t">rados_ioctx_t</a><em> io</em>, const char *<em> o</em>, const char *<em> name</em>, const char *<em> cookie</em>, const char *<em> tag</em>, const char *<em> desc</em>, struct timeval *<em> duration</em>, uint8_t<em> flags</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rados_lock_shared" title="Permalink to this definition">¶</a></dt>
<dd><p>Take a shared lock on an object.</p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p>0 on success, negative error code on failure </p>
</dd>
<dt><strong>Return</strong></dt><dd><p>-EBUSY if the lock is already held by another (client, cookie) pair </p>
</dd>
<dt><strong>Return</strong></dt><dd><p>-EEXIST if the lock is already held by the same (client, cookie) pair </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">io</span></code>: the context to operate in </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">o</span></code>: the name of the object </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">name</span></code>: the name of the lock </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cookie</span></code>: user-defined identifier for this instance of the lock </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">tag</span></code>: The tag of the lock </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">desc</span></code>: user-defined lock description </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">duration</span></code>: the duration of the lock. Set to NULL for infinite duration. </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">flags</span></code>: lock flags </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="c.rados_unlock">
<span class="target" id="librados_8h_1a9190641a8d05ba18002fe4e1f08ebae1"></span><a class="reference internal" href="#c.CEPH_RADOS_API" title="CEPH_RADOS_API">CEPH_RADOS_API</a> int <code class="sig-name descname">rados_unlock</code><span class="sig-paren">(</span><a class="reference internal" href="#c.rados_ioctx_t" title="rados_ioctx_t">rados_ioctx_t</a><em> io</em>, const char *<em> o</em>, const char *<em> name</em>, const char *<em> cookie</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rados_unlock" title="Permalink to this definition">¶</a></dt>
<dd><p>Release a shared or exclusive lock on an object.</p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p>0 on success, negative error code on failure </p>
</dd>
<dt><strong>Return</strong></dt><dd><p>-ENOENT if the lock is not held by the specified (client, cookie) pair </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">io</span></code>: the context to operate in </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">o</span></code>: the name of the object </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">name</span></code>: the name of the lock </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cookie</span></code>: user-defined identifier for the instance of the lock </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="c.rados_aio_unlock">
<span class="target" id="librados_8h_1a4671577661a5b191f06947e0cb61d5dd"></span><a class="reference internal" href="#c.CEPH_RADOS_API" title="CEPH_RADOS_API">CEPH_RADOS_API</a> int <code class="sig-name descname">rados_aio_unlock</code><span class="sig-paren">(</span><a class="reference internal" href="#c.rados_ioctx_t" title="rados_ioctx_t">rados_ioctx_t</a><em> io</em>, const char *<em> o</em>, const char *<em> name</em>, const char *<em> cookie</em>, <a class="reference internal" href="#c.rados_completion_t" title="rados_completion_t">rados_completion_t</a><em> completion</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rados_aio_unlock" title="Permalink to this definition">¶</a></dt>
<dd><p>Asynchronous release a shared or exclusive lock on an object.</p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p>0 on success, negative error code on failure </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">io</span></code>: the context to operate in </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">o</span></code>: the name of the object </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">name</span></code>: the name of the lock </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cookie</span></code>: user-defined identifier for the instance of the lock </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">completion</span></code>: what to do when operation has been attempted </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="c.rados_list_lockers">
<span class="target" id="librados_8h_1a5bbe10652a96add66edf90c8d737f6e9"></span><a class="reference internal" href="#c.CEPH_RADOS_API" title="CEPH_RADOS_API">CEPH_RADOS_API</a> ssize_t <code class="sig-name descname">rados_list_lockers</code><span class="sig-paren">(</span><a class="reference internal" href="#c.rados_ioctx_t" title="rados_ioctx_t">rados_ioctx_t</a><em> io</em>, const char *<em> o</em>, const char *<em> name</em>, int *<em> exclusive</em>, char *<em> tag</em>, size_t *<em> tag_len</em>, char *<em> clients</em>, size_t *<em> clients_len</em>, char *<em> cookies</em>, size_t *<em> cookies_len</em>, char *<em> addrs</em>, size_t *<em> addrs_len</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rados_list_lockers" title="Permalink to this definition">¶</a></dt>
<dd><p>List clients that have locked the named object lock and information about the lock.</p>
<p>The number of bytes required in each buffer is put in the corresponding size out parameter. If any of the provided buffers are too short, -ERANGE is returned after these sizes are filled in.</p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p>number of lockers on success, negative error code on failure </p>
</dd>
<dt><strong>Return</strong></dt><dd><p>-ERANGE if any of the buffers are too short </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">io</span></code>: the context to operate in </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">o</span></code>: the name of the object </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">name</span></code>: the name of the lock </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">exclusive</span></code>: where to store whether the lock is exclusive (1) or shared (0) </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">tag</span></code>: where to store the tag associated with the object lock </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">tag_len</span></code>: number of bytes in tag buffer </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">clients</span></code>: buffer in which locker clients are stored, separated by ‘\0’ </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">clients_len</span></code>: number of bytes in the clients buffer </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cookies</span></code>: buffer in which locker cookies are stored, separated by ‘\0’ </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cookies_len</span></code>: number of bytes in the cookies buffer </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">addrs</span></code>: buffer in which locker addresses are stored, separated by ‘\0’ </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">addrs_len</span></code>: number of bytes in the clients buffer </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="c.rados_break_lock">
<span class="target" id="librados_8h_1a541c71bbd6497cb92c4933bab8f12afd"></span><a class="reference internal" href="#c.CEPH_RADOS_API" title="CEPH_RADOS_API">CEPH_RADOS_API</a> int <code class="sig-name descname">rados_break_lock</code><span class="sig-paren">(</span><a class="reference internal" href="#c.rados_ioctx_t" title="rados_ioctx_t">rados_ioctx_t</a><em> io</em>, const char *<em> o</em>, const char *<em> name</em>, const char *<em> client</em>, const char *<em> cookie</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rados_break_lock" title="Permalink to this definition">¶</a></dt>
<dd><p>Releases a shared or exclusive lock on an object, which was taken by the specified client.</p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p>0 on success, negative error code on failure </p>
</dd>
<dt><strong>Return</strong></dt><dd><p>-ENOENT if the lock is not held by the specified (client, cookie) pair </p>
</dd>
<dt><strong>Return</strong></dt><dd><p>-EINVAL if the client cannot be parsed </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">io</span></code>: the context to operate in </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">o</span></code>: the name of the object </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">name</span></code>: the name of the lock </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">client</span></code>: the client currently holding the lock </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cookie</span></code>: user-defined identifier for the instance of the lock </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="c.rados_blacklist_add">
<span class="target" id="librados_8h_1ab21db9859670ba925ae1bbc7e150e968"></span><a class="reference internal" href="#c.CEPH_RADOS_API" title="CEPH_RADOS_API">CEPH_RADOS_API</a> int <code class="sig-name descname">rados_blacklist_add</code><span class="sig-paren">(</span><a class="reference internal" href="#c.rados_t" title="rados_t">rados_t</a><em> cluster</em>, char *<em> client_address</em>, uint32_t<em> expire_seconds</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rados_blacklist_add" title="Permalink to this definition">¶</a></dt>
<dd><p>Blacklists the specified client from the OSDs</p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p>0 on success, negative error code on failure </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">cluster</span></code>: cluster handle </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">client_address</span></code>: client address </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">expire_seconds</span></code>: number of seconds to blacklist (0 for default) </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="c.rados_getaddrs">
<span class="target" id="librados_8h_1a1cfa78e34d5576b11b48344ff54c210d"></span><a class="reference internal" href="#c.CEPH_RADOS_API" title="CEPH_RADOS_API">CEPH_RADOS_API</a> int <code class="sig-name descname">rados_getaddrs</code><span class="sig-paren">(</span><a class="reference internal" href="#c.rados_t" title="rados_t">rados_t</a><em> cluster</em>, char **<em> addrs</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rados_getaddrs" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets addresses of the RADOS session, suitable for blacklisting.</p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p>0 on success, negative error code on failure </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">cluster</span></code>: cluster handle </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">addrs</span></code>: the output string. </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="c.rados_set_osdmap_full_try">
<span class="target" id="librados_8h_1afb613821ea7074331e510f42a71afd01"></span><a class="reference internal" href="#c.CEPH_RADOS_API" title="CEPH_RADOS_API">CEPH_RADOS_API</a> void <code class="sig-name descname">rados_set_osdmap_full_try</code><span class="sig-paren">(</span><a class="reference internal" href="#c.rados_ioctx_t" title="rados_ioctx_t">rados_ioctx_t</a><em> io</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rados_set_osdmap_full_try" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="c.rados_unset_osdmap_full_try">
<span class="target" id="librados_8h_1ad3e47c682747e81ae17f38b822758110"></span><a class="reference internal" href="#c.CEPH_RADOS_API" title="CEPH_RADOS_API">CEPH_RADOS_API</a> void <code class="sig-name descname">rados_unset_osdmap_full_try</code><span class="sig-paren">(</span><a class="reference internal" href="#c.rados_ioctx_t" title="rados_ioctx_t">rados_ioctx_t</a><em> io</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rados_unset_osdmap_full_try" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="c.rados_set_pool_full_try">
<span class="target" id="librados_8h_1af6790929aeeb29027e55e33e433df0a2"></span><a class="reference internal" href="#c.CEPH_RADOS_API" title="CEPH_RADOS_API">CEPH_RADOS_API</a> void <code class="sig-name descname">rados_set_pool_full_try</code><span class="sig-paren">(</span><a class="reference internal" href="#c.rados_ioctx_t" title="rados_ioctx_t">rados_ioctx_t</a><em> io</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rados_set_pool_full_try" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="c.rados_unset_pool_full_try">
<span class="target" id="librados_8h_1ad747048702ffc728b2e7e83a6110b399"></span><a class="reference internal" href="#c.CEPH_RADOS_API" title="CEPH_RADOS_API">CEPH_RADOS_API</a> void <code class="sig-name descname">rados_unset_pool_full_try</code><span class="sig-paren">(</span><a class="reference internal" href="#c.rados_ioctx_t" title="rados_ioctx_t">rados_ioctx_t</a><em> io</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rados_unset_pool_full_try" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="c.rados_application_enable">
<span class="target" id="librados_8h_1a35266dde692638e1760cf8261f900400"></span><a class="reference internal" href="#c.CEPH_RADOS_API" title="CEPH_RADOS_API">CEPH_RADOS_API</a> int <code class="sig-name descname">rados_application_enable</code><span class="sig-paren">(</span><a class="reference internal" href="#c.rados_ioctx_t" title="rados_ioctx_t">rados_ioctx_t</a><em> io</em>, const char *<em> app_name</em>, int<em> force</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rados_application_enable" title="Permalink to this definition">¶</a></dt>
<dd><p>Enable an application on a pool</p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p>0 on success, negative error code on failure </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">io</span></code>: pool ioctx </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">app_name</span></code>: application name </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">force</span></code>: 0 if only single application per pool </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="c.rados_application_list">
<span class="target" id="librados_8h_1a8472bd0803760885558c9a795ab0c045"></span><a class="reference internal" href="#c.CEPH_RADOS_API" title="CEPH_RADOS_API">CEPH_RADOS_API</a> int <code class="sig-name descname">rados_application_list</code><span class="sig-paren">(</span><a class="reference internal" href="#c.rados_ioctx_t" title="rados_ioctx_t">rados_ioctx_t</a><em> io</em>, char *<em> values</em>, size_t *<em> values_len</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rados_application_list" title="Permalink to this definition">¶</a></dt>
<dd><p>List all enabled applications</p>
<p>If the provided buffer is too short, the required length is filled in and -ERANGE is returned. Otherwise, the buffers are filled with the application names, with a ‘\0’ after each.</p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p>0 on success, negative error code on failure </p>
</dd>
<dt><strong>Return</strong></dt><dd><p>-ERANGE if either buffer is too short </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">io</span></code>: pool ioctx </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">values</span></code>: buffer in which to store application names </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">values_len</span></code>: number of bytes in values buffer </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="c.rados_application_metadata_get">
<span class="target" id="librados_8h_1a30ab2764a990825e99e3a0316438aad4"></span><a class="reference internal" href="#c.CEPH_RADOS_API" title="CEPH_RADOS_API">CEPH_RADOS_API</a> int <code class="sig-name descname">rados_application_metadata_get</code><span class="sig-paren">(</span><a class="reference internal" href="#c.rados_ioctx_t" title="rados_ioctx_t">rados_ioctx_t</a><em> io</em>, const char *<em> app_name</em>, const char *<em> key</em>, char *<em> value</em>, size_t *<em> value_len</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rados_application_metadata_get" title="Permalink to this definition">¶</a></dt>
<dd><p>Get application metadata value from pool</p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p>0 on success, negative error code on failure </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">io</span></code>: pool ioctx </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">app_name</span></code>: application name </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">key</span></code>: metadata key </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">value</span></code>: result buffer </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">value_len</span></code>: maximum len of value </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="c.rados_application_metadata_set">
<span class="target" id="librados_8h_1af091c3527e75cbc7624f3257aa351f7b"></span><a class="reference internal" href="#c.CEPH_RADOS_API" title="CEPH_RADOS_API">CEPH_RADOS_API</a> int <code class="sig-name descname">rados_application_metadata_set</code><span class="sig-paren">(</span><a class="reference internal" href="#c.rados_ioctx_t" title="rados_ioctx_t">rados_ioctx_t</a><em> io</em>, const char *<em> app_name</em>, const char *<em> key</em>, const char *<em> value</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rados_application_metadata_set" title="Permalink to this definition">¶</a></dt>
<dd><p>Set application metadata on a pool</p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p>0 on success, negative error code on failure </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">io</span></code>: pool ioctx </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">app_name</span></code>: application name </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">key</span></code>: metadata key </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">value</span></code>: metadata key </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="c.rados_application_metadata_remove">
<span class="target" id="librados_8h_1a5944eeac28069d26e9199664d91800dc"></span><a class="reference internal" href="#c.CEPH_RADOS_API" title="CEPH_RADOS_API">CEPH_RADOS_API</a> int <code class="sig-name descname">rados_application_metadata_remove</code><span class="sig-paren">(</span><a class="reference internal" href="#c.rados_ioctx_t" title="rados_ioctx_t">rados_ioctx_t</a><em> io</em>, const char *<em> app_name</em>, const char *<em> key</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rados_application_metadata_remove" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove application metadata from a pool</p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p>0 on success, negative error code on failure </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">io</span></code>: pool ioctx </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">app_name</span></code>: application name </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">key</span></code>: metadata key </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="c.rados_application_metadata_list">
<span class="target" id="librados_8h_1ac1516afc37e52e970dc71d00844e22e9"></span><a class="reference internal" href="#c.CEPH_RADOS_API" title="CEPH_RADOS_API">CEPH_RADOS_API</a> int <code class="sig-name descname">rados_application_metadata_list</code><span class="sig-paren">(</span><a class="reference internal" href="#c.rados_ioctx_t" title="rados_ioctx_t">rados_ioctx_t</a><em> io</em>, const char *<em> app_name</em>, char *<em> keys</em>, size_t *<em> key_len</em>, char *<em> values</em>, size_t *<em> vals_len</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rados_application_metadata_list" title="Permalink to this definition">¶</a></dt>
<dd><p>List all metadata key/value pairs associated with an application.</p>
<p>This iterates over all metadata, key_len and val_len are filled in with the number of bytes put into the keys and values buffers.</p>
<p>If the provided buffers are too short, the required lengths are filled in and -ERANGE is returned. Otherwise, the buffers are filled with the keys and values of the metadata, with a ‘\0’ after each.</p>
<p><dl class="simple">
<dt><strong>Return</strong></dt><dd><p>0 on success, negative error code on failure </p>
</dd>
<dt><strong>Return</strong></dt><dd><p>-ERANGE if either buffer is too short </p>
</dd>
<dt><strong>Parameters</strong></dt><dd><ul class="breatheparameterlist simple">
<li><p><code class="docutils literal notranslate"><span class="pre">io</span></code>: pool ioctx </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">app_name</span></code>: application name </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">keys</span></code>: buffer in which to store key names </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">key_len</span></code>: number of bytes in keys buffer </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">values</span></code>: buffer in which to store values </p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">vals_len</span></code>: number of bytes in values buffer </p></li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="c.rados_objects_list_open">
<span class="target" id="librados_8h_1a91049937a19a2ad5abe2bfe0d7ca7c36"></span><a class="reference internal" href="#c.CEPH_RADOS_API" title="CEPH_RADOS_API">CEPH_RADOS_API</a> int <code class="sig-name descname">rados_objects_list_open</code><span class="sig-paren">(</span><a class="reference internal" href="#c.rados_ioctx_t" title="rados_ioctx_t">rados_ioctx_t</a><em> io</em>, <a class="reference internal" href="#c.rados_list_ctx_t" title="rados_list_ctx_t">rados_list_ctx_t</a> *<em> ctx</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rados_objects_list_open" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="c.rados_objects_list_get_pg_hash_position">
<span class="target" id="librados_8h_1a180c89c14f7e1196d6c68cda56afa080"></span><a class="reference internal" href="#c.CEPH_RADOS_API" title="CEPH_RADOS_API">CEPH_RADOS_API</a> uint32_t <code class="sig-name descname">rados_objects_list_get_pg_hash_position</code><span class="sig-paren">(</span><a class="reference internal" href="#c.rados_list_ctx_t" title="rados_list_ctx_t">rados_list_ctx_t</a><em> ctx</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rados_objects_list_get_pg_hash_position" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="c.rados_objects_list_seek">
<span class="target" id="librados_8h_1afe558022903cb55107ec98a12be908cb"></span><a class="reference internal" href="#c.CEPH_RADOS_API" title="CEPH_RADOS_API">CEPH_RADOS_API</a> uint32_t <code class="sig-name descname">rados_objects_list_seek</code><span class="sig-paren">(</span><a class="reference internal" href="#c.rados_list_ctx_t" title="rados_list_ctx_t">rados_list_ctx_t</a><em> ctx</em>, uint32_t<em> pos</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rados_objects_list_seek" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="c.rados_objects_list_next">
<span class="target" id="librados_8h_1abe8c875c7b27b57001202487e0b1ba10"></span><a class="reference internal" href="#c.CEPH_RADOS_API" title="CEPH_RADOS_API">CEPH_RADOS_API</a> int <code class="sig-name descname">rados_objects_list_next</code><span class="sig-paren">(</span><a class="reference internal" href="#c.rados_list_ctx_t" title="rados_list_ctx_t">rados_list_ctx_t</a><em> ctx</em>, const char **<em> entry</em>, const char **<em> key</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rados_objects_list_next" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="c.rados_objects_list_close">
<span class="target" id="librados_8h_1a1f422e53604e1796d6c1650ec0ccb079"></span><a class="reference internal" href="#c.CEPH_RADOS_API" title="CEPH_RADOS_API">CEPH_RADOS_API</a> void <code class="sig-name descname">rados_objects_list_close</code><span class="sig-paren">(</span><a class="reference internal" href="#c.rados_list_ctx_t" title="rados_list_ctx_t">rados_list_ctx_t</a><em> ctx</em><span class="sig-paren">)</span><a class="headerlink" href="#c.rados_objects_list_close" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<dl class="struct">
<dt>
<span class="target" id="structrados__object__list__item"></span><em class="property">struct </em><code class="sig-name descname">rados_object_list_item</code></dt>
<dd><em>#include &lt;librados.h&gt;</em><p>The item populated by rados_object_list in the results array. </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric">Public Members</p>
<dl class="variable">
<dt id="c.rados_object_list_item::oid_length">
<span class="target" id="structrados__object__list__item_1ab435d1c0f7cfac2dbd6be0c2a3ab438e"></span>size_t <code class="sig-name descname">oid_length</code><a class="headerlink" href="#c.rados_object_list_item::oid_length" title="Permalink to this definition">¶</a></dt>
<dd><p>oid length </p>
</dd></dl>

<dl class="variable">
<dt id="c.rados_object_list_item::oid">
<span class="target" id="structrados__object__list__item_1a8f579ff1575094f48ef759e5814c55de"></span>char* <code class="sig-name descname">oid</code><a class="headerlink" href="#c.rados_object_list_item::oid" title="Permalink to this definition">¶</a></dt>
<dd><p>name of the object </p>
</dd></dl>

<dl class="variable">
<dt id="c.rados_object_list_item::nspace_length">
<span class="target" id="structrados__object__list__item_1aa717865eb172ba1f7054796fafcebc28"></span>size_t <code class="sig-name descname">nspace_length</code><a class="headerlink" href="#c.rados_object_list_item::nspace_length" title="Permalink to this definition">¶</a></dt>
<dd><p>namespace length </p>
</dd></dl>

<dl class="variable">
<dt id="c.rados_object_list_item::nspace">
<span class="target" id="structrados__object__list__item_1a3efdaa04909dc96ca679e9c1c908d0c6"></span>char* <code class="sig-name descname">nspace</code><a class="headerlink" href="#c.rados_object_list_item::nspace" title="Permalink to this definition">¶</a></dt>
<dd><p>the object namespace </p>
</dd></dl>

<dl class="variable">
<dt id="c.rados_object_list_item::locator_length">
<span class="target" id="structrados__object__list__item_1a37a4a7c93e674c5a6ff6eb1d3775054d"></span>size_t <code class="sig-name descname">locator_length</code><a class="headerlink" href="#c.rados_object_list_item::locator_length" title="Permalink to this definition">¶</a></dt>
<dd><p>locator length </p>
</dd></dl>

<dl class="variable">
<dt id="c.rados_object_list_item::locator">
<span class="target" id="structrados__object__list__item_1a167c9fab6a08d37c4959abb447f4e927"></span>char* <code class="sig-name descname">locator</code><a class="headerlink" href="#c.rados_object_list_item::locator" title="Permalink to this definition">¶</a></dt>
<dd><p>object locator </p>
</dd></dl>

</div>
</dd></dl>

<dl class="struct">
<dt id="c.rados_pool_stat_t">
<span class="target" id="structrados__pool__stat__t"></span><em class="property">struct </em><code class="sig-name descname">rados_pool_stat_t</code><a class="headerlink" href="#c.rados_pool_stat_t" title="Permalink to this definition">¶</a></dt>
<dd><em>#include &lt;librados.h&gt;</em><p>Usage information for a pool. </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric">Public Members</p>
<dl class="variable">
<dt id="c.rados_pool_stat_t::num_bytes">
<span class="target" id="structrados__pool__stat__t_1ae6385fec35785692a72ded4521051349"></span>uint64_t <code class="sig-name descname">num_bytes</code><a class="headerlink" href="#c.rados_pool_stat_t::num_bytes" title="Permalink to this definition">¶</a></dt>
<dd><p>space used in bytes </p>
</dd></dl>

<dl class="variable">
<dt id="c.rados_pool_stat_t::num_kb">
<span class="target" id="structrados__pool__stat__t_1ab9dfedb097f054908307faaa66b7e109"></span>uint64_t <code class="sig-name descname">num_kb</code><a class="headerlink" href="#c.rados_pool_stat_t::num_kb" title="Permalink to this definition">¶</a></dt>
<dd><p>space used in KB </p>
</dd></dl>

<dl class="variable">
<dt id="c.rados_pool_stat_t::num_objects">
<span class="target" id="structrados__pool__stat__t_1ad0f3fc2289e2242e4d81475b3b9c6ee7"></span>uint64_t <code class="sig-name descname">num_objects</code><a class="headerlink" href="#c.rados_pool_stat_t::num_objects" title="Permalink to this definition">¶</a></dt>
<dd><p>number of objects in the pool </p>
</dd></dl>

<dl class="variable">
<dt id="c.rados_pool_stat_t::num_object_clones">
<span class="target" id="structrados__pool__stat__t_1a934a353ee4ee657b1e47b66ffc99ee02"></span>uint64_t <code class="sig-name descname">num_object_clones</code><a class="headerlink" href="#c.rados_pool_stat_t::num_object_clones" title="Permalink to this definition">¶</a></dt>
<dd><p>number of clones of objects </p>
</dd></dl>

<dl class="variable">
<dt id="c.rados_pool_stat_t::num_object_copies">
<span class="target" id="structrados__pool__stat__t_1a3e537978ffb81be0a6355f3bb6159290"></span>uint64_t <code class="sig-name descname">num_object_copies</code><a class="headerlink" href="#c.rados_pool_stat_t::num_object_copies" title="Permalink to this definition">¶</a></dt>
<dd><p>num_objects * num_replicas </p>
</dd></dl>

<dl class="variable">
<dt id="c.rados_pool_stat_t::num_objects_missing_on_primary">
<span class="target" id="structrados__pool__stat__t_1a2f0995af81b64c8678dc4bdecd42a8c5"></span>uint64_t <code class="sig-name descname">num_objects_missing_on_primary</code><a class="headerlink" href="#c.rados_pool_stat_t::num_objects_missing_on_primary" title="Permalink to this definition">¶</a></dt>
<dd><p>number of objects missing on primary </p>
</dd></dl>

<dl class="variable">
<dt id="c.rados_pool_stat_t::num_objects_unfound">
<span class="target" id="structrados__pool__stat__t_1a1be8f89a42f68ef7f25d5dcf728ea7b0"></span>uint64_t <code class="sig-name descname">num_objects_unfound</code><a class="headerlink" href="#c.rados_pool_stat_t::num_objects_unfound" title="Permalink to this definition">¶</a></dt>
<dd><p>number of objects found on no OSDs </p>
</dd></dl>

<dl class="variable">
<dt id="c.rados_pool_stat_t::num_objects_degraded">
<span class="target" id="structrados__pool__stat__t_1af63ab0187a498098d898f4dd1b49cb5c"></span>uint64_t <code class="sig-name descname">num_objects_degraded</code><a class="headerlink" href="#c.rados_pool_stat_t::num_objects_degraded" title="Permalink to this definition">¶</a></dt>
<dd><p>number of objects replicated fewer times than they should be (but found on at least one OSD) </p>
</dd></dl>

<dl class="variable">
<dt id="c.rados_pool_stat_t::num_rd">
<span class="target" id="structrados__pool__stat__t_1aca0e0d878b451946c96a8f0fb46075df"></span>uint64_t <code class="sig-name descname">num_rd</code><a class="headerlink" href="#c.rados_pool_stat_t::num_rd" title="Permalink to this definition">¶</a></dt>
<dd><p>number of objects read </p>
</dd></dl>

<dl class="variable">
<dt id="c.rados_pool_stat_t::num_rd_kb">
<span class="target" id="structrados__pool__stat__t_1abef90de3656e1aa464e70661bff8220b"></span>uint64_t <code class="sig-name descname">num_rd_kb</code><a class="headerlink" href="#c.rados_pool_stat_t::num_rd_kb" title="Permalink to this definition">¶</a></dt>
<dd><p>objects read in KB </p>
</dd></dl>

<dl class="variable">
<dt id="c.rados_pool_stat_t::num_wr">
<span class="target" id="structrados__pool__stat__t_1a8c77f7bf4c192e522df7496288f23f8f"></span>uint64_t <code class="sig-name descname">num_wr</code><a class="headerlink" href="#c.rados_pool_stat_t::num_wr" title="Permalink to this definition">¶</a></dt>
<dd><p>number of objects written </p>
</dd></dl>

<dl class="variable">
<dt id="c.rados_pool_stat_t::num_wr_kb">
<span class="target" id="structrados__pool__stat__t_1af56c7186ba19df57f7978b6ce734361a"></span>uint64_t <code class="sig-name descname">num_wr_kb</code><a class="headerlink" href="#c.rados_pool_stat_t::num_wr_kb" title="Permalink to this definition">¶</a></dt>
<dd><p>objects written in KB </p>
</dd></dl>

<dl class="variable">
<dt id="c.rados_pool_stat_t::num_user_bytes">
<span class="target" id="structrados__pool__stat__t_1ac3cdc6d239589395eea0a934e360524a"></span>uint64_t <code class="sig-name descname">num_user_bytes</code><a class="headerlink" href="#c.rados_pool_stat_t::num_user_bytes" title="Permalink to this definition">¶</a></dt>
<dd><p>bytes originally provided by user </p>
</dd></dl>

<dl class="variable">
<dt id="c.rados_pool_stat_t::compressed_bytes_orig">
<span class="target" id="structrados__pool__stat__t_1a1bd4f859b702a6d5be49360a9865d02d"></span>uint64_t <code class="sig-name descname">compressed_bytes_orig</code><a class="headerlink" href="#c.rados_pool_stat_t::compressed_bytes_orig" title="Permalink to this definition">¶</a></dt>
<dd><p>bytes passed compression </p>
</dd></dl>

<dl class="variable">
<dt id="c.rados_pool_stat_t::compressed_bytes">
<span class="target" id="structrados__pool__stat__t_1a3cb887b369cc7ec4a564d1d9b4f1deb1"></span>uint64_t <code class="sig-name descname">compressed_bytes</code><a class="headerlink" href="#c.rados_pool_stat_t::compressed_bytes" title="Permalink to this definition">¶</a></dt>
<dd><p>bytes resulted after compression </p>
</dd></dl>

<dl class="variable">
<dt id="c.rados_pool_stat_t::compressed_bytes_alloc">
<span class="target" id="structrados__pool__stat__t_1adcd6e409132948151e3d902bb79dd294"></span>uint64_t <code class="sig-name descname">compressed_bytes_alloc</code><a class="headerlink" href="#c.rados_pool_stat_t::compressed_bytes_alloc" title="Permalink to this definition">¶</a></dt>
<dd><p>bytes allocated at storage </p>
</dd></dl>

</div>
</dd></dl>

<dl class="struct">
<dt id="c.rados_cluster_stat_t">
<span class="target" id="structrados__cluster__stat__t"></span><em class="property">struct </em><code class="sig-name descname">rados_cluster_stat_t</code><a class="headerlink" href="#c.rados_cluster_stat_t" title="Permalink to this definition">¶</a></dt>
<dd><em>#include &lt;librados.h&gt;</em><p>Cluster-wide usage information </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric">Public Members</p>
<dl class="variable">
<dt id="c.rados_cluster_stat_t::kb">
<span class="target" id="structrados__cluster__stat__t_1a37633ef0eb7d786d06869a7401167966"></span>uint64_t <code class="sig-name descname">kb</code><a class="headerlink" href="#c.rados_cluster_stat_t::kb" title="Permalink to this definition">¶</a></dt>
<dd><p>total device size </p>
</dd></dl>

<dl class="variable">
<dt id="c.rados_cluster_stat_t::kb_used">
<span class="target" id="structrados__cluster__stat__t_1ac2c7d8f0977feed733742e5a1d046f5e"></span>uint64_t <code class="sig-name descname">kb_used</code><a class="headerlink" href="#c.rados_cluster_stat_t::kb_used" title="Permalink to this definition">¶</a></dt>
<dd><p>total used </p>
</dd></dl>

<dl class="variable">
<dt id="c.rados_cluster_stat_t::kb_avail">
<span class="target" id="structrados__cluster__stat__t_1aeb381150d5a01aeb57015512d820b302"></span>uint64_t <code class="sig-name descname">kb_avail</code><a class="headerlink" href="#c.rados_cluster_stat_t::kb_avail" title="Permalink to this definition">¶</a></dt>
<dd><p>total available/free </p>
</dd></dl>

<dl class="variable">
<dt id="c.rados_cluster_stat_t::num_objects">
<span class="target" id="structrados__cluster__stat__t_1addd82ed2ef92adc7ecb8c051ad68bd66"></span>uint64_t <code class="sig-name descname">num_objects</code><a class="headerlink" href="#c.rados_cluster_stat_t::num_objects" title="Permalink to this definition">¶</a></dt>
<dd><p>number of objects </p>
</dd></dl>

</div>
</dd></dl>

</div></blockquote>
</div>
</div>



          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../../../">
              <img class="logo" src="../../../_static/logo.png" alt="Logo"/>
            </a></p>
<h3><a href="../../../">Table Of Contents</a></h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../start/intro/">Ceph 简介</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../install/">安装 Ceph</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../cephadm/">Cephadm</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../">Ceph 存储集群</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../configuration/">配置</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../deployment/">部署</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../operations/">运维</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../man/">手册页</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../troubleshooting/">故障排除</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../">APIs</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../librados-intro/">librados 简介</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">librados (C)</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id1">实例：连接并写入一个对象</a></li>
<li class="toctree-l4"><a class="reference internal" href="#io">异步 IO</a></li>
<li class="toctree-l4"><a class="reference internal" href="#api-calls">API calls</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../libradospp/">librados (C++)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../python/">librados (Python)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../objclass-sdk/">object class</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../cephfs/">Ceph 文件系统</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../rbd/">Ceph 块设备</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../radosgw/">Ceph 对象网关</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../mgr/">Ceph 管理器守护进程</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../mgr/dashboard/">Ceph 仪表盘</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../api/">API 文档</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../architecture/">体系结构</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../dev/developer_guide/">开发者指南</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../dev/internals/">Ceph 内幕</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../governance/">项目管理</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../foundation/">Ceph 基金会</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../ceph-volume/">ceph-volume</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../releases/general/">Ceph 版本（总目录）</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../releases/">Ceph 版本（索引）</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../glossary/">Ceph 术语</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../translation_cn/">中文版翻译资源</a></li>
</ul>


<!-- ugly kludge to make genindex look like it's part of the toc -->
<ul style="margin-top: -10px"><li class="toctree-l1"><a class="reference internal" href="../../../genindex/">Index</a></li></ul>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../../search/" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../genindex/" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../../../py-modindex/" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="../libradospp/" title="LibradosPP (C++)"
             >next</a> |</li>
        <li class="right" >
          <a href="../librados-intro/" title="librados 简介"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../../">Ceph Documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../../" >Ceph 存储集群</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="../" >Ceph 存储集群 API</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2016, Ceph authors and contributors. Licensed under Creative Commons Attribution Share Alike 3.0 (CC-BY-SA-3.0).
    </div>
  </body>
</html>