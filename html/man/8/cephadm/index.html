
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>cephadm – manage the local cephadm host &#8212; Ceph Documentation</title>
    <link rel="stylesheet" href="../../../_static/nature.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/graphviz.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/css/custom.css" />
    <script id="documentation_options" data-url_root="../../../" src="../../../_static/documentation_options.js"></script>
    <script src="../../../_static/jquery.js"></script>
    <script src="../../../_static/underscore.js"></script>
    <script src="../../../_static/doctools.js"></script>
    <script src="../../../_static/language_data.js"></script>
    <script src="../../../_static/js/ceph.js"></script>
    <link rel="shortcut icon" href="../../../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../../../genindex/" />
    <link rel="search" title="Search" href="../../../search/" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../genindex/" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../../py-modindex/" title="Python Module Index"
             >modules</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../../">Ceph Documentation</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            

<div id="dev-warning" class="admonition note" style="display:none;">
  <p class="first admonition-title">Notice</p>
  <p class="last">This document is for a development version of Ceph.</p>
</div>

<div id="eol-warning" class="admonition warning" style="display:none;">
  <p class="first admonition-title">Warning</p>
  <p class="last">This document is for an unsupported version of Ceph.</p>
</div>
  <div id="docubetter" align="right" style="display:none; padding: 15px; font-weight: bold;">
    <a id="edit-on-github" href="https://github.com/ceph/ceph/edit/master/doc/man/8/cephadm.rst" rel="nofollow">Edit on GitHub</a> | <a href="https://pad.ceph.com/p/Report_Documentation_Bugs">Report a Documentation Bug</a>
  </div>

  
  <div class="section" id="cephadm-manage-the-local-cephadm-host">
<h1>cephadm – manage the local cephadm host<a class="headerlink" href="#cephadm-manage-the-local-cephadm-host" title="Permalink to this headline">¶</a></h1>
<div class="section" id="synopsis">
<h2>Synopsis<a class="headerlink" href="#synopsis" title="Permalink to this headline">¶</a></h2>
<div class="line-block">
<div class="line"><strong>cephadm**</strong> [-h] [–image IMAGE] [–docker] [–data-dir DATA_DIR]</div>
<div class="line-block">
<div class="line">[–log-dir LOG_DIR] [–logrotate-dir LOGROTATE_DIR]</div>
<div class="line">[–unit-dir UNIT_DIR] [–verbose] [–timeout TIMEOUT]</div>
<div class="line">[–retry RETRY]</div>
<div class="line">{version,pull,inspect-image,ls,list-networks,adopt,rm-daemon,rm-cluster,run,shell,enter,ceph-volume,unit,logs,bootstrap,deploy,check-host,prepare-host,add-repo,rm-repo,install}</div>
<div class="line">…</div>
</div>
</div>
<div class="line-block">
<div class="line"><strong>cephadm</strong> <strong>pull</strong></div>
</div>
<div class="line-block">
<div class="line"><strong>cephadm</strong> <strong>inspect-image</strong></div>
</div>
<div class="line-block">
<div class="line"><strong>cephadm</strong> <strong>ls</strong></div>
</div>
<div class="line-block">
<div class="line"><strong>cephadm</strong> <strong>list-networks</strong></div>
</div>
<div class="line-block">
<div class="line"><strong>cephadm</strong> <strong>adopt</strong> [-h] –name NAME –style STYLE [–cluster CLUSTER]</div>
<div class="line-block">
<div class="line">[–legacy-dir LEGACY_DIR] [–config-json CONFIG_JSON]</div>
<div class="line">[–skip-firewalld] [–skip-pull]</div>
</div>
</div>
<div class="line-block">
<div class="line"><strong>cephadm</strong> <strong>rm-daemon</strong> [-h] –name NAME –fsid FSID [–force]</div>
<div class="line-block">
<div class="line">[–force-delete-data]</div>
</div>
</div>
<div class="line-block">
<div class="line"><strong>cephadm</strong> <strong>rm-cluster</strong> [-h] –fsid FSID [–force]</div>
</div>
<div class="line-block">
<div class="line"><strong>cephadm</strong> <strong>run</strong> [-h] –name NAME –fsid FSID</div>
</div>
<div class="line-block">
<div class="line"><strong>cephadm</strong> <strong>shell</strong> [-h] [–fsid FSID] [–name NAME] [–config CONFIG]
[–keyring KEYRING] [–mount MOUNT] [–env ENV]
[–] [command [command …]]</div>
</div>
<div class="line-block">
<div class="line"><strong>cephadm</strong> <strong>enter</strong> [-h] [–fsid FSID] –name NAME [command [command …]]</div>
</div>
<div class="line-block">
<div class="line"><strong>cephadm</strong> <strong>ceph-volume</strong> [-h] [–fsid FSID] [–config-json CONFIG_JSON]
[–config CONFIG] [–keyring KEYRING]
command [command …]</div>
</div>
<div class="line-block">
<div class="line"><strong>cephadm</strong> <strong>unit</strong>  [-h] [–fsid FSID] –name NAME command</div>
</div>
<div class="line-block">
<div class="line"><strong>cephadm</strong> <strong>logs</strong> [-h] [–fsid FSID] –name NAME [command [command …]]</div>
</div>
<div class="line-block">
<div class="line"><strong>cephadm</strong> <strong>bootstrap</strong> [-h] [–config CONFIG] [–mon-id MON_ID]</div>
<div class="line-block">
<div class="line">[–mon-addrv MON_ADDRV] [–mon-ip MON_IP]</div>
<div class="line">[–mgr-id MGR_ID] [–fsid FSID]</div>
<div class="line">[–output-dir OUTPUT_DIR]</div>
<div class="line">[–output-keyring OUTPUT_KEYRING]</div>
<div class="line">[–output-config OUTPUT_CONFIG]</div>
<div class="line">[–output-pub-ssh-key OUTPUT_PUB_SSH_KEY]</div>
<div class="line">[–skip-ssh]</div>
<div class="line">[–initial-dashboard-user INITIAL_DASHBOARD_USER]</div>
<div class="line">[–initial-dashboard-password INITIAL_DASHBOARD_PASSWORD]</div>
<div class="line">[–dashboard-key DASHBOARD_KEY]</div>
<div class="line">[–dashboard-crt DASHBOARD_CRT]</div>
<div class="line">[–ssh-config SSH_CONFIG]</div>
<div class="line">[–ssh-private-key SSH_PRIVATE_KEY]</div>
<div class="line">[–ssh-public-key SSH_PUBLIC_KEY]</div>
<div class="line">[–ssh-user SSH_USER] [–skip-mon-network]</div>
<div class="line">[–skip-dashboard] [–dashboard-password-noupdate]</div>
<div class="line">[–no-minimize-config] [–skip-ping-check]</div>
<div class="line">[–skip-pull] [–skip-firewalld] [–allow-overwrite]</div>
<div class="line">[–allow-fqdn-hostname] [–skip-prepare-host]</div>
<div class="line">[–orphan-initial-daemons] [–skip-monitoring-stack]</div>
<div class="line">[–apply-spec APPLY_SPEC]</div>
<div class="line">[–registry-url REGISTRY_URL]</div>
<div class="line">[–registry-username REGISTRY_USERNAME]</div>
<div class="line">[–registry-password REGISTRY_PASSWORD]</div>
<div class="line">[–registry-json REGISTRY_JSON]</div>
</div>
</div>
<div class="line-block">
<div class="line"><strong>cephadm</strong> <strong>deploy</strong> [-h] –name NAME –fsid FSID [–config CONFIG]</div>
<div class="line-block">
<div class="line">[–config-json CONFIG_JSON] [–keyring KEYRING]</div>
<div class="line">[–key KEY] [–osd-fsid OSD_FSID] [–skip-firewalld]</div>
<div class="line">[–reconfig] [–allow-ptrace]</div>
</div>
</div>
<div class="line-block">
<div class="line"><strong>cephadm</strong> <strong>check-host</strong> [-h] [–expect-hostname EXPECT_HOSTNAME]</div>
</div>
<div class="line-block">
<div class="line"><strong>cephadm</strong> <strong>prepare-host</strong></div>
</div>
<div class="line-block">
<div class="line"><strong>cephadm</strong> <strong>add-repo</strong> [-h] [–release RELEASE] [–version VERSION]</div>
<div class="line-block">
<div class="line">[–dev DEV] [–dev-commit DEV_COMMIT]</div>
<div class="line">[–gpg-url GPG_URL] [–repo-url REPO_URL]</div>
</div>
</div>
<div class="line-block">
<div class="line"><strong>cephadm</strong> <strong>rm-repo</strong></div>
</div>
<div class="line-block">
<div class="line"><strong>cephadm</strong> <strong>install</strong> [-h] [packages [packages …]]</div>
</div>
<div class="line-block">
<div class="line"><strong>cephadm</strong> <strong>registry-login</strong> [-h] [–registry-url REGISTRY_URL]</div>
<div class="line-block">
<div class="line">[–registry-username REGISTRY_USERNAME]</div>
<div class="line">[–registry-password REGISTRY_PASSWORD]</div>
<div class="line">[–registry-json REGISTRY_JSON] [–fsid FSID]</div>
</div>
</div>
</div>
<div class="section" id="description">
<h2>Description<a class="headerlink" href="#description" title="Permalink to this headline">¶</a></h2>
<p><strong class="program">cephadm</strong> is a command line tool to manage the local host for the cephadm orchestrator.</p>
<p>It provides commands to investigate and modify the state of the current host.</p>
<p><strong class="program">cephadm</strong> is not required on all hosts, but useful when investigating a particular
daemon.</p>
</div>
<div class="section" id="options">
<h2>Options<a class="headerlink" href="#options" title="Permalink to this headline">¶</a></h2>
<dl class="option">
<dt id="cmdoption-cephadm-image">
<code class="sig-name descname">--image</code><code class="sig-prename descclassname"> IMAGE</code><a class="headerlink" href="#cmdoption-cephadm-image" title="Permalink to this definition">¶</a></dt>
<dd><p>container image. Can also be set via the
“CEPHADM_IMAGE” env var (default: None)</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-cephadm-docker">
<code class="sig-name descname">--docker</code><code class="sig-prename descclassname"></code><a class="headerlink" href="#cmdoption-cephadm-docker" title="Permalink to this definition">¶</a></dt>
<dd><p>use docker instead of podman (default: False)</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-cephadm-log-dir">
<code class="sig-name descname">--log-dir</code><code class="sig-prename descclassname"> LOG_DIR</code><a class="headerlink" href="#cmdoption-cephadm-log-dir" title="Permalink to this definition">¶</a></dt>
<dd><p>base directory for daemon logs (default:.. option:: /var/log/ceph)</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-cephadm-logrotate-dir">
<code class="sig-name descname">--logrotate-dir</code><code class="sig-prename descclassname"> LOGROTATE_DIR</code><a class="headerlink" href="#cmdoption-cephadm-logrotate-dir" title="Permalink to this definition">¶</a></dt>
<dd><p>location of logrotate configuration files (default: /etc/logrotate.d)</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-cephadm-unit-dir">
<code class="sig-name descname">--unit-dir</code><code class="sig-prename descclassname"> UNIT_DIR</code><a class="headerlink" href="#cmdoption-cephadm-unit-dir" title="Permalink to this definition">¶</a></dt>
<dd><p>base directory for systemd units (default: /etc/systemd/system)</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-cephadm-verbose">
<code class="sig-name descname">--verbose</code><code class="sig-prename descclassname"></code><code class="sig-prename descclassname">, </code><code class="sig-name descname">-v</code><code class="sig-prename descclassname"></code><a class="headerlink" href="#cmdoption-cephadm-verbose" title="Permalink to this definition">¶</a></dt>
<dd><p>Show debug-level log messages (default: False)</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-cephadm-timeout">
<code class="sig-name descname">--timeout</code><code class="sig-prename descclassname"> TIMEOUT</code><a class="headerlink" href="#cmdoption-cephadm-timeout" title="Permalink to this definition">¶</a></dt>
<dd><p>timeout in seconds (default: None)</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-cephadm-retry">
<code class="sig-name descname">--retry</code><code class="sig-prename descclassname"> RETRY</code><a class="headerlink" href="#cmdoption-cephadm-retry" title="Permalink to this definition">¶</a></dt>
<dd><p>max number of retries (default: 10)</p>
</dd></dl>

</div>
<div class="section" id="commands">
<h2>Commands<a class="headerlink" href="#commands" title="Permalink to this headline">¶</a></h2>
<div class="section" id="add-repo">
<h3>add-repo<a class="headerlink" href="#add-repo" title="Permalink to this headline">¶</a></h3>
<p>configure local package repository to also include the ceph repository.</p>
<p>Arguments:</p>
<ul class="simple">
<li><p>[–release RELEASE]       use latest version of a named release (e.g., octopus)</p></li>
<li><p>[–version VERSION]       use specific upstream version (x.y.z)</p></li>
<li><p>[–dev DEV]               use specified bleeding edge build from git branch or tag</p></li>
<li><p>[–dev-commit DEV_COMMIT] use specified bleeding edge build from git commit</p></li>
<li><p>[–gpg-url GPG_URL]       specify alternative GPG key location</p></li>
<li><p>[–repo-url REPO_URL]     specify alternative repo location</p></li>
</ul>
</div>
<div class="section" id="adopt">
<h3>adopt<a class="headerlink" href="#adopt" title="Permalink to this headline">¶</a></h3>
<p>Adopt a daemon deployed with a different deployment tool.</p>
<p>Arguments:</p>
<ul class="simple">
<li><p>[–name NAME, -n NAME]       daemon name (type.id)</p></li>
<li><p>[–style STYLE]              deployment style (legacy, …)</p></li>
<li><p>[–cluster CLUSTER]          cluster name</p></li>
<li><p>[–legacy-dir LEGACY_DIR]    base directory for legacy daemon data</p></li>
<li><p>[–config-json CONFIG_JSON]  Additional configuration information in JSON format</p></li>
<li><p>[–skip-firewalld]           Do not configure firewalld</p></li>
<li><p>[–skip-pull]                do not pull the latest image before adopting</p></li>
</ul>
</div>
<div class="section" id="bootstrap">
<h3>bootstrap<a class="headerlink" href="#bootstrap" title="Permalink to this headline">¶</a></h3>
<p>Bootstrap a cluster on the local host. It deploys a MON and a MGR and then also automatically
deploys the monitoring stack on this host (see –skip-monitoring-stack) and calls
<code class="docutils literal notranslate"><span class="pre">ceph</span> <span class="pre">orch</span> <span class="pre">host</span> <span class="pre">add</span> <span class="pre">$(hostname)</span></code> (see –skip-ssh).</p>
<p>Arguments:</p>
<ul class="simple">
<li><p>[–config CONFIG, -c CONFIG]    ceph conf file to incorporate</p></li>
<li><p>[–mon-id MON_ID]               mon id (default: local hostname)</p></li>
<li><p>[–mon-addrv MON_ADDRV]         mon IPs (e.g., [v2:localipaddr:3300,v1:localipaddr:6789])</p></li>
<li><p>[–mon-ip MON_IP]               mon IP</p></li>
<li><p>[–mgr-id MGR_ID]               mgr id (default: randomly generated)</p></li>
<li><p>[–fsid FSID]                   cluster FSID</p></li>
<li><p>[–output-dir OUTPUT_DIR]       directory to write config, keyring, and pub key files</p></li>
<li><p>[–output-keyring OUTPUT_KEYRING] location to write keyring file with new cluster admin and mon keys</p></li>
<li><p>[–output-config OUTPUT_CONFIG] location to write conf file to connect to new cluster</p></li>
<li><p>[–output-pub-ssh-key OUTPUT_PUB_SSH_KEY] location to write the cluster’s public SSH key</p></li>
<li><p>[–skip-ssh                     skip setup of ssh key on local host</p></li>
<li><p>[–initial-dashboard-user INITIAL_DASHBOARD_USER] Initial user for the dashboard</p></li>
<li><p>[–initial-dashboard-password INITIAL_DASHBOARD_PASSWORD] Initial password for the initial dashboard user</p></li>
<li><p>[–dashboard-key DASHBOARD_KEY] Dashboard key</p></li>
<li><p>[–dashboard-crt DASHBOARD_CRT] Dashboard certificate</p></li>
<li><p>[–ssh-config SSH_CONFIG] SSH config</p></li>
<li><p>[–ssh-private-key SSH_PRIVATE_KEY] SSH private key</p></li>
<li><p>[–ssh-public-key SSH_PUBLIC_KEY] SSH public key</p></li>
<li><p>[–ssh-user SSH_USER]           set user for SSHing to cluster hosts, passwordless sudo will be needed for non-root users’</p></li>
<li><p>[–skip-mon-network]            set mon public_network based on bootstrap mon ip</p></li>
<li><p>[–skip-dashboard]              do not enable the Ceph Dashboard</p></li>
<li><p>[–dashboard-password-noupdate] stop forced dashboard password change</p></li>
<li><p>[–no-minimize-config]          do not assimilate and minimize the config file</p></li>
<li><p>[–skip-ping-check]             do not verify that mon IP is pingable</p></li>
<li><p>[–skip-pull]                   do not pull the latest image before bootstrapping</p></li>
<li><p>[–skip-firewalld]              Do not configure firewalld</p></li>
<li><p>[–allow-overwrite]             allow overwrite of existing –output-* config/keyring/ssh files</p></li>
<li><p>[–allow-fqdn-hostname]         allow hostname that is fully-qualified (contains “.”)</p></li>
<li><p>[–skip-prepare-host]           Do not prepare host</p></li>
<li><p>[–orphan-initial-daemons]      Do not create initial mon, mgr, and crash service specs</p></li>
<li><p>[–skip-monitoring-stack]       Do not automatically provision monitoring stack] (prometheus, grafana, alertmanager, node-exporter)</p></li>
<li><p>[–apply-spec APPLY_SPEC]       Apply cluster spec after bootstrap (copy ssh key, add hosts and apply services)</p></li>
<li><p>[–registry-url REGISTRY_URL]   url of custom registry to login to. e.g. docker.io, quay.io</p></li>
<li><p>[–registry-username REGISTRY_USERNAME] username of account to login to on custom registry</p></li>
<li><p>[–registry-password REGISTRY_PASSWORD] password of account to login to on custom registry</p></li>
<li><p>[–registry-json REGISTRY_JSON] JSON file containing registry login info (see registry-login command documentation)</p></li>
</ul>
</div>
<div class="section" id="ceph-volume">
<h3>ceph-volume<a class="headerlink" href="#ceph-volume" title="Permalink to this headline">¶</a></h3>
<p>Run ceph-volume inside a container:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cephadm</span> <span class="n">ceph</span><span class="o">-</span><span class="n">volume</span> <span class="n">inventory</span>
</pre></div>
</div>
<p>Positional arguments:
* [command]               command</p>
<p>Arguments:</p>
<ul class="simple">
<li><p>[–fsid FSID]                    cluster FSID</p></li>
<li><p>[–config-json CONFIG_JSON]      JSON file with config and (client.bootrap-osd) key</p></li>
<li><p>[–config CONFIG, -c CONFIG]     ceph conf file</p></li>
<li><p>[–keyring KEYRING, -k KEYRING]  ceph.keyring to pass through to the container</p></li>
</ul>
</div>
<div class="section" id="check-host">
<h3>check-host<a class="headerlink" href="#check-host" title="Permalink to this headline">¶</a></h3>
<p>check host configuration to be suitable for a Ceph cluster.</p>
<p>Arguments:</p>
<ul class="simple">
<li><p>[–expect-hostname EXPECT_HOSTNAME] Check that hostname matches an expected value</p></li>
</ul>
</div>
<div class="section" id="deploy">
<h3>deploy<a class="headerlink" href="#deploy" title="Permalink to this headline">¶</a></h3>
<p>deploy a daemon on the local host. Used by the orchestrator CLI:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cephadm</span> <span class="n">shell</span> <span class="o">--</span> <span class="n">ceph</span> <span class="n">orch</span> <span class="n">apply</span> <span class="o">&lt;</span><span class="nb">type</span><span class="o">&gt;</span> <span class="o">...</span>
</pre></div>
</div>
<p>Arguments:</p>
<ul class="simple">
<li><p>[–name NAME]               daemon name (type.id)</p></li>
<li><p>[–fsid FSID]               cluster FSID</p></li>
<li><p>[–config CONFIG, -c CONFIG] config file for new daemon</p></li>
<li><p>[–config-json CONFIG_JSON] Additional configuration information in JSON format</p></li>
<li><p>[–keyring KEYRING]         keyring for new daemon</p></li>
<li><p>[–key KEY]                 key for new daemon</p></li>
<li><p>[–osd-fsid OSD_FSID]       OSD uuid, if creating an OSD container</p></li>
<li><p>[–skip-firewalld]          Do not configure firewalld</p></li>
<li><p>[–reconfig]                Reconfigure a previously deployed daemon</p></li>
<li><p>[–allow-ptrace]            Allow SYS_PTRACE on daemon container</p></li>
</ul>
</div>
<div class="section" id="enter">
<h3>enter<a class="headerlink" href="#enter" title="Permalink to this headline">¶</a></h3>
<p>Run an interactive shell inside a running daemon container:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cephadm</span> <span class="n">enter</span> <span class="o">--</span><span class="n">name</span> <span class="n">mgr</span><span class="o">.</span><span class="n">myhost</span><span class="o">.</span><span class="n">ysubfo</span>
</pre></div>
</div>
<p>Positional arguments:
* [command]               command</p>
<p>Arguments:</p>
<ul class="simple">
<li><p>[–fsid FSID]           cluster FSID</p></li>
<li><p>[–name NAME, -n NAME]  daemon name (type.id)</p></li>
</ul>
</div>
<div class="section" id="install">
<h3>install<a class="headerlink" href="#install" title="Permalink to this headline">¶</a></h3>
<p>install ceph package(s)</p>
<p>Positional arguments:</p>
<ul class="simple">
<li><p>[packages]    packages</p></li>
</ul>
</div>
<div class="section" id="inspect-image">
<h3>inspect-image<a class="headerlink" href="#inspect-image" title="Permalink to this headline">¶</a></h3>
<p>inspect local ceph container image.</p>
</div>
<div class="section" id="list-networks">
<h3>list-networks<a class="headerlink" href="#list-networks" title="Permalink to this headline">¶</a></h3>
<p>list IP networks</p>
</div>
<div class="section" id="ls">
<h3>ls<a class="headerlink" href="#ls" title="Permalink to this headline">¶</a></h3>
<p>list daemon instances known to cephadm on <strong>this</strong> host:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ cephadm ls
[
    {
        &quot;style&quot;: &quot;cephadm:v1&quot;,
        &quot;name&quot;: &quot;mgr.storage-14b-1.ysubfo&quot;,
        &quot;fsid&quot;: &quot;5110cb22-8332-11ea-9148-0894ef7e8bdc&quot;,
        &quot;enabled&quot;: true,
        &quot;state&quot;: &quot;running&quot;,
        &quot;container_id&quot;: &quot;8562de72370a3836473ecfff8a22c9ccdd99815386b4692a2b30924fb5493c44&quot;,
        &quot;container_image_name&quot;: &quot;docker.io/ceph/ceph:v15&quot;,
        &quot;container_image_id&quot;: &quot;bc83a388465f0568dab4501fb7684398dca8b50ca12a342a57f21815721723c2&quot;,
        &quot;version&quot;: &quot;15.2.1&quot;,
        &quot;started&quot;: &quot;2020-04-21T01:16:41.831456&quot;,
        &quot;created&quot;: &quot;2020-04-21T01:16:41.775024&quot;,
        &quot;deployed&quot;: &quot;2020-04-21T01:16:41.415021&quot;,
        &quot;configured&quot;: &quot;2020-04-21T01:16:41.775024&quot;
    },
...
</pre></div>
</div>
</div>
<div class="section" id="logs">
<h3>logs<a class="headerlink" href="#logs" title="Permalink to this headline">¶</a></h3>
<p>print journald logs for a daemon container:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cephadm</span> <span class="n">logs</span> <span class="o">--</span><span class="n">name</span> <span class="n">mgr</span><span class="o">.</span><span class="n">myhost</span><span class="o">.</span><span class="n">ysubfo</span>
</pre></div>
</div>
<p>This is similar to:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">journalctl</span> <span class="o">-</span><span class="n">u</span> <span class="n">mgr</span><span class="o">.</span><span class="n">myhost</span><span class="o">.</span><span class="n">ysubfo</span>
</pre></div>
</div>
</div>
<div class="section" id="prepare-host">
<h3>prepare-host<a class="headerlink" href="#prepare-host" title="Permalink to this headline">¶</a></h3>
<p>prepare a host for cephadm use</p>
<p>Arguments:</p>
<ul class="simple">
<li><p>[–expect-hostname EXPECT_HOSTNAME] Set hostname</p></li>
</ul>
</div>
<div class="section" id="pull">
<h3>pull<a class="headerlink" href="#pull" title="Permalink to this headline">¶</a></h3>
<p>Pull the ceph image:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cephadm</span> <span class="n">pull</span>
</pre></div>
</div>
</div>
<div class="section" id="registry-login">
<h3>registry-login<a class="headerlink" href="#registry-login" title="Permalink to this headline">¶</a></h3>
<p>Give cephadm login information for an authenticated registry (url, username and password).
Cephadm will attempt to log the calling host into that registry:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cephadm</span> <span class="n">registry</span><span class="o">-</span><span class="n">login</span> <span class="o">--</span><span class="n">registry</span><span class="o">-</span><span class="n">url</span> <span class="p">[</span><span class="n">REGISTRY_URL</span><span class="p">]</span> <span class="o">--</span><span class="n">registry</span><span class="o">-</span><span class="n">username</span> <span class="p">[</span><span class="n">USERNAME</span><span class="p">]</span>
                       <span class="o">--</span><span class="n">registry</span><span class="o">-</span><span class="n">password</span> <span class="p">[</span><span class="n">PASSWORD</span><span class="p">]</span>
</pre></div>
</div>
<p>Can also use a JSON file containing the login info formatted as:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
 <span class="s2">&quot;url&quot;</span><span class="p">:</span><span class="s2">&quot;REGISTRY_URL&quot;</span><span class="p">,</span>
 <span class="s2">&quot;username&quot;</span><span class="p">:</span><span class="s2">&quot;REGISTRY_USERNAME&quot;</span><span class="p">,</span>
 <span class="s2">&quot;password&quot;</span><span class="p">:</span><span class="s2">&quot;REGISTRY_PASSWORD&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>and turn it in with command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cephadm</span> <span class="n">registry</span><span class="o">-</span><span class="n">login</span> <span class="o">--</span><span class="n">registry</span><span class="o">-</span><span class="n">json</span> <span class="p">[</span><span class="n">JSON</span> <span class="n">FILE</span><span class="p">]</span>
</pre></div>
</div>
<p>Arguments:</p>
<ul class="simple">
<li><p>[–registry-url REGISTRY_URL]   url of registry to login to. e.g. docker.io, quay.io</p></li>
<li><p>[–registry-username REGISTRY_USERNAME] username of account to login to on registry</p></li>
<li><p>[–registry-password REGISTRY_PASSWORD] password of account to login to on registry</p></li>
<li><p>[–registry-json REGISTRY_JSON] JSON file containing login info for custom registry</p></li>
<li><p>[–fsid FSID]                   cluster FSID</p></li>
</ul>
</div>
<div class="section" id="rm-daemon">
<h3>rm-daemon<a class="headerlink" href="#rm-daemon" title="Permalink to this headline">¶</a></h3>
<p>Remove a specific daemon instance</p>
<p>Arguments:</p>
<ul class="simple">
<li><p>[–name NAME, -n NAME]  daemon name (type.id)</p></li>
<li><p>[–fsid FSID]           cluster FSID</p></li>
<li><p>[–force]               proceed, even though this may destroy valuable data</p></li>
<li><p>[–force-delete-data]   delete valuable daemon data instead of making a backup</p></li>
</ul>
</div>
<div class="section" id="rm-cluster">
<h3>rm-cluster<a class="headerlink" href="#rm-cluster" title="Permalink to this headline">¶</a></h3>
<p>remove all daemons for a cluster</p>
<p>Arguments:</p>
<ul class="simple">
<li><p>[–fsid FSID]  cluster FSID</p></li>
<li><p>[–force]      proceed, even though this may destroy valuable data</p></li>
</ul>
</div>
<div class="section" id="rm-repo">
<h3>rm-repo<a class="headerlink" href="#rm-repo" title="Permalink to this headline">¶</a></h3>
<p>remove package repository configuration</p>
</div>
<div class="section" id="run">
<h3>run<a class="headerlink" href="#run" title="Permalink to this headline">¶</a></h3>
<p>run a ceph daemon, in a container, in the foreground</p>
<p>Arguments:</p>
<ul class="simple">
<li><p>[–name NAME, -n NAME]  daemon name (type.id)</p></li>
<li><p>[–fsid FSID]           cluster FSID</p></li>
</ul>
</div>
<div class="section" id="shell">
<h3>shell<a class="headerlink" href="#shell" title="Permalink to this headline">¶</a></h3>
<p>Run an interactive shell:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cephadm</span> <span class="n">shell</span>
</pre></div>
</div>
<p>Or one specific command inside a container:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cephadm</span> <span class="n">shell</span> <span class="o">--</span> <span class="n">ceph</span> <span class="n">orch</span> <span class="n">ls</span>
</pre></div>
</div>
<p>Positional arguments:</p>
<ul class="simple">
<li><p>[command]               command (optional)</p></li>
</ul>
<p>Arguments:</p>
<ul class="simple">
<li><p>[–fsid FSID]                   cluster FSID</p></li>
<li><p>[–name NAME, -n NAME]          daemon name (type.id)</p></li>
<li><p>[–config CONFIG, -c CONFIG]    ceph.conf to pass through to the container</p></li>
<li><p>[–keyring KEYRING, -k KEYRING] ceph.keyring to pass through to the container</p></li>
<li><p>[–mount MOUNT, -m MOUNT]       mount a file or directory under /mnt in the container</p></li>
<li><p>[–env ENV, -e ENV]             set environment variable</p></li>
</ul>
</div>
<div class="section" id="unit">
<h3>unit<a class="headerlink" href="#unit" title="Permalink to this headline">¶</a></h3>
<p>Operate on the daemon’s systemd unit.</p>
<p>Positional arguments:</p>
<ul class="simple">
<li><p>[command]               systemd command (start, stop, restart, enable, disable, …)</p></li>
</ul>
<p>Arguments:</p>
<ul class="simple">
<li><p>[–fsid FSID]           cluster FSID</p></li>
<li><p>[–name NAME, -n NAME]  daemon name (type.id)</p></li>
</ul>
</div>
</div>
<div class="section" id="availability">
<h2>Availability<a class="headerlink" href="#availability" title="Permalink to this headline">¶</a></h2>
<p><strong class="program">cephadm</strong> is part of Ceph, a massively scalable, open-source, distributed storage system. Please refer to
the documentation at <a class="reference external" href="http://docs.ceph.com/">http://docs.ceph.com/</a> for more information.</p>
</div>
<div class="section" id="see-also">
<h2>See also<a class="headerlink" href="#see-also" title="Permalink to this headline">¶</a></h2>
<p><a class="reference internal" href="../ceph-volume/"><span class="doc">ceph-volume</span></a>(8),</p>
</div>
</div>



          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../../../">
              <img class="logo" src="../../../_static/logo.png" alt="Logo"/>
            </a></p>
<h3><a href="../../../">Table Of Contents</a></h3>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../start/intro/">Ceph 简介</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../install/">安装 Ceph</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../cephadm/">Cephadm</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../rados/">Ceph 存储集群</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../cephfs/">Ceph 文件系统</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../rbd/">Ceph 块设备</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../radosgw/">Ceph 对象网关</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../mgr/">Ceph 管理器守护进程</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../mgr/dashboard/">Ceph 仪表盘</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../api/">API 文档</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../architecture/">体系结构</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../dev/developer_guide/">开发者指南</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../dev/internals/">Ceph 内幕</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../governance/">项目管理</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../foundation/">Ceph 基金会</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../ceph-volume/">ceph-volume</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../releases/general/">Ceph 版本（总目录）</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../releases/">Ceph 版本（索引）</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../glossary/">Ceph 术语</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../translation_cn/">中文版翻译资源</a></li>
</ul>


<!-- ugly kludge to make genindex look like it's part of the toc -->
<ul style="margin-top: -10px"><li class="toctree-l1"><a class="reference internal" href="../../../genindex/">Index</a></li></ul>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../../search/" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../genindex/" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../../../py-modindex/" title="Python Module Index"
             >modules</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../../">Ceph Documentation</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2016, Ceph authors and contributors. Licensed under Creative Commons Attribution Share Alike 3.0 (CC-BY-SA-3.0).
    </div>
  </body>
</html>