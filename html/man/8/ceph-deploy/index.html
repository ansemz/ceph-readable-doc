
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>ceph-deploy – Ceph 部署工具 &#8212; Ceph Documentation</title>
    <link rel="stylesheet" href="../../../_static/nature.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/graphviz.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/css/custom.css" />
    <script id="documentation_options" data-url_root="../../../" src="../../../_static/documentation_options.js"></script>
    <script src="../../../_static/jquery.js"></script>
    <script src="../../../_static/underscore.js"></script>
    <script src="../../../_static/doctools.js"></script>
    <script src="../../../_static/language_data.js"></script>
    <script src="../../../_static/js/ceph.js"></script>
    <link rel="shortcut icon" href="../../../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../../../genindex/" />
    <link rel="search" title="Search" href="../../../search/" />
    <link rel="next" title="ceph-authtool – ceph 密钥环操作工具" href="../ceph-authtool/" />
    <link rel="prev" title="ceph – Ceph 管理工具" href="../ceph/" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../genindex/" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../../py-modindex/" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="../ceph-authtool/" title="ceph-authtool – ceph 密钥环操作工具"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="../ceph/" title="ceph – Ceph 管理工具"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../../">Ceph Documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../../../rados/" >Ceph 存储集群</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="../../../rados/man/" accesskey="U">对象存储手册页</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            

<div id="dev-warning" class="admonition note" style="display:none;">
  <p class="first admonition-title">Notice</p>
  <p class="last">This document is for a development version of Ceph.</p>
</div>

<div id="eol-warning" class="admonition warning" style="display:none;">
  <p class="first admonition-title">Warning</p>
  <p class="last">This document is for an unsupported version of Ceph.</p>
</div>
  <div id="docubetter" align="right" style="display:none; padding: 15px; font-weight: bold;">
    <a id="edit-on-github" href="https://github.com/ceph/ceph/edit/master/doc/man/8/ceph-deploy.rst" rel="nofollow">Edit on GitHub</a> | <a href="https://pad.ceph.com/p/Report_Documentation_Bugs">Report a Documentation Bug</a>
  </div>

  
  <div class="section" id="ceph-deploy-ceph">
<span id="ceph-deploy"></span><h1>ceph-deploy – Ceph 部署工具<a class="headerlink" href="#ceph-deploy-ceph" title="Permalink to this headline">¶</a></h1>
<div class="section" id="id1">
<h2>提纲<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h2>
<div class="line-block">
<div class="line"><strong>ceph-deploy</strong> <strong>new</strong> [<em>initial-monitor-node(s)</em>]</div>
</div>
<div class="line-block">
<div class="line"><strong>ceph-deploy</strong> <strong>install</strong> [<em>ceph-node</em>] [<em>ceph-node</em>…]</div>
</div>
<div class="line-block">
<div class="line"><strong>ceph-deploy</strong> <strong>mon</strong> <em>create-initial</em></div>
</div>
<div class="line-block">
<div class="line"><strong>ceph-deploy</strong> <strong>osd</strong> <em>create</em> <em>–data</em> <em>device</em> <em>ceph-node</em></div>
</div>
<div class="line-block">
<div class="line"><strong>ceph-deploy</strong> <strong>admin</strong> [<em>admin-node</em>][<em>ceph-node</em>…]</div>
</div>
<div class="line-block">
<div class="line"><strong>ceph-deploy</strong> <strong>purgedata</strong> [<em>ceph-node</em>][<em>ceph-node</em>…]</div>
</div>
<div class="line-block">
<div class="line"><strong>ceph-deploy</strong> <strong>forgetkeys</strong></div>
</div>
</div>
<div class="section" id="id2">
<h2>描述<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h2>
<p><strong class="program">ceph-deploy</strong> 工具可用于简单、快速地部署 Ceph 集群，而无需涉及繁杂的手动配置。它在管理节点上通过 ssh 获取其它
Ceph 节点的访问权、通过 sudo 获取其上的管理权限、通过底层
Python 脚本自动化各节点上的 Ceph 安装进程。它简单到可以运行在工作站上，不需要服务器、数据库或任何其它的自动化工具。 有了 <strong class="program">ceph-deploy</strong> ，安装和拆除集群非常简单。然而它不是通用部署工具，是专为想快速安装、运行 Ceph 的人们设计的专用工具，这样的集群只包含必要的的初始配置选项，就没必要安装像
<code class="docutils literal notranslate"><span class="pre">Chef</span></code> 、 <code class="docutils literal notranslate"><span class="pre">Puppet</span></code> 或 <code class="docutils literal notranslate"><span class="pre">Juju</span></code> 这样的部署工具。如果你想定制安全选项、分区或目录位置，并按照详细的手动步骤设置集群，应该选用其它工具，即 <code class="docutils literal notranslate"><span class="pre">Chef</span></code> 、 <code class="docutils literal notranslate"><span class="pre">Puppet</span></code> 、 <code class="docutils literal notranslate"><span class="pre">Juju</span></code> 或
<code class="docutils literal notranslate"><span class="pre">Crowbar</span></code> 。</p>
<p>用 <strong class="program">ceph-deploy</strong> 工具可以在远程节点上安装 Ceph
软件包、创建集群、增加监视器、收集或忘记密钥、增加 OSD 和元数据服务器、配置管理主机或拆除集群。</p>
</div>
<div class="section" id="id3">
<h2>命令<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h2>
<div class="section" id="new">
<h3>new<a class="headerlink" href="#new" title="Permalink to this headline">¶</a></h3>
<p>开始部署新集群，并写好配置文件和密钥环。它会尝试把管理节点上的 SSH 密钥复制到监视器节点以获得无密码访问权限，验证主机 IP ，新建一或多个监视器节点以组成监视器法定人数，生成新 Ceph 集群所需的配置文件、监视器密钥环和日志文件。然后把新建的集群 <code class="docutils literal notranslate"><span class="pre">fsid</span></code> 、主机名和初始监视器成员的 IP 地址组装成 Ceph 配置文件。</p>
<p>用法：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ceph</span><span class="o">-</span><span class="n">deploy</span> <span class="n">new</span> <span class="p">[</span><span class="n">MON</span><span class="p">][</span><span class="n">MON</span><span class="o">...</span><span class="p">]</span>
</pre></div>
</div>
<p>这里的 [MON] 是初始监视器主机名（短主机名，即 <code class="docutils literal notranslate"><span class="pre">hostname</span> <span class="pre">-s</span></code> ）。</p>
<p>此命令还可加这些选项： <a class="reference internal" href="#cmdoption-ceph-deploy-no-ssh-copykey"><code class="xref std std-option docutils literal notranslate"><span class="pre">--no-ssh-copykey</span></code></a> 、 <a class="reference internal" href="#cmdoption-ceph-deploy-fsid"><code class="xref std std-option docutils literal notranslate"><span class="pre">--fsid</span></code></a> 、 <a class="reference internal" href="#cmdoption-ceph-deploy-cluster-network"><code class="xref std std-option docutils literal notranslate"><span class="pre">--cluster-network</span></code></a> 和 <a class="reference internal" href="#cmdoption-ceph-deploy-public-network"><code class="xref std std-option docutils literal notranslate"><span class="pre">--public-network</span></code></a> 。</p>
<p>如果使用了多个网卡，那么必须在 Ceph 配置文件的 <code class="docutils literal notranslate"><span class="pre">[global]</span></code> 段下加 <code class="docutils literal notranslate"><span class="pre">public</span> <span class="pre">network</span></code> 选项。指定公共网子网后， <code class="docutils literal notranslate"><span class="pre">new</span></code> 命令将选用在此子网范围内的远程主机 IP 。公共网也可以在运行时用 <a class="reference internal" href="#cmdoption-ceph-deploy-public-network"><code class="xref std std-option docutils literal notranslate"><span class="pre">--public-network</span></code></a> 选项加给前述命令。</p>
</div>
<div class="section" id="install">
<h3>install<a class="headerlink" href="#install" title="Permalink to this headline">¶</a></h3>
<p>在远程主机上安装 Ceph 软件包。首先，它会用无密码 ssh 和 sudo 在管理节点和其它节点上安装 <code class="docutils literal notranslate"><span class="pre">yum-plugin-priorities</span></code> ，这样来自上流软件库的 Ceph 软件包就可获得较高优先级。之后，它会探测这些主机的平台和发行版，并且，在软件库准备充分时安装兼容此发行版的软件包。加 <code class="docutils literal notranslate"><span class="pre">--release</span></code> 选项后它会安装最新版。在安装前的平台和发行版探测中，如果发现 <code class="docutils literal notranslate"><span class="pre">distro.init</span></code> 是 <code class="docutils literal notranslate"><span class="pre">sysvinit</span></code> （如 Fedora 、 CentOS/RHEL 等），那么安装时就不能定制集群名，且自动采用默认名 <code class="docutils literal notranslate"><span class="pre">ceph</span></code> 。</p>
<p>如果用户用 <a class="reference internal" href="#cmdoption-ceph-deploy-repo-url"><code class="xref std std-option docutils literal notranslate"><span class="pre">--repo-url</span></code></a> 选项显式地指定了软件库 URL 作为软件源，那么它会覆盖探测结果，并从定制软件库安装 Ceph 软件包。若有必要，也会检测并安装有效的定制存储池。从定制软件库安装时，需输入一个布尔值确定所需逻辑，然后才能继续定制软件库的安装。它所用的定制软件库安装辅助程序会查验配置、下载软件库（及其它附加软件库）并安装它。 <code class="docutils literal notranslate"><span class="pre">cd_conf</span></code> 是 <code class="docutils literal notranslate"><span class="pre">argparse</span></code> 构建的对象，它所存储的标识和信息决定了会用到配置里的哪些元数据。</p>
<p>用户也可以用 <a class="reference internal" href="#cmdoption-ceph-deploy-repo"><code class="xref std std-option docutils literal notranslate"><span class="pre">--repo</span></code></a> 选项做到只装软件库，而不装 Ceph 及其依赖软件包。</p>
<p>用法：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ceph</span><span class="o">-</span><span class="n">deploy</span> <span class="n">install</span> <span class="p">[</span><span class="n">HOST</span><span class="p">][</span><span class="n">HOST</span><span class="o">...</span><span class="p">]</span>
</pre></div>
</div>
<p>这里的 [HOST] 是将被安装 Ceph 软件的主机节点。</p>
<p><code class="docutils literal notranslate"><span class="pre">--release</span></code> 选项可用于指定安装的版本，参数为 CODENAME ，默认为 firefly 。</p>
<p>此命令支持的其它选项： <a class="reference internal" href="#cmdoption-ceph-deploy-testing"><code class="xref std std-option docutils literal notranslate"><span class="pre">--testing</span></code></a> 、 <a class="reference internal" href="#cmdoption-ceph-deploy-dev"><code class="xref std std-option docutils literal notranslate"><span class="pre">--dev</span></code></a> 、 <a class="reference internal" href="#cmdoption-ceph-deploy-adjust-repos"><code class="xref std std-option docutils literal notranslate"><span class="pre">--adjust-repos</span></code></a> 、 <a class="reference internal" href="#cmdoption-ceph-deploy-no-adjust-repos"><code class="xref std std-option docutils literal notranslate"><span class="pre">--no-adjust-repos</span></code></a> 、 <a class="reference internal" href="#cmdoption-ceph-deploy-repo"><code class="xref std std-option docutils literal notranslate"><span class="pre">--repo</span></code></a> 、 <a class="reference internal" href="#cmdoption-ceph-deploy-local-mirror"><code class="xref std std-option docutils literal notranslate"><span class="pre">--local-mirror</span></code></a> 、 <a class="reference internal" href="#cmdoption-ceph-deploy-repo-url"><code class="xref std std-option docutils literal notranslate"><span class="pre">--repo-url</span></code></a> 和 <a class="reference internal" href="#cmdoption-ceph-deploy-gpg-url"><code class="xref std std-option docutils literal notranslate"><span class="pre">--gpg-url</span></code></a> 。</p>
</div>
<div class="section" id="mds">
<h3>mds<a class="headerlink" href="#mds" title="Permalink to this headline">¶</a></h3>
<p>在远程主机上部署 Ceph 元数据服务器。元数据服务器对 CephFS 来说是必需的， <code class="docutils literal notranslate"><span class="pre">mds</span></code> 命令可用于在指定节点上创建它。 <code class="docutils literal notranslate"><span class="pre">create</span></code>
子命令就是做这个的，它首先获取目标 mds 主机的主机名和发行版信息，之后尝试读取集群的 <code class="docutils literal notranslate"><span class="pre">bootstrap-mds</span></code> 密钥并部署到目标主机。密钥格式通常是 <code class="docutils literal notranslate"><span class="pre">{cluster}.bootstrap-mds.keyring</span></code> ，如果它没找到此密钥环，就用 <code class="docutils literal notranslate"><span class="pre">gatherkeys</span></code> 来获取此密钥环；然后在目标主机上创建 mds （在 <code class="docutils literal notranslate"><span class="pre">/var/lib/ceph/mds/</span></code> 路径下、按 <code class="docutils literal notranslate"><span class="pre">/var/lib/ceph/mds/{cluster}-{name}</span></code> 格式）和自举引导密钥环（在 <code class="docutils literal notranslate"><span class="pre">/var/lib/ceph/bootstrap-mds/</span></code> 下、按 <code class="docutils literal notranslate"><span class="pre">/var/lib/ceph/bootstrap-mds/{cluster}.keyring</span></code> 格式）；然后根据 <code class="docutils literal notranslate"><span class="pre">distro.init</span></code> 运行相应命令来启动 <code class="docutils literal notranslate"><span class="pre">mds</span></code> 。</p>
<p>用法：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ceph</span><span class="o">-</span><span class="n">deploy</span> <span class="n">mds</span> <span class="n">create</span> <span class="p">[</span><span class="n">HOST</span><span class="p">[:</span><span class="n">DAEMON</span><span class="o">-</span><span class="n">NAME</span><span class="p">]]</span> <span class="p">[</span><span class="n">HOST</span><span class="p">[:</span><span class="n">DAEMON</span><span class="o">-</span><span class="n">NAME</span><span class="p">]</span><span class="o">...</span><span class="p">]</span>
</pre></div>
</div>
<p>[DAEMON-NAME] 是可选项。</p>
</div>
<div class="section" id="mon">
<h3>mon<a class="headerlink" href="#mon" title="Permalink to this headline">¶</a></h3>
<p>在远程主机上部署 Ceph 监视器。 <code class="docutils literal notranslate"><span class="pre">mon</span></code> 用特定子命令把 Ceph 监视器部署到其它节点。</p>
<p><code class="docutils literal notranslate"><span class="pre">create-initial</span></code> 子命令会部署 Ceph 配置文件中 <code class="docutils literal notranslate"><span class="pre">[global]</span></code> 段下、 <code class="docutils literal notranslate"><span class="pre">mon</span> <span class="pre">initial</span> <span class="pre">members</span></code> 定义的监视器，然后等它们形成法定人数后收集密钥，并一直报告此期间的监视器状态。如果监视器未能形成法定人数，此命令最终会超时。</p>
<p>用法：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ceph</span><span class="o">-</span><span class="n">deploy</span> <span class="n">mon</span> <span class="n">create</span><span class="o">-</span><span class="n">initial</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">create</span></code> 子命令用于部署 Ceph 监视器，需明确指定想作监视器的主机。如果没指定，它将默认采用 Ceph 配置文件中 <code class="docutils literal notranslate"><span class="pre">[global]</span></code> 段下 <code class="docutils literal notranslate"><span class="pre">mon</span> <span class="pre">initial</span> <span class="pre">members</span></code> 定义的。 <code class="docutils literal notranslate"><span class="pre">create</span></code> 首先会探测目标主机的平台和发行版、并检查主机名是否能兼容此部署；然后采用 <code class="docutils literal notranslate"><span class="pre">new</span></code> 命令创建的监视器密钥环、并在目标主机上部署监视器。如果运行 <code class="docutils literal notranslate"><span class="pre">new</span></code> 命令时指定了多个主机，即 <code class="docutils literal notranslate"><span class="pre">mon</span> <span class="pre">initial</span> <span class="pre">members</span></code> 内含多个主机、且创建了多个密钥环，那么部署监视器时将使用串连过的密钥环，在此期间将用到密钥环解析器，它会在各密钥环中搜索并返回一连串 <code class="docutils literal notranslate"><span class="pre">[entity]</span></code> 段落；然后用一个辅助程序把所有密钥环集中到一个单体二进制数据块中，此数据块将随 <a class="reference internal" href="#cmdoption-ceph-deploy-mkfs"><code class="xref std std-option docutils literal notranslate"><span class="pre">--mkfs</span></code></a> 选项被注入远程主机上的监视器。所有要被串连的密钥环应该位于同一目录、且以 <code class="docutils literal notranslate"><span class="pre">.keyring</span></code> 结尾，在此过程中，此辅助程序用密钥环解析器返回的段落列表来检查实体是否已经存在于密钥环中，没有的话加上。串连起的密钥环被用于往多个主机上部署监视器。</p>
<p>用法：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ceph</span><span class="o">-</span><span class="n">deploy</span> <span class="n">mon</span> <span class="n">create</span> <span class="p">[</span><span class="n">HOST</span><span class="p">]</span> <span class="p">[</span><span class="n">HOST</span><span class="o">...</span><span class="p">]</span>
</pre></div>
</div>
<p>这里的 [HOST] 是目标监视器主机的主机名。</p>
<p><code class="docutils literal notranslate"><span class="pre">add</span></code> 子命令用于向已有集群增加一监视器。它首先探测目标主机的平台和发行版、并检查主机名是否能兼容此部署；然后使用监视器密钥环、确认新监视器主机的配置、并把它加入集群。如果此监视器配置段已存在且定义了 mon addr ，那就采用此地址，否则就得先把主机名解析为 IP 地址；如果加了 <a class="reference internal" href="#cmdoption-ceph-deploy-address"><code class="xref std std-option docutils literal notranslate"><span class="pre">--address</span></code></a> 选项，它将覆盖所有其它选项。加完监视器后会等它启动，然后检查有什么监视器错误、并检查监视器状态。监视器错误可能有：它未加入 <code class="docutils literal notranslate"><span class="pre">mon</span> <span class="pre">initial</span> <span class="pre">members</span></code> 、没在 <code class="docutils literal notranslate"><span class="pre">monmap</span></code> 里面、 <code class="docutils literal notranslate"><span class="pre">public_addr</span></code> 和 <code class="docutils literal notranslate"><span class="pre">public_network</span></code> 关键字都没定义，这时，监视器们不能组建法定人数。监视器状态能说明此监视器是否启动且正常运行着。此状态是通过在远端运行 <code class="docutils literal notranslate"><span class="pre">ceph</span> <span class="pre">daemon</span> <span class="pre">mon.hostname</span> <span class="pre">mon_status</span></code> 获取的，此命令的输出和布尔值状态能说明当前状况； <code class="docutils literal notranslate"><span class="pre">False</span></code> 意味着此监视器有问题，即使它已启动且运行着， <code class="docutils literal notranslate"><span class="pre">True</span></code> 意味着此监视器已启动且运行正常。</p>
<p>用法：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ceph</span><span class="o">-</span><span class="n">deploy</span> <span class="n">mon</span> <span class="n">add</span> <span class="p">[</span><span class="n">HOST</span><span class="p">]</span>

<span class="n">ceph</span><span class="o">-</span><span class="n">deploy</span> <span class="n">mon</span> <span class="n">add</span> <span class="p">[</span><span class="n">HOST</span><span class="p">]</span> <span class="o">--</span><span class="n">address</span> <span class="p">[</span><span class="n">IP</span><span class="p">]</span>
</pre></div>
</div>
<p>这里的 [HOST] 是主机名、 [IP] 是目标监视器节点的 IP 地址。要注意，不像其他的 <code class="docutils literal notranslate"><span class="pre">mon</span></code> 子命令，这里一次只能指定一个节点。</p>
<p><code class="docutils literal notranslate"><span class="pre">destroy</span></code> 子命令用于从远程主机上完全删除监视器，其参数为主机名。它会停止监视器、确认 <code class="docutils literal notranslate"><span class="pre">ceph-mon</span></code> 是否确实停止了、在 <code class="docutils literal notranslate"><span class="pre">/var/lib/ceph/</span></code> 下创建存档目录 <code class="docutils literal notranslate"><span class="pre">mon-remove</span></code> 、把监视器的旧目录按 <code class="docutils literal notranslate"><span class="pre">{cluster}-{hostname}-{stamp}</span></code> 格式归档进去、并运行 <code class="docutils literal notranslate"><span class="pre">ceph</span> <span class="pre">remove...</span></code> 命令从集群删除它。</p>
<p>用法：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ceph</span><span class="o">-</span><span class="n">deploy</span> <span class="n">mon</span> <span class="n">destroy</span> <span class="p">[</span><span class="n">HOST</span><span class="p">]</span> <span class="p">[</span><span class="n">HOST</span><span class="o">...</span><span class="p">]</span>
</pre></div>
</div>
<p>这里的 [HOST] 是要删除的监视器的主机名。</p>
</div>
<div class="section" id="gatherkeys">
<h3>gatherkeys<a class="headerlink" href="#gatherkeys" title="Permalink to this headline">¶</a></h3>
<p>用于收集新节点所需的认证密钥，以主机名作参数。它会到监视器主机检查并取来 <code class="docutils literal notranslate"><span class="pre">client.admin</span></code> 密钥环、监视器密钥环和 <code class="docutils literal notranslate"><span class="pre">bootstrap-mds/bootstrap-osd</span></code> 密钥环，向集群新增 <code class="docutils literal notranslate"><span class="pre">monitors/OSDs/MDS</span></code> 时会用到这些认证密钥。</p>
<p>用法：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ceph</span><span class="o">-</span><span class="n">deploy</span> <span class="n">gatherkeys</span> <span class="p">[</span><span class="n">HOST</span><span class="p">]</span> <span class="p">[</span><span class="n">HOST</span><span class="o">...</span><span class="p">]</span>
</pre></div>
</div>
<p>这里的 [HOST] 是监视器主机名，密钥将从这里拉取。</p>
</div>
<div class="section" id="disk">
<h3>disk<a class="headerlink" href="#disk" title="Permalink to this headline">¶</a></h3>
<p>管理远程主机上的硬盘，实际上它会调用 <code class="docutils literal notranslate"><span class="pre">ceph-volume</span></code> 工具及其子命令来管理硬盘。</p>
<p><code class="docutils literal notranslate"><span class="pre">list</span></code> 子命令罗列硬盘分区和 Ceph OSD 。</p>
<p>用法：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ceph</span><span class="o">-</span><span class="n">deploy</span> <span class="n">disk</span> <span class="nb">list</span> <span class="n">HOST</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">zap</span></code> 子命令可用于杀死、擦除、销毁一设备的分区表和内容。实际上它是远程调用 <code class="docutils literal notranslate"><span class="pre">ceph-volume</span> <span class="pre">lvm</span> <span class="pre">zap</span></code> ，另外还可以用来删除逻辑卷的 Ceph 元数据。</p>
</div>
<div class="section" id="osd">
<h3>osd<a class="headerlink" href="#osd" title="Permalink to this headline">¶</a></h3>
<p>用于管理 OSD ，预处理远程主机上的数据盘。 <code class="docutils literal notranslate"><span class="pre">osd</span></code> 用几个子命令管理 OSD 。</p>
<p><code class="docutils literal notranslate"><span class="pre">create</span></code> 子命令预处理用作 Ceph OSD 的设备。它会先检查将要创建的多个 OSD 、并且在可能会超过建议值时发出警告，超过系统允许的最大 PID 数时会产生问题；然后读取集群的 bootstrap-osd
密钥，或没找到时生成一个自举引导密钥；然后用
<strong class="program">ceph-volume</strong> 工具的 <code class="docutils literal notranslate"><span class="pre">lvm</span> <span class="pre">create</span></code> 子命令预处理硬盘（用 filestore 时还有日志）、并在目标主机上部署 OSD 。预处理完成后，它会给 OSD 一些时间启动并检查任何可能的错误，发现的话报告给用户。</p>
<p>Bluestore 用法：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ceph</span><span class="o">-</span><span class="n">deploy</span> <span class="n">osd</span> <span class="n">create</span> <span class="o">--</span><span class="n">data</span> <span class="n">DISK</span> <span class="n">HOST</span>
</pre></div>
</div>
<p>Filestore 用法：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ceph</span><span class="o">-</span><span class="n">deploy</span> <span class="n">osd</span> <span class="n">create</span> <span class="o">--</span><span class="n">data</span> <span class="n">DISK</span> <span class="o">--</span><span class="n">journal</span> <span class="n">JOURNAL</span> <span class="n">HOST</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>其余可用选项可以看手册页或 ceph-deploy osd create 的
–help 菜单。</p>
</div>
<p><code class="docutils literal notranslate"><span class="pre">list</span></code> 子命令可罗列与 Ceph 相关、用作 OSD 的设备。它利用了
<code class="docutils literal notranslate"><span class="pre">ceph-volume</span> <span class="pre">lvm</span> <span class="pre">list</span></code> 丰富的输出，并映射出了 OSD 的设备以及其它与 OSD 安装有关的信息。</p>
<p>用法：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ceph</span><span class="o">-</span><span class="n">deploy</span> <span class="n">osd</span> <span class="nb">list</span> <span class="n">HOST</span>
</pre></div>
</div>
</div>
<div class="section" id="admin">
<h3>admin<a class="headerlink" href="#admin" title="Permalink to this headline">¶</a></h3>
<p>把配置和 <code class="docutils literal notranslate"><span class="pre">client.admin</span></code> 密钥推送到远程主机，它把管理节点上的
<code class="docutils literal notranslate"><span class="pre">{cluster}.client.admin.keyring</span></code> 复制到目标节点的
<code class="docutils literal notranslate"><span class="pre">/etc/ceph</span></code> 目录下。</p>
<p>用法：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ceph</span><span class="o">-</span><span class="n">deploy</span> <span class="n">admin</span> <span class="p">[</span><span class="n">HOST</span><span class="p">]</span> <span class="p">[</span><span class="n">HOST</span><span class="o">...</span><span class="p">]</span>
</pre></div>
</div>
<p>这里的 [HOST] 是目标主机，它将被配置为 Ceph 管理主机。</p>
</div>
<div class="section" id="config">
<h3>config<a class="headerlink" href="#config" title="Permalink to this headline">¶</a></h3>
<p>把配置文件推送到远程主机、或从远程主机拉取。它用 <code class="docutils literal notranslate"><span class="pre">push</span></code>
子命令把管理主机上的配置文件写入远程主机的 <code class="docutils literal notranslate"><span class="pre">/etc/ceph</span></code>
目录下； <code class="docutils literal notranslate"><span class="pre">pull</span></code> 子命令则相反，也就是把远程主机 <code class="docutils literal notranslate"><span class="pre">/etc/ceph</span></code>
目录下的配置文件拉取到管理节点上。</p>
<p>用法：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ceph</span><span class="o">-</span><span class="n">deploy</span> <span class="n">config</span> <span class="n">push</span> <span class="p">[</span><span class="n">HOST</span><span class="p">]</span> <span class="p">[</span><span class="n">HOST</span><span class="o">...</span><span class="p">]</span>

<span class="n">ceph</span><span class="o">-</span><span class="n">deploy</span> <span class="n">config</span> <span class="n">pull</span> <span class="p">[</span><span class="n">HOST</span><span class="p">]</span> <span class="p">[</span><span class="n">HOST</span><span class="o">...</span><span class="p">]</span>
</pre></div>
</div>
<p>这里的 [HOST] 是节点主机名，将到这里推送或拉取配置文件。</p>
</div>
<div class="section" id="uninstall">
<h3>uninstall<a class="headerlink" href="#uninstall" title="Permalink to this headline">¶</a></h3>
<p>删除远程主机上的 Ceph 软件包。它会探测指定主机的平台及发行版、并卸载其上的 Ceph 软件包。然而像 <code class="docutils literal notranslate"><span class="pre">librbd1</span></code> 和 <code class="docutils literal notranslate"><span class="pre">librados2</span></code> 这样的依赖包不会被删除，因为 <code class="docutils literal notranslate"><span class="pre">qemu-kvm</span></code> 还需要它们。</p>
<p>用法：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ceph</span><span class="o">-</span><span class="n">deploy</span> <span class="n">uninstall</span> <span class="p">[</span><span class="n">HOST</span><span class="p">]</span> <span class="p">[</span><span class="n">HOST</span><span class="o">...</span><span class="p">]</span>
</pre></div>
</div>
<p>这里的 [HOST] 是要卸载 Ceph 的节点主机名。</p>
</div>
<div class="section" id="purge">
<h3>purge<a class="headerlink" href="#purge" title="Permalink to this headline">¶</a></h3>
<p>删除远程主机上的 Ceph 软件包、并清除所有数据。它会探测指定主机的平台及发行版、卸载 Ceph 软件包并清除所有数据。然而像 <code class="docutils literal notranslate"><span class="pre">librbd1</span></code> 和 <code class="docutils literal notranslate"><span class="pre">librados2</span></code> 这样的依赖包不会被删除，因为 <code class="docutils literal notranslate"><span class="pre">qemu-kvm</span></code> 还需要它们。</p>
<p>用法：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ceph</span><span class="o">-</span><span class="n">deploy</span> <span class="n">purge</span> <span class="p">[</span><span class="n">HOST</span><span class="p">]</span> <span class="p">[</span><span class="n">HOST</span><span class="o">...</span><span class="p">]</span>
</pre></div>
</div>
<p>这里的 [HOST] 是将被清除 Ceph 痕迹的节点主机名。</p>
</div>
<div class="section" id="purgedata">
<h3>purgedata<a class="headerlink" href="#purgedata" title="Permalink to this headline">¶</a></h3>
<p>清除（删除、销毁、丢弃、粉碎） <code class="docutils literal notranslate"><span class="pre">/var/lib/ceph</span></code> 之下的所有 Ceph 数据。探测到目标主机的平台及发行版后，它会先检查指定主机上是否仍装着 Ceph ，若安装了就不会清除数据；若 Ceph 已被卸载，它就会尝试卸载 <code class="docutils literal notranslate"><span class="pre">/var/lib/ceph</span></code> 下的内容。如果失败了，说明 OSD 数据盘可能还挂载着，要先卸载才能继续。它会卸载各 OSD 、再次尝试删除 <code class="docutils literal notranslate"><span class="pre">/var/lib/ceph</span></code> 下的内容、并检查报错；它也会删除 <code class="docutils literal notranslate"><span class="pre">/etc/ceph</span></code> 下的内容。所有步骤都成功完成后，指定主机上的所有 Ceph 数据就清除完了。</p>
<p>用法：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ceph</span><span class="o">-</span><span class="n">deploy</span> <span class="n">purgedata</span> <span class="p">[</span><span class="n">HOST</span><span class="p">]</span> <span class="p">[</span><span class="n">HOST</span><span class="o">...</span><span class="p">]</span>
</pre></div>
</div>
<p>这里的 [HOST] 是要清除数据的节点主机名。</p>
</div>
<div class="section" id="forgetkeys">
<h3>forgetkeys<a class="headerlink" href="#forgetkeys" title="Permalink to this headline">¶</a></h3>
<p>删除本地目录中的认证密钥。它会删除此节点上的所有认证密钥，即监视器密钥环、 client.admin 密钥环、 bootstrap-osd 和 bootstrap-mds 密钥环。</p>
<p>用法：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ceph</span><span class="o">-</span><span class="n">deploy</span> <span class="n">forgetkeys</span>
</pre></div>
</div>
</div>
<div class="section" id="pkg">
<h3>pkg<a class="headerlink" href="#pkg" title="Permalink to this headline">¶</a></h3>
<p>管理远程主机上的软件包，可用于安装或删除软件包。要安装或删除的软件包名字必须加在命令行之后，对应选项分别为
<a class="reference internal" href="#cmdoption-ceph-deploy-install"><code class="xref std std-option docutils literal notranslate"><span class="pre">--install</span></code></a> 和 <a class="reference internal" href="#cmdoption-ceph-deploy-remove"><code class="xref std std-option docutils literal notranslate"><span class="pre">--remove</span></code></a> 。</p>
<p>用法：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ceph</span><span class="o">-</span><span class="n">deploy</span> <span class="n">pkg</span> <span class="o">--</span><span class="n">install</span> <span class="p">[</span><span class="n">PKGs</span><span class="p">]</span> <span class="p">[</span><span class="n">HOST</span><span class="p">]</span> <span class="p">[</span><span class="n">HOST</span><span class="o">...</span><span class="p">]</span>

<span class="n">ceph</span><span class="o">-</span><span class="n">deploy</span> <span class="n">pkg</span> <span class="o">--</span><span class="n">remove</span> <span class="p">[</span><span class="n">PKGs</span><span class="p">]</span> <span class="p">[</span><span class="n">HOST</span><span class="p">]</span> <span class="p">[</span><span class="n">HOST</span><span class="o">...</span><span class="p">]</span>
</pre></div>
</div>
<p>这里的 [PKGs] 是逗号分隔的软件包名字， [HOST] 是远程节点的主机名，将在此主机安装或删除软件包。</p>
</div>
</div>
<div class="section" id="id4">
<h2>选项<a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h2>
<dl class="option">
<dt id="cmdoption-ceph-deploy-address">
<code class="sig-name descname">--address</code><code class="sig-prename descclassname"></code><a class="headerlink" href="#cmdoption-ceph-deploy-address" title="Permalink to this definition">¶</a></dt>
<dd><p>将被加入集群的主机节点的 IP 地址。</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-ceph-deploy-adjust-repos">
<code class="sig-name descname">--adjust-repos</code><code class="sig-prename descclassname"></code><a class="headerlink" href="#cmdoption-ceph-deploy-adjust-repos" title="Permalink to this definition">¶</a></dt>
<dd><p>安装会修改源软件库的软件包。</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-ceph-deploy-ceph-conf">
<code class="sig-name descname">--ceph-conf</code><code class="sig-prename descclassname"></code><a class="headerlink" href="#cmdoption-ceph-deploy-ceph-conf" title="Permalink to this definition">¶</a></dt>
<dd><p>采用（或重用）指定的 <code class="docutils literal notranslate"><span class="pre">ceph.conf</span></code> 文件。</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-ceph-deploy-cluster">
<code class="sig-name descname">--cluster</code><code class="sig-prename descclassname"></code><a class="headerlink" href="#cmdoption-ceph-deploy-cluster" title="Permalink to this definition">¶</a></dt>
<dd><p>集群名字。</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-ceph-deploy-dev">
<code class="sig-name descname">--dev</code><code class="sig-prename descclassname"></code><a class="headerlink" href="#cmdoption-ceph-deploy-dev" title="Permalink to this definition">¶</a></dt>
<dd><p>安装最前沿版本，从 Git 分支或某标签（默认为 master ）编译而来。</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-ceph-deploy-cluster-network">
<code class="sig-name descname">--cluster-network</code><code class="sig-prename descclassname"></code><a class="headerlink" href="#cmdoption-ceph-deploy-cluster-network" title="Permalink to this definition">¶</a></dt>
<dd><p>指定（内部的）集群网。</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-ceph-deploy-dmcrypt">
<code class="sig-name descname">--dmcrypt</code><code class="sig-prename descclassname"></code><a class="headerlink" href="#cmdoption-ceph-deploy-dmcrypt" title="Permalink to this definition">¶</a></dt>
<dd><p>用 <code class="docutils literal notranslate"><span class="pre">dm-crypt</span></code> 加密 [data-path] 和/或日志设备。</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-ceph-deploy-dmcrypt-key-dir">
<code class="sig-name descname">--dmcrypt-key-dir</code><code class="sig-prename descclassname"></code><a class="headerlink" href="#cmdoption-ceph-deploy-dmcrypt-key-dir" title="Permalink to this definition">¶</a></dt>
<dd><p><code class="docutils literal notranslate"><span class="pre">dm-crypt</span></code> 的密钥所在目录。</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-ceph-deploy-install">
<code class="sig-name descname">--install</code><code class="sig-prename descclassname"></code><a class="headerlink" href="#cmdoption-ceph-deploy-install" title="Permalink to this definition">¶</a></dt>
<dd><p>要安装到远程主机的软件包，以逗号分隔。</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-ceph-deploy-fs-type">
<code class="sig-name descname">--fs-type</code><code class="sig-prename descclassname"></code><a class="headerlink" href="#cmdoption-ceph-deploy-fs-type" title="Permalink to this definition">¶</a></dt>
<dd><p>格式化磁盘时指定的文件系统（如 <code class="docutils literal notranslate"><span class="pre">xfs</span></code> 、 <code class="docutils literal notranslate"><span class="pre">btrfs</span></code> 或
<code class="docutils literal notranslate"><span class="pre">ext4</span></code> ）。注意，对 btrfs 和 ext4 的支持已经不再测试，也不建议再用了，请转向 xfs 。</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-ceph-deploy-fsid">
<code class="sig-name descname">--fsid</code><code class="sig-prename descclassname"></code><a class="headerlink" href="#cmdoption-ceph-deploy-fsid" title="Permalink to this definition">¶</a></dt>
<dd><p>生成 <code class="docutils literal notranslate"><span class="pre">ceph.conf</span></code> 时另外指定 FSID 。</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-ceph-deploy-gpg-url">
<code class="sig-name descname">--gpg-url</code><code class="sig-prename descclassname"></code><a class="headerlink" href="#cmdoption-ceph-deploy-gpg-url" title="Permalink to this definition">¶</a></dt>
<dd><p>指定用于定制软件库的 GPG 密钥 URL （默认为 ceph.com ）。</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-ceph-deploy-keyrings">
<code class="sig-name descname">--keyrings</code><code class="sig-prename descclassname"></code><a class="headerlink" href="#cmdoption-ceph-deploy-keyrings" title="Permalink to this definition">¶</a></dt>
<dd><p>串连要放置到新监视器的多个密钥环。</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-ceph-deploy-local-mirror">
<code class="sig-name descname">--local-mirror</code><code class="sig-prename descclassname"></code><a class="headerlink" href="#cmdoption-ceph-deploy-local-mirror" title="Permalink to this definition">¶</a></dt>
<dd><p>抓取软件包并推送到某些主机上作为本地软件库镜像。</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-ceph-deploy-mkfs">
<code class="sig-name descname">--mkfs</code><code class="sig-prename descclassname"></code><a class="headerlink" href="#cmdoption-ceph-deploy-mkfs" title="Permalink to this definition">¶</a></dt>
<dd><p>把密钥注入远程节点的监视器上。</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-ceph-deploy-no-adjust-repos">
<code class="sig-name descname">--no-adjust-repos</code><code class="sig-prename descclassname"></code><a class="headerlink" href="#cmdoption-ceph-deploy-no-adjust-repos" title="Permalink to this definition">¶</a></dt>
<dd><p>安装不会修改源软件库的软件包。</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-ceph-deploy-no-ssh-copykey">
<code class="sig-name descname">--no-ssh-copykey</code><code class="sig-prename descclassname"></code><a class="headerlink" href="#cmdoption-ceph-deploy-no-ssh-copykey" title="Permalink to this definition">¶</a></dt>
<dd><p>不要复制 ssh 密钥。</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-ceph-deploy-overwrite-conf">
<code class="sig-name descname">--overwrite-conf</code><code class="sig-prename descclassname"></code><a class="headerlink" href="#cmdoption-ceph-deploy-overwrite-conf" title="Permalink to this definition">¶</a></dt>
<dd><p>覆盖远程主机上的已有配置文件（若存在）。</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-ceph-deploy-public-network">
<code class="sig-name descname">--public-network</code><code class="sig-prename descclassname"></code><a class="headerlink" href="#cmdoption-ceph-deploy-public-network" title="Permalink to this definition">¶</a></dt>
<dd><p>指定集群的公共网。</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-ceph-deploy-remove">
<code class="sig-name descname">--remove</code><code class="sig-prename descclassname"></code><a class="headerlink" href="#cmdoption-ceph-deploy-remove" title="Permalink to this definition">¶</a></dt>
<dd><p>要从远程主机删除的软件包，以逗号分隔。</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-ceph-deploy-repo">
<code class="sig-name descname">--repo</code><code class="sig-prename descclassname"></code><a class="headerlink" href="#cmdoption-ceph-deploy-repo" title="Permalink to this definition">¶</a></dt>
<dd><p>只安装软件库文件（跳过软件包安装）。</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-ceph-deploy-repo-url">
<code class="sig-name descname">--repo-url</code><code class="sig-prename descclassname"></code><a class="headerlink" href="#cmdoption-ceph-deploy-repo-url" title="Permalink to this definition">¶</a></dt>
<dd><p>指定一个镜像或包含 Ceph 软件包的软件库 url 。</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-ceph-deploy-testing">
<code class="sig-name descname">--testing</code><code class="sig-prename descclassname"></code><a class="headerlink" href="#cmdoption-ceph-deploy-testing" title="Permalink to this definition">¶</a></dt>
<dd><p>安装最新开发版。</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-ceph-deploy-username">
<code class="sig-name descname">--username</code><code class="sig-prename descclassname"></code><a class="headerlink" href="#cmdoption-ceph-deploy-username" title="Permalink to this definition">¶</a></dt>
<dd><p>连接远程主机所有的用户名。</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-ceph-deploy-version">
<code class="sig-name descname">--version</code><code class="sig-prename descclassname"></code><a class="headerlink" href="#cmdoption-ceph-deploy-version" title="Permalink to this definition">¶</a></dt>
<dd><p>当前所安装的 <strong class="program">ceph-deploy</strong> 版本。</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-ceph-deploy-zap-disk">
<code class="sig-name descname">--zap-disk</code><code class="sig-prename descclassname"></code><a class="headerlink" href="#cmdoption-ceph-deploy-zap-disk" title="Permalink to this definition">¶</a></dt>
<dd><p>销毁分区表和硬盘内容。</p>
</dd></dl>

</div>
<div class="section" id="id5">
<h2>使用范围<a class="headerlink" href="#id5" title="Permalink to this headline">¶</a></h2>
<p><strong class="program">ceph-deploy</strong> 是 Ceph 的一部分，这是个伸缩力强、开源、分布式的存储系统，更多信息参见 <a class="reference external" href="https://ceph.com/ceph-deploy/docs">https://ceph.com/ceph-deploy/docs</a> 。</p>
</div>
<div class="section" id="id6">
<h2>参考<a class="headerlink" href="#id6" title="Permalink to this headline">¶</a></h2>
<p><a class="reference internal" href="../ceph-mon/"><span class="doc">ceph-mon</span></a>(8),
<a class="reference internal" href="../ceph-osd/"><span class="doc">ceph-osd</span></a>(8),
<a class="reference internal" href="../ceph-mds/"><span class="doc">ceph-mds</span></a>(8)</p>
</div>
</div>



          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../../../">
              <img class="logo" src="../../../_static/logo.png" alt="Logo"/>
            </a></p>
<h3><a href="../../../">Table Of Contents</a></h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../start/intro/">Ceph 简介</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../install/">安装 Ceph</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../cephadm/">Cephadm</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../../rados/">Ceph 存储集群</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../../rados/configuration/">配置</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../rados/deployment/">部署</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../rados/operations/">运维</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../../../rados/man/">手册页</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../ceph-volume/">ceph-volume – Ceph OSD 部署和检查工具</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ceph-volume-systemd/">ceph-volume-systemd – systemd ceph-volume 辅助工具</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ceph/">ceph – Ceph 管理工具</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">ceph-deploy – Ceph 部署工具</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id1">提纲</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id2">描述</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id3">命令</a><ul>
<li class="toctree-l5"><a class="reference internal" href="#new">new</a></li>
<li class="toctree-l5"><a class="reference internal" href="#install">install</a></li>
<li class="toctree-l5"><a class="reference internal" href="#mds">mds</a></li>
<li class="toctree-l5"><a class="reference internal" href="#mon">mon</a></li>
<li class="toctree-l5"><a class="reference internal" href="#gatherkeys">gatherkeys</a></li>
<li class="toctree-l5"><a class="reference internal" href="#disk">disk</a></li>
<li class="toctree-l5"><a class="reference internal" href="#osd">osd</a></li>
<li class="toctree-l5"><a class="reference internal" href="#admin">admin</a></li>
<li class="toctree-l5"><a class="reference internal" href="#config">config</a></li>
<li class="toctree-l5"><a class="reference internal" href="#uninstall">uninstall</a></li>
<li class="toctree-l5"><a class="reference internal" href="#purge">purge</a></li>
<li class="toctree-l5"><a class="reference internal" href="#purgedata">purgedata</a></li>
<li class="toctree-l5"><a class="reference internal" href="#forgetkeys">forgetkeys</a></li>
<li class="toctree-l5"><a class="reference internal" href="#pkg">pkg</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="#id4">选项</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id5">使用范围</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id6">参考</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../ceph-authtool/">ceph-authtool – ceph 密钥环操作工具</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ceph-clsinfo/">ceph-clsinfo – 查看类对象信息</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ceph-conf/">ceph-conf – ceph 配置文件工具</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ceph-debugpack/">ceph-debugpack – ceph 调试信息打包工具</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ceph-dencoder/">ceph-dencoder – ceph 编码器/解码器工具</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ceph-mon/">ceph-mon – ceph 监视器守护进程</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ceph-osd/">ceph-osd – ceph 对象存储守护进程</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ceph-kvstore-tool/">ceph-kvstore-tool – ceph 的 kvstore 操作工具</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ceph-run/">ceph-run – 发生核心转储后重启守护进程</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ceph-syn/">ceph-syn – ceph 的人造负载生成器</a></li>
<li class="toctree-l3"><a class="reference internal" href="../crushtool/">crushtool – CRUSH 图操作工具</a></li>
<li class="toctree-l3"><a class="reference internal" href="../librados-config/">librados-config – 显示关于 librados 的信息</a></li>
<li class="toctree-l3"><a class="reference internal" href="../monmaptool/">monmaptool – ceph 监视器运行图操作工具</a></li>
<li class="toctree-l3"><a class="reference internal" href="../osdmaptool/">osdmaptool – ceph osd 运行图操作工具</a></li>
<li class="toctree-l3"><a class="reference internal" href="../rados/">rados – rados 对象存储工具</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ceph-post-file/">ceph-post-file – 把文件上传给 ceph 开发者</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../rados/troubleshooting/">故障排除</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../rados/api/">APIs</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../cephfs/">Ceph 文件系统</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../rbd/">Ceph 块设备</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../radosgw/">Ceph 对象网关</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../mgr/">Ceph 管理器守护进程</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../mgr/dashboard/">Ceph 仪表盘</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../api/">API 文档</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../architecture/">体系结构</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../dev/developer_guide/">开发者指南</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../dev/internals/">Ceph 内幕</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../governance/">项目管理</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../foundation/">Ceph 基金会</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../ceph-volume/">ceph-volume</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../releases/general/">Ceph 版本（总目录）</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../releases/">Ceph 版本（索引）</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../glossary/">Ceph 术语</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../translation_cn/">中文版翻译资源</a></li>
</ul>


<!-- ugly kludge to make genindex look like it's part of the toc -->
<ul style="margin-top: -10px"><li class="toctree-l1"><a class="reference internal" href="../../../genindex/">Index</a></li></ul>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../../search/" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../genindex/" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../../../py-modindex/" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="../ceph-authtool/" title="ceph-authtool – ceph 密钥环操作工具"
             >next</a> |</li>
        <li class="right" >
          <a href="../ceph/" title="ceph – Ceph 管理工具"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../../">Ceph Documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../../../rados/" >Ceph 存储集群</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="../../../rados/man/" >对象存储手册页</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2016, Ceph authors and contributors. Licensed under Creative Commons Attribution Share Alike 3.0 (CC-BY-SA-3.0).
    </div>
  </body>
</html>