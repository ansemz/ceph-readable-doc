
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>v0.87.2 Giant &#8212; Ceph Documentation</title>
    <link rel="stylesheet" href="../../_static/nature.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../_static/graphviz.css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../_static/language_data.js"></script>
    <script type="text/javascript" src="../../_static/js/ceph.js"></script>
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../../genindex/" />
    <link rel="search" title="Search" href="../../search/" />
    <link rel="next" title="v0.80.11 Firefly" href="../firefly/" />
    <link rel="prev" title="v0.94.10 Hammer" href="../hammer/" />
    <script type="text/javascript" src="http://ayni.ceph.com/public/js/ceph.js"></script>

  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex/" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../py-modindex/" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="../firefly/" title="v0.80.11 Firefly"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="../hammer/" title="v0.94.10 Hammer"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../">Ceph Documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../" >Ceph 版本</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="../archived-index/" accesskey="U">归档的版本</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            

<div id="dev-warning" class="admonition note" style="display:none;">
  <p class="first admonition-title">Notice</p>
  <p class="last">This document is for a development version of Ceph.</p>
</div>

<div id="eol-warning" class="admonition warning" style="display:none;">
  <p class="first admonition-title">Warning</p>
  <p class="last">This document is for an unsupported version of Ceph.</p>
</div>
  <div id="docubetter" align="right" style="display:none; padding: 15px; font-weight: bold;">
    <a id="edit-on-github" href="https://github.com/ceph/ceph/edit/master/doc/releases/giant.rst" rel="nofollow">Edit on GitHub</a> | <a href="https://github.com/ceph/ceph/projects/4">Report a Documentation Bug</a>
  </div>

  
  <div class="section" id="v0-87-2-giant">
<h1>v0.87.2 Giant<a class="headerlink" href="#v0-87-2-giant" title="Permalink to this headline">¶</a></h1>
<p>This is the second (and possibly final) point release for Giant.</p>
<p>We recommend all v0.87.x Giant users upgrade to this release.</p>
<div class="section" id="notable-changes">
<h2>Notable Changes<a class="headerlink" href="#notable-changes" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>ceph-objectstore-tool: only output unsupported features when incompatible (#11176 David Zafman)</li>
<li>common: do not implicitly unlock rwlock on destruction (Federico Simoncelli)</li>
<li>common: make wait timeout on empty queue configurable (#10818 Samuel Just)</li>
<li>crush: pick ruleset id that matches and rule id (Xiaoxi Chen)</li>
<li>crush: set_choose_tries = 100 for new erasure code rulesets (#10353 Loic Dachary)</li>
<li>librados: check initialized atomic safely (#9617 Josh Durgin)</li>
<li>librados: fix failed tick_event assert (#11183 Zhiqiang Wang)</li>
<li>librados: fix looping on skipped maps (#9986 Ding Dinghua)</li>
<li>librados: fix op submit with timeout (#10340 Samuel Just)</li>
<li>librados: pybind: fix memory leak (#10723 Billy Olsen)</li>
<li>librados: pybind: keep reference to callbacks (#10775 Josh Durgin)</li>
<li>librados: translate operation flags from C APIs (Matthew Richards)</li>
<li>libradosstriper: fix write_full on ENOENT (#10758 Sebastien Ponce)</li>
<li>libradosstriper: use strtoll instead of strtol (Dongmao Zhang)</li>
<li>mds: fix assertion caused by system time moving backwards (#11053 Yan, Zheng)</li>
<li>mon: allow injection of random delays on writes (Joao Eduardo Luis)</li>
<li>mon: do not trust small osd epoch cache values (#10787 Sage Weil)</li>
<li>mon: fail non-blocking flush if object is being scrubbed (#8011 Samuel Just)</li>
<li>mon: fix division by zero in stats dump (Joao Eduardo Luis)</li>
<li>mon: fix get_rule_avail when no osds (#10257 Joao Eduardo Luis)</li>
<li>mon: fix timeout rounds period (#10546 Joao Eduardo Luis)</li>
<li>mon: ignore osd failures before up_from (#10762 Dan van der Ster, Sage Weil)</li>
<li>mon: paxos: reset accept timeout before writing to store (#10220 Joao Eduardo Luis)</li>
<li>mon: return if fs exists on ‘fs new’ (Joao Eduardo Luis)</li>
<li>mon: use EntityName when expanding profiles (#10844 Joao Eduardo Luis)</li>
<li>mon: verify cross-service proposal preconditions (#10643 Joao Eduardo Luis)</li>
<li>mon: wait for osdmon to be writeable when requesting proposal (#9794 Joao Eduardo Luis)</li>
<li>mount.ceph: avoid spurious error message about /etc/mtab (#10351 Yan, Zheng)</li>
<li>msg/simple: allow RESETSESSION when we forget an endpoint (#10080 Greg Farnum)</li>
<li>msg/simple: discard delay queue before incoming queue (#9910 Sage Weil)</li>
<li>osd: clear_primary_state when leaving Primary (#10059 Samuel Just)</li>
<li>osd: do not ignore deleted pgs on startup (#10617 Sage Weil)</li>
<li>osd: fix FileJournal wrap to get header out first (#10883 David Zafman)</li>
<li>osd: fix PG leak in SnapTrimWQ (#10421 Kefu Chai)</li>
<li>osd: fix journalq population in do_read_entry (#6003 Samuel Just)</li>
<li>osd: fix operator== for op_queue_age_hit and fs_perf_stat (#10259 Samuel Just)</li>
<li>osd: fix rare assert after split (#10430 David Zafman)</li>
<li>osd: get pgid ancestor from last_map when building past intervals (#10430 David Zafman)</li>
<li>osd: include rollback_info_trimmed_to in {read,write}_log (#10157 Samuel Just)</li>
<li>osd: lock header_lock in DBObjectMap::sync (#9891 Samuel Just)</li>
<li>osd: requeue blocked op before flush it was blocked on (#10512 Sage Weil)</li>
<li>osd: tolerate missing object between list and attr get on backfill (#10150 Samuel Just)</li>
<li>osd: use correct atime for eviction decision (Xinze Chi)</li>
<li>rgw: flush XML header on get ACL request (#10106 Yehuda Sadeh)</li>
<li>rgw: index swift keys appropriately (#10471 Hemant Bruman, Yehuda Sadeh)</li>
<li>rgw: send cancel for bucket index pending ops (#10770 Baijiaruo, Yehuda Sadeh)</li>
<li>rgw: swift: support X_Remove_Container-Meta-{key} (#01475 Dmytro Iurchenko)</li>
</ul>
<p>For more detailed information, see <a class="reference download internal" download="" href="../../_downloads/3fd16e81b0d5e66e7c0da4203a2564a3/v0.87.2.txt"><code class="xref download docutils literal notranslate"><span class="pre">the</span> <span class="pre">complete</span> <span class="pre">changelog</span></code></a>.</p>
</div>
</div>
<div class="section" id="v0-87-1-giant">
<h1>v0.87.1 Giant<a class="headerlink" href="#v0-87-1-giant" title="Permalink to this headline">¶</a></h1>
<p>This is the first (and possibly final) point release for Giant.  Our focus
on stability fixes will be directed towards Hammer and Firefly.</p>
<p>We recommend that all v0.87 Giant users upgrade to this release.</p>
<div class="section" id="upgrading">
<h2>Upgrading<a class="headerlink" href="#upgrading" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Due to a change in the Linux kernel version 3.18 and the limits of the FUSE
interface, ceph-fuse needs be mounted as root on at least some systems. See
issues #9997, #10277, and #10542 for details.</li>
</ul>
</div>
<div class="section" id="id1">
<h2>Notable Changes<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>build: disable stack-execute bit on assembler objects (#10114 Dan Mick)</li>
<li>build: support boost 1.57.0 (#10688 Ken Dreyer)</li>
<li>ceph-disk: fix dmcrypt file permissions (#9785 Loic Dachary)</li>
<li>ceph-disk: run partprobe after zap, behave with partx or partprobe (#9665 #9721 Loic Dachary)</li>
<li>cephfs-journal-tool: fix import for aged journals (#9977 John Spray)</li>
<li>cephfs-journal-tool: fix journal import (#10025 John Spray)</li>
<li>ceph-fuse: use remount to trim kernel dcache (#10277 Yan, Zheng)</li>
<li>common: add cctid meta variable (#6228 Adam Crume)</li>
<li>common: fix dump of shard for ghobject_t (#10063 Loic Dachary)</li>
<li>crush: fix bucket weight underflow (#9998 Pawel Sadowski)</li>
<li>erasure-code: enforce chunk size alignment (#10211 Loic Dachary)</li>
<li>erasure-code: regression test suite (#9420 Loic Dachary)</li>
<li>erasure-code: relax caucy w restrictions (#10325 Loic Dachary)</li>
<li>libcephfs,ceph-fuse: allow xattr caps on inject_release_failure (#9800 John Spray)</li>
<li>libcephfs,ceph-fuse: fix cap flush tid comparison (#9869 Greg Farnum)</li>
<li>libcephfs,ceph-fuse: new flag to indicated sorted dcache (#9178 Yan, Zheng)</li>
<li>libcephfs,ceph-fuse: prune cache before reconnecting to MDS (Yan, Zheng)</li>
<li>librados: limit number of in-flight read requests (#9854 Jason Dillaman)</li>
<li>libradospy: fix thread shutdown (#8797 Dan Mick)</li>
<li>libradosstriper: fix locking issue in truncate (#10129 Sebastien Ponce)</li>
<li>librbd: complete pending ops before closing mage (#10299 Jason Dillaman)</li>
<li>librbd: fix error path on image open failure (#10030 Jason Dillaman)</li>
<li>librbd: gracefully handle deleted/renamed pools (#10270 Jason Dillaman)</li>
<li>librbd: handle errors when creating ioctx while listing children (#10123 Jason Dillaman)</li>
<li>mds: fix compat version in MClientSession (#9945 John Spray)</li>
<li>mds: fix journaler write error handling (#10011 John Spray)</li>
<li>mds: fix locking for file size recovery (#10229 Yan, Zheng)</li>
<li>mds: handle heartbeat_reset during shutdown (#10382 John Spray)</li>
<li>mds: store backtrace for straydir (Yan, Zheng)</li>
<li>mon: allow tiers for FS pools (#10135 John Spray)</li>
<li>mon: fix caching of last_epoch_clean, osdmap trimming (#9987 Sage Weil)</li>
<li>mon: fix ‘fs ls’ on peons (#10288 John Spray)</li>
<li>mon: fix MDS health status from peons (#10151 John Spray)</li>
<li>mon: fix paxos off-by-one (#9301 Sage Weil)</li>
<li>msgr: simple: do not block on takeover while holding global lock (#9921 Greg Farnum)</li>
<li>osd: deep scrub must not abort if hinfo is missing (#10018 Loic Dachary)</li>
<li>osd: fix misdirected op detection (#9835 Sage Weil)</li>
<li>osd: fix past_interval display for acting (#9752 Loic Dachary)</li>
<li>osd: fix PG peering backoff when behind on osdmaps (#10431 Sage Weil)</li>
<li>osd: handle no-op write with snapshot case (#10262 Ssage Weil)</li>
<li>osd: use fast-dispatch (Sage Weil, Greg Farnum)</li>
<li>rados: fix write to /dev/null (Loic Dachary)</li>
<li>radosgw-admin: create subuser when needed (#10103 Yehuda Sadeh)</li>
<li>rbd: avoid invalidating aio_write buffer during image import (#10590 Jason Dillaman)</li>
<li>rbd: fix export with images &gt; 2GB (Vicente Cheng)</li>
<li>rgw: change multipart upload id magic (#10271 Georgios Dimitrakakis, Yehuda Sadeh)</li>
<li>rgw: check keystone auth for S3 POST (#10062 Abhishek Lekshmanan)</li>
<li>rgw: check timestamp for S3 keystone auth (#10062 Abhishek Lekshmanan)</li>
<li>rgw: fix partial GET with swift (#10553 Yehuda Sadeh)</li>
<li>rgw: fix quota disable (#9907 Dong Lei)</li>
<li>rgw: fix rare corruption of object metadata on put (#9576 Yehuda Sadeh)</li>
<li>rgw: fix S3 object copy content-type (#9478 Yehuda Sadeh)</li>
<li>rgw: headers end with rn (#9254 Benedikt Fraunhofer, Yehuda Sadeh)</li>
<li>rgw: remove swift user manifest DLO hash calculation (#9973 Yehuda Sadeh)</li>
<li>rgw: return correct len when len is 0 (#9877 Yehuda Sadeh)</li>
<li>rgw: return X-Timestamp field (#8911 Yehuda Sadeh)</li>
<li>rgw: run radosgw as apache with systemd (#10125)</li>
<li>rgw: sent ETag on S3 object copy (#9479 Yehuda Sadeh)</li>
<li>rgw: sent HTTP status reason explicitly in fastcgi (Yehuda Sadeh)</li>
<li>rgw: set length for keystone token validation (#7796 Mark Kirkwood, Yehuda Sadeh)</li>
<li>rgw: set ulimit -n on sysvinit before starting daemon (#9587 Sage Weil)</li>
<li>rgw: update bucket index on set_attrs (#5595 Yehuda Sadeh)</li>
<li>rgw: update swift subuser permission masks when authenticating (#9918 Yehuda Sadeh)</li>
<li>rgw: URL decode HTTP query params correction (#10271 Georgios Dimitrakakis, Yehuda Sadeh)</li>
<li>rgw: use cached attrs while reading object attrs (#10307 Yehuda Sadeh)</li>
<li>rgw: use strict_strtoll for content length (#10701 Axel Dunkel, Yehuda Sadeh)</li>
</ul>
<p>For more detailed information, see <a class="reference download internal" download="" href="../../_downloads/4a5660ab6390f55e5094153271b44893/v0.87.1.txt"><code class="xref download docutils literal notranslate"><span class="pre">the</span> <span class="pre">complete</span> <span class="pre">changelog</span></code></a>.</p>
</div>
</div>
<div class="section" id="v0-87-giant">
<h1>v0.87 Giant<a class="headerlink" href="#v0-87-giant" title="Permalink to this headline">¶</a></h1>
<p>This release will form the basis for the stable release Giant,
v0.87.x.  Highlights for Giant include:</p>
<ul class="simple">
<li><em>RADOS Performance</em>: a range of improvements have been made in the
OSD and client-side librados code that improve the throughput on
flash backends and improve parallelism and scaling on fast machines.</li>
<li><em>CephFS</em>: we have fixed a raft of bugs in CephFS and built some
basic journal recovery and diagnostic tools.  Stability and
performance of single-MDS systems is vastly improved in Giant.
Although we do not yet recommend CephFS for production deployments,
we do encourage testing for non-critical workloads so that we can
better gauge the feature, usability, performance, and stability
gaps.</li>
<li><em>Local Recovery Codes</em>: the OSDs now support an erasure-coding scheme
that stores some additional data blocks to reduce the IO required to
recover from single OSD failures.</li>
<li><em>Degraded vs misplaced</em>: the Ceph health reports from ‘ceph -s’ and
related commands now make a distinction between data that is
degraded (there are fewer than the desired number of copies) and
data that is misplaced (stored in the wrong location in the
cluster).  The distinction is important because the latter does not
compromise data safety.</li>
<li><em>Tiering improvements</em>: we have made several improvements to the
cache tiering implementation that improve performance.  Most
notably, objects are not promoted into the cache tier by a single
read; they must be found to be sufficiently hot before that happens.</li>
<li><em>Monitor performance</em>: the monitors now perform writes to the local
data store asynchronously, improving overall responsiveness.</li>
<li><em>Recovery tools</em>: the ceph_objectstore_tool is greatly expanded to
allow manipulation of an individual OSDs data store for debugging
and repair purposes.  This is most heavily used by our QA
infrastructure to exercise recovery code.</li>
</ul>
<div class="section" id="upgrade-sequencing">
<h2>Upgrade Sequencing<a class="headerlink" href="#upgrade-sequencing" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p class="first">If your existing cluster is running a version older than v0.80.x
Firefly, please first upgrade to the latest Firefly release before
moving on to Giant.  We have not tested upgrades directly from
Emperor, Dumpling, or older releases.</p>
<p>We <em>have</em> tested:</p>
<blockquote>
<div><ul class="simple">
<li>Firefly to Giant</li>
<li>Dumpling to Firefly to Giant</li>
</ul>
</div></blockquote>
</li>
<li><p class="first">Please upgrade daemons in the following order:</p>
<blockquote>
<div><ol class="arabic simple">
<li>Monitors</li>
<li>OSDs</li>
<li>MDSs and/or radosgw</li>
</ol>
</div></blockquote>
<p>Note that the relative ordering of OSDs and monitors should not matter, but
we primarily tested upgrading monitors first.</p>
</li>
</ul>
</div>
<div class="section" id="upgrading-from-v0-80x-firefly">
<h2>Upgrading from v0.80x Firefly<a class="headerlink" href="#upgrading-from-v0-80x-firefly" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p class="first">The client-side caching for librbd is now enabled by default (rbd
cache = true).  A safety option (rbd cache writethrough until flush
= true) is also enabled so that writeback caching is not used until
the library observes a ‘flush’ command, indicating that the librbd
users is passing that operation through from the guest VM.  This
avoids potential data loss when used with older versions of qemu
that do not support flush.</p>
<blockquote>
<div><p>leveldb_write_buffer_size = 8*1024*1024  = 33554432   // 8MB
leveldb_cache_size        = 512*1024*1204 = 536870912 // 512MB
leveldb_block_size        = 64*1024       = 65536     // 64KB
leveldb_compression       = false
leveldb_log               = “”</p>
</div></blockquote>
<p>OSDs will still maintain the following osd-specific defaults:</p>
<blockquote>
<div><p>leveldb_log               = “”</p>
</div></blockquote>
</li>
<li><p class="first">The ‘rados getxattr …’ command used to add a gratuitous newline to the attr
value; it now does not.</p>
</li>
<li><p class="first">The <code class="docutils literal notranslate"><span class="pre">*_kb</span> <span class="pre">perf</span></code> counters on the monitor have been removed.  These are
replaced with a new set of <code class="docutils literal notranslate"><span class="pre">*_bytes</span></code> counters (e.g., <code class="docutils literal notranslate"><span class="pre">cluster_osd_kb</span></code> is
replaced by <code class="docutils literal notranslate"><span class="pre">cluster_osd_bytes</span></code>).</p>
</li>
<li><p class="first">The <code class="docutils literal notranslate"><span class="pre">rd_kb</span></code> and <code class="docutils literal notranslate"><span class="pre">wr_kb</span></code> fields in the JSON dumps for pool stats (accessed
via the <code class="docutils literal notranslate"><span class="pre">ceph</span> <span class="pre">df</span> <span class="pre">detail</span> <span class="pre">-f</span> <span class="pre">json-pretty</span></code> and related commands) have been
replaced with corresponding <code class="docutils literal notranslate"><span class="pre">*_bytes</span></code> fields.  Similarly, the
<code class="docutils literal notranslate"><span class="pre">total_space</span></code>, <code class="docutils literal notranslate"><span class="pre">total_used</span></code>, and <code class="docutils literal notranslate"><span class="pre">total_avail</span></code> fields are replaced with
<code class="docutils literal notranslate"><span class="pre">total_bytes</span></code>, <code class="docutils literal notranslate"><span class="pre">total_used_bytes</span></code>,  and <code class="docutils literal notranslate"><span class="pre">total_avail_bytes</span></code> fields.</p>
</li>
<li><p class="first">The <code class="docutils literal notranslate"><span class="pre">rados</span> <span class="pre">df</span> <span class="pre">--format=json</span></code> output <code class="docutils literal notranslate"><span class="pre">read_bytes</span></code> and <code class="docutils literal notranslate"><span class="pre">write_bytes</span></code>
fields were incorrectly reporting ops; this is now fixed.</p>
</li>
<li><p class="first">The <code class="docutils literal notranslate"><span class="pre">rados</span> <span class="pre">df</span> <span class="pre">--format=json</span></code> output previously included <code class="docutils literal notranslate"><span class="pre">read_kb</span></code> and
<code class="docutils literal notranslate"><span class="pre">write_kb</span></code> fields; these have been removed.  Please use <code class="docutils literal notranslate"><span class="pre">read_bytes</span></code> and
<code class="docutils literal notranslate"><span class="pre">write_bytes</span></code> instead (and divide by 1024 if appropriate).</p>
</li>
<li><p class="first">The experimental keyvaluestore-dev OSD backend had an on-disk format
change that prevents existing OSD data from being upgraded.  This
affects developers and testers only.</p>
</li>
<li><p class="first">mon-specific and osd-specific leveldb options have been removed.
From this point onward users should use the <cite>leveldb_*</cite> generic
options and add the options in the appropriate sections of their
configuration files.  Monitors will still maintain the following
monitor-specific defaults:</p>
<blockquote>
<div><p>leveldb_write_buffer_size = 8*1024*1024  = 33554432   // 8MB
leveldb_cache_size        = 512*1024*1204 = 536870912 // 512MB
leveldb_block_size        = 64*1024       = 65536     // 64KB
leveldb_compression       = false
leveldb_log               = “”</p>
</div></blockquote>
<p>OSDs will still maintain the following osd-specific defaults:</p>
<blockquote>
<div><p>leveldb_log               = “”</p>
</div></blockquote>
</li>
<li><p class="first">CephFS support for the legacy anchor table has finally been removed.
Users with file systems created before firefly should ensure that inodes
with multiple hard links are modified <em>prior</em> to the upgrade to ensure that
the backtraces are written properly.  For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">find</span> <span class="o">/</span><span class="n">mnt</span><span class="o">/</span><span class="n">cephfs</span> <span class="o">-</span><span class="nb">type</span> <span class="n">f</span> <span class="o">-</span><span class="n">links</span> <span class="o">+</span><span class="mi">1</span> <span class="o">-</span><span class="n">exec</span> <span class="n">touch</span> \<span class="p">{</span>\<span class="p">}</span> \<span class="p">;</span>
</pre></div>
</div>
</li>
<li><p class="first">We disallow nonsensical ‘tier cache-mode’ transitions.  From this point
onward, ‘writeback’ can only transition to ‘forward’ and ‘forward’
can transition to 1) ‘writeback’ if there are dirty objects, or 2) any if
there are no dirty objects.</p>
</li>
</ul>
</div>
<div class="section" id="notable-changes-since-v0-86">
<h2>Notable Changes since v0.86<a class="headerlink" href="#notable-changes-since-v0-86" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>ceph-disk: use new udev rules for centos7/rhel7 (#9747 Loic Dachary)</li>
<li>libcephfs-java: fix fstat mode (Noah Watkins)</li>
<li>librados: fix deadlock when listing PG contents (Guang Yang)</li>
<li>librados: misc fixes to the new threading model (#9582 #9706 #9845 #9873 Sage Weil)</li>
<li>mds: fix inotable initialization (Henry C Chang)</li>
<li>mds: gracefully handle unknown lock type in flock requests (Yan, Zheng)</li>
<li>mon: add read-only, read-write, and role-definer rols (Joao Eduardo Luis)</li>
<li>mon: fix mon cap checks (Joao Eduardo Luis)</li>
<li>mon: misc fixes for new paxos async writes (#9635 Sage Weil)</li>
<li>mon: set scrub timestamps on PG creation (#9496 Joao Eduardo Luis)</li>
<li>osd: erasure code: fix buffer alignment (Janne Grunau, Loic Dachary)</li>
<li>osd: fix alloc hint induced crashes on mixed clusters (#9419 David Zafman)</li>
<li>osd: fix backfill reservation release on rejection (#9626, Samuel Just)</li>
<li>osd: fix ioprio option parsing (#9676 #9677 Loic Dachary)</li>
<li>osd: fix memory leak during snap trimming (#9113 Samuel Just)</li>
<li>osd: misc peering and recovery fixes (#9614 #9696 #9731 #9718 #9821 #9875 Samuel Just, Guang Yang)</li>
</ul>
</div>
<div class="section" id="notable-changes-since-v0-80-x-firefly">
<h2>Notable Changes since v0.80.x Firefly<a class="headerlink" href="#notable-changes-since-v0-80-x-firefly" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>bash completion improvements (Wido den Hollander)</li>
<li>brag: fixes, improvements (Loic Dachary)</li>
<li>buffer: improve rebuild_page_aligned (Ma Jianpeng)</li>
<li>build: fix build on alpha (Michael Cree, Dmitry Smirnov)</li>
<li>build: fix CentOS 5 (Gerben Meijer)</li>
<li>build: fix yasm check for x32 (Daniel Schepler, Sage Weil)</li>
<li>ceph-brag: add tox tests (Alfredo Deza)</li>
<li>ceph-conf: flush log on exit (Sage Weil)</li>
<li>ceph.conf: update sample (Sebastien Han)</li>
<li>ceph-dencoder: refactor build a bit to limit dependencies (Sage Weil, Dan Mick)</li>
<li>ceph-disk: add Scientific Linux support (Dan van der Ster)</li>
<li>ceph-disk: do not inadvertantly create directories (Owne Synge)</li>
<li>ceph-disk: fix dmcrypt support (Sage Weil)</li>
<li>ceph-disk: fix dmcrypt support (Stephen Taylor)</li>
<li>ceph-disk: handle corrupt volumes (Stuart Longlang)</li>
<li>ceph-disk: linter cleanup, logging improvements (Alfredo Deza)</li>
<li>ceph-disk: partprobe as needed (Eric Eastman)</li>
<li>ceph-disk: show information about dmcrypt in ‘ceph-disk list’ output (Sage Weil)</li>
<li>ceph-disk: use partition type UUIDs and blkid (Sage Weil)</li>
<li>ceph: fix for non-default cluster names (#8944, Dan Mick)</li>
<li>ceph-fuse, libcephfs: asok hooks for handling session resets, timeouts (Yan, Zheng)</li>
<li>ceph-fuse, libcephfs: fix crash in trim_caps (John Spray)</li>
<li>ceph-fuse, libcephfs: improve cap trimming (John Spray)</li>
<li>ceph-fuse, libcephfs: improve traceless reply handling (Sage Weil)</li>
<li>ceph-fuse, libcephfs: virtual xattrs for rstat (Yan, Zheng)</li>
<li>ceph_objectstore_tool: vastly improved and extended tool for working offline with OSD data stores (David Zafman)</li>
<li>ceph.spec: many fixes (Erik Logtenberg, Boris Ranto, Dan Mick, Sandon Van Ness)</li>
<li>ceph.spec: split out ceph-common package, other fixes (Sandon Van Ness)</li>
<li>ceph_test_librbd_fsx: fix RNG, make deterministic (Ilya Dryomov)</li>
<li>cephtool: fix help (Yilong Zhao)</li>
<li>cephtool: refactor and improve CLI tests (Joao Eduardo Luis)</li>
<li>cephtool: test cleanup (Joao Eduardo Luis)</li>
<li>clang build fixes (John Spray, Danny Al-Gaaf)</li>
<li>client: improved MDS session dumps (John Spray)</li>
<li>common: add config diff admin socket command (Joao Eduardo Luis)</li>
<li>common: add rwlock assertion checks (Yehuda Sadeh)</li>
<li>common: fix dup log messages (#9080, Sage Weil)</li>
<li>common: perfcounters now use atomics and go faster (Sage Weil)</li>
<li>config: support G, M, K, etc. suffixes (Joao Eduardo Luis)</li>
<li>coverity cleanups (Danny Al-Gaaf)</li>
<li>crush: clean up CrushWrapper interface (Xioaxi Chen)</li>
<li>crush: include new tunables in dump (Sage Weil)</li>
<li>crush: make ruleset ids unique (Xiaoxi Chen, Loic Dachary)</li>
<li>crush: only require rule features if the rule is used (#8963, Sage Weil)</li>
<li>crushtool: send output to stdout, not stderr (Wido den Hollander)</li>
<li>doc: cache tiering (John Wilkins)</li>
<li>doc: CRUSH updates (John Wilkins)</li>
<li>doc: document new upstream wireshark dissector (Kevin Cox)</li>
<li>doc: improve manual install docs (Francois Lafont)</li>
<li>doc: keystone integration docs (John Wilkins)</li>
<li>doc: librados example fixes (Kevin Dalley)</li>
<li>doc: many doc updates (John Wilkins)</li>
<li>doc: many install doc updates (John Wilkins)</li>
<li>doc: misc updates (John Wilkins, Loic Dachary, David Moreau Simard, Wido den Hollander. Volker Voigt, Alfredo Deza, Stephen Jahl, Dan van der Ster)</li>
<li>doc: osd primary affinity (John Wilkins)</li>
<li>doc: pool quotas (John Wilkins)</li>
<li>doc: pre-flight doc improvements (Kevin Dalley)</li>
<li>doc: switch to an unencumbered font (Ross Turk)</li>
<li>doc: updated simple configuration guides (John Wilkins)</li>
<li>doc: update erasure docs (Loic Dachary, Venky Shankar)</li>
<li>doc: update openstack docs (Josh Durgin)</li>
<li>filestore: disable use of XFS hint (buggy on old kernels) (Samuel Just)</li>
<li>filestore: fix xattr spillout (Greg Farnum, Haomai Wang)</li>
<li>fix hppa arch build (Dmitry Smirnov)</li>
<li>fix i386 builds (Sage Weil)</li>
<li>fix struct vs class inconsistencies (Thorsten Behrens)</li>
<li>global: write pid file even when running in foreground (Alexandre Oliva)</li>
<li>hadoop: improve tests (Huamin Chen, Greg Farnum, John Spray)</li>
<li>hadoop: update hadoop tests for Hadoop 2.0 (Haumin Chen)</li>
<li>init-ceph: continue starting other daemons on crush or mount failure (#8343, Sage Weil)</li>
<li>journaler: fix locking (Zheng, Yan)</li>
<li>keyvaluestore: fix hint crash (#8381, Haomai Wang)</li>
<li>keyvaluestore: header cache (Haomai Wang)</li>
<li>libcephfs-java: build against older JNI headers (Greg Farnum)</li>
<li>libcephfs-java: fix gcj-jdk build (Dmitry Smirnov)</li>
<li>librados: fix crash on read op timeout (#9362 Matthias Kiefer, Sage Weil)</li>
<li>librados: fix lock leaks in error paths (#9022, Paval Rallabhandi)</li>
<li>librados: fix pool existence check (#8835, Pavan Rallabhandi)</li>
<li>librados: fix rados_pool_list bounds checks (Sage Weil)</li>
<li>librados: fix shutdown race (#9130 Sage Weil)</li>
<li>librados: fix watch/notify test (#7934 David Zafman)</li>
<li>librados: fix watch reregistration on acting set change (#9220 Samuel Just)</li>
<li>librados: give Objecter fine-grained locks (Yehuda Sadeh, Sage Weil, John Spray)</li>
<li>librados: lttng tracepoitns (Adam Crume)</li>
<li>librados, osd: return ETIMEDOUT on failed notify (Sage Weil)</li>
<li>librados: pybind: fix reads when 0 is present (#9547 Mohammad Salehe)</li>
<li>librados_striper: striping library for librados (Sebastien Ponce)</li>
<li>librbd, ceph-fuse: reduce cache flush overhead (Haomai Wang)</li>
<li>librbd: check error code on cache invalidate (Josh Durgin)</li>
<li>librbd: enable caching by default (Sage Weil)</li>
<li>librbd: enforce cache size on read requests (Jason Dillaman)</li>
<li>librbd: fix crash using clone of flattened image (#8845, Josh Durgin)</li>
<li>librbd: fix error path when opening image (#8912, Josh Durgin)</li>
<li>librbd: handle blacklisting during shutdown (#9105 John Spray)</li>
<li>librbd: lttng tracepoints (Adam Crume)</li>
<li>librbd: new libkrbd library for kernel map/unmap/showmapped (Ilya Dryomov)</li>
<li>librbd: store and retrieve snapshot metadata based on id (Josh Durgin)</li>
<li>libs3: update to latest (Danny Al-Gaaf)</li>
<li>log: fix derr level (Joao Eduardo Luis)</li>
<li>logrotate: fix osd log rotation on ubuntu (Sage Weil)</li>
<li>lttng: tracing infrastructure (Noah Watkins, Adam Crume)</li>
<li>mailmap: many updates (Loic Dachary)</li>
<li>mailmap: updates (Loic Dachary, Abhishek Lekshmanan, M Ranga Swami Reddy)</li>
<li>Makefile: fix out of source builds (Stefan Eilemann)</li>
<li>many many coverity fixes, cleanups (Danny Al-Gaaf)</li>
<li>mds: adapt to new Objecter locking, give types to all Contexts (John Spray)</li>
<li>mds: add file system name, enabled flag (John Spray)</li>
<li>mds: add internal health checks (John Spray)</li>
<li>mds: add min/max UID for snapshot creation/deletion (#9029, Wido den Hollander)</li>
<li>mds: avoid tight mon reconnect loop (#9428 Sage Weil)</li>
<li>mds: boot refactor, cleanup (John Spray)</li>
<li>mds: cephfs-journal-tool (John Spray)</li>
<li>mds: fix crash killing sessions (#9173 John Spray)</li>
<li>mds: fix ctime updates (#9514 Greg Farnum)</li>
<li>mds: fix journal conversion with standby-replay (John Spray)</li>
<li>mds: fix replay locking (Yan, Zheng)</li>
<li>mds: fix standby-replay cache trimming (#8648 Zheng, Yan)</li>
<li>mds: fix xattr bug triggered by ACLs (Yan, Zheng)</li>
<li>mds: give perfcounters meaningful names (Sage Weil)</li>
<li>mds: improve health reporting to monitor (John Spray)</li>
<li>mds: improve Journaler on-disk format (John Spray)</li>
<li>mds: improve journal locking (Zheng, Yan)</li>
<li>mds, libcephfs: use client timestamp for mtime/ctime (Sage Weil)</li>
<li>mds: make max file recoveries tunable (Sage Weil)</li>
<li>mds: misc encoding improvements (John Spray)</li>
<li>mds: misc fixes for multi-mds (Yan, Zheng)</li>
<li>mds: multi-mds fixes (Yan, Zheng)</li>
<li>mds: OPTracker integration, dump_ops_in_flight (Greg Farnum)</li>
<li>mds: prioritize file recovery when appropriate (Sage Weil)</li>
<li>mds: refactor beacon, improve reliability (John Spray)</li>
<li>mds: remove legacy anchor table (Yan, Zheng)</li>
<li>mds: remove legacy discover ino (Yan, Zheng)</li>
<li>mds: restart on EBLACKLISTED (John Spray)</li>
<li>mds: separate inode recovery queue (John Spray)</li>
<li>mds: session ls, evict commands (John Spray)</li>
<li>mds: submit log events in async thread (Yan, Zheng)</li>
<li>mds: track RECALL progress, report failure (#9284 John Spray)</li>
<li>mds: update segment references during journal write (John Spray, Greg Farnum)</li>
<li>mds: use client-provided timestamp for user-visible file metadata (Yan, Zheng)</li>
<li>mds: use meaningful names for clients (John Spray)</li>
<li>mds: validate journal header on load and save (John Spray)</li>
<li>mds: warn clients which aren’t revoking caps (Zheng, Yan, John Spray)</li>
<li>misc build errors/warnings for Fedora 20 (Boris Ranto)</li>
<li>misc build fixes for OS X (John Spray)</li>
<li>misc cleanup (Christophe Courtaut)</li>
<li>misc integer size cleanups (Kevin Cox)</li>
<li>misc memory leaks, cleanups, fixes (Danny Al-Gaaf, Sahid Ferdjaoui)</li>
<li>misc suse fixes (Danny Al-Gaaf)</li>
<li>misc word size fixes (Kevin Cox)</li>
<li>mon: add audit log for all admin commands (Joao Eduardo Luis)</li>
<li>mon: add cluster fingerprint (Sage Weil)</li>
<li>mon: add get-quota commands (Joao Eduardo Luis)</li>
<li>mon: add ‘osd blocked-by’ command to easily see which OSDs are blocking peering progress (Sage Weil)</li>
<li>mon: add ‘osd reweight-by-pg’ command (Sage Weil, Guang Yang)</li>
<li>mon: add perfcounters for paxos operations (Sage Weil)</li>
<li>mon: avoid creating unnecessary rule on pool create (#9304 Loic Dachary)</li>
<li>monclient: fix hang (Sage Weil)</li>
<li>mon: create default EC profile if needed (Loic Dachary)</li>
<li>mon: do not create file system by default (John Spray)</li>
<li>mon: do not spam log (Aanchal Agrawal, Sage Weil)</li>
<li>mon: drop mon- and osd- specific leveldb options (Joao Eduardo Luis)</li>
<li>mon: ec pool profile fixes (Loic Dachary)</li>
<li>mon: fix bug when no auth keys are present (#8851, Joao Eduardo Luis)</li>
<li>mon: fix ‘ceph df’ output for available space (Xiaoxi Chen)</li>
<li>mon: fix compat version for MForward (Joao Eduardo Luis)</li>
<li>mon: fix crash on loopback messages and paxos timeouts (#9062, Sage Weil)</li>
<li>mon: fix default replication pool ruleset choice (#8373, John Spray)</li>
<li>mon: fix divide by zero when pg_num is adjusted before OSDs are added (#9101, Sage Weil)</li>
<li>mon: fix double-free of old MOSDBoot (Sage Weil)</li>
<li>mon: fix health down messages (Sage Weil)</li>
<li>mon: fix occasional memory leak after session reset (#9176, Sage Weil)</li>
<li>mon: fix op write latency perfcounter (#9217 Xinxin Shu)</li>
<li>mon: fix ‘osd perf’ reported latency (#9269 Samuel Just)</li>
<li>mon: fix quorum feature check (#8738, Greg Farnum)</li>
<li>mon: fix ruleset/ruleid bugs (#9044, Loic Dachary)</li>
<li>mon: fix set cache_target_full_ratio (#8440, Geoffrey Hartz)</li>
<li>mon: fix store check on startup (Joao Eduardo Luis)</li>
<li>mon: include per-pool ‘max avail’ in df output (Sage Weil)</li>
<li>mon: make paxos transaction commits asynchronous (Sage Weil)</li>
<li>mon: make usage dumps in terms of bytes, not kB (Sage Weil)</li>
<li>mon: ‘osd crush reweight-subtree …’ (Sage Weil)</li>
<li>mon, osd: relax client EC support requirements (Sage Weil)</li>
<li>mon: preload erasure plugins (#9153 Loic Dachary)</li>
<li>mon: prevent cache pools from being used directly by CephFS (#9435 John Spray)</li>
<li>mon: prevent EC pools from being used with cephfs (Joao Eduardo Luis)</li>
<li>mon: prevent implicit destruction of OSDs with ‘osd setmaxosd …’ (#8865, Anand Bhat)</li>
<li>mon: prevent nonsensical cache-mode transitions (Joao Eduardo Luis)</li>
<li>mon: restore original weight when auto-marked out OSDs restart (Sage Weil)</li>
<li>mon: restrict some pool properties to tiered pools (Joao Eduardo Luis)</li>
<li>mon: some instrumentation (Sage Weil)</li>
<li>mon: use msg header tid for MMonGetVersionReply (Ilya Dryomov)</li>
<li>mon: use user-provided ruleset for replicated pool (Xiaoxi Chen)</li>
<li>mon: verify all quorum members are contiguous at end of Paxos round (#9053, Sage Weil)</li>
<li>mon: verify available disk space on startup (#9502 Joao Eduardo Luis)</li>
<li>mon: verify erasure plugin version on load (Loic Dachary)</li>
<li>msgr: avoid big lock when sending (most) messages (Greg Farnum)</li>
<li>msgr: fix logged address (Yongyue Sun)</li>
<li>msgr: misc locking fixes for fast dispatch (#8891, Sage Weil)</li>
<li>msgr: refactor to cleanly separate SimpleMessenger implemenetation, move toward Connection-based calls (Matt Benjamin, Sage Wei)</li>
<li>objecter: flag operations that are redirected by caching (Sage Weil)</li>
<li>objectstore: clean up KeyValueDB interface for key/value backends (Sage Weil)</li>
<li>osd: account for hit_set_archive bytes (Sage Weil)</li>
<li>osd: add ability to prehash filestore directories (Guang Yang)</li>
<li>osd: add ‘dump_reservations’ admin socket command (Sage Weil)</li>
<li>osd: add feature bit for erasure plugins (Loic Dachary)</li>
<li>osd: add header cache for KeyValueStore (Haomai Wang)</li>
<li>osd: add ISA erasure plugin table cache (Andreas-Joachim Peters)</li>
<li>osd: add local_mtime for use by cache agent (Zhiqiang Wang)</li>
<li>osd: add local recovery code (LRC) erasure plugin (Loic Dachary)</li>
<li>osd: add prototype KineticStore based on Seagate Kinetic (Josh Durgin)</li>
<li>osd: add READFORWARD caching mode (Luis Pabon)</li>
<li>osd: add superblock for KeyValueStore backend (Haomai Wang)</li>
<li>osd: add support for Intel ISA-L erasure code library (Andreas-Joachim Peters)</li>
<li>osd: allow map cache size to be adjusted at runtime (Sage Weil)</li>
<li>osd: avoid refcounting overhead by passing a few things by ref (Somnath Roy)</li>
<li>osd: avoid sharing PG info that is not durable (Samuel Just)</li>
<li>osd: bound osdmap epoch skew between PGs (Sage Weil)</li>
<li>osd: cache tier flushing fixes for snapped objects (Samuel Just)</li>
<li>osd: cap hit_set size (#9339 Samuel Just)</li>
<li>osd: clean up shard_id_t, shard_t (Loic Dachary)</li>
<li>osd: clear FDCache on unlink (#8914 Loic Dachary)</li>
<li>osd: clear slow request latency info on osd up/down (Sage Weil)</li>
<li>osd: do not evict blocked objects (#9285 Zhiqiang Wang)</li>
<li>osd: do not skip promote for write-ordered reads (#9064, Samuel Just)</li>
<li>osd: fix agent early finish looping (David Zafman)</li>
<li>osd: fix ambigous encoding order for blacklisted clients (#9211, Sage Weil)</li>
<li>osd: fix bogus assert during OSD shutdown (Sage Weil)</li>
<li>osd: fix bug with long object names and rename (#8701, Sage Weil)</li>
<li>osd: fix cache flush corner case for snapshotted objects (#9054, Samuel Just)</li>
<li>osd: fix cache full -&gt; not full requeueing (#8931, Sage Weil)</li>
<li>osd: fix clone deletion case (#8334, Sam Just)</li>
<li>osd: fix clone vs cache_evict bug (#8629 Sage Weil)</li>
<li>osd: fix connection reconnect race (Greg Farnum)</li>
<li>osd: fix crash from duplicate backfill reservation (#8863 Sage Weil)</li>
<li>osd: fix dead peer connection checks (#9295 Greg Farnum, Sage Weil)</li>
<li>osd: fix discard of old/obsolete subop replies (#9259, Samuel Just)</li>
<li>osd: fix discard of peer messages from previous intervals (Greg Farnum)</li>
<li>osd: fix dump of open fds on EMFILE (Sage Weil)</li>
<li>osd: fix dumps (Joao Eduardo Luis)</li>
<li>osd: fix erasure-code lib initialization (Loic Dachary)</li>
<li>osd: fix extent normalization (Adam Crume)</li>
<li>osd: fix filestore removal corner case (#8332, Sam Just)</li>
<li>osd: fix flush vs OpContext (Samuel Just)</li>
<li>osd: fix gating of messages from old OSD instances (Greg Farnum)</li>
<li>osd: fix hang waiting for osdmap (#8338, Greg Farnum)</li>
<li>osd: fix interval check corner case during peering (#8104, Sam Just)</li>
<li>osd: fix ISA erasure alignment (Loic Dachary, Andreas-Joachim Peters)</li>
<li>osd: fix journal dump (Ma Jianpeng)</li>
<li>osd: fix journal-less operation (Sage Weil)</li>
<li>osd: fix keyvaluestore scrub (#8589 Haomai Wang)</li>
<li>osd: fix keyvaluestore upgrade (Haomai Wang)</li>
<li>osd: fix loopback msgr issue (Ma Jianpeng)</li>
<li>osd: fix LSB release parsing (Danny Al-Gaaf)</li>
<li>osd: fix MarkMeDown and other shutdown races (Sage Weil)</li>
<li>osd: fix memstore bugs with collection_move_rename, lock ordering (Sage Weil)</li>
<li>osd: fix min_read_recency_for_promote default on upgrade (Zhiqiang Wang)</li>
<li>osd: fix mon feature bit requirements bug and resulting log spam (Sage Weil)</li>
<li>osd: fix mount/remount sync race (#9144 Sage Weil)</li>
<li>osd: fix PG object listing/ordering bug (Guang Yang)</li>
<li>osd: fix PG stat errors with tiering (#9082, Sage Weil)</li>
<li>osd: fix purged_snap initialization on backfill (Sage Weil, Samuel Just, Dan van der Ster, Florian Haas)</li>
<li>osd: fix race condition on object deletion (#9480 Somnath Roy)</li>
<li>osd: fix recovery chunk size usage during EC recovery (Ma Jianpeng)</li>
<li>osd: fix recovery reservation deadlock for EC pools (Samuel Just)</li>
<li>osd: fix removal of old xattrs when overwriting chained xattrs (Ma Jianpeng)</li>
<li>osd: fix requesting queueing on PG split (Samuel Just)</li>
<li>osd: fix scrub vs cache bugs (Samuel Just)</li>
<li>osd: fix snap object writeback from cache tier (#9054 Samuel Just)</li>
<li>osd: fix trim of hitsets (Sage Weil)</li>
<li>osd: force new xattrs into leveldb if fs returns E2BIG (#7779, Sage Weil)</li>
<li>osd: implement alignment on chunk sizes (Loic Dachary)</li>
<li>osd: improved backfill priorities (Sage Weil)</li>
<li>osd: improve journal shutdown (Ma Jianpeng, Mark Kirkwood)</li>
<li>osd: improve locking for KeyValueStore (Haomai Wang)</li>
<li>osd: improve locking in OpTracker (Pavan Rallabhandi, Somnath Roy)</li>
<li>osd: improve prioritization of recovery of degraded over misplaced objects (Sage Weil)</li>
<li>osd: improve tiering agent arithmetic (Zhiqiang Wang, Sage Weil, Samuel Just)</li>
<li>osd: include backend information in metadata reported to mon (Sage Weil)</li>
<li>osd: locking, sharding, caching improvements in FileStore’s FDCache (Somnath Roy, Greg Farnum)</li>
<li>osd: lttng tracepoints for filestore (Noah Watkins)</li>
<li>osd: make blacklist encoding deterministic (#9211 Sage Weil)</li>
<li>osd: make tiering behave if hit_sets aren’t enabled (Sage Weil)</li>
<li>osd: many important bug fixes (Samuel Just)</li>
<li>osd: many many core fixes (Samuel Just)</li>
<li>osd: many many important fixes (#8231 #8315 #9113 #9179 #9293 #9294 #9326 #9453 #9481 #9482 #9497 #9574 Samuel Just)</li>
<li>osd: mark pools with incomplete clones (Sage Weil)</li>
<li>osd: misc erasure code plugin fixes (Loic Dachary)</li>
<li>osd: misc locking fixes for fast dispatch (Samuel Just, Ma Jianpeng)</li>
<li>osd, mon: add rocksdb support (Xinxin Shu, Sage Weil)</li>
<li>osd, mon: config sanity checks on start (Sage Weil, Joao Eduardo Luis)</li>
<li>osd, mon: distinguish between “misplaced” and “degraded” objects in cluster health and PG state reporting (Sage Weil)</li>
<li>osd, msgr: fast-dispatch of OSD ops (Greg Farnum, Samuel Just)</li>
<li>osd, objecter: resend ops on last_force_op_resend barrier; fix cache overlay op ordering (Sage Weil)</li>
<li>osd: preload erasure plugins (#9153 Loic Dachary)</li>
<li>osd: prevent old rados clients from using tiered pools (#8714, Sage Weil)</li>
<li>osd: reduce OpTracker overhead (Somnath Roy)</li>
<li>osd: refactor some ErasureCode functionality into command parent class (Loic Dachary)</li>
<li>osd: remove obsolete classic scrub code (David Zafman)</li>
<li>osd: scrub PGs with invalid stats (Sage Weil)</li>
<li>osd: set configurable hard limits on object and xattr names (Sage Weil, Haomai Wang)</li>
<li>osd: set rollback_info_completed on create (#8625, Samuel Just)</li>
<li>osd: sharded threadpool to improve parallelism (Somnath Roy)</li>
<li>osd: shard OpTracker to improve performance (Somnath Roy)</li>
<li>osd: simple io prioritization for scrub (Sage Weil)</li>
<li>osd: simple scrub throttling (Sage Weil)</li>
<li>osd: simple snap trimmer throttle (Sage Weil)</li>
<li>osd: tests for bench command (Loic Dachary)</li>
<li>osd: trim old EC objects quickly; verify on scrub (Samuel Just)</li>
<li>osd: use FIEMAP to inform copy_range (Haomai Wang)</li>
<li>osd: use local time for tiering decisions (Zhiqiang Wang)</li>
<li>osd: use xfs hint less frequently (Ilya Dryomov)</li>
<li>osd: verify erasure plugin version on load (Loic Dachary)</li>
<li>osd: work around GCC 4.8 bug in journal code (Matt Benjamin)</li>
<li>pybind/rados: fix small timeouts (John Spray)</li>
<li>qa: xfstests updates (Ilya Dryomov)</li>
<li>rados: allow setxattr value to be read from stdin (Sage Weil)</li>
<li>rados bench: fix arg order (Kevin Dalley)</li>
<li>rados: drop gratuitous n from getxattr command (Sage Weil)</li>
<li>rados: fix bench write arithmetic (Jiangheng)</li>
<li>rados: fix {read,write}_ops values for df output (Sage Weil)</li>
<li>rbd: add rbdmap pre- and post post- hooks, fix misc bugs (Dmitry Smirnov)</li>
<li>rbd-fuse: allow exposing single image (Stephen Taylor)</li>
<li>rbd-fuse: fix unlink (Josh Durgin)</li>
<li>rbd: improve option default behavior (Josh Durgin)</li>
<li>rbd: parallelize rbd import, export (Jason Dillaman)</li>
<li>rbd: rbd-replay utility to replay captured rbd workload traces (Adam Crume)</li>
<li>rbd: use write-back (not write-through) when caching is enabled (Jason Dillaman)</li>
<li>removed mkcephfs (deprecated since dumpling)</li>
<li>rest-api: fix help (Ailing Zhang)</li>
<li>rgw: add civetweb as default frontent on port 7490 (#9013 Yehuda Sadeh)</li>
<li>rgw: add –min-rewrite-stripe-size for object restriper (Yehuda Sadeh)</li>
<li>rgw: add powerdns hook for dynamic DNS for global clusters (Wido den Hollander)</li>
<li>rgw: add S3 bucket get location operation (Abhishek Lekshmanan)</li>
<li>rgw: allow : in S3 access key (Roman Haritonov)</li>
<li>rgw: automatically align writes to EC pool (#8442, Yehuda Sadeh)</li>
<li>rgw: bucket link uses instance id (Yehuda Sadeh)</li>
<li>rgw: cache bucket info (Yehuda Sadeh)</li>
<li>rgw: cache decoded user info (Yehuda Sadeh)</li>
<li>rgw: check entity permission for put_metadata (#8428, Yehuda Sadeh)</li>
<li>rgw: copy object data is target bucket is in a different pool (#9039, Yehuda Sadeh)</li>
<li>rgw: do not try to authenticate CORS preflight requests (#8718, Robert Hubbard, Yehuda Sadeh)</li>
<li>rgw: fix admin create user op (#8583 Ray Lv)</li>
<li>rgw: fix civetweb URL decoding (#8621, Yehuda Sadeh)</li>
<li>rgw: fix crash on swift CORS preflight request (#8586, Yehuda Sadeh)</li>
<li>rgw: fix log filename suffix (#9353 Alexandre Marangone)</li>
<li>rgw: fix memory leak following chunk read error (Yehuda Sadeh)</li>
<li>rgw: fix memory leaks (Andrey Kuznetsov)</li>
<li>rgw: fix multipart object attr regression (#8452, Yehuda Sadeh)</li>
<li>rgw: fix multipart upload (#8846, Silvain Munaut, Yehuda Sadeh)</li>
<li>rgw: fix radosgw-admin ‘show log’ command (#8553, Yehuda Sadeh)</li>
<li>rgw: fix removal of objects during object creation (Patrycja Szablowska, Yehuda Sadeh)</li>
<li>rgw: fix striping for copied objects (#9089, Yehuda Sadeh)</li>
<li>rgw: fix test for identify whether an object has a tail (#9226, Yehuda Sadeh)</li>
<li>rgw: fix URL decoding (#8702, Brian Rak)</li>
<li>rgw: fix URL escaping (Yehuda Sadeh)</li>
<li>rgw: fix usage (Abhishek Lekshmanan)</li>
<li>rgw: fix user manifest (Yehuda Sadeh)</li>
<li>rgw: fix when stripe size is not a multiple of chunk size (#8937, Yehuda Sadeh)</li>
<li>rgw: handle empty extra pool name (Yehuda Sadeh)</li>
<li>rgw: improve civetweb logging (Yehuda Sadeh)</li>
<li>rgw: improve delimited listing of bucket, misc fixes (Yehuda Sadeh)</li>
<li>rgw: improve -h (Abhishek Lekshmanan)</li>
<li>rgw: many fixes for civetweb (Yehuda Sadeh)</li>
<li>rgw: misc civetweb fixes (Yehuda Sadeh)</li>
<li>rgw: misc civetweb frontend fixes (Yehuda Sadeh)</li>
<li>rgw: object and bucket rewrite functions to allow restriping old objects (Yehuda Sadeh)</li>
<li>rgw: powerdns backend for global namespaces (Wido den Hollander)</li>
<li>rgw: prevent multiobject PUT race (Yehuda Sadeh)</li>
<li>rgw: send user manifest header (Yehuda Sadeh)</li>
<li>rgw: subuser creation fixes (#8587 Yehuda Sadeh)</li>
<li>rgw: use systemd-run from sysvinit script (JuanJose Galvez)</li>
<li>rpm: do not restart daemons on upgrade (Alfredo Deza)</li>
<li>rpm: misc packaging fixes for rhel7 (Sandon Van Ness)</li>
<li>rpm: split ceph-common from ceph (Sandon Van Ness)</li>
<li>systemd: initial systemd config files (Federico Simoncelli)</li>
<li>systemd: wrap started daemons in new systemd environment (Sage Weil, Dan Mick)</li>
<li>sysvinit: add support for non-default cluster names (Alfredo Deza)</li>
<li>sysvinit: less sensitive to failures (Sage Weil)</li>
<li>test_librbd_fsx: test krbd as well as librbd (Ilya Dryomov)</li>
<li>unit test improvements (Loic Dachary)</li>
<li>upstart: increase max open files limit (Sage Weil)</li>
<li>vstart.sh: fix/improve rgw support (Luis Pabon, Abhishek Lekshmanan)</li>
</ul>
</div>
</div>
<div class="section" id="v0-86">
<h1>v0.86<a class="headerlink" href="#v0-86" title="Permalink to this headline">¶</a></h1>
<p>This is a release candidate for Giant, which will hopefully be out
in another week or two.  We did a feature freeze about a month ago
and since then have been doing only stabilization and bug fixing (and
a handful on low-risk enhancements).  A fair bit of new functionality
went into the final sprint, but it’s baked for quite a while now and
we’re feeling pretty good about it.</p>
<p>Major items include:</p>
<ul class="simple">
<li>librados locking refactor to improve scaling and client performance</li>
<li>local recovery code (LRC) erasure code plugin to trade some
additional storage overhead for improved recovery performance</li>
<li>LTTNG tracing framework, with initial tracepoints in librados,
librbd, and the OSD FileStore backend</li>
<li>separate monitor audit log for all administrative commands</li>
<li>asynchronous monitor transaction commits to reduce the impact on
monitor read requests while processing updates</li>
<li>low-level tool for working with individual OSD data stores for
debugging, recovery, and testing</li>
<li>many MDS improvements (bug fixes, health reporting)</li>
</ul>
<p>There are still a handful of known bugs in this release, but nothing
severe enough to prevent a release.  By and large we are pretty
pleased with the stability and expect the final Giant release to be
quite reliable.</p>
<p>Please try this out on your non-production clusters for a preview</p>
<div class="section" id="id2">
<h2>Notable Changes<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>buffer: improve rebuild_page_aligned (Ma Jianpeng)</li>
<li>build: fix CentOS 5 (Gerben Meijer)</li>
<li>build: fix build on alpha (Michael Cree, Dmitry Smirnov)</li>
<li>build: fix yasm check for x32 (Daniel Schepler, Sage Weil)</li>
<li>ceph-disk: add Scientific Linux support (Dan van der Ster)</li>
<li>ceph-fuse, libcephfs: fix crash in trim_caps (John Spray)</li>
<li>ceph-fuse, libcephfs: improve cap trimming (John Spray)</li>
<li>ceph-fuse, libcephfs: virtual xattrs for rstat (Yan, Zheng)</li>
<li>ceph.conf: update sample (Sebastien Han)</li>
<li>ceph.spec: many fixes (Erik Logtenberg, Boris Ranto, Dan Mick, Sandon Van Ness)</li>
<li>ceph_objectstore_tool: vastly improved and extended tool for working offline with OSD data stores (David Zafman)</li>
<li>common: add config diff admin socket command (Joao Eduardo Luis)</li>
<li>common: add rwlock assertion checks (Yehuda Sadeh)</li>
<li>crush: clean up CrushWrapper interface (Xioaxi Chen)</li>
<li>crush: make ruleset ids unique (Xiaoxi Chen, Loic Dachary)</li>
<li>doc: improve manual install docs (Francois Lafont)</li>
<li>doc: misc updates (John Wilkins, Loic Dachary, David Moreau Simard, Wido den Hollander. Volker Voigt, Alfredo Deza, Stephen Jahl, Dan van der Ster)</li>
<li>global: write pid file even when running in foreground (Alexandre Oliva)</li>
<li>hadoop: improve tests (Huamin Chen, Greg Farnum, John Spray)</li>
<li>journaler: fix locking (Zheng, Yan)</li>
<li>librados, osd: return ETIMEDOUT on failed notify (Sage Weil)</li>
<li>librados: fix crash on read op timeout (#9362 Matthias Kiefer, Sage Weil)</li>
<li>librados: fix shutdown race (#9130 Sage Weil)</li>
<li>librados: fix watch reregistration on acting set change (#9220 Samuel Just)</li>
<li>librados: fix watch/notify test (#7934 David Zafman)</li>
<li>librados: give Objecter fine-grained locks (Yehuda Sadeh, Sage Weil, John Spray)</li>
<li>librados: lttng tracepoitns (Adam Crume)</li>
<li>librados: pybind: fix reads when 0 is present (#9547 Mohammad Salehe)</li>
<li>librbd: enforce cache size on read requests (Jason Dillaman)</li>
<li>librbd: handle blacklisting during shutdown (#9105 John Spray)</li>
<li>librbd: lttng tracepoints (Adam Crume)</li>
<li>lttng: tracing infrastructure (Noah Watkins, Adam Crume)</li>
<li>mailmap: updates (Loic Dachary, Abhishek Lekshmanan, M Ranga Swami Reddy)</li>
<li>many many coverity fixes, cleanups (Danny Al-Gaaf)</li>
<li>mds: adapt to new Objecter locking, give types to all Contexts (John Spray)</li>
<li>mds: add internal health checks (John Spray)</li>
<li>mds: avoid tight mon reconnect loop (#9428 Sage Weil)</li>
<li>mds: fix crash killing sessions (#9173 John Spray)</li>
<li>mds: fix ctime updates (#9514 Greg Farnum)</li>
<li>mds: fix replay locking (Yan, Zheng)</li>
<li>mds: fix standby-replay cache trimming (#8648 Zheng, Yan)</li>
<li>mds: give perfcounters meaningful names (Sage Weil)</li>
<li>mds: improve health reporting to monitor (John Spray)</li>
<li>mds: improve journal locking (Zheng, Yan)</li>
<li>mds: make max file recoveries tunable (Sage Weil)</li>
<li>mds: prioritize file recovery when appropriate (Sage Weil)</li>
<li>mds: refactor beacon, improve reliability (John Spray)</li>
<li>mds: restart on EBLACKLISTED (John Spray)</li>
<li>mds: track RECALL progress, report failure (#9284 John Spray)</li>
<li>mds: update segment references during journal write (John Spray, Greg Farnum)</li>
<li>mds: use meaningful names for clients (John Spray)</li>
<li>mds: warn clients which aren’t revoking caps (Zheng, Yan, John Spray)</li>
<li>mon: add ‘osd reweight-by-pg’ command (Sage Weil, Guang Yang)</li>
<li>mon: add audit log for all admin commands (Joao Eduardo Luis)</li>
<li>mon: add cluster fingerprint (Sage Weil)</li>
<li>mon: avoid creating unnecessary rule on pool create (#9304 Loic Dachary)</li>
<li>mon: do not spam log (Aanchal Agrawal, Sage Weil)</li>
<li>mon: fix ‘osd perf’ reported latency (#9269 Samuel Just)</li>
<li>mon: fix double-free of old MOSDBoot (Sage Weil)</li>
<li>mon: fix op write latency perfcounter (#9217 Xinxin Shu)</li>
<li>mon: fix store check on startup (Joao Eduardo Luis)</li>
<li>mon: make paxos transaction commits asynchronous (Sage Weil)</li>
<li>mon: preload erasure plugins (#9153 Loic Dachary)</li>
<li>mon: prevent cache pools from being used directly by CephFS (#9435 John Spray)</li>
<li>mon: use user-provided ruleset for replicated pool (Xiaoxi Chen)</li>
<li>mon: verify available disk space on startup (#9502 Joao Eduardo Luis)</li>
<li>mon: verify erasure plugin version on load (Loic Dachary)</li>
<li>msgr: fix logged address (Yongyue Sun)</li>
<li>osd: account for hit_set_archive bytes (Sage Weil)</li>
<li>osd: add ISA erasure plugin table cache (Andreas-Joachim Peters)</li>
<li>osd: add ability to prehash filestore directories (Guang Yang)</li>
<li>osd: add feature bit for erasure plugins (Loic Dachary)</li>
<li>osd: add local recovery code (LRC) erasure plugin (Loic Dachary)</li>
<li>osd: cap hit_set size (#9339 Samuel Just)</li>
<li>osd: clear FDCache on unlink (#8914 Loic Dachary)</li>
<li>osd: do not evict blocked objects (#9285 Zhiqiang Wang)</li>
<li>osd: fix ISA erasure alignment (Loic Dachary, Andreas-Joachim Peters)</li>
<li>osd: fix clone vs cache_evict bug (#8629 Sage Weil)</li>
<li>osd: fix crash from duplicate backfill reservation (#8863 Sage Weil)</li>
<li>osd: fix dead peer connection checks (#9295 Greg Farnum, Sage Weil)</li>
<li>osd: fix keyvaluestore scrub (#8589 Haomai Wang)</li>
<li>osd: fix keyvaluestore upgrade (Haomai Wang)</li>
<li>osd: fix min_read_recency_for_promote default on upgrade (Zhiqiang Wang)</li>
<li>osd: fix mount/remount sync race (#9144 Sage Weil)</li>
<li>osd: fix purged_snap initialization on backfill (Sage Weil, Samuel Just, Dan van der Ster, Florian Haas)</li>
<li>osd: fix race condition on object deletion (#9480 Somnath Roy)</li>
<li>osd: fix snap object writeback from cache tier (#9054 Samuel Just)</li>
<li>osd: improve journal shutdown (Ma Jianpeng, Mark Kirkwood)</li>
<li>osd: improve locking in OpTracker (Pavan Rallabhandi, Somnath Roy)</li>
<li>osd: improve tiering agent arithmetic (Zhiqiang Wang, Sage Weil, Samuel Just)</li>
<li>osd: lttng tracepoints for filestore (Noah Watkins)</li>
<li>osd: make blacklist encoding deterministic (#9211 Sage Weil)</li>
<li>osd: many many important fixes (#8231 #8315 #9113 #9179 #9293 #9294 #9326 #9453 #9481 #9482 #9497 #9574 Samuel Just)</li>
<li>osd: misc erasure code plugin fixes (Loic Dachary)</li>
<li>osd: preload erasure plugins (#9153 Loic Dachary)</li>
<li>osd: shard OpTracker to improve performance (Somnath Roy)</li>
<li>osd: use local time for tiering decisions (Zhiqiang Wang)</li>
<li>osd: verify erasure plugin version on load (Loic Dachary)</li>
<li>rados: fix bench write arithmetic (Jiangheng)</li>
<li>rbd: parallelize rbd import, export (Jason Dillaman)</li>
<li>rbd: rbd-replay utility to replay captured rbd workload traces (Adam Crume)</li>
<li>rbd: use write-back (not write-through) when caching is enabled (Jason Dillaman)</li>
<li>rgw: add S3 bucket get location operation (Abhishek Lekshmanan)</li>
<li>rgw: add civetweb as default frontent on port 7490 (#9013 Yehuda Sadeh)</li>
<li>rgw: allow : in S3 access key (Roman Haritonov)</li>
<li>rgw: fix admin create user op (#8583 Ray Lv)</li>
<li>rgw: fix log filename suffix (#9353 Alexandre Marangone)</li>
<li>rgw: fix usage (Abhishek Lekshmanan)</li>
<li>rgw: many fixes for civetweb (Yehuda Sadeh)</li>
<li>rgw: subuser creation fixes (#8587 Yehuda Sadeh)</li>
<li>rgw: use systemd-run from sysvinit script (JuanJose Galvez)</li>
<li>unit test improvements (Loic Dachary)</li>
<li>vstart.sh: fix/improve rgw support (Luis Pabon, Abhishek Lekshmanan)</li>
</ul>
</div>
</div>
<div class="section" id="v0-85">
<h1>v0.85<a class="headerlink" href="#v0-85" title="Permalink to this headline">¶</a></h1>
<p>This is the second-to-last development release before Giant that
contains new functionality.  The big items to land during this cycle
are the messenger refactoring from Matt Benjmain that lays some
groundwork for RDMA support, a performance improvement series from
SanDisk that improves performance on SSDs, lots of improvements to our
new standalone civetweb-based RGW frontend, and a new ‘osd blocked-by’
mon command that allows admins to easily identify which OSDs are
blocking peering progress.  The other big change is that the OSDs and
Monitors now distinguish between “misplaced” and “degraded” objects:
the latter means there are fewer copies than we’d like, while the
former simply means the are not stored in the locations where we want
them to be.</p>
<p>Also of note is a change to librbd that enables client-side caching by
default.  This is coupled with another option that makes the cache
write-through until a “flush” operations is observed: this implies
that the librbd user (usually a VM guest OS) supports barriers and
flush and that it is safe for the cache to switch into writeback mode
without compromising data safety or integrity.  It has long been
recommended practice that these options be enabled (e.g., in OpenStack
environments) but until now it has not been the default.</p>
<p>We have frozen the tree for the looming Giant release, and the next
development release will be a release candidate with a final batch of
new functionality.</p>
<div class="section" id="id3">
<h2>Upgrading<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p class="first">The client-side caching for librbd is now enabled by default (rbd
cache = true).  A safety option (rbd cache writethrough until flush
= true) is also enabled so that writeback caching is not used until
the library observes a ‘flush’ command, indicating that the librbd
users is passing that operation through from the guest VM.  This
avoids potential data loss when used with older versions of qemu
that do not support flush.</p>
<blockquote>
<div><p>leveldb_write_buffer_size = 32*1024*1024  = 33554432  // 32MB
leveldb_cache_size        = 512*1024*1204 = 536870912 // 512MB
leveldb_block_size        = 64*1024       = 65536     // 64KB
leveldb_compression       = false
leveldb_log               = “”</p>
</div></blockquote>
<p>OSDs will still maintain the following osd-specific defaults:</p>
<blockquote>
<div><p>leveldb_log               = “”</p>
</div></blockquote>
</li>
<li><p class="first">The ‘rados getxattr …’ command used to add a gratuitous newline to the attr
value; it now does not.</p>
</li>
</ul>
</div>
<div class="section" id="id4">
<h2>Notable Changes<a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>ceph-disk: do not inadvertantly create directories (Owne Synge)</li>
<li>ceph-disk: fix dmcrypt support (Sage Weil)</li>
<li>ceph-disk: linter cleanup, logging improvements (Alfredo Deza)</li>
<li>ceph-disk: show information about dmcrypt in ‘ceph-disk list’ output (Sage Weil)</li>
<li>ceph-disk: use partition type UUIDs and blkid (Sage Weil)</li>
<li>ceph: fix for non-default cluster names (#8944, Dan Mick)</li>
<li>doc: document new upstream wireshark dissector (Kevin Cox)</li>
<li>doc: many install doc updates (John Wilkins)</li>
<li>librados: fix lock leaks in error paths (#9022, Paval Rallabhandi)</li>
<li>librados: fix pool existence check (#8835, Pavan Rallabhandi)</li>
<li>librbd: enable caching by default (Sage Weil)</li>
<li>librbd: fix crash using clone of flattened image (#8845, Josh Durgin)</li>
<li>librbd: store and retrieve snapshot metadata based on id (Josh Durgin)</li>
<li>mailmap: many updates (Loic Dachary)</li>
<li>mds: add min/max UID for snapshot creation/deletion (#9029, Wido den Hollander)</li>
<li>misc build errors/warnings for Fedora 20 (Boris Ranto)</li>
<li>mon: add ‘osd blocked-by’ command to easily see which OSDs are blocking peering progress (Sage Weil)</li>
<li>mon: add perfcounters for paxos operations (Sage Weil)</li>
<li>mon: create default EC profile if needed (Loic Dachary)</li>
<li>mon: fix crash on loopback messages and paxos timeouts (#9062, Sage Weil)</li>
<li>mon: fix divide by zero when pg_num is adjusted before OSDs are added (#9101, Sage Weil)</li>
<li>mon: fix occasional memory leak after session reset (#9176, Sage Weil)</li>
<li>mon: fix ruleset/ruleid bugs (#9044, Loic Dachary)</li>
<li>mon: make usage dumps in terms of bytes, not kB (Sage Weil)</li>
<li>mon: prevent implicit destruction of OSDs with ‘osd setmaxosd …’ (#8865, Anand Bhat)</li>
<li>mon: verify all quorum members are contiguous at end of Paxos round (#9053, Sage Weil)</li>
<li>msgr: refactor to cleanly separate SimpleMessenger implemenetation, move toward Connection-based calls (Matt Benjamin, Sage Wei)</li>
<li>objectstore: clean up KeyValueDB interface for key/value backends (Sage Weil)</li>
<li>osd: add local_mtime for use by cache agent (Zhiqiang Wang)</li>
<li>osd: add superblock for KeyValueStore backend (Haomai Wang)</li>
<li>osd: add support for Intel ISA-L erasure code library (Andreas-Joachim Peters)</li>
<li>osd: do not skip promote for write-ordered reads (#9064, Samuel Just)</li>
<li>osd: fix ambigous encoding order for blacklisted clients (#9211, Sage Weil)</li>
<li>osd: fix cache flush corner case for snapshotted objects (#9054, Samuel Just)</li>
<li>osd: fix discard of old/obsolete subop replies (#9259, Samuel Just)</li>
<li>osd: fix discard of peer messages from previous intervals (Greg Farnum)</li>
<li>osd: fix dump of open fds on EMFILE (Sage Weil)</li>
<li>osd: fix journal dump (Ma Jianpeng)</li>
<li>osd: fix mon feature bit requirements bug and resulting log spam (Sage Weil)</li>
<li>osd: fix recovery chunk size usage during EC recovery (Ma Jianpeng)</li>
<li>osd: fix recovery reservation deadlock for EC pools (Samuel Just)</li>
<li>osd: fix removal of old xattrs when overwriting chained xattrs (Ma Jianpeng)</li>
<li>osd: fix requesting queueing on PG split (Samuel Just)</li>
<li>osd: force new xattrs into leveldb if fs returns E2BIG (#7779, Sage Weil)</li>
<li>osd: implement alignment on chunk sizes (Loic Dachary)</li>
<li>osd: improve prioritization of recovery of degraded over misplaced objects (Sage Weil)</li>
<li>osd: locking, sharding, caching improvements in FileStore’s FDCache (Somnath Roy, Greg Farnum)</li>
<li>osd: many important bug fixes (Samuel Just)</li>
<li>osd, mon: add rocksdb support (Xinxin Shu, Sage Weil)</li>
<li>osd, mon: distinguish between “misplaced” and “degraded” objects in cluster health and PG state reporting (Sage Weil)</li>
<li>osd: refactor some ErasureCode functionality into command parent class (Loic Dachary)</li>
<li>osd: set rollback_info_completed on create (#8625, Samuel Just)</li>
<li>rados: allow setxattr value to be read from stdin (Sage Weil)</li>
<li>rados: drop gratuitous n from getxattr command (Sage Weil)</li>
<li>rgw: add –min-rewrite-stripe-size for object restriper (Yehuda Sadeh)</li>
<li>rgw: add powerdns hook for dynamic DNS for global clusters (Wido den Hollander)</li>
<li>rgw: copy object data is target bucket is in a different pool (#9039, Yehuda Sadeh)</li>
<li>rgw: do not try to authenticate CORS preflight requests (#8718, Robert Hubbard, Yehuda Sadeh)</li>
<li>rgw: fix civetweb URL decoding (#8621, Yehuda Sadeh)</li>
<li>rgw: fix removal of objects during object creation (Patrycja Szablowska, Yehuda Sadeh)</li>
<li>rgw: fix striping for copied objects (#9089, Yehuda Sadeh)</li>
<li>rgw: fix test for identify whether an object has a tail (#9226, Yehuda Sadeh)</li>
<li>rgw: fix when stripe size is not a multiple of chunk size (#8937, Yehuda Sadeh)</li>
<li>rgw: improve civetweb logging (Yehuda Sadeh)</li>
<li>rgw: misc civetweb frontend fixes (Yehuda Sadeh)</li>
<li>sysvinit: add support for non-default cluster names (Alfredo Deza)</li>
</ul>
</div>
</div>
<div class="section" id="v0-84">
<h1>v0.84<a class="headerlink" href="#v0-84" title="Permalink to this headline">¶</a></h1>
<p>The next Ceph development release is here!  This release contains
several meaty items, including some MDS improvements for journaling,
the ability to remove the CephFS file system (and name it), several
mon cleanups with tiered pools, several OSD performance branches, a
new “read forward” RADOS caching mode, a prototype Kinetic OSD
backend, and various radosgw improvements (especially with the new
standalone civetweb frontend).  And there are a zillion OSD bug
fixes. Things are looking pretty good for the Giant release that is
coming up in the next month.</p>
<div class="section" id="id5">
<h2>Upgrading<a class="headerlink" href="#id5" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>The <code class="docutils literal notranslate"><span class="pre">*_kb</span> <span class="pre">perf</span></code> counters on the monitor have been removed.  These are
replaced with a new set of <code class="docutils literal notranslate"><span class="pre">*_bytes</span></code> counters (e.g., <code class="docutils literal notranslate"><span class="pre">cluster_osd_kb</span></code> is
replaced by <code class="docutils literal notranslate"><span class="pre">cluster_osd_bytes</span></code>).</li>
<li>The <code class="docutils literal notranslate"><span class="pre">rd_kb</span></code> and <code class="docutils literal notranslate"><span class="pre">wr_kb</span></code> fields in the JSON dumps for pool stats (accessed
via the <code class="docutils literal notranslate"><span class="pre">ceph</span> <span class="pre">df</span> <span class="pre">detail</span> <span class="pre">-f</span> <span class="pre">json-pretty</span></code> and related commands) have been
replaced with corresponding <code class="docutils literal notranslate"><span class="pre">*_bytes</span></code> fields.  Similarly, the
<code class="docutils literal notranslate"><span class="pre">total_space</span></code>, <code class="docutils literal notranslate"><span class="pre">total_used</span></code>, and <code class="docutils literal notranslate"><span class="pre">total_avail</span></code> fields are replaced with
<code class="docutils literal notranslate"><span class="pre">total_bytes</span></code>, <code class="docutils literal notranslate"><span class="pre">total_used_bytes</span></code>,  and <code class="docutils literal notranslate"><span class="pre">total_avail_bytes</span></code> fields.</li>
<li>The <code class="docutils literal notranslate"><span class="pre">rados</span> <span class="pre">df</span> <span class="pre">--format=json</span></code> output <code class="docutils literal notranslate"><span class="pre">read_bytes</span></code> and <code class="docutils literal notranslate"><span class="pre">write_bytes</span></code>
fields were incorrectly reporting ops; this is now fixed.</li>
<li>The <code class="docutils literal notranslate"><span class="pre">rados</span> <span class="pre">df</span> <span class="pre">--format=json</span></code> output previously included <code class="docutils literal notranslate"><span class="pre">read_kb</span></code> and
<code class="docutils literal notranslate"><span class="pre">write_kb</span></code> fields; these have been removed.  Please use <code class="docutils literal notranslate"><span class="pre">read_bytes</span></code> and
<code class="docutils literal notranslate"><span class="pre">write_bytes</span></code> instead (and divide by 1024 if appropriate).</li>
</ul>
</div>
<div class="section" id="id6">
<h2>Notable Changes<a class="headerlink" href="#id6" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>ceph-conf: flush log on exit (Sage Weil)</li>
<li>ceph-dencoder: refactor build a bit to limit dependencies (Sage Weil, Dan Mick)</li>
<li>ceph.spec: split out ceph-common package, other fixes (Sandon Van Ness)</li>
<li>ceph_test_librbd_fsx: fix RNG, make deterministic (Ilya Dryomov)</li>
<li>cephtool: refactor and improve CLI tests (Joao Eduardo Luis)</li>
<li>client: improved MDS session dumps (John Spray)</li>
<li>common: fix dup log messages (#9080, Sage Weil)</li>
<li>crush: include new tunables in dump (Sage Weil)</li>
<li>crush: only require rule features if the rule is used (#8963, Sage Weil)</li>
<li>crushtool: send output to stdout, not stderr (Wido den Hollander)</li>
<li>fix i386 builds (Sage Weil)</li>
<li>fix struct vs class inconsistencies (Thorsten Behrens)</li>
<li>hadoop: update hadoop tests for Hadoop 2.0 (Haumin Chen)</li>
<li>librbd, ceph-fuse: reduce cache flush overhead (Haomai Wang)</li>
<li>librbd: fix error path when opening image (#8912, Josh Durgin)</li>
<li>mds: add file system name, enabled flag (John Spray)</li>
<li>mds: boot refactor, cleanup (John Spray)</li>
<li>mds: fix journal conversion with standby-replay (John Spray)</li>
<li>mds: separate inode recovery queue (John Spray)</li>
<li>mds: session ls, evict commands (John Spray)</li>
<li>mds: submit log events in async thread (Yan, Zheng)</li>
<li>mds: use client-provided timestamp for user-visible file metadata (Yan, Zheng)</li>
<li>mds: validate journal header on load and save (John Spray)</li>
<li>misc build fixes for OS X (John Spray)</li>
<li>misc integer size cleanups (Kevin Cox)</li>
<li>mon: add get-quota commands (Joao Eduardo Luis)</li>
<li>mon: do not create file system by default (John Spray)</li>
<li>mon: fix ‘ceph df’ output for available space (Xiaoxi Chen)</li>
<li>mon: fix bug when no auth keys are present (#8851, Joao Eduardo Luis)</li>
<li>mon: fix compat version for MForward (Joao Eduardo Luis)</li>
<li>mon: restrict some pool properties to tiered pools (Joao Eduardo Luis)</li>
<li>msgr: misc locking fixes for fast dispatch (#8891, Sage Weil)</li>
<li>osd: add ‘dump_reservations’ admin socket command (Sage Weil)</li>
<li>osd: add READFORWARD caching mode (Luis Pabon)</li>
<li>osd: add header cache for KeyValueStore (Haomai Wang)</li>
<li>osd: add prototype KineticStore based on Seagate Kinetic (Josh Durgin)</li>
<li>osd: allow map cache size to be adjusted at runtime (Sage Weil)</li>
<li>osd: avoid refcounting overhead by passing a few things by ref (Somnath Roy)</li>
<li>osd: avoid sharing PG info that is not durable (Samuel Just)</li>
<li>osd: clear slow request latency info on osd up/down (Sage Weil)</li>
<li>osd: fix PG object listing/ordering bug (Guang Yang)</li>
<li>osd: fix PG stat errors with tiering (#9082, Sage Weil)</li>
<li>osd: fix bug with long object names and rename (#8701, Sage Weil)</li>
<li>osd: fix cache full -&gt; not full requeueing (#8931, Sage Weil)</li>
<li>osd: fix gating of messages from old OSD instances (Greg Farnum)</li>
<li>osd: fix memstore bugs with collection_move_rename, lock ordering (Sage Weil)</li>
<li>osd: improve locking for KeyValueStore (Haomai Wang)</li>
<li>osd: make tiering behave if hit_sets aren’t enabled (Sage Weil)</li>
<li>osd: mark pools with incomplete clones (Sage Weil)</li>
<li>osd: misc locking fixes for fast dispatch (Samuel Just, Ma Jianpeng)</li>
<li>osd: prevent old rados clients from using tiered pools (#8714, Sage Weil)</li>
<li>osd: reduce OpTracker overhead (Somnath Roy)</li>
<li>osd: set configurable hard limits on object and xattr names (Sage Weil, Haomai Wang)</li>
<li>osd: trim old EC objects quickly; verify on scrub (Samuel Just)</li>
<li>osd: work around GCC 4.8 bug in journal code (Matt Benjamin)</li>
<li>rados bench: fix arg order (Kevin Dalley)</li>
<li>rados: fix {read,write}_ops values for df output (Sage Weil)</li>
<li>rbd: add rbdmap pre- and post post- hooks, fix misc bugs (Dmitry Smirnov)</li>
<li>rbd: improve option default behavior (Josh Durgin)</li>
<li>rgw: automatically align writes to EC pool (#8442, Yehuda Sadeh)</li>
<li>rgw: fix crash on swift CORS preflight request (#8586, Yehuda Sadeh)</li>
<li>rgw: fix memory leaks (Andrey Kuznetsov)</li>
<li>rgw: fix multipart upload (#8846, Silvain Munaut, Yehuda Sadeh)</li>
<li>rgw: improve -h (Abhishek Lekshmanan)</li>
<li>rgw: improve delimited listing of bucket, misc fixes (Yehuda Sadeh)</li>
<li>rgw: misc civetweb fixes (Yehuda Sadeh)</li>
<li>rgw: powerdns backend for global namespaces (Wido den Hollander)</li>
<li>systemd: initial systemd config files (Federico Simoncelli)</li>
</ul>
</div>
</div>
<div class="section" id="v0-83">
<h1>v0.83<a class="headerlink" href="#v0-83" title="Permalink to this headline">¶</a></h1>
<p>Another Ceph development release!  This has been a longer cycle, so
there has been quite a bit of bug fixing and stabilization in this
round.  There is also a bunch of packaging fixes for RPM distros
(RHEL/CentOS, Fedora, and SUSE) and for systemd.  We’ve also added a new
librados-striper library from Sebastien Ponce that provides a generic
striping API for applications to code to.</p>
<div class="section" id="id7">
<h2>Upgrading<a class="headerlink" href="#id7" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p class="first">The experimental keyvaluestore-dev OSD backend had an on-disk format
change that prevents existing OSD data from being upgraded.  This
affects developers and testers only.</p>
</li>
<li><p class="first">mon-specific and osd-specific leveldb options have been removed.
From this point onward users should use the <cite>leveldb_*</cite> generic
options and add the options in the appropriate sections of their
configuration files.  Monitors will still maintain the following
monitor-specific defaults:</p>
<blockquote>
<div><p>leveldb_write_buffer_size = 32*1024*1024  = 33554432  // 32MB
leveldb_cache_size        = 512*1024*1204 = 536870912 // 512MB
leveldb_block_size        = 64*1024       = 65536     // 64KB
leveldb_compression       = false
leveldb_log               = “”</p>
</div></blockquote>
<p>OSDs will still maintain the following osd-specific defaults:</p>
<blockquote>
<div><p>leveldb_log               = “”</p>
</div></blockquote>
</li>
</ul>
</div>
<div class="section" id="id8">
<h2>Notable Changes<a class="headerlink" href="#id8" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>ceph-disk: fix dmcrypt support (Stephen Taylor)</li>
<li>cephtool: fix help (Yilong Zhao)</li>
<li>cephtool: test cleanup (Joao Eduardo Luis)</li>
<li>doc: librados example fixes (Kevin Dalley)</li>
<li>doc: many doc updates (John Wilkins)</li>
<li>doc: update erasure docs (Loic Dachary, Venky Shankar)</li>
<li>filestore: disable use of XFS hint (buggy on old kernels) (Samuel Just)</li>
<li>filestore: fix xattr spillout (Greg Farnum, Haomai Wang)</li>
<li>keyvaluestore: header cache (Haomai Wang)</li>
<li>librados_striper: striping library for librados (Sebastien Ponce)</li>
<li>libs3: update to latest (Danny Al-Gaaf)</li>
<li>log: fix derr level (Joao Eduardo Luis)</li>
<li>logrotate: fix osd log rotation on ubuntu (Sage Weil)</li>
<li>mds: fix xattr bug triggered by ACLs (Yan, Zheng)</li>
<li>misc memory leaks, cleanups, fixes (Danny Al-Gaaf, Sahid Ferdjaoui)</li>
<li>misc suse fixes (Danny Al-Gaaf)</li>
<li>misc word size fixes (Kevin Cox)</li>
<li>mon: drop mon- and osd- specific leveldb options (Joao Eduardo Luis)</li>
<li>mon: ec pool profile fixes (Loic Dachary)</li>
<li>mon: fix health down messages (Sage Weil)</li>
<li>mon: fix quorum feature check (#8738, Greg Farnum)</li>
<li>mon: ‘osd crush reweight-subtree …’ (Sage Weil)</li>
<li>mon, osd: relax client EC support requirements (Sage Weil)</li>
<li>mon: some instrumentation (Sage Weil)</li>
<li>objecter: flag operations that are redirected by caching (Sage Weil)</li>
<li>osd: clean up shard_id_t, shard_t (Loic Dachary)</li>
<li>osd: fix connection reconnect race (Greg Farnum)</li>
<li>osd: fix dumps (Joao Eduardo Luis)</li>
<li>osd: fix erasure-code lib initialization (Loic Dachary)</li>
<li>osd: fix extent normalization (Adam Crume)</li>
<li>osd: fix loopback msgr issue (Ma Jianpeng)</li>
<li>osd: fix LSB release parsing (Danny Al-Gaaf)</li>
<li>osd: improved backfill priorities (Sage Weil)</li>
<li>osd: many many core fixes (Samuel Just)</li>
<li>osd, mon: config sanity checks on start (Sage Weil, Joao Eduardo Luis)</li>
<li>osd: sharded threadpool to improve parallelism (Somnath Roy)</li>
<li>osd: simple io prioritization for scrub (Sage Weil)</li>
<li>osd: simple scrub throttling (Sage Weil)</li>
<li>osd: tests for bench command (Loic Dachary)</li>
<li>osd: use xfs hint less frequently (Ilya Dryomov)</li>
<li>pybind/rados: fix small timeouts (John Spray)</li>
<li>qa: xfstests updates (Ilya Dryomov)</li>
<li>rgw: cache bucket info (Yehuda Sadeh)</li>
<li>rgw: cache decoded user info (Yehuda Sadeh)</li>
<li>rgw: fix multipart object attr regression (#8452, Yehuda Sadeh)</li>
<li>rgw: fix radosgw-admin ‘show log’ command (#8553, Yehuda Sadeh)</li>
<li>rgw: fix URL decoding (#8702, Brian Rak)</li>
<li>rgw: handle empty extra pool name (Yehuda Sadeh)</li>
<li>rpm: do not restart daemons on upgrade (Alfredo Deza)</li>
<li>rpm: misc packaging fixes for rhel7 (Sandon Van Ness)</li>
<li>rpm: split ceph-common from ceph (Sandon Van Ness)</li>
<li>systemd: wrap started daemons in new systemd environment (Sage Weil, Dan Mick)</li>
<li>sysvinit: less sensitive to failures (Sage Weil)</li>
<li>upstart: increase max open files limit (Sage Weil)</li>
</ul>
</div>
</div>
<div class="section" id="v0-82">
<h1>v0.82<a class="headerlink" href="#v0-82" title="Permalink to this headline">¶</a></h1>
<p>This is the second post-firefly development release.  It includes a range
of bug fixes and some usability improvements.  There are some MDS debugging
and diagnostic tools, an improved ‘ceph df’, and some OSD backend refactoring
and cleanup.</p>
<div class="section" id="id9">
<h2>Notable Changes<a class="headerlink" href="#id9" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>ceph-brag: add tox tests (Alfredo Deza)</li>
<li>common: perfcounters now use atomics and go faster (Sage Weil)</li>
<li>doc: CRUSH updates (John Wilkins)</li>
<li>doc: osd primary affinity (John Wilkins)</li>
<li>doc: pool quotas (John Wilkins)</li>
<li>doc: pre-flight doc improvements (Kevin Dalley)</li>
<li>doc: switch to an unencumbered font (Ross Turk)</li>
<li>doc: update openstack docs (Josh Durgin)</li>
<li>fix hppa arch build (Dmitry Smirnov)</li>
<li>init-ceph: continue starting other daemons on crush or mount failure (#8343, Sage Weil)</li>
<li>keyvaluestore: fix hint crash (#8381, Haomai Wang)</li>
<li>libcephfs-java: build against older JNI headers (Greg Farnum)</li>
<li>librados: fix rados_pool_list bounds checks (Sage Weil)</li>
<li>mds: cephfs-journal-tool (John Spray)</li>
<li>mds: improve Journaler on-disk format (John Spray)</li>
<li>mds, libcephfs: use client timestamp for mtime/ctime (Sage Weil)</li>
<li>mds: misc encoding improvements (John Spray)</li>
<li>mds: misc fixes for multi-mds (Yan, Zheng)</li>
<li>mds: OPTracker integration, dump_ops_in_flight (Greg Farnum)</li>
<li>misc cleanup (Christophe Courtaut)</li>
<li>mon: fix default replication pool ruleset choice (#8373, John Spray)</li>
<li>mon: fix set cache_target_full_ratio (#8440, Geoffrey Hartz)</li>
<li>mon: include per-pool ‘max avail’ in df output (Sage Weil)</li>
<li>mon: prevent EC pools from being used with cephfs (Joao Eduardo Luis)</li>
<li>mon: restore original weight when auto-marked out OSDs restart (Sage Weil)</li>
<li>mon: use msg header tid for MMonGetVersionReply (Ilya Dryomov)</li>
<li>osd: fix bogus assert during OSD shutdown (Sage Weil)</li>
<li>osd: fix clone deletion case (#8334, Sam Just)</li>
<li>osd: fix filestore removal corner case (#8332, Sam Just)</li>
<li>osd: fix hang waiting for osdmap (#8338, Greg Farnum)</li>
<li>osd: fix interval check corner case during peering (#8104, Sam Just)</li>
<li>osd: fix journal-less operation (Sage Weil)</li>
<li>osd: include backend information in metadata reported to mon (Sage Weil)</li>
<li>rest-api: fix help (Ailing Zhang)</li>
<li>rgw: check entity permission for put_metadata (#8428, Yehuda Sadeh)</li>
</ul>
</div>
</div>
<div class="section" id="v0-81">
<h1>v0.81<a class="headerlink" href="#v0-81" title="Permalink to this headline">¶</a></h1>
<p>This is the first development release since Firefly.  It includes a
lot of work that we delayed merging while stabilizing things.  Lots of
new functionality, as well as several fixes that are baking a bit before
getting backported.</p>
<div class="section" id="id10">
<h2>Upgrading<a class="headerlink" href="#id10" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p class="first">CephFS support for the legacy anchor table has finally been removed.
Users with file systems created before firefly should ensure that inodes
with multiple hard links are modified <em>prior</em> to the upgrade to ensure that
the backtraces are written properly.  For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">find</span> <span class="o">/</span><span class="n">mnt</span><span class="o">/</span><span class="n">cephfs</span> <span class="o">-</span><span class="nb">type</span> <span class="n">f</span> <span class="o">-</span><span class="n">links</span> <span class="o">+</span><span class="mi">1</span> <span class="o">-</span><span class="n">exec</span> <span class="n">touch</span> \<span class="p">{</span>\<span class="p">}</span> \<span class="p">;</span>
</pre></div>
</div>
</li>
<li><p class="first">Disallow nonsensical ‘tier cache-mode’ transitions.  From this point
onward, ‘writeback’ can only transition to ‘forward’ and ‘forward’
can transition to 1) ‘writeback’ if there are dirty objects, or 2) any if
there are no dirty objects.</p>
</li>
</ul>
</div>
<div class="section" id="id11">
<h2>Notable Changes<a class="headerlink" href="#id11" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>bash completion improvements (Wido den Hollander)</li>
<li>brag: fixes, improvements (Loic Dachary)</li>
<li>ceph-disk: handle corrupt volumes (Stuart Longlang)</li>
<li>ceph-disk: partprobe as needed (Eric Eastman)</li>
<li>ceph-fuse, libcephfs: asok hooks for handling session resets, timeouts (Yan, Zheng)</li>
<li>ceph-fuse, libcephfs: improve traceless reply handling (Sage Weil)</li>
<li>clang build fixes (John Spray, Danny Al-Gaaf)</li>
<li>config: support G, M, K, etc. suffixes (Joao Eduardo Luis)</li>
<li>coverity cleanups (Danny Al-Gaaf)</li>
<li>doc: cache tiering (John Wilkins)</li>
<li>doc: keystone integration docs (John Wilkins)</li>
<li>doc: updated simple configuration guides (John Wilkins)</li>
<li>libcephfs-java: fix gcj-jdk build (Dmitry Smirnov)</li>
<li>librbd: check error code on cache invalidate (Josh Durgin)</li>
<li>librbd: new libkrbd library for kernel map/unmap/showmapped (Ilya Dryomov)</li>
<li>Makefile: fix out of source builds (Stefan Eilemann)</li>
<li>mds: multi-mds fixes (Yan, Zheng)</li>
<li>mds: remove legacy anchor table (Yan, Zheng)</li>
<li>mds: remove legacy discover ino (Yan, Zheng)</li>
<li>monclient: fix hang (Sage Weil)</li>
<li>mon: prevent nonsensical cache-mode transitions (Joao Eduardo Luis)</li>
<li>msgr: avoid big lock when sending (most) messages (Greg Farnum)</li>
<li>osd: bound osdmap epoch skew between PGs (Sage Weil)</li>
<li>osd: cache tier flushing fixes for snapped objects (Samuel Just)</li>
<li>osd: fix agent early finish looping (David Zafman)</li>
<li>osd: fix flush vs OpContext (Samuel Just)</li>
<li>osd: fix MarkMeDown and other shutdown races (Sage Weil)</li>
<li>osd: fix scrub vs cache bugs (Samuel Just)</li>
<li>osd: fix trim of hitsets (Sage Weil)</li>
<li>osd, msgr: fast-dispatch of OSD ops (Greg Farnum, Samuel Just)</li>
<li>osd, objecter: resend ops on last_force_op_resend barrier; fix cache overlay op ordering (Sage Weil)</li>
<li>osd: remove obsolete classic scrub code (David Zafman)</li>
<li>osd: scrub PGs with invalid stats (Sage Weil)</li>
<li>osd: simple snap trimmer throttle (Sage Weil)</li>
<li>osd: use FIEMAP to inform copy_range (Haomai Wang)</li>
<li>rbd-fuse: allow exposing single image (Stephen Taylor)</li>
<li>rbd-fuse: fix unlink (Josh Durgin)</li>
<li>removed mkcephfs (deprecated since dumpling)</li>
<li>rgw: bucket link uses instance id (Yehuda Sadeh)</li>
<li>rgw: fix memory leak following chunk read error (Yehuda Sadeh)</li>
<li>rgw: fix URL escaping (Yehuda Sadeh)</li>
<li>rgw: fix user manifest (Yehuda Sadeh)</li>
<li>rgw: object and bucket rewrite functions to allow restriping old objects (Yehuda Sadeh)</li>
<li>rgw: prevent multiobject PUT race (Yehuda Sadeh)</li>
<li>rgw: send user manifest header (Yehuda Sadeh)</li>
<li>test_librbd_fsx: test krbd as well as librbd (Ilya Dryomov)</li>
</ul>
</div>
</div>



          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../../">
              <img class="logo" src="../../_static/logo.png" alt="Logo"/>
            </a></p>
<h3><a href="../../">Table Of Contents</a></h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../start/intro/">Ceph 简介</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../start/">安装（ ceph-deploy ）</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../install/">安装（手动）</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../rados/">Ceph 存储集群</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../cephfs/">Ceph 文件系统</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../rbd/rbd/">Ceph 块设备</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../radosgw/">Ceph 对象网关</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../mgr/">Ceph 管理器守护进程</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api/">API 文档</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../architecture/">体系结构</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../dev/">开发文档</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../dev/internals/">Ceph Internals</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../ceph-volume/">ceph-volume</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../">Ceph 版本</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="../#ceph-releases">发布目录</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../schedule/">发布时间表</a></li>
<li class="toctree-l3"><a class="reference internal" href="../#id2">活跃版本</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="../#id3">归档版本</a><ul class="current">
<li class="toctree-l4 current"><a class="reference internal" href="../archived-index/">归档版本目录</a><ul class="current">
<li class="toctree-l5"><a class="reference internal" href="../kraken/">v11.2.1 Kraken</a></li>
<li class="toctree-l5"><a class="reference internal" href="../kraken/#v11-2-0-kraken">v11.2.0 Kraken</a></li>
<li class="toctree-l5"><a class="reference internal" href="../kraken/#v11-0-2-kraken">v11.0.2 Kraken</a></li>
<li class="toctree-l5"><a class="reference internal" href="../infernalis/">v9.2.1 Infernalis</a></li>
<li class="toctree-l5"><a class="reference internal" href="../infernalis/#v9-2-0-infernalis">v9.2.0 Infernalis</a></li>
<li class="toctree-l5"><a class="reference internal" href="../infernalis/#v9-1-0-infernalis-release-candidate">v9.1.0 Infernalis release candidate</a></li>
<li class="toctree-l5"><a class="reference internal" href="../infernalis/#v9-0-3">v9.0.3</a></li>
<li class="toctree-l5"><a class="reference internal" href="../infernalis/#v9-0-2">v9.0.2</a></li>
<li class="toctree-l5"><a class="reference internal" href="../infernalis/#v9-0-1">v9.0.1</a></li>
<li class="toctree-l5"><a class="reference internal" href="../infernalis/#v9-0-0">v9.0.0</a></li>
<li class="toctree-l5"><a class="reference internal" href="../hammer/">v0.94.10 Hammer</a></li>
<li class="toctree-l5"><a class="reference internal" href="../hammer/#v0-94-9-hammer">v0.94.9 Hammer</a></li>
<li class="toctree-l5"><a class="reference internal" href="../hammer/#v0-94-8-hammer">v0.94.8 Hammer</a></li>
<li class="toctree-l5"><a class="reference internal" href="../hammer/#v0-94-7-hammer">v0.94.7 Hammer</a></li>
<li class="toctree-l5"><a class="reference internal" href="../hammer/#v0-94-6-hammer">v0.94.6 Hammer</a></li>
<li class="toctree-l5"><a class="reference internal" href="../hammer/#v0-94-5-hammer">v0.94.5 Hammer</a></li>
<li class="toctree-l5"><a class="reference internal" href="../hammer/#v0-94-4-hammer">v0.94.4 Hammer</a></li>
<li class="toctree-l5"><a class="reference internal" href="../hammer/#v0-94-3-hammer">v0.94.3 Hammer</a></li>
<li class="toctree-l5"><a class="reference internal" href="../hammer/#v0-94-2-hammer">v0.94.2 Hammer</a></li>
<li class="toctree-l5"><a class="reference internal" href="../hammer/#v0-94-1-hammer">v0.94.1 Hammer</a></li>
<li class="toctree-l5"><a class="reference internal" href="../hammer/#v0-94-hammer">v0.94 Hammer</a></li>
<li class="toctree-l5"><a class="reference internal" href="../hammer/#v0-93">v0.93</a></li>
<li class="toctree-l5"><a class="reference internal" href="../hammer/#v0-92">v0.92</a></li>
<li class="toctree-l5"><a class="reference internal" href="../hammer/#v0-91">v0.91</a></li>
<li class="toctree-l5"><a class="reference internal" href="../hammer/#v0-90">v0.90</a></li>
<li class="toctree-l5"><a class="reference internal" href="../hammer/#v0-89">v0.89</a></li>
<li class="toctree-l5"><a class="reference internal" href="../hammer/#v0-88">v0.88</a></li>
<li class="toctree-l5 current"><a class="current reference internal" href="#">v0.87.2 Giant</a><ul>
<li class="toctree-l6"><a class="reference internal" href="#notable-changes">Notable Changes</a></li>
</ul>
</li>
<li class="toctree-l5"><a class="reference internal" href="#v0-87-1-giant">v0.87.1 Giant</a><ul>
<li class="toctree-l6"><a class="reference internal" href="#upgrading">Upgrading</a></li>
<li class="toctree-l6"><a class="reference internal" href="#id1">Notable Changes</a></li>
</ul>
</li>
<li class="toctree-l5"><a class="reference internal" href="#v0-87-giant">v0.87 Giant</a><ul>
<li class="toctree-l6"><a class="reference internal" href="#upgrade-sequencing">Upgrade Sequencing</a></li>
<li class="toctree-l6"><a class="reference internal" href="#upgrading-from-v0-80x-firefly">Upgrading from v0.80x Firefly</a></li>
<li class="toctree-l6"><a class="reference internal" href="#notable-changes-since-v0-86">Notable Changes since v0.86</a></li>
<li class="toctree-l6"><a class="reference internal" href="#notable-changes-since-v0-80-x-firefly">Notable Changes since v0.80.x Firefly</a></li>
</ul>
</li>
<li class="toctree-l5"><a class="reference internal" href="#v0-86">v0.86</a><ul>
<li class="toctree-l6"><a class="reference internal" href="#id2">Notable Changes</a></li>
</ul>
</li>
<li class="toctree-l5"><a class="reference internal" href="#v0-85">v0.85</a><ul>
<li class="toctree-l6"><a class="reference internal" href="#id3">Upgrading</a></li>
<li class="toctree-l6"><a class="reference internal" href="#id4">Notable Changes</a></li>
</ul>
</li>
<li class="toctree-l5"><a class="reference internal" href="#v0-84">v0.84</a><ul>
<li class="toctree-l6"><a class="reference internal" href="#id5">Upgrading</a></li>
<li class="toctree-l6"><a class="reference internal" href="#id6">Notable Changes</a></li>
</ul>
</li>
<li class="toctree-l5"><a class="reference internal" href="#v0-83">v0.83</a><ul>
<li class="toctree-l6"><a class="reference internal" href="#id7">Upgrading</a></li>
<li class="toctree-l6"><a class="reference internal" href="#id8">Notable Changes</a></li>
</ul>
</li>
<li class="toctree-l5"><a class="reference internal" href="#v0-82">v0.82</a><ul>
<li class="toctree-l6"><a class="reference internal" href="#id9">Notable Changes</a></li>
</ul>
</li>
<li class="toctree-l5"><a class="reference internal" href="#v0-81">v0.81</a><ul>
<li class="toctree-l6"><a class="reference internal" href="#id10">Upgrading</a></li>
<li class="toctree-l6"><a class="reference internal" href="#id11">Notable Changes</a></li>
</ul>
</li>
<li class="toctree-l5"><a class="reference internal" href="../firefly/">v0.80.11 Firefly</a></li>
<li class="toctree-l5"><a class="reference internal" href="../firefly/#v0-80-10-firefly">v0.80.10 Firefly</a></li>
<li class="toctree-l5"><a class="reference internal" href="../firefly/#v0-80-9-firefly">v0.80.9 Firefly</a></li>
<li class="toctree-l5"><a class="reference internal" href="../firefly/#v0-80-8-firefly">v0.80.8 Firefly</a></li>
<li class="toctree-l5"><a class="reference internal" href="../firefly/#v0-80-7-firefly">v0.80.7 Firefly</a></li>
<li class="toctree-l5"><a class="reference internal" href="../firefly/#v0-80-6-firefly">v0.80.6 Firefly</a></li>
<li class="toctree-l5"><a class="reference internal" href="../firefly/#v0-80-5-firefly">v0.80.5 Firefly</a></li>
<li class="toctree-l5"><a class="reference internal" href="../firefly/#v0-80-4-firefly">v0.80.4 Firefly</a></li>
<li class="toctree-l5"><a class="reference internal" href="../firefly/#v0-80-3-firefly">v0.80.3 Firefly</a></li>
<li class="toctree-l5"><a class="reference internal" href="../firefly/#v0-80-2-firefly">v0.80.2 Firefly</a></li>
<li class="toctree-l5"><a class="reference internal" href="../firefly/#v0-80-1-firefly">v0.80.1 Firefly</a></li>
<li class="toctree-l5"><a class="reference internal" href="../firefly/#v0-80-firefly">v0.80 Firefly</a></li>
<li class="toctree-l5"><a class="reference internal" href="../firefly/#v0-79">v0.79</a></li>
<li class="toctree-l5"><a class="reference internal" href="../firefly/#v0-78">v0.78</a></li>
<li class="toctree-l5"><a class="reference internal" href="../firefly/#v0-77">v0.77</a></li>
<li class="toctree-l5"><a class="reference internal" href="../firefly/#v0-76">v0.76</a></li>
<li class="toctree-l5"><a class="reference internal" href="../firefly/#v0-75">v0.75</a></li>
<li class="toctree-l5"><a class="reference internal" href="../firefly/#v0-74">v0.74</a></li>
<li class="toctree-l5"><a class="reference internal" href="../firefly/#v0-73">v0.73</a></li>
<li class="toctree-l5"><a class="reference internal" href="../emperor/">v0.72.3 Emperor (pending release)</a></li>
<li class="toctree-l5"><a class="reference internal" href="../emperor/#v0-72-2-emperor">v0.72.2 Emperor</a></li>
<li class="toctree-l5"><a class="reference internal" href="../emperor/#v0-72-1-emperor">v0.72.1 Emperor</a></li>
<li class="toctree-l5"><a class="reference internal" href="../emperor/#v0-72-emperor">v0.72 Emperor</a></li>
<li class="toctree-l5"><a class="reference internal" href="../emperor/#v0-71">v0.71</a></li>
<li class="toctree-l5"><a class="reference internal" href="../emperor/#v0-70">v0.70</a></li>
<li class="toctree-l5"><a class="reference internal" href="../emperor/#v0-69">v0.69</a></li>
<li class="toctree-l5"><a class="reference internal" href="../emperor/#v0-68">v0.68</a></li>
<li class="toctree-l5"><a class="reference internal" href="../dumpling/">v0.67.12 “Dumpling” (draft)</a></li>
<li class="toctree-l5"><a class="reference internal" href="../dumpling/#v0-67-11-dumpling">v0.67.11 “Dumpling”</a></li>
<li class="toctree-l5"><a class="reference internal" href="../dumpling/#v0-67-10-dumpling">v0.67.10 “Dumpling”</a></li>
<li class="toctree-l5"><a class="reference internal" href="../dumpling/#v0-67-9-dumpling">v0.67.9 “Dumpling”</a></li>
<li class="toctree-l5"><a class="reference internal" href="../dumpling/#v0-67-8-dumpling">v0.67.8 “Dumpling”</a></li>
<li class="toctree-l5"><a class="reference internal" href="../dumpling/#v0-67-7-dumpling">v0.67.7 “Dumpling”</a></li>
<li class="toctree-l5"><a class="reference internal" href="../dumpling/#v0-67-6-dumpling">v0.67.6 “Dumpling”</a></li>
<li class="toctree-l5"><a class="reference internal" href="../dumpling/#v0-67-5-dumpling">v0.67.5 “Dumpling”</a></li>
<li class="toctree-l5"><a class="reference internal" href="../dumpling/#v0-67-4-dumpling">v0.67.4 “Dumpling”</a></li>
<li class="toctree-l5"><a class="reference internal" href="../dumpling/#v0-67-3-dumpling">v0.67.3 “Dumpling”</a></li>
<li class="toctree-l5"><a class="reference internal" href="../dumpling/#v0-67-2-dumpling">v0.67.2 “Dumpling”</a></li>
<li class="toctree-l5"><a class="reference internal" href="../dumpling/#v0-67-1-dumpling">v0.67.1 “Dumpling”</a></li>
<li class="toctree-l5"><a class="reference internal" href="../dumpling/#v0-67-dumpling">v0.67 “Dumpling”</a></li>
<li class="toctree-l5"><a class="reference internal" href="../dumpling/#v0-66">v0.66</a></li>
<li class="toctree-l5"><a class="reference internal" href="../dumpling/#v0-65">v0.65</a></li>
<li class="toctree-l5"><a class="reference internal" href="../dumpling/#v0-64">v0.64</a></li>
<li class="toctree-l5"><a class="reference internal" href="../dumpling/#v0-63">v0.63</a></li>
<li class="toctree-l5"><a class="reference internal" href="../dumpling/#v0-62">v0.62</a></li>
<li class="toctree-l5"><a class="reference internal" href="../cuttlefish/">v0.61.9 “Cuttlefish”</a></li>
<li class="toctree-l5"><a class="reference internal" href="../cuttlefish/#v0-61-8-cuttlefish">v0.61.8 “Cuttlefish”</a></li>
<li class="toctree-l5"><a class="reference internal" href="../cuttlefish/#v0-61-7-cuttlefish">v0.61.7 “Cuttlefish”</a></li>
<li class="toctree-l5"><a class="reference internal" href="../cuttlefish/#v0-61-6-cuttlefish">v0.61.6 “Cuttlefish”</a></li>
<li class="toctree-l5"><a class="reference internal" href="../cuttlefish/#v0-61-5-cuttlefish">v0.61.5 “Cuttlefish”</a></li>
<li class="toctree-l5"><a class="reference internal" href="../cuttlefish/#v0-61-4-cuttlefish">v0.61.4 “Cuttlefish”</a></li>
<li class="toctree-l5"><a class="reference internal" href="../cuttlefish/#v0-61-3-cuttlefish">v0.61.3 “Cuttlefish”</a></li>
<li class="toctree-l5"><a class="reference internal" href="../cuttlefish/#v0-61-2-cuttlefish">v0.61.2 “Cuttlefish”</a></li>
<li class="toctree-l5"><a class="reference internal" href="../cuttlefish/#v0-61-1-cuttlefish">v0.61.1 “Cuttlefish”</a></li>
<li class="toctree-l5"><a class="reference internal" href="../cuttlefish/#v0-61-cuttlefish">v0.61 “Cuttlefish”</a></li>
<li class="toctree-l5"><a class="reference internal" href="../cuttlefish/#v0-60">v0.60</a></li>
<li class="toctree-l5"><a class="reference internal" href="../cuttlefish/#v0-59">v0.59</a></li>
<li class="toctree-l5"><a class="reference internal" href="../cuttlefish/#v0-58">v0.58</a></li>
<li class="toctree-l5"><a class="reference internal" href="../cuttlefish/#v0-57">v0.57</a></li>
<li class="toctree-l5"><a class="reference internal" href="../bobtail/">v0.56.7 “bobtail”</a></li>
<li class="toctree-l5"><a class="reference internal" href="../bobtail/#v0-56-6-bobtail">v0.56.6 “bobtail”</a></li>
<li class="toctree-l5"><a class="reference internal" href="../bobtail/#v0-56-5-bobtail">v0.56.5 “bobtail”</a></li>
<li class="toctree-l5"><a class="reference internal" href="../bobtail/#v0-56-4-bobtail">v0.56.4 “bobtail”</a></li>
<li class="toctree-l5"><a class="reference internal" href="../bobtail/#v0-56-3-bobtail">v0.56.3 “bobtail”</a></li>
<li class="toctree-l5"><a class="reference internal" href="../bobtail/#v0-56-2-bobtail">v0.56.2 “bobtail”</a></li>
<li class="toctree-l5"><a class="reference internal" href="../bobtail/#v0-56-1-bobtail">v0.56.1 “bobtail”</a></li>
<li class="toctree-l5"><a class="reference internal" href="../bobtail/#v0-56-bobtail">v0.56 “bobtail”</a></li>
<li class="toctree-l5"><a class="reference internal" href="../bobtail/#v0-54">v0.54</a></li>
<li class="toctree-l5"><a class="reference internal" href="../argonaut/">v0.48.3 “argonaut”</a></li>
<li class="toctree-l5"><a class="reference internal" href="../argonaut/#v0-48-2-argonaut">v0.48.2 “argonaut”</a></li>
<li class="toctree-l5"><a class="reference internal" href="../argonaut/#v0-48-1-argonaut">v0.48.1 “argonaut”</a></li>
<li class="toctree-l5"><a class="reference internal" href="../argonaut/#v0-48-argonaut">v0.48 “argonaut”</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../glossary/">Ceph 术语</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../translation_cn/">中文版翻译资源</a></li>
</ul>


<!-- ugly kludge to make genindex look like it's part of the toc -->
<ul style="margin-top: -10px"><li class="toctree-l1"><a class="reference internal" href="../../genindex/">Index</a></li></ul>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search/" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex/" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../../py-modindex/" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="../firefly/" title="v0.80.11 Firefly"
             >next</a> |</li>
        <li class="right" >
          <a href="../hammer/" title="v0.94.10 Hammer"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../">Ceph Documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../" >Ceph 版本</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="../archived-index/" >归档的版本</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2016, Red Hat, Inc, and contributors. Licensed under Creative Commons Attribution Share Alike 3.0 (CC-BY-SA-3.0).
    </div>
  </body>
</html>