
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>v9.2.1 Infernalis &#8212; Ceph Documentation</title>
    <link rel="stylesheet" href="../../_static/nature.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../_static/graphviz.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/custom.css" />
    <script id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/language_data.js"></script>
    <script src="../../_static/js/ceph.js"></script>
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../../genindex/" />
    <link rel="search" title="Search" href="../../search/" />
    <link rel="next" title="v0.94.10 Hammer" href="../hammer/" />
    <link rel="prev" title="v10.2.11 Jewel" href="../jewel/" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex/" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../py-modindex/" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="../hammer/" title="v0.94.10 Hammer"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="../jewel/" title="v10.2.11 Jewel"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../">Ceph Documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../" >Ceph 版本（索引）</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="../archived-index/" accesskey="U">归档的版本</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            

<div id="dev-warning" class="admonition note" style="display:none;">
  <p class="first admonition-title">Notice</p>
  <p class="last">This document is for a development version of Ceph.</p>
</div>

<div id="eol-warning" class="admonition warning" style="display:none;">
  <p class="first admonition-title">Warning</p>
  <p class="last">This document is for an unsupported version of Ceph.</p>
</div>
  <div id="docubetter" align="right" style="display:none; padding: 15px; font-weight: bold;">
    <a id="edit-on-github" href="https://github.com/ceph/ceph/edit/master/doc/releases/infernalis.rst" rel="nofollow">Edit on GitHub</a> | <a href="https://pad.ceph.com/p/Report_Documentation_Bugs">Report a Documentation Bug</a>
  </div>

  
  <div class="section" id="v9-2-1-infernalis">
<span id="infernalis-release-notes"></span><h1>v9.2.1 Infernalis<a class="headerlink" href="#v9-2-1-infernalis" title="Permalink to this headline">¶</a></h1>
<p>This Infernalis point release fixes several packagins and init script
issues, enables the librbd objectmap feature by default, a few librbd
bugs, and a range of miscellaneous bug fixes across the system.</p>
<p>We recommend that all infernalis v9.2.0 users upgrade.</p>
<p>For more detailed information, see <a class="reference download internal" download="" href="../../_downloads/eafab576c8d97646479e04b4375a61f8/v9.2.1.txt"><code class="xref download docutils literal notranslate"><span class="pre">the</span> <span class="pre">complete</span> <span class="pre">changelog</span></code></a>.</p>
<div class="section" id="upgrading">
<h2>Upgrading<a class="headerlink" href="#upgrading" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>Some symbols wrongly exposed by the C++ interface for librados in
v9.1.0 and v9.2.0 were removed.  If you compiled your own
application against librados shipped with these releases, it is very
likely referencing these removed symbols. So you will need to
recompile it.</p></li>
</ul>
</div>
<div class="section" id="notable-changes">
<h2>Notable Changes<a class="headerlink" href="#notable-changes" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>build/ops: Ceph daemon failed to start, because the service name was already used. (<a class="reference external" href="http://tracker.ceph.com/issues/13474">issue#13474</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/6833">pr#6833</a>, Chuanhong Wang)</p></li>
<li><p>build/ops: ceph upstart script rbdmap.conf incorrectly processes parameters (<a class="reference external" href="http://tracker.ceph.com/issues/13214">issue#13214</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/6396">pr#6396</a>, Sage Weil)</p></li>
<li><p>build/ops: libunwind package missing on CentOS 7 (<a class="reference external" href="http://tracker.ceph.com/issues/13997">issue#13997</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/6845">pr#6845</a>, Loic Dachary)</p></li>
<li><p>build/ops: rbd-replay-* moved from ceph-test-dbg to ceph-common-dbg as well (<a class="reference external" href="http://tracker.ceph.com/issues/13785">issue#13785</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/6628">pr#6628</a>, Loic Dachary)</p></li>
<li><p>build/ops: systemd/ceph-disk&#64;.service assumes /bin/flock (<a class="reference external" href="http://tracker.ceph.com/issues/13975">issue#13975</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/6852">pr#6852</a>, Loic Dachary)</p></li>
<li><p>build/ops: systemd: no rbdmap systemd unit file (<a class="reference external" href="http://tracker.ceph.com/issues/13374">issue#13374</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/6500">pr#6500</a>, Boris Ranto)</p></li>
<li><p>common: auth/cephx: large amounts of log are produced by osd (<a class="reference external" href="http://tracker.ceph.com/issues/13610">issue#13610</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/6836">pr#6836</a>, Qiankun Zheng)</p></li>
<li><p>common: log: Log.cc: Assign LOG_DEBUG priority to syslog calls (<a class="reference external" href="http://tracker.ceph.com/issues/13993">issue#13993</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/6993">pr#6993</a>, Brad Hubbard)</p></li>
<li><p>crush: crash if we see CRUSH_ITEM_NONE in early rule step (<a class="reference external" href="http://tracker.ceph.com/issues/13477">issue#13477</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/6626">pr#6626</a>, Sage Weil)</p></li>
<li><p>fs: Ceph file system is not freeing space (<a class="reference external" href="http://tracker.ceph.com/issues/13777">issue#13777</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/7431">pr#7431</a>, Yan, Zheng, John Spray)</p></li>
<li><p>fs: Ceph-fuse won’t start correctly when the option log_max_new in ceph.conf set to zero (<a class="reference external" href="http://tracker.ceph.com/issues/13443">issue#13443</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/6395">pr#6395</a>, Wenjun Huang)</p></li>
<li><p>fs: Segmentation fault accessing file using fuse mount (<a class="reference external" href="http://tracker.ceph.com/issues/13714">issue#13714</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/6853">pr#6853</a>, Yan, Zheng)</p></li>
<li><p>librbd: Avoid re-writing old-format image header on resize (<a class="reference external" href="http://tracker.ceph.com/issues/13674">issue#13674</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/6630">pr#6630</a>, Jason Dillaman)</p></li>
<li><p>librbd: ImageWatcher shouldn’t block the notification thread (<a class="reference external" href="http://tracker.ceph.com/issues/14373">issue#14373</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/7406">pr#7406</a>, Jason Dillaman)</p></li>
<li><p>librbd: QEMU hangs after creating snapshot and stopping VM (<a class="reference external" href="http://tracker.ceph.com/issues/13726">issue#13726</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/6632">pr#6632</a>, Jason Dillaman)</p></li>
<li><p>librbd: Verify self-managed snapshot functionality on image create (<a class="reference external" href="http://tracker.ceph.com/issues/13633">issue#13633</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/7080">pr#7080</a>, Jason Dillaman)</p></li>
<li><p>librbd: [ FAILED ] TestLibRBD.SnapRemoveViaLockOwner (<a class="reference external" href="http://tracker.ceph.com/issues/14164">issue#14164</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/7079">pr#7079</a>, Jason Dillaman)</p></li>
<li><p>librbd: enable feature objectmap (<a class="reference external" href="http://tracker.ceph.com/issues/13558">issue#13558</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/6477">pr#6477</a>, xinxin shu)</p></li>
<li><p>librbd: fix merge-diff for &gt;2GB diff-files (<a class="reference external" href="http://tracker.ceph.com/issues/14030">issue#14030</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/6981">pr#6981</a>, Jason Dillaman)</p></li>
<li><p>librbd: flattening an rbd image with active IO can lead to hang (<a class="reference external" href="http://tracker.ceph.com/issues/14092">issue#14092</a>, <a class="reference external" href="http://tracker.ceph.com/issues/14483">issue#14483</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/7484">pr#7484</a>, Jason Dillaman)</p></li>
<li><p>mds: fix client capabilities during reconnect (client.XXXX isn’t responding to mclientcaps warning) (<a class="reference external" href="http://tracker.ceph.com/issues/11482">issue#11482</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/6752">pr#6752</a>, Yan, Zheng)</p></li>
<li><p>mon: Ceph Pools’ MAX AVAIL is 0 if some OSDs’ weight is 0 (<a class="reference external" href="http://tracker.ceph.com/issues/13840">issue#13840</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/6907">pr#6907</a>, Chengyuan Li)</p></li>
<li><p>mon: should not set isvalid = true when cephx_verify_authorizer retur… (<a class="reference external" href="http://tracker.ceph.com/issues/13525">issue#13525</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/6392">pr#6392</a>, Ruifeng Yang)</p></li>
<li><p>objecter: pool op callback may hang forever. (<a class="reference external" href="http://tracker.ceph.com/issues/13642">issue#13642</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/6627">pr#6627</a>, xie xingguo)</p></li>
<li><p>objecter: potential null pointer access when do pool_snap_list. (<a class="reference external" href="http://tracker.ceph.com/issues/13639">issue#13639</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/6840">pr#6840</a>, xie xingguo)</p></li>
<li><p>osd: FileStore: potential memory leak if getattrs fails. (<a class="reference external" href="http://tracker.ceph.com/issues/13597">issue#13597</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/6846">pr#6846</a>, xie xingguo)</p></li>
<li><p>osd: OSD::build_past_intervals_parallel() shall reset primary and up_primary when begin a new past_interval. (<a class="reference external" href="http://tracker.ceph.com/issues/13471">issue#13471</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/6397">pr#6397</a>, xiexingguo)</p></li>
<li><p>osd: call on_new_interval on newly split child PG (<a class="reference external" href="http://tracker.ceph.com/issues/13962">issue#13962</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/6849">pr#6849</a>, Sage Weil)</p></li>
<li><p>osd: ceph-disk list fails on /dev/cciss!c0d0 (<a class="reference external" href="http://tracker.ceph.com/issues/13970">issue#13970</a>, <a class="reference external" href="http://tracker.ceph.com/issues/14230">issue#14230</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/6880">pr#6880</a>, Loic Dachary)</p></li>
<li><p>osd: ceph-disk: use blkid instead of sgdisk -i (<a class="reference external" href="http://tracker.ceph.com/issues/14080">issue#14080</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/7001">pr#7001</a>, Loic Dachary, Ilya Dryomov)</p></li>
<li><p>osd: fix race condition during send_failures (<a class="reference external" href="http://tracker.ceph.com/issues/13821">issue#13821</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/6694">pr#6694</a>, Sage Weil)</p></li>
<li><p>osd: osd/PG.cc: 288: FAILED assert(info.last_epoch_started &gt;= info.history.last_epoch_started) (<a class="reference external" href="http://tracker.ceph.com/issues/14015">issue#14015</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/6851">pr#6851</a>, David Zafman)</p></li>
<li><p>osd: pgs stuck inconsistent after infernalis upgrade (<a class="reference external" href="http://tracker.ceph.com/issues/13862">issue#13862</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/7421">pr#7421</a>, David Zafman)</p></li>
<li><p>rbd: TaskFinisher::cancel should remove event from SafeTimer (<a class="reference external" href="http://tracker.ceph.com/issues/14476">issue#14476</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/7426">pr#7426</a>, Douglas Fuller)</p></li>
<li><p>rbd: cls_rbd: object_map_save should enable checksums (<a class="reference external" href="http://tracker.ceph.com/issues/14280">issue#14280</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/7428">pr#7428</a>, Douglas Fuller)</p></li>
<li><p>rbd: misdirected op in rbd balance-reads test (<a class="reference external" href="http://tracker.ceph.com/issues/13491">issue#13491</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/6629">pr#6629</a>, Jason Dillaman)</p></li>
<li><p>rbd: pure virtual method called (<a class="reference external" href="http://tracker.ceph.com/issues/13636">issue#13636</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/6633">pr#6633</a>, Jason Dillaman)</p></li>
<li><p>rbd: rbd clone issue (<a class="reference external" href="http://tracker.ceph.com/issues/13553">issue#13553</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/6474">pr#6474</a>, xinxin shu)</p></li>
<li><p>rbd: rbd-replay does not check for EOF and goes to endless loop (<a class="reference external" href="http://tracker.ceph.com/issues/14452">issue#14452</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/7427">pr#7427</a>, Mykola Golub)</p></li>
<li><p>rbd: unknown argument –quiet in udevadm settle (<a class="reference external" href="http://tracker.ceph.com/issues/13560">issue#13560</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/6634">pr#6634</a>, Jason Dillaman)</p></li>
<li><p>rgw: init script reload doesn’t work on EL7 (<a class="reference external" href="http://tracker.ceph.com/issues/13709">issue#13709</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/6650">pr#6650</a>, Hervé Rousseau)</p></li>
<li><p>rgw: radosgw-admin –help doesn’t show the orphans find command (<a class="reference external" href="http://tracker.ceph.com/issues/14516">issue#14516</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/7543">pr#7543</a>, Yehuda Sadeh)</p></li>
<li><p>tests: ceph-disk workunit uses configobj (<a class="reference external" href="http://tracker.ceph.com/issues/14004">issue#14004</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/6828">pr#6828</a>, Loic Dachary)</p></li>
<li><p>tests: fsx failed to compile (<a class="reference external" href="http://tracker.ceph.com/issues/14384">issue#14384</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/7429">pr#7429</a>, Greg Farnum)</p></li>
<li><p>tests: notification slave needs to wait for master (<a class="reference external" href="http://tracker.ceph.com/issues/13810">issue#13810</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/7225">pr#7225</a>, Jason Dillaman)</p></li>
<li><p>tests: rebuild exclusive lock test should acquire exclusive lock (<a class="reference external" href="http://tracker.ceph.com/issues/14121">issue#14121</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/7038">pr#7038</a>, Jason Dillaman)</p></li>
<li><p>tests: testprofile must be removed before it is re-created (<a class="reference external" href="http://tracker.ceph.com/issues/13664">issue#13664</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/6449">pr#6449</a>, Loic Dachary)</p></li>
<li><p>tests: verify it is possible to reuse an OSD id (<a class="reference external" href="http://tracker.ceph.com/issues/13988">issue#13988</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/6882">pr#6882</a>, Loic Dachary)</p></li>
</ul>
</div>
</div>
<div class="section" id="v9-2-0-infernalis">
<h1>v9.2.0 Infernalis<a class="headerlink" href="#v9-2-0-infernalis" title="Permalink to this headline">¶</a></h1>
<p>This major release will be the foundation for the next stable series.
There have been some major changes since v0.94.x Hammer, and the
upgrade process is non-trivial.  Please read these release notes carefully.</p>
<div class="section" id="major-changes-from-hammer">
<h2>Major Changes from Hammer<a class="headerlink" href="#major-changes-from-hammer" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p><em>General</em>:</p>
<ul>
<li><p>Ceph daemons are now managed via systemd (with the exception of
Ubuntu Trusty, which still uses upstart).</p></li>
<li><p>Ceph daemons run as ‘ceph’ user instead root.</p></li>
<li><p>On Red Hat distros, there is also an SELinux policy.</p></li>
</ul>
</li>
<li><p><em>RADOS</em>:</p>
<ul>
<li><p>The RADOS cache tier can now proxy write operations to the base
tier, allowing writes to be handled without forcing migration of
an object into the cache.</p></li>
<li><p>The SHEC erasure coding support is no longer flagged as
experimental. SHEC trades some additional storage space for faster
repair.</p></li>
<li><p>There is now a unified queue (and thus prioritization) of client
IO, recovery, scrubbing, and snapshot trimming.</p></li>
<li><p>There have been many improvements to low-level repair tooling
(ceph-objectstore-tool).</p></li>
<li><p>The internal ObjectStore API has been significantly cleaned up in order
to facilitate new storage backends like NewStore.</p></li>
</ul>
</li>
<li><p><em>RGW</em>:</p>
<ul>
<li><p>The Swift API now supports object expiration.</p></li>
<li><p>There are many Swift API compatibility improvements.</p></li>
</ul>
</li>
<li><p><em>RBD</em>:</p>
<ul>
<li><p>The <code class="docutils literal notranslate"><span class="pre">rbd</span> <span class="pre">du</span></code> command shows actual usage (quickly, when
object-map is enabled).</p></li>
<li><p>The object-map feature has seen many stability improvements.</p></li>
<li><p>Object-map and exclusive-lock features can be enabled or disabled
dynamically.</p></li>
<li><p>You can now store user metadata and set persistent librbd options
associated with individual images.</p></li>
<li><p>The new deep-flatten features allows flattening of a clone and all
of its snapshots.  (Previously snapshots could not be flattened.)</p></li>
<li><p>The export-diff command command is now faster (it uses aio).  There is also
a new fast-diff feature.</p></li>
<li><p>The –size argument can be specified with a suffix for units
(e.g., <code class="docutils literal notranslate"><span class="pre">--size</span> <span class="pre">64G</span></code>).</p></li>
<li><p>There is a new <code class="docutils literal notranslate"><span class="pre">rbd</span> <span class="pre">status</span></code> command that, for now, shows who has
the image open/mapped.</p></li>
</ul>
</li>
<li><p><em>CephFS</em>:</p>
<ul>
<li><p>You can now rename snapshots.</p></li>
<li><p>There have been ongoing improvements around administration, diagnostics,
and the check and repair tools.</p></li>
<li><p>The caching and revocation of client cache state due to unused
inodes has been dramatically improved.</p></li>
<li><p>The ceph-fuse client behaves better on 32-bit hosts.</p></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="distro-compatibility">
<h2>Distro compatibility<a class="headerlink" href="#distro-compatibility" title="Permalink to this headline">¶</a></h2>
<p>We have decided to drop support for many older distributions so that we can
move to a newer compiler toolchain (e.g., C++11).  Although it is still possible
to build Ceph on older distributions by installing backported development tools,
we are not building and publishing release packages for ceph.com.</p>
<p>We now build packages for:</p>
<ul class="simple">
<li><p>CentOS 7 or later.  We have dropped support for CentOS 6 (and other
RHEL 6 derivatives, like Scientific Linux 6).</p></li>
<li><p>Debian Jessie 8.x or later.  Debian Wheezy 7.x’s g++ has incomplete
support for C++11 (and no systemd).</p></li>
<li><p>Ubuntu Trusty 14.04 or later.  Ubuntu Precise 12.04 is no longer
supported.</p></li>
<li><p>Fedora 22 or later.</p></li>
</ul>
</div>
<div class="section" id="upgrading-from-firefly">
<h2>Upgrading from Firefly<a class="headerlink" href="#upgrading-from-firefly" title="Permalink to this headline">¶</a></h2>
<p>Upgrading directly from Firefly v0.80.z is not recommended.  It is
possible to do a direct upgrade, but not without downtime.  We
recommend that clusters are first upgraded to Hammer v0.94.4 or a
later v0.94.z release; only then is it possible to upgrade to
Infernalis 9.2.z for an online upgrade (see below).</p>
<p>To do an offline upgrade directly from Firefly, all Firefly OSDs must
be stopped and marked down before any Infernalis OSDs will be allowed
to start up.  This fencing is enforced by the Infernalis monitor, so
use an upgrade procedure like:</p>
<ol class="arabic">
<li><p>Upgrade Ceph on monitor hosts</p></li>
<li><p>Restart all ceph-mon daemons</p></li>
<li><p>Upgrade Ceph on all OSD hosts</p></li>
<li><p>Stop all ceph-osd daemons</p></li>
<li><p>Mark all OSDs down with something like:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>ceph osd down `seq 0 1000`
</pre></div>
</div>
</li>
<li><p>Start all ceph-osd daemons</p></li>
<li><p>Upgrade and restart remaining daemons (ceph-mds, radosgw)</p></li>
</ol>
</div>
<div class="section" id="upgrading-from-hammer">
<h2>Upgrading from Hammer<a class="headerlink" href="#upgrading-from-hammer" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p>All cluster nodes must first upgrade to Hammer v0.94.4 or a later v0.94.z release; only
then is it possible to upgrade to Infernalis 9.2.z.</p></li>
<li><p>For all distributions that support systemd (CentOS 7, Fedora, Debian
Jessie 8.x, OpenSUSE), ceph daemons are now managed using native systemd
files instead of the legacy sysvinit scripts.  For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">systemctl</span> <span class="n">start</span> <span class="n">ceph</span><span class="o">.</span><span class="n">target</span>       <span class="c1"># start all daemons</span>
<span class="n">systemctl</span> <span class="n">status</span> <span class="n">ceph</span><span class="o">-</span><span class="n">osd</span><span class="nd">@12</span>      <span class="c1"># check status of osd.12</span>
</pre></div>
</div>
<p>The main notable distro that is <em>not</em> yet using systemd is Ubuntu trusty
14.04.  (The next Ubuntu LTS, 16.04, will use systemd instead of upstart.)</p>
</li>
<li><p>Ceph daemons now run as user and group <code class="docutils literal notranslate"><span class="pre">ceph</span></code> by default.  The
ceph user has a static UID assigned by Fedora and Debian (also used
by derivative distributions like RHEL/CentOS and Ubuntu).  On SUSE
the ceph user will currently get a dynamically assigned UID when the
user is created.</p>
<p>If your systems already have a ceph user, upgrading the package will cause
problems.  We suggest you first remove or rename the existing ‘ceph’ user
and ‘ceph’ group before upgrading.</p>
<p>When upgrading, administrators have two options:</p>
<blockquote>
<div><ol class="arabic">
<li><p>Add the following line to <code class="docutils literal notranslate"><span class="pre">ceph.conf</span></code> on all hosts:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>setuser match path = /var/lib/ceph/$type/$cluster-$id
</pre></div>
</div>
<p>This will make the Ceph daemons run as root (i.e., not drop
privileges and switch to user ceph) if the daemon’s data
directory is still owned by root.  Newly deployed daemons will
be created with data owned by user ceph and will run with
reduced privileges, but upgraded daemons will continue to run as
root.</p>
</li>
<li><p>Fix the data ownership during the upgrade.  This is the
preferred option, but it is more work and can be very time
consuming.  The process for each host is to:</p></li>
<li><p>Upgrade the ceph package.  This creates the ceph user and group.  For
example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ceph</span><span class="o">-</span><span class="n">deploy</span> <span class="n">install</span> <span class="o">--</span><span class="n">stable</span> <span class="n">infernalis</span> <span class="n">HOST</span>
</pre></div>
</div>
<ol class="arabic">
<li><p>Stop the daemon(s):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">service</span> <span class="n">ceph</span> <span class="n">stop</span>           <span class="c1"># fedora, centos, rhel, debian</span>
<span class="n">stop</span> <span class="n">ceph</span><span class="o">-</span><span class="nb">all</span>               <span class="c1"># ubuntu</span>
</pre></div>
</div>
</li>
<li><p>Fix the ownership:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">chown</span> <span class="o">-</span><span class="n">R</span> <span class="n">ceph</span><span class="p">:</span><span class="n">ceph</span> <span class="o">/</span><span class="n">var</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">ceph</span>
<span class="n">chown</span> <span class="o">-</span><span class="n">R</span> <span class="n">ceph</span><span class="p">:</span><span class="n">ceph</span> <span class="o">/</span><span class="n">var</span><span class="o">/</span><span class="n">log</span><span class="o">/</span><span class="n">ceph</span>
</pre></div>
</div>
</li>
<li><p>Restart the daemon(s):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">start</span> <span class="n">ceph</span><span class="o">-</span><span class="nb">all</span>                <span class="c1"># ubuntu</span>
<span class="n">systemctl</span> <span class="n">start</span> <span class="n">ceph</span><span class="o">.</span><span class="n">target</span>   <span class="c1"># debian, centos, fedora, rhel</span>
</pre></div>
</div>
</li>
</ol>
<p>Alternatively, the same process can be done with a single daemon
type, for example by stopping only monitors and chowning only
<code class="docutils literal notranslate"><span class="pre">/var/lib/ceph/mon</span></code>.</p>
</li>
</ol>
</div></blockquote>
</li>
<li><p>The on-disk format for the experimental KeyValueStore OSD backend has
changed.  You will need to remove any OSDs using that backend before you
upgrade any test clusters that use it.</p></li>
<li><p>When a pool quota is reached, librados operations now block indefinitely,
the same way they do when the cluster fills up.  (Previously they would return
-ENOSPC).  By default, a full cluster or pool will now block.  If your
librados application can handle ENOSPC or EDQUOT errors gracefully, you can
get error returns instead by using the new librados OPERATION_FULL_TRY flag.</p></li>
<li><p>The return code for librbd’s rbd_aio_read and Image::aio_read API methods no
longer returns the number of bytes read upon success.  Instead, it returns 0
upon success and a negative value upon failure.</p></li>
<li><p>‘ceph scrub’, ‘ceph compact’ and ‘ceph sync force are now DEPRECATED.  Users
should instead use ‘ceph mon scrub’, ‘ceph mon compact’ and
‘ceph mon sync force’.</p></li>
<li><p>‘ceph mon_metadata’ should now be used as ‘ceph mon metadata’. There is no
need to deprecate this command (same major release since it was first
introduced).</p></li>
<li><p>The <cite>–dump-json</cite> option of “osdmaptool” is replaced by <cite>–dump json</cite>.</p></li>
<li><p>The commands of “pg ls-by-{pool,primary,osd}” and “pg ls” now take “recovering”
instead of “recovery”, to include the recovering pgs in the listed pgs.</p></li>
</ul>
</div>
<div class="section" id="notable-changes-since-hammer">
<h2>Notable Changes since Hammer<a class="headerlink" href="#notable-changes-since-hammer" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>aarch64: add optimized version of crc32c (Yazen Ghannam, Steve Capper)</p></li>
<li><p>auth: cache/reuse crypto lib key objects, optimize msg signature check (Sage Weil)</p></li>
<li><p>auth: reinit NSS after fork() (#11128 Yan, Zheng)</p></li>
<li><p>autotools: fix out of tree build (Krxysztof Kosinski)</p></li>
<li><p>autotools: improve make check output (Loic Dachary)</p></li>
<li><p>buffer: add invalidate_crc() (Piotr Dalek)</p></li>
<li><p>buffer: fix zero bug (#12252 Haomai Wang)</p></li>
<li><p>buffer: some cleanup (Michal Jarzabek)</p></li>
<li><p>build: allow tcmalloc-minimal (Thorsten Behrens)</p></li>
<li><p>build: C++11 now supported</p></li>
<li><p>build: cmake: fix nss linking (Danny Al-Gaaf)</p></li>
<li><p>build: cmake: misc fixes (Orit Wasserman, Casey Bodley)</p></li>
<li><p>build: disable LTTNG by default (#11333 Josh Durgin)</p></li>
<li><p>build: do not build ceph-dencoder with tcmalloc (#10691 Boris Ranto)</p></li>
<li><p>build: fix junit detection on Fedora 22 (Ira Cooper)</p></li>
<li><p>build: fix pg ref disabling (William A. Kennington III)</p></li>
<li><p>build: fix ppc build (James Page)</p></li>
<li><p>build: install-deps: misc fixes (Loic Dachary)</p></li>
<li><p>build: install-deps.sh improvements (Loic Dachary)</p></li>
<li><p>build: install-deps: support OpenSUSE (Loic Dachary)</p></li>
<li><p>build: make_dist_tarball.sh (Sage Weil)</p></li>
<li><p>build: many cmake improvements</p></li>
<li><p>build: misc cmake fixes (Matt Benjamin)</p></li>
<li><p>build: misc fixes (Boris Ranto, Ken Dreyer, Owen Synge)</p></li>
<li><p>build: OSX build fixes (Yan, Zheng)</p></li>
<li><p>build: remove rest-bench</p></li>
<li><p>ceph-authtool: fix return code on error (Gerhard Muntingh)</p></li>
<li><p>ceph-detect-init: added Linux Mint (Michal Jarzabek)</p></li>
<li><p>ceph-detect-init: robust init system detection (Owen Synge)</p></li>
<li><p>ceph-disk: ensure ‘zap’ only operates on a full disk (#11272 Loic Dachary)</p></li>
<li><p>ceph-disk: fix zap sgdisk invocation (Owen Synge, Thorsten Behrens)</p></li>
<li><p>ceph-disk: follow ceph-osd hints when creating journal (#9580 Sage Weil)</p></li>
<li><p>ceph-disk: handle re-using existing partition (#10987 Loic Dachary)</p></li>
<li><p>ceph-disk: improve parted output parsing (#10983 Loic Dachary)</p></li>
<li><p>ceph-disk: install pip &gt; 6.1 (#11952 Loic Dachary)</p></li>
<li><p>ceph-disk: make suppression work for activate-all and activate-journal (Dan van der Ster)</p></li>
<li><p>ceph-disk: many fixes (Loic Dachary, Alfredo Deza)</p></li>
<li><p>ceph-disk: fixes to respect init system (Loic Dachary, Owen Synge)</p></li>
<li><p>ceph-disk: pass –cluster arg on prepare subcommand (Kefu Chai)</p></li>
<li><p>ceph-disk: support for multipath devices (Loic Dachary)</p></li>
<li><p>ceph-disk: support NVMe device partitions (#11612 Ilja Slepnev)</p></li>
<li><p>ceph: fix ‘df’ units (Zhe Zhang)</p></li>
<li><p>ceph: fix parsing in interactive cli mode (#11279 Kefu Chai)</p></li>
<li><p>cephfs-data-scan: many additions, improvements (John Spray)</p></li>
<li><p>ceph-fuse: do not require successful remount when unmounting (#10982 Greg Farnum)</p></li>
<li><p>ceph-fuse, libcephfs: don’t clear COMPLETE when trimming null (Yan, Zheng)</p></li>
<li><p>ceph-fuse, libcephfs: drop inode when rmdir finishes (#11339 Yan, Zheng)</p></li>
<li><p>ceph-fuse,libcephfs: fix uninline (#11356 Yan, Zheng)</p></li>
<li><p>ceph-fuse, libcephfs: hold exclusive caps on dirs we “own” (#11226 Greg Farnum)</p></li>
<li><p>ceph-fuse: mostly behave on 32-bit hosts (Yan, Zheng)</p></li>
<li><p>ceph: improve error output for ‘tell’ (#11101 Kefu Chai)</p></li>
<li><p>ceph-monstore-tool: fix store-copy (Huangjun)</p></li>
<li><p>ceph: new ‘ceph daemonperf’ command (John Spray, Mykola Golub)</p></li>
<li><p>ceph-objectstore-tool: many many improvements (David Zafman)</p></li>
<li><p>ceph-objectstore-tool: refactoring and cleanup (John Spray)</p></li>
<li><p>ceph-post-file: misc fixes (Joey McDonald, Sage Weil)</p></li>
<li><p>ceph_test_rados: test pipelined reads (Zhiqiang Wang)</p></li>
<li><p>client: avoid sending unnecessary FLUSHSNAP messages (Yan, Zheng)</p></li>
<li><p>client: exclude setfilelock when calculating oldest tid (Yan, Zheng)</p></li>
<li><p>client: fix error handling in check_pool_perm (John Spray)</p></li>
<li><p>client: fsync waits only for inode’s caps to flush (Yan, Zheng)</p></li>
<li><p>client: invalidate kernel dcache when cache size exceeds limits (Yan, Zheng)</p></li>
<li><p>client: make fsync wait for unsafe dir operations (Yan, Zheng)</p></li>
<li><p>client: pin lookup dentry to avoid inode being freed (Yan, Zheng)</p></li>
<li><p>common: add descriptions to perfcounters (Kiseleva Alyona)</p></li>
<li><p>common: add perf counter descriptions (Alyona Kiseleva)</p></li>
<li><p>common: bufferlist performance tuning (Piotr Dalek, Sage Weil)</p></li>
<li><p>common: detect overflow of int config values (#11484 Kefu Chai)</p></li>
<li><p>common: fix bit_vector extent calc (#12611 Jason Dillaman)</p></li>
<li><p>common: fix json parsing of utf8 (#7387 Tim Serong)</p></li>
<li><p>common: fix leak of pthread_mutexattr (#11762 Ketor Meng)</p></li>
<li><p>common: fix LTTNG vs fork issue (Josh Durgin)</p></li>
<li><p>common: fix throttle max change (Henry Chang)</p></li>
<li><p>common: make mutex more efficient</p></li>
<li><p>common: make work queue addition/removal thread safe (#12662 Jason Dillaman)</p></li>
<li><p>common: optracker improvements (Zhiqiang Wang, Jianpeng Ma)</p></li>
<li><p>common: PriorityQueue tests (Kefu Chai)</p></li>
<li><p>common: some async compression infrastructure (Haomai Wang)</p></li>
<li><p>crush: add –check to validate dangling names, max osd id (Kefu Chai)</p></li>
<li><p>crush: cleanup, sync with kernel (Ilya Dryomov)</p></li>
<li><p>crush: fix crash from invalid ‘take’ argument (#11602 Shiva Rkreddy, Sage Weil)</p></li>
<li><p>crush: fix divide-by-2 in straw2 (#11357 Yann Dupont, Sage Weil)</p></li>
<li><p>crush: fix has_v4_buckets (#11364 Sage Weil)</p></li>
<li><p>crush: fix subtree base weight on adjust_subtree_weight (#11855 Sage Weil)</p></li>
<li><p>crush: respect default replicated ruleset config on map creation (Ilya Dryomov)</p></li>
<li><p>crushtool: fix order of operations, usage (Sage Weil)</p></li>
<li><p>crypto: fix NSS leak (Jason Dillaman)</p></li>
<li><p>crypto: fix unbalanced init/shutdown (#12598 Zheng Yan)</p></li>
<li><p>deb: fix rest-bench-dbg and ceph-test-dbg dependendies (Ken Dreyer)</p></li>
<li><p>debian: minor package reorg (Ken Dreyer)</p></li>
<li><p>deb, rpm: move ceph-objectstore-tool to ceph (Ken Dreyer)</p></li>
<li><p>doc: docuemnt object corpus generation (#11099 Alexis Normand)</p></li>
<li><p>doc: document region hostnames (Robin H. Johnson)</p></li>
<li><p>doc: fix gender neutrality (Alexandre Maragone)</p></li>
<li><p>doc: fix install doc (#10957 Kefu Chai)</p></li>
<li><p>doc: fix sphinx issues (Kefu Chai)</p></li>
<li><p>doc: man page updates (Kefu Chai)</p></li>
<li><p>doc: mds data structure docs (Yan, Zheng)</p></li>
<li><p>doc: misc updates (Fracois Lafont, Ken Dreyer, Kefu Chai, Owen Synge, Gael Fenet-Garde, Loic Dachary, Yannick Atchy-Dalama, Jiaying Ren, Kevin Caradant, Robert Maxime, Nicolas Yong, Germain Chipaux, Arthur Gorjux, Gabriel Sentucq, Clement Lebrun, Jean-Remi Deveaux, Clair Massot, Robin Tang, Thomas Laumondais, Jordan Dorne, Yuan Zhou, Valentin Thomas, Pierre Chaumont, Benjamin Troquereau, Benjamin Sesia, Vikhyat Umrao, Nilamdyuti Goswami, Vartika Rai, Florian Haas, Loic Dachary, Simon Guinot, Andy Allan, Alistair Israel, Ken Dreyer, Robin Rehu, Lee Revell, Florian Marsylle, Thomas Johnson, Bosse Klykken, Travis Rhoden, Ian Kelling)</p></li>
<li><p>doc: swift tempurls (#10184 Abhishek Lekshmanan)</p></li>
<li><p>doc: switch doxygen integration back to breathe (#6115 Kefu Chai)</p></li>
<li><p>doc: update release schedule docs (Loic Dachary)</p></li>
<li><p>erasure-code: cleanup (Kefu Chai)</p></li>
<li><p>erasure-code: improve tests (Loic Dachary)</p></li>
<li><p>erasure-code: shec: fix recovery bugs (Takanori Nakao, Shotaro Kawaguchi)</p></li>
<li><p>erasure-code: update ISA-L to 2.13 (Yuan Zhou)</p></li>
<li><p>gmock: switch to submodule (Danny Al-Gaaf, Loic Dachary)</p></li>
<li><p>hadoop: add terasort test (Noah Watkins)</p></li>
<li><p>init-radosgw: merge with sysv version; fix enumeration (Sage Weil)</p></li>
<li><p>java: fix libcephfs bindings (Noah Watkins)</p></li>
<li><p>libcephfs: add pread, pwrite (Jevon Qiao)</p></li>
<li><p>libcephfs,ceph-fuse: cache cleanup (Zheng Yan)</p></li>
<li><p>libcephfs,ceph-fuse: fix request resend on cap reconnect (#10912 Yan, Zheng)</p></li>
<li><p>librados: add config observer (Alistair Strachan)</p></li>
<li><p>librados: add FULL_TRY and FULL_FORCE flags for dealing with full clusters or pools (Sage Weil)</p></li>
<li><p>librados: add src_fadvise_flags for copy-from (Jianpeng Ma)</p></li>
<li><p>librados: define C++ flags from C constants (Josh Durgin)</p></li>
<li><p>librados: fadvise flags per op (Jianpeng Ma)</p></li>
<li><p>librados: fix last_force_resent handling (#11026 Jianpeng Ma)</p></li>
<li><p>librados: fix memory leak from C_TwoContexts (Xiong Yiliang)</p></li>
<li><p>librados: fix notify completion race (#13114 Sage Weil)</p></li>
<li><p>librados: fix striper when stripe_count = 1 and stripe_unit != object_size (#11120 Yan, Zheng)</p></li>
<li><p>librados, libcephfs: randomize client nonces (Josh Durgin)</p></li>
<li><p>librados: op perf counters (John Spray)</p></li>
<li><p>librados: pybind: fix binary omap values (Robin H. Johnson)</p></li>
<li><p>librados: pybind: fix write() method return code (Javier Guerra)</p></li>
<li><p>librados: respect default_crush_ruleset on pool_create (#11640 Yuan Zhou)</p></li>
<li><p>libradosstriper: fix leak (Danny Al-Gaaf)</p></li>
<li><p>librbd: add const for single-client-only features (Josh Durgin)</p></li>
<li><p>librbd: add deep-flatten operation (Jason Dillaman)</p></li>
<li><p>librbd: add purge_on_error cache behavior (Jianpeng Ma)</p></li>
<li><p>librbd: allow additional metadata to be stored with the image (Haomai Wang)</p></li>
<li><p>librbd: avoid blocking aio API methods (#11056 Jason Dillaman)</p></li>
<li><p>librbd: better handling for dup flatten requests (#11370 Jason Dillaman)</p></li>
<li><p>librbd: cancel in-flight ops on watch error (#11363 Jason Dillaman)</p></li>
<li><p>librbd: default new images to format 2 (#11348 Jason Dillaman)</p></li>
<li><p>librbd: fadvise for copy, export, import (Jianpeng Ma)</p></li>
<li><p>librbd: fast diff implementation that leverages object map (Jason Dillaman)</p></li>
<li><p>librbd: fix fast diff bugs (#11553 Jason Dillaman)</p></li>
<li><p>librbd: fix image format detection (Zhiqiang Wang)</p></li>
<li><p>librbd: fix lock ordering issue (#11577 Jason Dillaman)</p></li>
<li><p>librbd: fix reads larger than the cache size (Lu Shi)</p></li>
<li><p>librbd: fix snapshot creation when other snap is active (#11475 Jason Dillaman)</p></li>
<li><p>librbd: flatten/copyup fixes (Jason Dillaman)</p></li>
<li><p>librbd: handle NOCACHE fadvise flag (Jinapeng Ma)</p></li>
<li><p>librbd: lockdep, helgrind validation (Jason Dillaman, Josh Durgin)</p></li>
<li><p>librbd: metadata filter fixes (Haomai Wang)</p></li>
<li><p>librbd: misc aio fixes (#5488 Jason Dillaman)</p></li>
<li><p>librbd: misc rbd fixes (#11478 #11113 #11342 #11380 Jason Dillaman, Zhiqiang Wang)</p></li>
<li><p>librbd: new diff_iterate2 API (Jason Dillaman)</p></li>
<li><p>librbd: object map rebuild support (Jason Dillaman)</p></li>
<li><p>librbd: only update image flags while hold exclusive lock (#11791 Jason Dillaman)</p></li>
<li><p>librbd: optionally disable allocation hint (Haomai Wang)</p></li>
<li><p>librbd: prevent race between resize requests (#12664 Jason Dillaman)</p></li>
<li><p>librbd: readahead fixes (Zhiqiang Wang)</p></li>
<li><p>librbd: return result code from close (#12069 Jason Dillaman)</p></li>
<li><p>librbd: store metadata, including config options, in image (Haomai Wang)</p></li>
<li><p>librbd: tolerate old osds when getting image metadata (#11549 Jason Dillaman)</p></li>
<li><p>librbd: use write_full when possible (Zhiqiang Wang)</p></li>
<li><p>log: fix data corruption race resulting from log rotation (#12465 Samuel Just)</p></li>
<li><p>logrotate.d: prefer service over invoke-rc.d (#11330 Win Hierman, Sage Weil)</p></li>
<li><p>mds: add ‘damaged’ state to MDSMap (John Spray)</p></li>
<li><p>mds: add nicknames for perfcounters (John Spray)</p></li>
<li><p>mds: avoid emitting cap warnigns before evicting session (John Spray)</p></li>
<li><p>mds: avoid getting stuck in XLOCKDONE (#11254 Yan, Zheng)</p></li>
<li><p>mds: disable problematic rstat propagation into snap parents (Yan, Zheng)</p></li>
<li><p>mds: do not add snapped items to bloom filter (Yan, Zheng)</p></li>
<li><p>mds: expose frags via asok (John Spray)</p></li>
<li><p>mds: fix expected holes in journal objects (#13167 Yan, Zheng)</p></li>
<li><p>mds: fix handling for missing mydir dirfrag (#11641 John Spray)</p></li>
<li><p>mds: fix integer truncateion on large client ids (Henry Chang)</p></li>
<li><p>mds: fix mydir replica issue with shutdown (#10743 John Spray)</p></li>
<li><p>mds: fix out-of-order messages (#11258 Yan, Zheng)</p></li>
<li><p>mds: fix rejoin (Yan, Zheng)</p></li>
<li><p>mds: fix setting entire file layout in one setxattr (John Spray)</p></li>
<li><p>mds: fix shutdown (John Spray)</p></li>
<li><p>mds: fix shutdown with strays (#10744 John Spray)</p></li>
<li><p>mds: fix SnapServer crash on deleted pool (John Spray)</p></li>
<li><p>mds: fix snapshot bugs (Yan, Zheng)</p></li>
<li><p>mds: fix stray reintegration (Yan, Zheng)</p></li>
<li><p>mds: fix stray handling (John Spray)</p></li>
<li><p>mds: fix suicide beacon (John Spray)</p></li>
<li><p>mds: flush immediately in do_open_truncate (#11011 John Spray)</p></li>
<li><p>mds: handle misc corruption issues (John Spray)</p></li>
<li><p>mds: improve dump methods (John Spray)</p></li>
<li><p>mds: many fixes (Yan, Zheng, John Spray, Greg Farnum)</p></li>
<li><p>mds: many snapshot and stray fixes (Yan, Zheng)</p></li>
<li><p>mds: misc fixes (Jianpeng Ma, Dan van der Ster, Zhang Zhi)</p></li>
<li><p>mds: misc journal cleanups and fixes (#10368 John Spray)</p></li>
<li><p>mds: misc repair improvements (John Spray)</p></li>
<li><p>mds: misc snap fixes (Zheng Yan)</p></li>
<li><p>mds: misc snapshot fixes (Yan, Zheng)</p></li>
<li><p>mds: new SessionMap storage using omap (#10649 John Spray)</p></li>
<li><p>mds: persist completed_requests reliably (#11048 John Spray)</p></li>
<li><p>mds: reduce memory consumption (Yan, Zheng)</p></li>
<li><p>mds: respawn instead of suicide on blacklist (John Spray)</p></li>
<li><p>mds: separate safe_pos in Journaler (#10368 John Spray)</p></li>
<li><p>mds: snapshot rename support (#3645 Yan, Zheng)</p></li>
<li><p>mds: store layout on header object (#4161 John Spray)</p></li>
<li><p>mds: throttle purge stray operations (#10390 John Spray)</p></li>
<li><p>mds: tolerate clock jumping backwards (#11053 Yan, Zheng)</p></li>
<li><p>mds: warn when clients fail to advance oldest_client_tid (#10657 Yan, Zheng)</p></li>
<li><p>misc cleanups and fixes (Danny Al-Gaaf)</p></li>
<li><p>misc coverity fixes (Danny Al-Gaaf)</p></li>
<li><p>misc performance and cleanup (Nathan Cutler, Xinxin Shu)</p></li>
<li><p>mon: add cache over MonitorDBStore (Kefu Chai)</p></li>
<li><p>mon: add ‘mon_metadata &lt;id&gt;’ command (Kefu Chai)</p></li>
<li><p>mon: add ‘node ls …’ command (Kefu Chai)</p></li>
<li><p>mon: add NOFORWARD, OBSOLETE, DEPRECATE flags for mon commands (Joao Eduardo Luis)</p></li>
<li><p>mon: add PG count to ‘ceph osd df’ output (Michal Jarzabek)</p></li>
<li><p>mon: ‘ceph osd metadata’ can dump all osds (Haomai Wang)</p></li>
<li><p>mon: clean up, reorg some mon commands (Joao Eduardo Luis)</p></li>
<li><p>monclient: flush_log (John Spray)</p></li>
<li><p>mon: detect kv backend failures (Sage Weil)</p></li>
<li><p>mon: disallow &gt;2 tiers (#11840 Kefu Chai)</p></li>
<li><p>mon: disallow ec pools as tiers (#11650 Samuel Just)</p></li>
<li><p>mon: do not deactivate last mds (#10862 John Spray)</p></li>
<li><p>mon: fix average utilization calc for ‘osd df’ (Mykola Golub)</p></li>
<li><p>mon: fix CRUSH map test for new pools (Sage Weil)</p></li>
<li><p>mon: fix log dump crash when debugging (Mykola Golub)</p></li>
<li><p>mon: fix mds beacon replies (#11590 Kefu Chai)</p></li>
<li><p>mon: fix metadata update race (Mykola Golub)</p></li>
<li><p>mon: fix min_last_epoch_clean tracking (Kefu Chai)</p></li>
<li><p>mon: fix ‘pg ls’ sort order, state names (#11569 Kefu Chai)</p></li>
<li><p>mon: fix refresh (#11470 Joao Eduardo Luis)</p></li>
<li><p>mon: fix variance calc in ‘osd df’ (Sage Weil)</p></li>
<li><p>mon: improve callout to crushtool (Mykola Golub)</p></li>
<li><p>mon: make blocked op messages more readable (Jianpeng Ma)</p></li>
<li><p>mon: make osd get pool ‘all’ only return applicable fields (#10891 Michal Jarzabek)</p></li>
<li><p>mon: misc scaling fixes (Sage Weil)</p></li>
<li><p>mon: normalize erasure-code profile for storage and comparison (Loic Dachary)</p></li>
<li><p>mon: only send mon metadata to supporting peers (Sage Weil)</p></li>
<li><p>mon: optionally specify osd id on ‘osd create’ (Mykola Golub)</p></li>
<li><p>mon: ‘osd tree’ fixes (Kefu Chai)</p></li>
<li><p>mon: periodic background scrub (Joao Eduardo Luis)</p></li>
<li><p>mon: prevent bucket deletion when referenced by a crush rule (#11602 Sage Weil)</p></li>
<li><p>mon: prevent pgp_num &gt; pg_num (#12025 Xinxin Shu)</p></li>
<li><p>mon: prevent pool with snapshot state from being used as a tier (#11493 Sage Weil)</p></li>
<li><p>mon: prime pg_temp when CRUSH map changes (Sage Weil)</p></li>
<li><p>mon: refine check_remove_tier checks (#11504 John Spray)</p></li>
<li><p>mon: reject large max_mds values (#12222 John Spray)</p></li>
<li><p>mon: remove spurious who arg from ‘mds rm …’ (John Spray)</p></li>
<li><p>mon: streamline session handling, fix memory leaks (Sage Weil)</p></li>
<li><p>mon: upgrades must pass through hammer (Sage Weil)</p></li>
<li><p>mon: warn on bogus cache tier config (Jianpeng Ma)</p></li>
<li><p>msgr: add ceph_perf_msgr tool (Hoamai Wang)</p></li>
<li><p>msgr: async: fix seq handling (Haomai Wang)</p></li>
<li><p>msgr: async: many many fixes (Haomai Wang)</p></li>
<li><p>msgr: simple: fix clear_pipe (#11381 Haomai Wang)</p></li>
<li><p>msgr: simple: fix connect_seq assert (Haomai Wang)</p></li>
<li><p>msgr: xio: fastpath improvements (Raju Kurunkad)</p></li>
<li><p>msgr: xio: fix ip and nonce (Raju Kurunkad)</p></li>
<li><p>msgr: xio: improve lane assignment (Vu Pham)</p></li>
<li><p>msgr: xio: sync with accellio v1.4 (Vu Pham)</p></li>
<li><p>msgr: xio: misc fixes (#10735 Matt Benjamin, Kefu Chai, Danny Al-Gaaf, Raju Kurunkad, Vu Pham, Casey Bodley)</p></li>
<li><p>msg: unit tests (Haomai Wang)</p></li>
<li><p>objectcacher: misc bug fixes (Jianpeng Ma)</p></li>
<li><p>osd: add latency perf counters for tier operations (Xinze Chi)</p></li>
<li><p>osd: add misc perfcounters (Xinze Chi)</p></li>
<li><p>osd: add simple sleep injection in recovery (Sage Weil)</p></li>
<li><p>osd: allow SEEK_HOLE/SEEK_DATA for sparse read (Zhiqiang Wang)</p></li>
<li><p>osd: avoid dup omap sets for in pg metadata (Sage Weil)</p></li>
<li><p>osd: avoid multiple hit set insertions (Zhiqiang Wang)</p></li>
<li><p>osd: avoid transaction append in some cases (Sage Weil)</p></li>
<li><p>osd: break PG removal into multiple iterations (#10198 Guang Yang)</p></li>
<li><p>osd: cache proxy-write support (Zhiqiang Wang, Samuel Just)</p></li>
<li><p>osd: check scrub state when handling map (Jianpeng Ma)</p></li>
<li><p>osd: clean up some constness, privateness (Kefu Chai)</p></li>
<li><p>osd: clean up temp object if promotion fails (Jianpeng Ma)</p></li>
<li><p>osd: configure promotion based on write recency (Zhiqiang Wang)</p></li>
<li><p>osd: constrain collections to meta and PGs (normal and temp) (Sage Weil)</p></li>
<li><p>osd: don’t send dup MMonGetOSDMap requests (Sage Weil, Kefu Chai)</p></li>
<li><p>osd: EIO injection (David Zhang)</p></li>
<li><p>osd: elminiate txn apend, ECSubWrite copy (Samuel Just)</p></li>
<li><p>osd: erasure-code: drop entries according to LRU (Andreas-Joachim Peters)</p></li>
<li><p>osd: erasure-code: fix SHEC floating point bug (#12936 Loic Dachary)</p></li>
<li><p>osd: erasure-code: update to ISA-L 2.14 (Yuan Zhou)</p></li>
<li><p>osd: filejournal: cleanup (David Zafman)</p></li>
<li><p>osd: filestore: clone using splice (Jianpeng Ma)</p></li>
<li><p>osd: filestore: fix recursive lock (Xinxin Shu)</p></li>
<li><p>osd: fix check_for_full (Henry Chang)</p></li>
<li><p>osd: fix dirty accounting in make_writeable (Zhiqiang Wang)</p></li>
<li><p>osd: fix dup promotion lost op bug (Zhiqiang Wang)</p></li>
<li><p>osd: fix endless repair when object is unrecoverable (Jianpeng Ma, Kefu Chai)</p></li>
<li><p>osd: fix hitset object naming to use GMT (Kefu Chai)</p></li>
<li><p>osd: fix misc memory leaks (Sage Weil)</p></li>
<li><p>osd: fix negative degraded stats during backfill (Guang Yang)</p></li>
<li><p>osd: fix osdmap dump of blacklist items (John Spray)</p></li>
<li><p>osd: fix peek_queue locking in FileStore (Xinze Chi)</p></li>
<li><p>osd: fix pg resurrection (#11429 Samuel Just)</p></li>
<li><p>osd: fix promotion vs full cache tier (Samuel Just)</p></li>
<li><p>osd: fix replay requeue when pg is still activating (#13116 Samuel Just)</p></li>
<li><p>osd: fix scrub stat bugs (Sage Weil, Samuel Just)</p></li>
<li><p>osd: fix snap flushing from cache tier (again) (#11787 Samuel Just)</p></li>
<li><p>osd: fix snap handling on promotion (#11296 Sam Just)</p></li>
<li><p>osd: fix temp-clearing (David Zafman)</p></li>
<li><p>osd: force promotion for ops EC can’t handle (Zhiqiang Wang)</p></li>
<li><p>osd: handle log split with overlapping entries (#11358 Samuel Just)</p></li>
<li><p>osd: ignore non-existent osds in unfound calc (#10976 Mykola Golub)</p></li>
<li><p>osd: improve behavior on machines with large memory pages (Steve Capper)</p></li>
<li><p>osd: include a temp namespace within each collection/pgid (Sage Weil)</p></li>
<li><p>osd: increase default max open files (Owen Synge)</p></li>
<li><p>osd: keyvaluestore: misc fixes (Varada Kari)</p></li>
<li><p>osd: low and high speed flush modes (Mingxin Liu)</p></li>
<li><p>osd: make suicide timeouts individually configurable (Samuel Just)</p></li>
<li><p>osd: merge multiple setattr calls into a setattrs call (Xinxin Shu)</p></li>
<li><p>osd: misc fixes (Ning Yao, Kefu Chai, Xinze Chi, Zhiqiang Wang, Jianpeng Ma)</p></li>
<li><p>osd: move scrub in OpWQ (Samuel Just)</p></li>
<li><p>osd: newstore prototype (Sage Weil)</p></li>
<li><p>osd: ObjectStore internal API refactor (Sage Weil)</p></li>
<li><p>osd: peer_features includes self (David Zafman)</p></li>
<li><p>osd: pool size change triggers new interval (#11771 Samuel Just)</p></li>
<li><p>osd: prepopulate needs_recovery_map when only one peer has missing (#9558 Guang Yang)</p></li>
<li><p>osd: randomize scrub times (#10973 Kefu Chai)</p></li>
<li><p>osd: recovery, peering fixes (#11687 Samuel Just)</p></li>
<li><p>osd: refactor scrub and digest recording (Sage Weil)</p></li>
<li><p>osd: refuse first write to EC object at non-zero offset (Jianpeng Ma)</p></li>
<li><p>osd: relax reply order on proxy read (#11211 Zhiqiang Wang)</p></li>
<li><p>osd: require firefly features (David Zafman)</p></li>
<li><p>osd: set initial crush weight with more precision (Sage Weil)</p></li>
<li><p>osd: SHEC no longer experimental</p></li>
<li><p>osd: skip promotion for flush/evict op (Zhiqiang Wang)</p></li>
<li><p>osd: stripe over small xattrs to fit in XFS’s 255 byte inline limit (Sage Weil, Ning Yao)</p></li>
<li><p>osd: sync object_map on syncfs (Samuel Just)</p></li>
<li><p>osd: take excl lock of op is rw (Samuel Just)</p></li>
<li><p>osd: throttle evict ops (Yunchuan Wen)</p></li>
<li><p>osd: upgrades must pass through hammer (Sage Weil)</p></li>
<li><p>osd: use a temp object for recovery (Sage Weil)</p></li>
<li><p>osd: use blkid to collection partition information (Joseph Handzik)</p></li>
<li><p>osd: use SEEK_HOLE / SEEK_DATA for sparse copy (Xinxin Shu)</p></li>
<li><p>osd: WBThrottle cleanups (Jianpeng Ma)</p></li>
<li><p>osd: write journal header on clean shutdown (Xinze Chi)</p></li>
<li><p>osdc/Objecter: allow per-pool calls to op_cancel_writes (John Spray)</p></li>
<li><p>os/filestore: enlarge getxattr buffer size (Jianpeng Ma)</p></li>
<li><p>pybind: pep8 cleanups (Danny Al-Gaaf)</p></li>
<li><p>pycephfs: many fixes for bindings (Haomai Wang)</p></li>
<li><p>qa: fix filelock_interrupt.py test (Yan, Zheng)</p></li>
<li><p>qa: improve ceph-disk tests (Loic Dachary)</p></li>
<li><p>qa: improve docker build layers (Loic Dachary)</p></li>
<li><p>qa: run-make-check.sh script (Loic Dachary)</p></li>
<li><p>rados: add –striper option to use libradosstriper (#10759 Sebastien Ponce)</p></li>
<li><p>rados: bench: add –no-verify option to improve performance (Piotr Dalek)</p></li>
<li><p>rados bench: misc fixes (Dmitry Yatsushkevich)</p></li>
<li><p>rados: fix error message on failed pool removal (Wido den Hollander)</p></li>
<li><p>radosgw-admin: add ‘bucket check’ function to repair bucket index (Yehuda Sadeh)</p></li>
<li><p>radosgw-admin: fix subuser modify output (#12286 Guce)</p></li>
<li><p>rados: handle –snapid arg properly (Abhishek Lekshmanan)</p></li>
<li><p>rados: improve bench buffer handling, performance (Piotr Dalek)</p></li>
<li><p>rados: misc bench fixes (Dmitry Yatsushkevich)</p></li>
<li><p>rados: new pool import implementation (John Spray)</p></li>
<li><p>rados: translate errno to string in CLI (#10877 Kefu Chai)</p></li>
<li><p>rbd: accept map options config option (Ilya Dryomov)</p></li>
<li><p>rbd: add disk usage tool (#7746 Jason Dillaman)</p></li>
<li><p>rbd: allow unmapping by spec (Ilya Dryomov)</p></li>
<li><p>rbd: cli: fix arg parsing with –io-pattern (Dmitry Yatsushkevich)</p></li>
<li><p>rbd: deprecate –new-format option (Jason Dillman)</p></li>
<li><p>rbd: fix error messages (#2862 Rajesh Nambiar)</p></li>
<li><p>rbd: fix link issues (Jason Dillaman)</p></li>
<li><p>rbd: improve CLI arg parsing, usage (Ilya Dryomov)</p></li>
<li><p>rbd: rbd-replay-prep and rbd-replay improvements (Jason Dillaman)</p></li>
<li><p>rbd: recognize queue_depth kernel option (Ilya Dryomov)</p></li>
<li><p>rbd: support G and T units for CLI (Abhishek Lekshmanan)</p></li>
<li><p>rbd: update rbd man page (Ilya Dryomov)</p></li>
<li><p>rbd: update xfstests tests (Douglas Fuller)</p></li>
<li><p>rbd: use image-spec and snap-spec in help (Vikhyat Umrao, Ilya Dryomov)</p></li>
<li><p>rest-bench: misc fixes (Shawn Chen)</p></li>
<li><p>rest-bench: support https (#3968 Yuan Zhou)</p></li>
<li><p>rgw: add max multipart upload parts (#12146 Abshishek Dixit)</p></li>
<li><p>rgw: add missing headers to Swift container details (#10666 Ahmad Faheem, Dmytro Iurchenko)</p></li>
<li><p>rgw: add stats to headers for account GET (#10684 Yuan Zhou)</p></li>
<li><p>rgw: add Trasnaction-Id to response (Abhishek Dixit)</p></li>
<li><p>rgw: add X-Timestamp for Swift containers (#10938 Radoslaw Zarzynski)</p></li>
<li><p>rgw: always check if token is expired (#11367 Anton Aksola, Riku Lehto)</p></li>
<li><p>rgw: conversion tool to repair broken multipart objects (#12079 Yehuda Sadeh)</p></li>
<li><p>rgw: document layout of pools and objects (Pete Zaitcev)</p></li>
<li><p>rgw: do not enclose bucket header in quotes (#11860 Wido den Hollander)</p></li>
<li><p>rgw: do not prefetch data for HEAD requests (Guang Yang)</p></li>
<li><p>rgw: do not preserve ACLs when copying object (#12370 Yehuda Sadeh)</p></li>
<li><p>rgw: do not set content-type if length is 0 (#11091 Orit Wasserman)</p></li>
<li><p>rgw: don’t clobber bucket/object owner when setting ACLs (#10978 Yehuda Sadeh)</p></li>
<li><p>rgw: don’t use end_marker for namespaced object listing (#11437 Yehuda Sadeh)</p></li>
<li><p>rgw: don’t use rgw_socket_path if frontend is configured (#11160 Yehuda Sadeh)</p></li>
<li><p>rgw: enforce Content-Length for POST on Swift cont/obj (#10661 Radoslaw Zarzynski)</p></li>
<li><p>rgw: error out if frontend did not send all data (#11851 Yehuda Sadeh)</p></li>
<li><p>rgw: expose the number of unhealthy workers through admin socket (Guang Yang)</p></li>
<li><p>rgw: fail if parts not specified on multipart upload (#11435 Yehuda Sadeh)</p></li>
<li><p>rgw: fix assignment of copy obj attributes (#11563 Yehuda Sadeh)</p></li>
<li><p>rgw: fix broken stats in container listing (#11285 Radoslaw Zarzynski)</p></li>
<li><p>rgw: fix bug in domain/subdomain splitting (Robin H. Johnson)</p></li>
<li><p>rgw: fix casing of Content-Type header (Robin H. Johnson)</p></li>
<li><p>rgw: fix civetweb max threads (#10243 Yehuda Sadeh)</p></li>
<li><p>rgw: fix Connection: header handling (#12298 Wido den Hollander)</p></li>
<li><p>rgw: fix copy metadata, support X-Copied-From for swift (#10663 Radoslaw Zarzynski)</p></li>
<li><p>rgw: fix data corruptions race condition (#11749 Wuxingyi)</p></li>
<li><p>rgw: fix decoding of X-Object-Manifest from GET on Swift DLO (Radslow Rzarzynski)</p></li>
<li><p>rgw: fix GET on swift account when limit == 0 (#10683 Radoslaw Zarzynski)</p></li>
<li><p>rgw: fix handling empty metadata items on Swift container (#11088 Radoslaw Zarzynski)</p></li>
<li><p>rgw: fix JSON response when getting user quota (#12117 Wuxingyi)</p></li>
<li><p>rgw: fix locator for objects starting with _ (#11442 Yehuda Sadeh)</p></li>
<li><p>rgw: fix log rotation (Wuxingyi)</p></li>
<li><p>rgw: fix mulitipart upload in retry path (#11604 Yehuda Sadeh)</p></li>
<li><p>rgw: fix quota enforcement on POST (#11323 Sergey Arkhipov)</p></li>
<li><p>rgw: fix reset_loc (#11974 Yehuda Sadeh)</p></li>
<li><p>rgw: fix return code on missing upload (#11436 Yehuda Sadeh)</p></li>
<li><p>rgw: fix sysvinit script</p></li>
<li><p>rgw: fix sysvinit script w/ multiple instances (Sage Weil, Pavan Rallabhandi)</p></li>
<li><p>rgw: force content_type for swift bucket stats requests (#12095 Orit Wasserman)</p></li>
<li><p>rgw: force content type header on responses with no body (#11438 Orit Wasserman)</p></li>
<li><p>rgw: generate Date header for civetweb (#10873 Radoslaw Zarzynski)</p></li>
<li><p>rgw: generate new object tag when setting attrs (#11256 Yehuda Sadeh)</p></li>
<li><p>rgw: improve content-length env var handling (#11419 Robin H. Johnson)</p></li>
<li><p>rgw: improved support for swift account metadata (Radoslaw Zarzynski)</p></li>
<li><p>rgw: improve handling of already removed buckets in expirer (Radoslaw Rzarzynski)</p></li>
<li><p>rgw: issue aio for first chunk before flush cached data (#11322 Guang Yang)</p></li>
<li><p>rgw: log to /var/log/ceph instead of /var/log/radosgw</p></li>
<li><p>rgw: make init script wait for radosgw to stop (#11140 Dmitry Yatsushkevich)</p></li>
<li><p>rgw: make max put size configurable (#6999 Yuan Zhou)</p></li>
<li><p>rgw: make quota/gc threads configurable (#11047 Guang Yang)</p></li>
<li><p>rgw: make read user buckets backward compat (#10683 Radoslaw Zarzynski)</p></li>
<li><p>rgw: merge manifests properly with prefix override (#11622 Yehuda Sadeh)</p></li>
<li><p>rgw: only scan for objects not in a namespace (#11984 Yehuda Sadeh)</p></li>
<li><p>rgw: orphan detection tool (Yehuda Sadeh)</p></li>
<li><p>rgw: pass in civetweb configurables (#10907 Yehuda Sadeh)</p></li>
<li><p>rgw: rectify 202 Accepted in PUT response (#11148 Radoslaw Zarzynski)</p></li>
<li><p>rgw: remove meta file after deleting bucket (#11149 Orit Wasserman)</p></li>
<li><p>rgw: remove trailing :port from HTTP_HOST header (Sage Weil)</p></li>
<li><p>rgw: return 412 on bad limit when listing buckets (#11613 Yehuda Sadeh)</p></li>
<li><p>rgw: rework X-Trans-Id header to conform with Swift API (Radoslaw Rzarzynski)</p></li>
<li><p>rgw: s3 encoding-type for get bucket (Jeff Weber)</p></li>
<li><p>rgw: send ETag, Last-Modified for swift (#11087 Radoslaw Zarzynski)</p></li>
<li><p>rgw: set content length on container GET, PUT, DELETE, HEAD (#10971, #11036 Radoslaw Zarzynski)</p></li>
<li><p>rgw: set max buckets per user in ceph.conf (Vikhyat Umrao)</p></li>
<li><p>rgw: shard work over multiple librados instances (Pavan Rallabhandi)</p></li>
<li><p>rgw: support end marker on swift container GET (#10682 Radoslaw Zarzynski)</p></li>
<li><p>rgw: support for Swift expiration API (Radoslaw Rzarzynski, Yehuda Sadeh)</p></li>
<li><p>rgw: swift: allow setting attributes with COPY (#10662 Ahmad Faheem, Dmytro Iurchenko)</p></li>
<li><p>rgw: swift: do not override sent content type (#12363 Orit Wasserman)</p></li>
<li><p>rgw: swift: enforce Content-Type in response (#12157 Radoslaw Zarzynski)</p></li>
<li><p>rgw: swift: fix account listing (#11501 Radoslaw Zarzynski)</p></li>
<li><p>rgw: swift: fix metadata handling on copy (#10645 Radoslaw Zarzynski)</p></li>
<li><p>rgw: swift: send Last-Modified header (#10650 Radoslaw Zarzynski)</p></li>
<li><p>rgw: swift: set Content-Length for account GET (#12158 Radoslav Zarzynski)</p></li>
<li><p>rgw: swift: set content-length on keystone tokens (#11473 Herv Rousseau)</p></li>
<li><p>rgw: update keystone cache with token info (#11125 Yehuda Sadeh)</p></li>
<li><p>rgw: update to latest civetweb, enable config for IPv6 (#10965 Yehuda Sadeh)</p></li>
<li><p>rgw: use attrs from source bucket on copy (#11639 Javier M. Mellid)</p></li>
<li><p>rgw: use correct oid for gc chains (#11447 Yehuda Sadeh)</p></li>
<li><p>rgw: user rm is idempotent (Orit Wasserman)</p></li>
<li><p>rgw: use unique request id for civetweb (#10295 Orit Wasserman)</p></li>
<li><p>rocksdb: add perf counters for get/put latency (Xinxin Shu)</p></li>
<li><p>rocksdb, leveldb: fix compact_on_mount (Xiaoxi Chen)</p></li>
<li><p>rocksdb: pass options as single string (Xiaoxi Chen)</p></li>
<li><p>rocksdb: update to latest (Xiaoxi Chen)</p></li>
<li><p>rpm: add suse firewall files (Tim Serong)</p></li>
<li><p>rpm: always rebuild and install man pages for rpm (Owen Synge)</p></li>
<li><p>rpm: loosen ceph-test dependencies (Ken Dreyer)</p></li>
<li><p>rpm: many spec file fixes (Owen Synge, Ken Dreyer)</p></li>
<li><p>rpm: misc fixes (Boris Ranto, Owen Synge, Ken Dreyer, Ira Cooper)</p></li>
<li><p>rpm: misc systemd and SUSE fixes (Owen Synge, Nathan Cutler)</p></li>
<li><p>selinux policy (Boris Ranto, Milan Broz)</p></li>
<li><p>systemd: logrotate fixes (Tim Serong, Lars Marowsky-Bree, Nathan Cutler)</p></li>
<li><p>systemd: many fixes (Sage Weil, Owen Synge, Boris Ranto, Dan van der Ster)</p></li>
<li><p>systemd: run daemons as user ceph</p></li>
<li><p>sysvinit compat: misc fixes (Owen Synge)</p></li>
<li><p>test: misc fs test improvements (John Spray, Loic Dachary)</p></li>
<li><p>test: python tests, linter cleanup (Alfredo Deza)</p></li>
<li><p>tests: fixes for rbd xstests (Douglas Fuller)</p></li>
<li><p>tests: fix tiering health checks (Loic Dachary)</p></li>
<li><p>tests for low-level performance (Haomai Wang)</p></li>
<li><p>tests: many ec non-regression improvements (Loic Dachary)</p></li>
<li><p>tests: many many ec test improvements (Loic Dachary)</p></li>
<li><p>upstart: throttle restarts (#11798 Sage Weil, Greg Farnum)</p></li>
</ul>
</div>
</div>
<div class="section" id="v9-1-0-infernalis-release-candidate">
<h1>v9.1.0 Infernalis release candidate<a class="headerlink" href="#v9-1-0-infernalis-release-candidate" title="Permalink to this headline">¶</a></h1>
<p>This is the first Infernalis release candidate.  There have been some
major changes since Hammer, and the upgrade process is non-trivial.
Please read carefully.</p>
<div class="section" id="getting-the-release-candidate">
<h2>Getting the release candidate<a class="headerlink" href="#getting-the-release-candidate" title="Permalink to this headline">¶</a></h2>
<p>The v9.1.0 packages are pushed to the development release repositories:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">download</span><span class="o">.</span><span class="n">ceph</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">rpm</span><span class="o">-</span><span class="n">testing</span>
<span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">download</span><span class="o">.</span><span class="n">ceph</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">debian</span><span class="o">-</span><span class="n">testing</span>
</pre></div>
</div>
<p>For for info, see:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">docs</span><span class="o">.</span><span class="n">ceph</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">docs</span><span class="o">/</span><span class="n">master</span><span class="o">/</span><span class="n">install</span><span class="o">/</span><span class="n">get</span><span class="o">-</span><span class="n">packages</span><span class="o">/</span>
</pre></div>
</div>
<p>Or install with ceph-deploy via:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ceph</span><span class="o">-</span><span class="n">deploy</span> <span class="n">install</span> <span class="o">--</span><span class="n">testing</span> <span class="n">HOST</span>
</pre></div>
</div>
</div>
<div class="section" id="known-issues">
<h2>Known issues<a class="headerlink" href="#known-issues" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>librbd and librados ABI compatibility is broken.  Be careful
installing this RC on client machines (e.g., those running qemu).
It will be fixed in the final v9.2.0 release.</p></li>
</ul>
</div>
<div class="section" id="id1">
<h2>Major Changes from Hammer<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p><em>General</em>:</p>
<ul>
<li><p>Ceph daemons are now managed via systemd (with the exception of
Ubuntu Trusty, which still uses upstart).</p></li>
<li><p>Ceph daemons run as ‘ceph’ user instead of root.</p></li>
<li><p>On Red Hat distros, there is also an SELinux policy.</p></li>
</ul>
</li>
<li><p><em>RADOS</em>:</p>
<ul>
<li><p>The RADOS cache tier can now proxy write operations to the base
tier, allowing writes to be handled without forcing migration of
an object into the cache.</p></li>
<li><p>The SHEC erasure coding support is no longer flagged as
experimental. SHEC trades some additional storage space for faster
repair.</p></li>
<li><p>There is now a unified queue (and thus prioritization) of client
IO, scrubbing, and snapshot trimming.</p></li>
<li><p>There have been many improvements to low-level repair tooling
(ceph-objectstore-tool).</p></li>
<li><p>The internal ObjectStore API has been significantly cleaned up in order
to facilitate new storage backends like NewStore.</p></li>
</ul>
</li>
<li><p><em>RGW</em>:</p>
<ul>
<li><p>The Swift API now supports object expiration.</p></li>
<li><p>There are many Swift API compatibility improvements.</p></li>
</ul>
</li>
<li><p><em>RBD</em>:</p>
<ul>
<li><p>The <code class="docutils literal notranslate"><span class="pre">rbd</span> <span class="pre">du</span></code> command shows actual usage (quickly, when
object-map is enabled).</p></li>
<li><p>The object-map feature has seen many stability improvements.</p></li>
<li><p>Object-map and exclusive-lock features can be enabled or disabled
dynamically.</p></li>
<li><p>You can now store user metadata and set persistent librbd options
associated with individual images.</p></li>
<li><p>The new deep-flatten features allows flattening of a clone and all
of its snapshots.  (Previously snapshots could not be flattened.)</p></li>
<li><p>The export-diff command command is now faster (it uses aio).  There is also
a new fast-diff feature.</p></li>
<li><p>The –size argument can be specified with a suffix for units
(e.g., <code class="docutils literal notranslate"><span class="pre">--size</span> <span class="pre">64G</span></code>).</p></li>
<li><p>There is a new <code class="docutils literal notranslate"><span class="pre">rbd</span> <span class="pre">status</span></code> command that, for now, shows who has
the image open/mapped.</p></li>
</ul>
</li>
<li><p><em>CephFS</em>:</p>
<ul>
<li><p>You can now rename snapshots.</p></li>
<li><p>There have been ongoing improvements around administration, diagnostics,
and the check and repair tools.</p></li>
<li><p>The caching and revocation of client cache state due to unused
inodes has been dramatically improved.</p></li>
<li><p>The ceph-fuse client behaves better on 32-bit hosts.</p></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="id2">
<h2>Distro compatibility<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h2>
<p>We have decided to drop support for many older distributions so that we can
move to a newer compiler toolchain (e.g., C++11).  Although it is still possible
to build Ceph on older distributions by installing backported development tools,
we are not building and publishing release packages for them on ceph.com.</p>
<p>In particular,</p>
<ul class="simple">
<li><p>CentOS 7 or later; we have dropped support for CentOS 6 (and other
RHEL 6 derivatives, like Scientific Linux 6).</p></li>
<li><p>Debian Jessie 8.x or later; Debian Wheezy 7.x’s g++ has incomplete
support for C++11 (and no systemd).</p></li>
<li><p>Ubuntu Trusty 14.04 or later; Ubuntu Precise 12.04 is no longer
supported.</p></li>
<li><p>Fedora 22 or later.</p></li>
</ul>
</div>
<div class="section" id="id3">
<h2>Upgrading from Firefly<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h2>
<p>Upgrading directly from Firefly v0.80.z is not possible.  All clusters
must first upgrade to Hammer v0.94.4 or a later v0.94.z release; only
then is it possible to do online upgrade to Infernalis 9.2.z.</p>
<p>User can upgrade to latest hammer v0.94.z
from gitbuilder with(also refer the hammer release notes for more details):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ceph</span><span class="o">-</span><span class="n">deploy</span> <span class="n">install</span> <span class="o">--</span><span class="n">release</span> <span class="n">hammer</span> <span class="n">HOST</span>
</pre></div>
</div>
</div>
<div class="section" id="id4">
<h2>Upgrading from Hammer<a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p>All cluster nodes must first upgrade to Hammer v0.94.4 or a later v0.94.z release; only
then is it possible to do online upgrade to Infernalis 9.2.z.</p></li>
<li><p>For all distributions that support systemd (CentOS 7, Fedora, Debian
Jessie 8.x, OpenSUSE), ceph daemons are now managed using native systemd
files instead of the legacy sysvinit scripts.  For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">systemctl</span> <span class="n">start</span> <span class="n">ceph</span><span class="o">.</span><span class="n">target</span>       <span class="c1"># start all daemons</span>
<span class="n">systemctl</span> <span class="n">status</span> <span class="n">ceph</span><span class="o">-</span><span class="n">osd</span><span class="nd">@12</span>      <span class="c1"># check status of osd.12</span>
</pre></div>
</div>
<p>The main notable distro that is <em>not</em> yet using systemd is Ubuntu trusty
14.04.  (The next Ubuntu LTS, 16.04, will use systemd instead of upstart.)</p>
</li>
<li><p>Ceph daemons now run as user and group <code class="docutils literal notranslate"><span class="pre">ceph</span></code> by default.  The
ceph user has a static UID assigned by Fedora and Debian (also used
by derivative distributions like RHEL/CentOS and Ubuntu).  On SUSE
the ceph user will currently get a dynamically assigned UID when the
user is created.</p>
<p>If your systems already have a ceph user, the package upgrade
process will usually fail with an error.  We suggest you first
remove or rename the existing ‘ceph’ user and then upgrade.</p>
<p>When upgrading, administrators have two options:</p>
<blockquote>
<div><ol class="arabic">
<li><p>Add the following line to <code class="docutils literal notranslate"><span class="pre">ceph.conf</span></code> on all hosts:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>setuser match path = /var/lib/ceph/$type/$cluster-$id
</pre></div>
</div>
<p>This will make the Ceph daemons run as root (i.e., not drop
privileges and switch to user ceph) if the daemon’s data
directory is still owned by root.  Newly deployed daemons will
be created with data owned by user ceph and will run with
reduced privileges, but upgraded daemons will continue to run as
root.</p>
</li>
<li><p>Fix the data ownership during the upgrade.  This is the preferred option,
but is more work.  The process for each host would be to:</p>
<ol class="arabic">
<li><p>Upgrade the ceph package.  This creates the ceph user and group.  For
example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ceph</span><span class="o">-</span><span class="n">deploy</span> <span class="n">install</span> <span class="o">--</span><span class="n">stable</span> <span class="n">infernalis</span> <span class="n">HOST</span>
</pre></div>
</div>
</li>
<li><p>Stop the daemon(s):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">service</span> <span class="n">ceph</span> <span class="n">stop</span>           <span class="c1"># fedora, centos, rhel, debian</span>
<span class="n">stop</span> <span class="n">ceph</span><span class="o">-</span><span class="nb">all</span>               <span class="c1"># ubuntu</span>
</pre></div>
</div>
</li>
<li><p>Fix the ownership:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">chown</span> <span class="o">-</span><span class="n">R</span> <span class="n">ceph</span><span class="p">:</span><span class="n">ceph</span> <span class="o">/</span><span class="n">var</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">ceph</span>
<span class="n">chown</span> <span class="o">-</span><span class="n">R</span> <span class="n">ceph</span><span class="p">:</span><span class="n">ceph</span> <span class="o">/</span><span class="n">var</span><span class="o">/</span><span class="n">log</span><span class="o">/</span><span class="n">ceph</span>
</pre></div>
</div>
</li>
<li><p>Restart the daemon(s):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">start</span> <span class="n">ceph</span><span class="o">-</span><span class="nb">all</span>                <span class="c1"># ubuntu</span>
<span class="n">systemctl</span> <span class="n">start</span> <span class="n">ceph</span><span class="o">.</span><span class="n">target</span>   <span class="c1"># debian, centos, fedora, rhel</span>
</pre></div>
</div>
</li>
</ol>
</li>
</ol>
</div></blockquote>
</li>
<li><p>The on-disk format for the experimental KeyValueStore OSD backend has
changed.  You will need to remove any OSDs using that backend before you
upgrade any test clusters that use it.</p></li>
</ul>
</div>
<div class="section" id="upgrade-notes">
<h2>Upgrade notes<a class="headerlink" href="#upgrade-notes" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>When a pool quota is reached, librados operations now block indefinitely,
the same way they do when the cluster fills up.  (Previously they would return
-ENOSPC).  By default, a full cluster or pool will now block.  If your
librados application can handle ENOSPC or EDQUOT errors gracefully, you can
get error returns instead by using the new librados OPERATION_FULL_TRY flag.</p></li>
</ul>
</div>
<div class="section" id="id5">
<h2>Notable changes<a class="headerlink" href="#id5" title="Permalink to this headline">¶</a></h2>
<p>NOTE: These notes are somewhat abbreviated while we find a less
time-consuming process for generating them.</p>
<ul class="simple">
<li><p>build: C++11 now supported</p></li>
<li><p>build: many cmake improvements</p></li>
<li><p>build: OSX build fixes (Yan, Zheng)</p></li>
<li><p>build: remove rest-bench</p></li>
<li><p>ceph-disk: many fixes (Loic Dachary)</p></li>
<li><p>ceph-disk: support for multipath devices (Loic Dachary)</p></li>
<li><p>ceph-fuse: mostly behave on 32-bit hosts (Yan, Zheng)</p></li>
<li><p>ceph-objectstore-tool: many improvements (David Zafman)</p></li>
<li><p>common: bufferlist performance tuning (Piotr Dalek, Sage Weil)</p></li>
<li><p>common: make mutex more efficient</p></li>
<li><p>common: some async compression infrastructure (Haomai Wang)</p></li>
<li><p>librados: add FULL_TRY and FULL_FORCE flags for dealing with full clusters or pools (Sage Weil)</p></li>
<li><p>librados: fix notify completion race (#13114 Sage Weil)</p></li>
<li><p>librados, libcephfs: randomize client nonces (Josh Durgin)</p></li>
<li><p>librados: pybind: fix binary omap values (Robin H. Johnson)</p></li>
<li><p>librbd: fix reads larger than the cache size (Lu Shi)</p></li>
<li><p>librbd: metadata filter fixes (Haomai Wang)</p></li>
<li><p>librbd: use write_full when possible (Zhiqiang Wang)</p></li>
<li><p>mds: avoid emitting cap warnigns before evicting session (John Spray)</p></li>
<li><p>mds: fix expected holes in journal objects (#13167 Yan, Zheng)</p></li>
<li><p>mds: fix SnapServer crash on deleted pool (John Spray)</p></li>
<li><p>mds: many fixes (Yan, Zheng, John Spray, Greg Farnum)</p></li>
<li><p>mon: add cache over MonitorDBStore (Kefu Chai)</p></li>
<li><p>mon: ‘ceph osd metadata’ can dump all osds (Haomai Wang)</p></li>
<li><p>mon: detect kv backend failures (Sage Weil)</p></li>
<li><p>mon: fix CRUSH map test for new pools (Sage Weil)</p></li>
<li><p>mon: fix min_last_epoch_clean tracking (Kefu Chai)</p></li>
<li><p>mon: misc scaling fixes (Sage Weil)</p></li>
<li><p>mon: streamline session handling, fix memory leaks (Sage Weil)</p></li>
<li><p>mon: upgrades must pass through hammer (Sage Weil)</p></li>
<li><p>msg/async: many fixes (Haomai Wang)</p></li>
<li><p>osd: cache proxy-write support (Zhiqiang Wang, Samuel Just)</p></li>
<li><p>osd: configure promotion based on write recency (Zhiqiang Wang)</p></li>
<li><p>osd: don’t send dup MMonGetOSDMap requests (Sage Weil, Kefu Chai)</p></li>
<li><p>osd: erasure-code: fix SHEC floating point bug (#12936 Loic Dachary)</p></li>
<li><p>osd: erasure-code: update to ISA-L 2.14 (Yuan Zhou)</p></li>
<li><p>osd: fix hitset object naming to use GMT (Kefu Chai)</p></li>
<li><p>osd: fix misc memory leaks (Sage Weil)</p></li>
<li><p>osd: fix peek_queue locking in FileStore (Xinze Chi)</p></li>
<li><p>osd: fix promotion vs full cache tier (Samuel Just)</p></li>
<li><p>osd: fix replay requeue when pg is still activating (#13116 Samuel Just)</p></li>
<li><p>osd: fix scrub stat bugs (Sage Weil, Samuel Just)</p></li>
<li><p>osd: force promotion for ops EC can’t handle (Zhiqiang Wang)</p></li>
<li><p>osd: improve behavior on machines with large memory pages (Steve Capper)</p></li>
<li><p>osd: merge multiple setattr calls into a setattrs call (Xinxin Shu)</p></li>
<li><p>osd: newstore prototype (Sage Weil)</p></li>
<li><p>osd: ObjectStore internal API refactor (Sage Weil)</p></li>
<li><p>osd: SHEC no longer experimental</p></li>
<li><p>osd: throttle evict ops (Yunchuan Wen)</p></li>
<li><p>osd: upgrades must pass through hammer (Sage Weil)</p></li>
<li><p>osd: use SEEK_HOLE / SEEK_DATA for sparse copy (Xinxin Shu)</p></li>
<li><p>rbd: rbd-replay-prep and rbd-replay improvements (Jason Dillaman)</p></li>
<li><p>rgw: expose the number of unhealthy workers through admin socket (Guang Yang)</p></li>
<li><p>rgw: fix casing of Content-Type header (Robin H. Johnson)</p></li>
<li><p>rgw: fix decoding of X-Object-Manifest from GET on Swift DLO (Radslow Rzarzynski)</p></li>
<li><p>rgw: fix sysvinit script</p></li>
<li><p>rgw: fix sysvinit script w/ multiple instances (Sage Weil, Pavan Rallabhandi)</p></li>
<li><p>rgw: improve handling of already removed buckets in expirer (Radoslaw Rzarzynski)</p></li>
<li><p>rgw: log to /var/log/ceph instead of /var/log/radosgw</p></li>
<li><p>rgw: rework X-Trans-Id header to be conform with Swift API (Radoslaw Rzarzynski)</p></li>
<li><p>rgw: s3 encoding-type for get bucket (Jeff Weber)</p></li>
<li><p>rgw: set max buckets per user in ceph.conf (Vikhyat Umrao)</p></li>
<li><p>rgw: support for Swift expiration API (Radoslaw Rzarzynski, Yehuda Sadeh)</p></li>
<li><p>rgw: user rm is idempotent (Orit Wasserman)</p></li>
<li><p>selinux policy (Boris Ranto, Milan Broz)</p></li>
<li><p>systemd: many fixes (Sage Weil, Owen Synge, Boris Ranto, Dan van der Ster)</p></li>
<li><p>systemd: run daemons as user ceph</p></li>
</ul>
</div>
</div>
<div class="section" id="v9-0-3">
<h1>v9.0.3<a class="headerlink" href="#v9-0-3" title="Permalink to this headline">¶</a></h1>
<p>This is the second to last batch of development work for the
Infernalis cycle.  The most intrusive change is an internal (non
user-visible) change to the OSD’s ObjectStore interface.  Many fixes and
improvements elsewhere across RGW, RBD, and another big pile of CephFS
scrub/repair improvements.</p>
<div class="section" id="id6">
<h2>Upgrading<a class="headerlink" href="#id6" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>The return code for librbd’s rbd_aio_read and Image::aio_read API methods no
longer returns the number of bytes read upon success.  Instead, it returns 0
upon success and a negative value upon failure.</p></li>
<li><p>‘ceph scrub’, ‘ceph compact’ and ‘ceph sync force’ are now deprecated.  Users
should instead use ‘ceph mon scrub’, ‘ceph mon compact’ and
‘ceph mon sync force’.</p></li>
<li><p>‘ceph mon_metadata’ should now be used as ‘ceph mon metadata’.</p></li>
<li><p>The <cite>–dump-json</cite> option of “osdmaptool” is replaced by <cite>–dump json</cite>.</p></li>
<li><p>The commands of ‘pg ls-by-{pool,primary,osd}’ and ‘pg ls’ now take ‘recovering’
instead of ‘recovery’ to include the recovering pgs in the listed pgs.</p></li>
</ul>
</div>
<div class="section" id="id7">
<h2>Notable Changes<a class="headerlink" href="#id7" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><ul class="simple">
<li><p>autotools: fix out of tree build (Krxysztof Kosinski)</p></li>
<li><p>autotools: improve make check output (Loic Dachary)</p></li>
<li><p>buffer: add invalidate_crc() (Piotr Dalek)</p></li>
<li><p>buffer: fix zero bug (#12252 Haomai Wang)</p></li>
<li><p>build: fix junit detection on Fedora 22 (Ira Cooper)</p></li>
<li><p>ceph-disk: install pip &gt; 6.1 (#11952 Loic Dachary)</p></li>
<li><p>cephfs-data-scan: many additions, improvements (John Spray)</p></li>
<li><p>ceph: improve error output for ‘tell’ (#11101 Kefu Chai)</p></li>
<li><p>ceph-objectstore-tool: misc improvements (David Zafman)</p></li>
<li><p>ceph-objectstore-tool: refactoring and cleanup (John Spray)</p></li>
<li><p>ceph_test_rados: test pipelined reads (Zhiqiang Wang)</p></li>
<li><p>common: fix bit_vector extent calc (#12611 Jason Dillaman)</p></li>
<li><p>common: make work queue addition/removal thread safe (#12662 Jason Dillaman)</p></li>
<li><p>common: optracker improvements (Zhiqiang Wang, Jianpeng Ma)</p></li>
<li><p>crush: add –check to validate dangling names, max osd id (Kefu Chai)</p></li>
<li><p>crush: cleanup, sync with kernel (Ilya Dryomov)</p></li>
<li><p>crush: fix subtree base weight on adjust_subtree_weight (#11855 Sage Weil)</p></li>
<li><p>crypo: fix NSS leak (Jason Dillaman)</p></li>
<li><p>crypto: fix unbalanced init/shutdown (#12598 Zheng Yan)</p></li>
<li><p>doc: misc updates (Kefu Chai, Owen Synge, Gael Fenet-Garde, Loic Dachary, Yannick Atchy-Dalama, Jiaying Ren, Kevin Caradant, Robert Maxime, Nicolas Yong, Germain Chipaux, Arthur Gorjux, Gabriel Sentucq, Clement Lebrun, Jean-Remi Deveaux, Clair Massot, Robin Tang, Thomas Laumondais, Jordan Dorne, Yuan Zhou, Valentin Thomas, Pierre Chaumont, Benjamin Troquereau, Benjamin Sesia, Vikhyat Umrao)</p></li>
<li><p>erasure-code: cleanup (Kefu Chai)</p></li>
<li><p>erasure-code: improve tests (Loic Dachary)</p></li>
<li><p>erasure-code: shec: fix recovery bugs (Takanori Nakao, Shotaro Kawaguchi)</p></li>
<li><p>libcephfs: add pread, pwrite (Jevon Qiao)</p></li>
<li><p>libcephfs,ceph-fuse: cache cleanup (Zheng Yan)</p></li>
<li><p>librados: add src_fadvise_flags for copy-from (Jianpeng Ma)</p></li>
<li><p>librados: respect default_crush_ruleset on pool_create (#11640 Yuan Zhou)</p></li>
<li><p>librbd: fadvise for copy, export, import (Jianpeng Ma)</p></li>
<li><p>librbd: handle NOCACHE fadvise flag (Jinapeng Ma)</p></li>
<li><p>librbd: optionally disable allocation hint (Haomai Wang)</p></li>
<li><p>librbd: prevent race between resize requests (#12664 Jason Dillaman)</p></li>
<li><p>log: fix data corruption race resulting from log rotation (#12465 Samuel Just)</p></li>
<li><p>mds: expose frags via asok (John Spray)</p></li>
<li><p>mds: fix setting entire file layout in one setxattr (John Spray)</p></li>
<li><p>mds: fix shutdown (John Spray)</p></li>
<li><p>mds: handle misc corruption issues (John Spray)</p></li>
<li><p>mds: misc fixes (Jianpeng Ma, Dan van der Ster, Zhang Zhi)</p></li>
<li><p>mds: misc snap fixes (Zheng Yan)</p></li>
<li><p>mds: store layout on header object (#4161 John Spray)</p></li>
<li><p>misc performance and cleanup (Nathan Cutler, Xinxin Shu)</p></li>
<li><p>mon: add NOFORWARD, OBSOLETE, DEPRECATE flags for mon commands (Joao Eduardo Luis)</p></li>
<li><p>mon: add PG count to ‘ceph osd df’ output (Michal Jarzabek)</p></li>
<li><p>mon: clean up, reorg some mon commands (Joao Eduardo Luis)</p></li>
<li><p>mon: disallow &gt;2 tiers (#11840 Kefu Chai)</p></li>
<li><p>mon: fix log dump crash when debugging (Mykola Golub)</p></li>
<li><p>mon: fix metadata update race (Mykola Golub)</p></li>
<li><p>mon: fix refresh (#11470 Joao Eduardo Luis)</p></li>
<li><p>mon: make blocked op messages more readable (Jianpeng Ma)</p></li>
<li><p>mon: only send mon metadata to supporting peers (Sage Weil)</p></li>
<li><p>mon: periodic background scrub (Joao Eduardo Luis)</p></li>
<li><p>mon: prevent pgp_num &gt; pg_num (#12025 Xinxin Shu)</p></li>
<li><p>mon: reject large max_mds values (#12222 John Spray)</p></li>
<li><p>msgr: add ceph_perf_msgr tool (Hoamai Wang)</p></li>
<li><p>msgr: async: fix seq handling (Haomai Wang)</p></li>
<li><p>msgr: xio: fastpath improvements (Raju Kurunkad)</p></li>
<li><p>msgr: xio: sync with accellio v1.4 (Vu Pham)</p></li>
<li><p>osd: clean up temp object if promotion fails (Jianpeng Ma)</p></li>
<li><p>osd: constrain collections to meta and PGs (normal and temp) (Sage Weil)</p></li>
<li><p>osd: filestore: clone using splice (Jianpeng Ma)</p></li>
<li><p>osd: filestore: fix recursive lock (Xinxin Shu)</p></li>
<li><p>osd: fix dup promotion lost op bug (Zhiqiang Wang)</p></li>
<li><p>osd: fix temp-clearing (David Zafman)</p></li>
<li><p>osd: include a temp namespace within each collection/pgid (Sage Weil)</p></li>
<li><p>osd: low and high speed flush modes (Mingxin Liu)</p></li>
<li><p>osd: peer_features includes self (David Zafman)</p></li>
<li><p>osd: recovery, peering fixes (#11687 Samuel Just)</p></li>
<li><p>osd: require firefly features (David Zafman)</p></li>
<li><p>osd: set initial crush weight with more precision (Sage Weil)</p></li>
<li><p>osd: use a temp object for recovery (Sage Weil)</p></li>
<li><p>osd: use blkid to collection partition information (Joseph Handzik)</p></li>
<li><p>rados: add –striper option to use libradosstriper (#10759 Sebastien Ponce)</p></li>
<li><p>radosgw-admin: fix subuser modify output (#12286 Guce)</p></li>
<li><p>rados: handle –snapid arg properly (Abhishek Lekshmanan)</p></li>
<li><p>rados: improve bench buffer handling, performance (Piotr Dalek)</p></li>
<li><p>rados: new pool import implementation (John Spray)</p></li>
<li><p>rbd: fix link issues (Jason Dillaman)</p></li>
<li><p>rbd: improve CLI arg parsing, usage (Ilya Dryomov)</p></li>
<li><p>rbd: recognize queue_depth kernel option (Ilya Dryomov)</p></li>
<li><p>rbd: support G and T units for CLI (Abhishek Lekshmanan)</p></li>
<li><p>rbd: use image-spec and snap-spec in help (Vikhyat Umrao, Ilya Dryomov)</p></li>
<li><p>rest-bench: misc fixes (Shawn Chen)</p></li>
<li><p>rest-bench: support https (#3968 Yuan Zhou)</p></li>
<li><p>rgw: add max multipart upload parts (#12146 Abshishek Dixit)</p></li>
<li><p>rgw: add Trasnaction-Id to response (Abhishek Dixit)</p></li>
<li><p>rgw: document layout of pools and objects (Pete Zaitcev)</p></li>
<li><p>rgw: do not preserve ACLs when copying object (#12370 Yehuda Sadeh)</p></li>
<li><p>rgw: fix Connection: header handling (#12298 Wido den Hollander)</p></li>
<li><p>rgw: fix data corruptions race condition (#11749 Wuxingyi)</p></li>
<li><p>rgw: fix JSON response when getting user quota (#12117 Wuxingyi)</p></li>
<li><p>rgw: force content_type for swift bucket stats requests (#12095 Orit Wasserman)</p></li>
<li><p>rgw: improved support for swift account metadata (Radoslaw Zarzynski)</p></li>
<li><p>rgw: make max put size configurable (#6999 Yuan Zhou)</p></li>
<li><p>rgw: orphan detection tool (Yehuda Sadeh)</p></li>
<li><p>rgw: swift: do not override sent content type (#12363 Orit Wasserman)</p></li>
<li><p>rgw: swift: set Content-Length for account GET (#12158 Radoslav Zarzynski)</p></li>
<li><p>rpm: always rebuild and install man pages for rpm (Owen Synge)</p></li>
<li><p>rpm: misc fixes (Boris Ranto, Owen Synge, Ken Dreyer, Ira Cooper)</p></li>
<li><p>systemd: logrotate fixes (Tim Seron, Lars Marowsky-Bree, Nathan Cutler)</p></li>
<li><p>sysvinit compat: misc fixes (Owen Synge)</p></li>
<li><p>test: misc fs test improvements (John Spray, Loic Dachary)</p></li>
<li><p>test: python tests, linter cleanup (Alfredo Deza)</p></li>
</ul>
</div></blockquote>
</div>
</div>
<div class="section" id="v9-0-2">
<h1>v9.0.2<a class="headerlink" href="#v9-0-2" title="Permalink to this headline">¶</a></h1>
<p>This development release features more of the OSD work queue
unification, randomized osd scrub times, a huge pile of librbd fixes,
more MDS repair and snapshot fixes, and a significant amount of work
on the tests and build infrastructure.</p>
<div class="section" id="id8">
<h2>Notable Changes<a class="headerlink" href="#id8" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>buffer: some cleanup (Michal Jarzabek)</p></li>
<li><p>build: cmake: fix nss linking (Danny Al-Gaaf)</p></li>
<li><p>build: cmake: misc fixes (Orit Wasserman, Casey Bodley)</p></li>
<li><p>build: install-deps: misc fixes (Loic Dachary)</p></li>
<li><p>build: make_dist_tarball.sh (Sage Weil)</p></li>
<li><p>ceph-detect-init: added Linux Mint (Michal Jarzabek)</p></li>
<li><p>ceph-detect-init: robust init system detection (Owen Synge, Loic Dachary)</p></li>
<li><p>ceph-disk: ensure ‘zap’ only operates on a full disk (#11272 Loic Dachary)</p></li>
<li><p>ceph-disk: misc fixes to respect init system (Loic Dachary, Owen Synge)</p></li>
<li><p>ceph-disk: support NVMe device partitions (#11612 Ilja Slepnev)</p></li>
<li><p>ceph: fix ‘df’ units (Zhe Zhang)</p></li>
<li><p>ceph: fix parsing in interactive cli mode (#11279 Kefu Chai)</p></li>
<li><p>ceph-objectstore-tool: many many changes (David Zafman)</p></li>
<li><p>ceph-post-file: misc fixes (Joey McDonald, Sage Weil)</p></li>
<li><p>client: avoid sending unnecessary FLUSHSNAP messages (Yan, Zheng)</p></li>
<li><p>client: exclude setfilelock when calculating oldest tid (Yan, Zheng)</p></li>
<li><p>client: fix error handling in check_pool_perm (John Spray)</p></li>
<li><p>client: fsync waits only for inode’s caps to flush (Yan, Zheng)</p></li>
<li><p>client: invalidate kernel dcache when cache size exceeds limits (Yan, Zheng)</p></li>
<li><p>client: make fsync wait for unsafe dir operations (Yan, Zheng)</p></li>
<li><p>client: pin lookup dentry to avoid inode being freed (Yan, Zheng)</p></li>
<li><p>common: detect overflow of int config values (#11484 Kefu Chai)</p></li>
<li><p>common: fix json parsing of utf8 (#7387 Tim Serong)</p></li>
<li><p>common: fix leak of pthread_mutexattr (#11762 Ketor Meng)</p></li>
<li><p>crush: respect default replicated ruleset config on map creation (Ilya Dryomov)</p></li>
<li><p>deb, rpm: move ceph-objectstore-tool to ceph (Ken Dreyer)</p></li>
<li><p>doc: man page updates (Kefu Chai)</p></li>
<li><p>doc: misc updates (#11396 Nilamdyuti, Fracois Lafont, Ken Dreyer, Kefu Chai)</p></li>
<li><p>init-radosgw: merge with sysv version; fix enumeration (Sage Weil)</p></li>
<li><p>librados: add config observer (Alistair Strachan)</p></li>
<li><p>librbd: add const for single-client-only features (Josh Durgin)</p></li>
<li><p>librbd: add deep-flatten operation (Jason Dillaman)</p></li>
<li><p>librbd: avoid blocking aio API methods (#11056 Jason Dillaman)</p></li>
<li><p>librbd: fix fast diff bugs (#11553 Jason Dillaman)</p></li>
<li><p>librbd: fix image format detection (Zhiqiang Wang)</p></li>
<li><p>librbd: fix lock ordering issue (#11577 Jason Dillaman)</p></li>
<li><p>librbd: flatten/copyup fixes (Jason Dillaman)</p></li>
<li><p>librbd: lockdep, helgrind validation (Jason Dillaman, Josh Durgin)</p></li>
<li><p>librbd: only update image flags while hold exclusive lock (#11791 Jason Dillaman)</p></li>
<li><p>librbd: return result code from close (#12069 Jason Dillaman)</p></li>
<li><p>librbd: tolerate old osds when getting image metadata (#11549 Jason Dillaman)</p></li>
<li><p>mds: do not add snapped items to bloom filter (Yan, Zheng)</p></li>
<li><p>mds: fix handling for missing mydir dirfrag (#11641 John Spray)</p></li>
<li><p>mds: fix rejoin (Yan, Zheng)</p></li>
<li><p>mds: fix stra reintegration (Yan, Zheng)</p></li>
<li><p>mds: fix suicide beason (John Spray)</p></li>
<li><p>mds: misc repair improvements (John Spray)</p></li>
<li><p>mds: misc snapshot fixes (Yan, Zheng)</p></li>
<li><p>mds: respawn instead of suicide on blacklist (John Spray)</p></li>
<li><p>misc coverity fixes (Danny Al-Gaaf)</p></li>
<li><p>mon: add ‘mon_metadata &lt;id&gt;’ command (Kefu Chai)</p></li>
<li><p>mon: add ‘node ls …’ command (Kefu Chai)</p></li>
<li><p>mon: disallow ec pools as tiers (#11650 Samuel Just)</p></li>
<li><p>mon: fix mds beacon replies (#11590 Kefu Chai)</p></li>
<li><p>mon: fix ‘pg ls’ sort order, state names (#11569 Kefu Chai)</p></li>
<li><p>mon: normalize erasure-code profile for storage and comparison (Loic Dachary)</p></li>
<li><p>mon: optionally specify osd id on ‘osd create’ (Mykola Golub)</p></li>
<li><p>mon: ‘osd tree’ fixes (Kefu Chai)</p></li>
<li><p>mon: prevent pool with snapshot state from being used as a tier (#11493 Sage Weil)</p></li>
<li><p>mon: refine check_remove_tier checks (#11504 John Spray)</p></li>
<li><p>mon: remove spurious who arg from ‘mds rm …’ (John Spray)</p></li>
<li><p>msgr: async: misc fixes (Haomai Wang)</p></li>
<li><p>msgr: xio: fix ip and nonce (Raju Kurunkad)</p></li>
<li><p>msgr: xio: improve lane assignment (Vu Pham)</p></li>
<li><p>msgr: xio: misc fixes (Vu Pham, Cosey Bodley)</p></li>
<li><p>osd: avoid transaction append in some cases (Sage Weil)</p></li>
<li><p>osdc/Objecter: allow per-pool calls to op_cancel_writes (John Spray)</p></li>
<li><p>osd: elminiate txn apend, ECSubWrite copy (Samuel Just)</p></li>
<li><p>osd: filejournal: cleanup (David Zafman)</p></li>
<li><p>osd: fix check_for_full (Henry Chang)</p></li>
<li><p>osd: fix dirty accounting in make_writeable (Zhiqiang Wang)</p></li>
<li><p>osd: fix osdmap dump of blacklist items (John Spray)</p></li>
<li><p>osd: fix snap flushing from cache tier (again) (#11787 Samuel Just)</p></li>
<li><p>osd: fix snap handling on promotion (#11296 Sam Just)</p></li>
<li><p>osd: handle log split with overlapping entries (#11358 Samuel Just)</p></li>
<li><p>osd: keyvaluestore: misc fixes (Varada Kari)</p></li>
<li><p>osd: make suicide timeouts individually configurable (Samuel Just)</p></li>
<li><p>osd: move scrub in OpWQ (Samuel Just)</p></li>
<li><p>osd: pool size change triggers new interval (#11771 Samuel Just)</p></li>
<li><p>osd: randomize scrub times (#10973 Kefu Chai)</p></li>
<li><p>osd: refactor scrub and digest recording (Sage Weil)</p></li>
<li><p>osd: refuse first write to EC object at non-zero offset (Jianpeng Ma)</p></li>
<li><p>osd: stripe over small xattrs to fit in XFS’s 255 byte inline limit (Sage Weil, Ning Yao)</p></li>
<li><p>osd: sync object_map on syncfs (Samuel Just)</p></li>
<li><p>osd: take excl lock of op is rw (Samuel Just)</p></li>
<li><p>osd: WBThrottle cleanups (Jianpeng Ma)</p></li>
<li><p>pycephfs: many fixes for bindings (Haomai Wang)</p></li>
<li><p>rados: bench: add –no-verify option to improve performance (Piotr Dalek)</p></li>
<li><p>rados: misc bench fixes (Dmitry Yatsushkevich)</p></li>
<li><p>rbd: add disk usage tool (#7746 Jason Dillaman)</p></li>
<li><p>rgw: alwasy check if token is expired (#11367 Anton Aksola, Riku Lehto)</p></li>
<li><p>rgw: conversion tool to repair broken multipart objects (#12079 Yehuda Sadeh)</p></li>
<li><p>rgw: do not enclose bucket header in quotes (#11860 Wido den Hollander)</p></li>
<li><p>rgw: error out if frontend did not send all data (#11851 Yehuda Sadeh)</p></li>
<li><p>rgw: fix assignment of copy obj attributes (#11563 Yehuda Sadeh)</p></li>
<li><p>rgw: fix reset_loc (#11974 Yehuda Sadeh)</p></li>
<li><p>rgw: improve content-length env var handling (#11419 Robin H. Johnson)</p></li>
<li><p>rgw: only scan for objects not in a namespace (#11984 Yehuda Sadeh)</p></li>
<li><p>rgw: remove trailing :port from HTTP_HOST header (Sage Weil)</p></li>
<li><p>rgw: shard work over multiple librados instances (Pavan Rallabhandi)</p></li>
<li><p>rgw: swift: enforce Content-Type in response (#12157 Radoslaw Zarzynski)</p></li>
<li><p>rgw: use attrs from source bucket on copy (#11639 Javier M. Mellid)</p></li>
<li><p>rocksdb: pass options as single string (Xiaoxi Chen)</p></li>
<li><p>rpm: many spec file fixes (Owen Synge, Ken Dreyer)</p></li>
<li><p>tests: fixes for rbd xstests (Douglas Fuller)</p></li>
<li><p>tests: fix tiering health checks (Loic Dachary)</p></li>
<li><p>tests for low-level performance (Haomai Wang)</p></li>
<li><p>tests: many ec non-regression improvements (Loic Dachary)</p></li>
<li><p>tests: many many ec test improvements (Loic Dachary)</p></li>
<li><p>upstart: throttle restarts (#11798 Sage Weil, Greg Farnum)</p></li>
</ul>
</div>
</div>
<div class="section" id="v9-0-1">
<h1>v9.0.1<a class="headerlink" href="#v9-0-1" title="Permalink to this headline">¶</a></h1>
<p>This development release is delayed a bit due to tooling changes in the build
environment.  As a result the next one (v9.0.2) will have a bit more work than
is usual.</p>
<p>Highlights here include lots of RGW Swift fixes, RBD feature work
surrounding the new object map feature, more CephFS snapshot fixes,
and a few important CRUSH fixes.</p>
<div class="section" id="id9">
<h2>Notable Changes<a class="headerlink" href="#id9" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>auth: cache/reuse crypto lib key objects, optimize msg signature check (Sage Weil)</p></li>
<li><p>build: allow tcmalloc-minimal (Thorsten Behrens)</p></li>
<li><p>build: do not build ceph-dencoder with tcmalloc (#10691 Boris Ranto)</p></li>
<li><p>build: fix pg ref disabling (William A. Kennington III)</p></li>
<li><p>build: install-deps.sh improvements (Loic Dachary)</p></li>
<li><p>build: misc fixes (Boris Ranto, Ken Dreyer, Owen Synge)</p></li>
<li><p>ceph-authtool: fix return code on error (Gerhard Muntingh)</p></li>
<li><p>ceph-disk: fix zap sgdisk invocation (Owen Synge, Thorsten Behrens)</p></li>
<li><p>ceph-disk: pass –cluster arg on prepare subcommand (Kefu Chai)</p></li>
<li><p>ceph-fuse, libcephfs: drop inode when rmdir finishes (#11339 Yan, Zheng)</p></li>
<li><p>ceph-fuse,libcephfs: fix uninline (#11356 Yan, Zheng)</p></li>
<li><p>ceph-monstore-tool: fix store-copy (Huangjun)</p></li>
<li><p>common: add perf counter descriptions (Alyona Kiseleva)</p></li>
<li><p>common: fix throttle max change (Henry Chang)</p></li>
<li><p>crush: fix crash from invalid ‘take’ argument (#11602 Shiva Rkreddy, Sage Weil)</p></li>
<li><p>crush: fix divide-by-2 in straw2 (#11357 Yann Dupont, Sage Weil)</p></li>
<li><p>deb: fix rest-bench-dbg and ceph-test-dbg dependendies (Ken Dreyer)</p></li>
<li><p>doc: document region hostnames (Robin H. Johnson)</p></li>
<li><p>doc: update release schedule docs (Loic Dachary)</p></li>
<li><p>init-radosgw: run radosgw as root (#11453 Ken Dreyer)</p></li>
<li><p>librados: fadvise flags per op (Jianpeng Ma)</p></li>
<li><p>librbd: allow additional metadata to be stored with the image (Haomai Wang)</p></li>
<li><p>librbd: better handling for dup flatten requests (#11370 Jason Dillaman)</p></li>
<li><p>librbd: cancel in-flight ops on watch error (#11363 Jason Dillaman)</p></li>
<li><p>librbd: default new images to format 2 (#11348 Jason Dillaman)</p></li>
<li><p>librbd: fast diff implementation that leverages object map (Jason Dillaman)</p></li>
<li><p>librbd: fix snapshot creation when other snap is active (#11475 Jason Dillaman)</p></li>
<li><p>librbd: new diff_iterate2 API (Jason Dillaman)</p></li>
<li><p>librbd: object map rebuild support (Jason Dillaman)</p></li>
<li><p>logrotate.d: prefer service over invoke-rc.d (#11330 Win Hierman, Sage Weil)</p></li>
<li><p>mds: avoid getting stuck in XLOCKDONE (#11254 Yan, Zheng)</p></li>
<li><p>mds: fix integer truncateion on large client ids (Henry Chang)</p></li>
<li><p>mds: many snapshot and stray fixes (Yan, Zheng)</p></li>
<li><p>mds: persist completed_requests reliably (#11048 John Spray)</p></li>
<li><p>mds: separate safe_pos in Journaler (#10368 John Spray)</p></li>
<li><p>mds: snapshot rename support (#3645 Yan, Zheng)</p></li>
<li><p>mds: warn when clients fail to advance oldest_client_tid (#10657 Yan, Zheng)</p></li>
<li><p>misc cleanups and fixes (Danny Al-Gaaf)</p></li>
<li><p>mon: fix average utilization calc for ‘osd df’ (Mykola Golub)</p></li>
<li><p>mon: fix variance calc in ‘osd df’ (Sage Weil)</p></li>
<li><p>mon: improve callout to crushtool (Mykola Golub)</p></li>
<li><p>mon: prevent bucket deletion when referenced by a crush rule (#11602 Sage Weil)</p></li>
<li><p>mon: prime pg_temp when CRUSH map changes (Sage Weil)</p></li>
<li><p>monclient: flush_log (John Spray)</p></li>
<li><p>msgr: async: many many fixes (Haomai Wang)</p></li>
<li><p>msgr: simple: fix clear_pipe (#11381 Haomai Wang)</p></li>
<li><p>osd: add latency perf counters for tier operations (Xinze Chi)</p></li>
<li><p>osd: avoid multiple hit set insertions (Zhiqiang Wang)</p></li>
<li><p>osd: break PG removal into multiple iterations (#10198 Guang Yang)</p></li>
<li><p>osd: check scrub state when handling map (Jianpeng Ma)</p></li>
<li><p>osd: fix endless repair when object is unrecoverable (Jianpeng Ma, Kefu Chai)</p></li>
<li><p>osd: fix pg resurrection (#11429 Samuel Just)</p></li>
<li><p>osd: ignore non-existent osds in unfound calc (#10976 Mykola Golub)</p></li>
<li><p>osd: increase default max open files (Owen Synge)</p></li>
<li><p>osd: prepopulate needs_recovery_map when only one peer has missing (#9558 Guang Yang)</p></li>
<li><p>osd: relax reply order on proxy read (#11211 Zhiqiang Wang)</p></li>
<li><p>osd: skip promotion for flush/evict op (Zhiqiang Wang)</p></li>
<li><p>osd: write journal header on clean shutdown (Xinze Chi)</p></li>
<li><p>qa: run-make-check.sh script (Loic Dachary)</p></li>
<li><p>rados bench: misc fixes (Dmitry Yatsushkevich)</p></li>
<li><p>rados: fix error message on failed pool removal (Wido den Hollander)</p></li>
<li><p>radosgw-admin: add ‘bucket check’ function to repair bucket index (Yehuda Sadeh)</p></li>
<li><p>rbd: allow unmapping by spec (Ilya Dryomov)</p></li>
<li><p>rbd: deprecate –new-format option (Jason Dillman)</p></li>
<li><p>rgw: do not set content-type if length is 0 (#11091 Orit Wasserman)</p></li>
<li><p>rgw: don’t use end_marker for namespaced object listing (#11437 Yehuda Sadeh)</p></li>
<li><p>rgw: fail if parts not specified on multipart upload (#11435 Yehuda Sadeh)</p></li>
<li><p>rgw: fix GET on swift account when limit == 0 (#10683 Radoslaw Zarzynski)</p></li>
<li><p>rgw: fix broken stats in container listing (#11285 Radoslaw Zarzynski)</p></li>
<li><p>rgw: fix bug in domain/subdomain splitting (Robin H. Johnson)</p></li>
<li><p>rgw: fix civetweb max threads (#10243 Yehuda Sadeh)</p></li>
<li><p>rgw: fix copy metadata, support X-Copied-From for swift (#10663 Radoslaw Zarzynski)</p></li>
<li><p>rgw: fix locator for objects starting with _ (#11442 Yehuda Sadeh)</p></li>
<li><p>rgw: fix mulitipart upload in retry path (#11604 Yehuda Sadeh)</p></li>
<li><p>rgw: fix quota enforcement on POST (#11323 Sergey Arkhipov)</p></li>
<li><p>rgw: fix return code on missing upload (#11436 Yehuda Sadeh)</p></li>
<li><p>rgw: force content type header on responses with no body (#11438 Orit Wasserman)</p></li>
<li><p>rgw: generate new object tag when setting attrs (#11256 Yehuda Sadeh)</p></li>
<li><p>rgw: issue aio for first chunk before flush cached data (#11322 Guang Yang)</p></li>
<li><p>rgw: make read user buckets backward compat (#10683 Radoslaw Zarzynski)</p></li>
<li><p>rgw: merge manifests properly with prefix override (#11622 Yehuda Sadeh)</p></li>
<li><p>rgw: return 412 on bad limit when listing buckets (#11613 Yehuda Sadeh)</p></li>
<li><p>rgw: send ETag, Last-Modified for swift (#11087 Radoslaw Zarzynski)</p></li>
<li><p>rgw: set content length on container GET, PUT, DELETE, HEAD (#10971, #11036 Radoslaw Zarzynski)</p></li>
<li><p>rgw: support end marker on swift container GET (#10682 Radoslaw Zarzynski)</p></li>
<li><p>rgw: swift: fix account listing (#11501 Radoslaw Zarzynski)</p></li>
<li><p>rgw: swift: set content-length on keystone tokens (#11473 Herv Rousseau)</p></li>
<li><p>rgw: use correct oid for gc chains (#11447 Yehuda Sadeh)</p></li>
<li><p>rgw: use unique request id for civetweb (#10295 Orit Wasserman)</p></li>
<li><p>rocksdb, leveldb: fix compact_on_mount (Xiaoxi Chen)</p></li>
<li><p>rocksdb: add perf counters for get/put latency (Xinxin Shu)</p></li>
<li><p>rpm: add suse firewall files (Tim Serong)</p></li>
<li><p>rpm: misc systemd and suse fixes (Owen Synge, Nathan Cutler)</p></li>
</ul>
</div>
</div>
<div class="section" id="v9-0-0">
<h1>v9.0.0<a class="headerlink" href="#v9-0-0" title="Permalink to this headline">¶</a></h1>
<p>This is the first development release for the Infernalis cycle, and
the first Ceph release to sport a version number from the new
numbering scheme.  The “9” indicates this is the 9th release cycle–I
(for Infernalis) is the 9th letter.  The first “0” indicates this is a
development release (“1” will mean release candidate and “2” will mean
stable release), and the final “0” indicates this is the first such
development release.</p>
<p>A few highlights include:</p>
<ul class="simple">
<li><p>a new ‘ceph daemonperf’ command to watch perfcounter stats in realtime</p></li>
<li><p>reduced MDS memory usage</p></li>
<li><p>many MDS snapshot fixes</p></li>
<li><p>librbd can now store options in the image itself</p></li>
<li><p>many fixes for RGW Swift API support</p></li>
<li><p>OSD performance improvements</p></li>
<li><p>many doc updates and misc bug fixes</p></li>
</ul>
<div class="section" id="id10">
<h2>Notable Changes<a class="headerlink" href="#id10" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>aarch64: add optimized version of crc32c (Yazen Ghannam, Steve Capper)</p></li>
<li><p>auth: reinit NSS after fork() (#11128 Yan, Zheng)</p></li>
<li><p>build: disable LTTNG by default (#11333 Josh Durgin)</p></li>
<li><p>build: fix ppc build (James Page)</p></li>
<li><p>build: install-deps: support OpenSUSE (Loic Dachary)</p></li>
<li><p>build: misc cmake fixes (Matt Benjamin)</p></li>
<li><p>ceph-disk: follow ceph-osd hints when creating journal (#9580 Sage Weil)</p></li>
<li><p>ceph-disk: handle re-using existing partition (#10987 Loic Dachary)</p></li>
<li><p>ceph-disk: improve parted output parsing (#10983 Loic Dachary)</p></li>
<li><p>ceph-disk: make suppression work for activate-all and activate-journal (Dan van der Ster)</p></li>
<li><p>ceph-disk: misc fixes (Alfredo Deza)</p></li>
<li><p>ceph-fuse, libcephfs: don’t clear COMPLETE when trimming null (Yan, Zheng)</p></li>
<li><p>ceph-fuse, libcephfs: hold exclusive caps on dirs we “own” (#11226 Greg Farnum)</p></li>
<li><p>ceph-fuse: do not require successful remount when unmounting (#10982 Greg Farnum)</p></li>
<li><p>ceph: new ‘ceph daemonperf’ command (John Spray, Mykola Golub)</p></li>
<li><p>common: PriorityQueue tests (Kefu Chai)</p></li>
<li><p>common: add descriptions to perfcounters (Kiseleva Alyona)</p></li>
<li><p>common: fix LTTNG vs fork issue (Josh Durgin)</p></li>
<li><p>crush: fix has_v4_buckets (#11364 Sage Weil)</p></li>
<li><p>crushtool: fix order of operations, usage (Sage Weil)</p></li>
<li><p>debian: minor package reorg (Ken Dreyer)</p></li>
<li><p>doc: docuemnt object corpus generation (#11099 Alexis Normand)</p></li>
<li><p>doc: fix gender neutrality (Alexandre Maragone)</p></li>
<li><p>doc: fix install doc (#10957 Kefu Chai)</p></li>
<li><p>doc: fix sphinx issues (Kefu Chai)</p></li>
<li><p>doc: mds data structure docs (Yan, Zheng)</p></li>
<li><p>doc: misc updates (Nilamdyuti Goswami, Vartika Rai, Florian Haas, Loic Dachary, Simon Guinot, Andy Allan, Alistair Israel, Ken Dreyer, Robin Rehu, Lee Revell, Florian Marsylle, Thomas Johnson, Bosse Klykken, Travis Rhoden, Ian Kelling)</p></li>
<li><p>doc: swift tempurls (#10184 Abhishek Lekshmanan)</p></li>
<li><p>doc: switch doxygen integration back to breathe (#6115 Kefu Chai)</p></li>
<li><p>erasure-code: update ISA-L to 2.13 (Yuan Zhou)</p></li>
<li><p>gmock: switch to submodule (Danny Al-Gaaf, Loic Dachary)</p></li>
<li><p>hadoop: add terasort test (Noah Watkins)</p></li>
<li><p>java: fix libcephfs bindings (Noah Watkins)</p></li>
<li><p>libcephfs,ceph-fuse: fix request resend on cap reconnect (#10912 Yan, Zheng)</p></li>
<li><p>librados: define C++ flags from C constants (Josh Durgin)</p></li>
<li><p>librados: fix last_force_resent handling (#11026 Jianpeng Ma)</p></li>
<li><p>librados: fix memory leak from C_TwoContexts (Xiong Yiliang)</p></li>
<li><p>librados: fix striper when stripe_count = 1 and stripe_unit != object_size (#11120 Yan, Zheng)</p></li>
<li><p>librados: op perf counters (John Spray)</p></li>
<li><p>librados: pybind: fix write() method return code (Javier Guerra)</p></li>
<li><p>libradosstriper: fix leak (Danny Al-Gaaf)</p></li>
<li><p>librbd: add purge_on_error cache behavior (Jianpeng Ma)</p></li>
<li><p>librbd: misc aio fixes (#5488 Jason Dillaman)</p></li>
<li><p>librbd: misc rbd fixes (#11478 #11113 #11342 #11380 Jason Dillaman, Zhiqiang Wang)</p></li>
<li><p>librbd: readahead fixes (Zhiqiang Wang)</p></li>
<li><p>librbd: store metadata, including config options, in image (Haomai Wang)</p></li>
<li><p>mds: add ‘damaged’ state to MDSMap (John Spray)</p></li>
<li><p>mds: add nicknames for perfcounters (John Spray)</p></li>
<li><p>mds: disable problematic rstat propagation into snap parents (Yan, Zheng)</p></li>
<li><p>mds: fix mydir replica issue with shutdown (#10743 John Spray)</p></li>
<li><p>mds: fix out-of-order messages (#11258 Yan, Zheng)</p></li>
<li><p>mds: fix shutdown with strays (#10744 John Spray)</p></li>
<li><p>mds: fix snapshot fixes (Yan, Zheng)</p></li>
<li><p>mds: fix stray handling (John Spray)</p></li>
<li><p>mds: flush immediately in do_open_truncate (#11011 John Spray)</p></li>
<li><p>mds: improve dump methods (John Spray)</p></li>
<li><p>mds: misc journal cleanups and fixes (#10368 John Spray)</p></li>
<li><p>mds: new SessionMap storage using omap (#10649 John Spray)</p></li>
<li><p>mds: reduce memory consumption (Yan, Zheng)</p></li>
<li><p>mds: throttle purge stray operations (#10390 John Spray)</p></li>
<li><p>mds: tolerate clock jumping backwards (#11053 Yan, Zheng)</p></li>
<li><p>misc coverity fixes (Danny Al-Gaaf)</p></li>
<li><p>mon: do not deactivate last mds (#10862 John Spray)</p></li>
<li><p>mon: make osd get pool ‘all’ only return applicable fields (#10891 Michal Jarzabek)</p></li>
<li><p>mon: warn on bogus cache tier config (Jianpeng Ma)</p></li>
<li><p>msg/async: misc bug fixes and updates (Haomai Wang)</p></li>
<li><p>msg/simple: fix connect_seq assert (Haomai Wang)</p></li>
<li><p>msg/xio: misc fixes (#10735 Matt Benjamin, Kefu Chai, Danny Al-Gaaf, Raju Kurunkad, Vu Pham)</p></li>
<li><p>msg: unit tests (Haomai Wang)</p></li>
<li><p>objectcacher: misc bug fixes (Jianpeng Ma)</p></li>
<li><p>os/filestore: enlarge getxattr buffer size (Jianpeng Ma)</p></li>
<li><p>osd: EIO injection (David Zhang)</p></li>
<li><p>osd: add misc perfcounters (Xinze Chi)</p></li>
<li><p>osd: add simple sleep injection in recovery (Sage Weil)</p></li>
<li><p>osd: allow SEEK_HOLE/SEEK_DATA for sparse read (Zhiqiang Wang)</p></li>
<li><p>osd: avoid dup omap sets for in pg metadata (Sage Weil)</p></li>
<li><p>osd: clean up some constness, privateness (Kefu Chai)</p></li>
<li><p>osd: erasure-code: drop entries according to LRU (Andreas-Joachim Peters)</p></li>
<li><p>osd: fix negative degraded stats during backfill (Guang Yang)</p></li>
<li><p>osd: misc fixes (Ning Yao, Kefu Chai, Xinze Chi, Zhiqiang Wang, Jianpeng Ma)</p></li>
<li><p>pybind: pep8 cleanups (Danny Al-Gaaf)</p></li>
<li><p>qa: fix filelock_interrupt.py test (Yan, Zheng)</p></li>
<li><p>qa: improve ceph-disk tests (Loic Dachary)</p></li>
<li><p>qa: improve docker build layers (Loic Dachary)</p></li>
<li><p>rados: translate erno to string in CLI (#10877 Kefu Chai)</p></li>
<li><p>rbd: accept map options config option (Ilya Dryomov)</p></li>
<li><p>rbd: cli: fix arg parsing with –io-pattern (Dmitry Yatsushkevich)</p></li>
<li><p>rbd: fix error messages (#2862 Rajesh Nambiar)</p></li>
<li><p>rbd: update rbd man page (Ilya Dryomov)</p></li>
<li><p>rbd: update xfstests tests (Douglas Fuller)</p></li>
<li><p>rgw: add X-Timestamp for Swift containers (#10938 Radoslaw Zarzynski)</p></li>
<li><p>rgw: add missing headers to Swift container details (#10666 Ahmad Faheem, Dmytro Iurchenko)</p></li>
<li><p>rgw: add stats to headers for account GET (#10684 Yuan Zhou)</p></li>
<li><p>rgw: do not prefecth data for HEAD requests (Guang Yang)</p></li>
<li><p>rgw: don’t clobber bucket/object owner when setting ACLs (#10978 Yehuda Sadeh)</p></li>
<li><p>rgw: don’t use rgw_socket_path if frontend is configured (#11160 Yehuda Sadeh)</p></li>
<li><p>rgw: enforce Content-Lenth for POST on Swift cont/obj (#10661 Radoslaw Zarzynski)</p></li>
<li><p>rgw: fix handling empty metadata items on Swift container (#11088 Radoslaw Zarzynski)</p></li>
<li><p>rgw: fix log rotation (Wuxingyi)</p></li>
<li><p>rgw: generate Date header for civetweb (#10873 Radoslaw Zarzynski)</p></li>
<li><p>rgw: make init script wait for radosgw to stop (#11140 Dmitry Yatsushkevich)</p></li>
<li><p>rgw: make quota/gc threads configurable (#11047 Guang Yang)</p></li>
<li><p>rgw: pass in civetweb configurables (#10907 Yehuda Sadeh)</p></li>
<li><p>rgw: rectify 202 Accepted in PUT response (#11148 Radoslaw Zarzynski)</p></li>
<li><p>rgw: remove meta file after deleting bucket (#11149 Orit Wasserman)</p></li>
<li><p>rgw: swift: allow setting attributes with COPY (#10662 Ahmad Faheem, Dmytro Iurchenko)</p></li>
<li><p>rgw: swift: fix metadata handling on copy (#10645 Radoslaw Zarzynski)</p></li>
<li><p>rgw: swift: send Last-Modified header (#10650 Radoslaw Zarzynski)</p></li>
<li><p>rgw: update keystone cache with token info (#11125 Yehuda Sadeh)</p></li>
<li><p>rgw: update to latest civetweb, enable config for IPv6 (#10965 Yehuda Sadeh)</p></li>
<li><p>rocksdb: update to latest (Xiaoxi Chen)</p></li>
<li><p>rpm: loosen ceph-test dependencies (Ken Dreyer)</p></li>
</ul>
</div>
</div>



          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../../">
              <img class="logo" src="../../_static/logo.png" alt="Logo"/>
            </a></p>
<h3><a href="../../">Table Of Contents</a></h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../start/intro/">Ceph 简介</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../install/">安装 Ceph</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../cephadm/">Cephadm</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../rados/">Ceph 存储集群</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../cephfs/">Ceph 文件系统</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../rbd/">Ceph 块设备</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../radosgw/">Ceph 对象网关</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../mgr/">Ceph 管理器守护进程</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../mgr/dashboard/">Ceph 仪表盘</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api/">API 文档</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../architecture/">体系结构</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../dev/developer_guide/">开发者指南</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../dev/internals/">Ceph 内幕</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../governance/">项目管理</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../foundation/">Ceph 基金会</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../ceph-volume/">ceph-volume</a></li>
<li class="toctree-l1"><a class="reference internal" href="../general/">Ceph 版本（总目录）</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../">Ceph 版本（索引）</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../#id1">活跃版本</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../#id2">归档版本</a><ul class="current">
<li class="toctree-l3 current"><a class="reference internal" href="../archived-index/">归档版本目录</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="../luminous/">v12.2.13 Luminous</a></li>
<li class="toctree-l4"><a class="reference internal" href="../luminous/#v12-2-12-luminous">v12.2.12 Luminous</a></li>
<li class="toctree-l4"><a class="reference internal" href="../luminous/#v12-2-11-luminous">v12.2.11 Luminous</a></li>
<li class="toctree-l4"><a class="reference internal" href="../luminous/#v12-2-10-luminous">v12.2.10 Luminous</a></li>
<li class="toctree-l4"><a class="reference internal" href="../luminous/#v12-2-9-luminous">v12.2.9 Luminous</a></li>
<li class="toctree-l4"><a class="reference internal" href="../luminous/#v12-2-8-luminous">v12.2.8 Luminous</a></li>
<li class="toctree-l4"><a class="reference internal" href="../luminous/#v12-2-7-luminous">v12.2.7 Luminous</a></li>
<li class="toctree-l4"><a class="reference internal" href="../luminous/#v12-2-6-luminous">v12.2.6 Luminous</a></li>
<li class="toctree-l4"><a class="reference internal" href="../luminous/#v12-2-5-luminous">v12.2.5 Luminous</a></li>
<li class="toctree-l4"><a class="reference internal" href="../luminous/#v12-2-4-luminous">v12.2.4 Luminous</a></li>
<li class="toctree-l4"><a class="reference internal" href="../luminous/#v12-2-3-luminous">v12.2.3 Luminous</a></li>
<li class="toctree-l4"><a class="reference internal" href="../luminous/#v12-2-2-luminous">v12.2.2 Luminous</a></li>
<li class="toctree-l4"><a class="reference internal" href="../luminous/#v12-2-1-luminous">v12.2.1 Luminous</a></li>
<li class="toctree-l4"><a class="reference internal" href="../luminous/#v12-2-0-luminous">v12.2.0 Luminous</a></li>
<li class="toctree-l4"><a class="reference internal" href="../kraken/">v11.2.1 Kraken</a></li>
<li class="toctree-l4"><a class="reference internal" href="../kraken/#v11-2-0-kraken">v11.2.0 Kraken</a></li>
<li class="toctree-l4"><a class="reference internal" href="../kraken/#v11-0-2-kraken">v11.0.2 Kraken</a></li>
<li class="toctree-l4"><a class="reference internal" href="../jewel/">v10.2.11 Jewel</a></li>
<li class="toctree-l4"><a class="reference internal" href="../jewel/#v10-2-10-jewel">v10.2.10 Jewel</a></li>
<li class="toctree-l4"><a class="reference internal" href="../jewel/#v10-2-9-jewel">v10.2.9 Jewel</a></li>
<li class="toctree-l4"><a class="reference internal" href="../jewel/#v10-2-8-jewel">v10.2.8 Jewel</a></li>
<li class="toctree-l4"><a class="reference internal" href="../jewel/#v10-2-7-jewel">v10.2.7 Jewel</a></li>
<li class="toctree-l4"><a class="reference internal" href="../jewel/#v10-2-6-jewel">v10.2.6 Jewel</a></li>
<li class="toctree-l4"><a class="reference internal" href="../jewel/#v10-2-5-jewel">v10.2.5 Jewel</a></li>
<li class="toctree-l4"><a class="reference internal" href="../jewel/#v10-2-4-jewel">v10.2.4 Jewel</a></li>
<li class="toctree-l4"><a class="reference internal" href="../jewel/#v10-2-3-jewel">v10.2.3 Jewel</a></li>
<li class="toctree-l4"><a class="reference internal" href="../jewel/#v10-2-2-jewel">v10.2.2 Jewel</a></li>
<li class="toctree-l4"><a class="reference internal" href="../jewel/#v10-2-1-jewel">v10.2.1 Jewel</a></li>
<li class="toctree-l4"><a class="reference internal" href="../jewel/#v10-2-0-jewel">v10.2.0 Jewel</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">v9.2.1 Infernalis</a><ul>
<li class="toctree-l5"><a class="reference internal" href="#upgrading">Upgrading</a></li>
<li class="toctree-l5"><a class="reference internal" href="#notable-changes">Notable Changes</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="#v9-2-0-infernalis">v9.2.0 Infernalis</a><ul>
<li class="toctree-l5"><a class="reference internal" href="#major-changes-from-hammer">Major Changes from Hammer</a></li>
<li class="toctree-l5"><a class="reference internal" href="#distro-compatibility">Distro compatibility</a></li>
<li class="toctree-l5"><a class="reference internal" href="#upgrading-from-firefly">Upgrading from Firefly</a></li>
<li class="toctree-l5"><a class="reference internal" href="#upgrading-from-hammer">Upgrading from Hammer</a></li>
<li class="toctree-l5"><a class="reference internal" href="#notable-changes-since-hammer">Notable Changes since Hammer</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="#v9-1-0-infernalis-release-candidate">v9.1.0 Infernalis release candidate</a><ul>
<li class="toctree-l5"><a class="reference internal" href="#getting-the-release-candidate">Getting the release candidate</a></li>
<li class="toctree-l5"><a class="reference internal" href="#known-issues">Known issues</a></li>
<li class="toctree-l5"><a class="reference internal" href="#id1">Major Changes from Hammer</a></li>
<li class="toctree-l5"><a class="reference internal" href="#id2">Distro compatibility</a></li>
<li class="toctree-l5"><a class="reference internal" href="#id3">Upgrading from Firefly</a></li>
<li class="toctree-l5"><a class="reference internal" href="#id4">Upgrading from Hammer</a></li>
<li class="toctree-l5"><a class="reference internal" href="#upgrade-notes">Upgrade notes</a></li>
<li class="toctree-l5"><a class="reference internal" href="#id5">Notable changes</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="#v9-0-3">v9.0.3</a><ul>
<li class="toctree-l5"><a class="reference internal" href="#id6">Upgrading</a></li>
<li class="toctree-l5"><a class="reference internal" href="#id7">Notable Changes</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="#v9-0-2">v9.0.2</a><ul>
<li class="toctree-l5"><a class="reference internal" href="#id8">Notable Changes</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="#v9-0-1">v9.0.1</a><ul>
<li class="toctree-l5"><a class="reference internal" href="#id9">Notable Changes</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="#v9-0-0">v9.0.0</a><ul>
<li class="toctree-l5"><a class="reference internal" href="#id10">Notable Changes</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../hammer/">v0.94.10 Hammer</a></li>
<li class="toctree-l4"><a class="reference internal" href="../hammer/#v0-94-9-hammer">v0.94.9 Hammer</a></li>
<li class="toctree-l4"><a class="reference internal" href="../hammer/#v0-94-8-hammer">v0.94.8 Hammer</a></li>
<li class="toctree-l4"><a class="reference internal" href="../hammer/#v0-94-7-hammer">v0.94.7 Hammer</a></li>
<li class="toctree-l4"><a class="reference internal" href="../hammer/#v0-94-6-hammer">v0.94.6 Hammer</a></li>
<li class="toctree-l4"><a class="reference internal" href="../hammer/#v0-94-5-hammer">v0.94.5 Hammer</a></li>
<li class="toctree-l4"><a class="reference internal" href="../hammer/#v0-94-4-hammer">v0.94.4 Hammer</a></li>
<li class="toctree-l4"><a class="reference internal" href="../hammer/#v0-94-3-hammer">v0.94.3 Hammer</a></li>
<li class="toctree-l4"><a class="reference internal" href="../hammer/#v0-94-2-hammer">v0.94.2 Hammer</a></li>
<li class="toctree-l4"><a class="reference internal" href="../hammer/#v0-94-1-hammer">v0.94.1 Hammer</a></li>
<li class="toctree-l4"><a class="reference internal" href="../hammer/#v0-94-hammer">v0.94 Hammer</a></li>
<li class="toctree-l4"><a class="reference internal" href="../hammer/#v0-93">v0.93</a></li>
<li class="toctree-l4"><a class="reference internal" href="../hammer/#v0-92">v0.92</a></li>
<li class="toctree-l4"><a class="reference internal" href="../hammer/#v0-91">v0.91</a></li>
<li class="toctree-l4"><a class="reference internal" href="../hammer/#v0-90">v0.90</a></li>
<li class="toctree-l4"><a class="reference internal" href="../hammer/#v0-89">v0.89</a></li>
<li class="toctree-l4"><a class="reference internal" href="../hammer/#v0-88">v0.88</a></li>
<li class="toctree-l4"><a class="reference internal" href="../giant/">v0.87.2 Giant</a></li>
<li class="toctree-l4"><a class="reference internal" href="../giant/#v0-87-1-giant">v0.87.1 Giant</a></li>
<li class="toctree-l4"><a class="reference internal" href="../giant/#v0-87-giant">v0.87 Giant</a></li>
<li class="toctree-l4"><a class="reference internal" href="../giant/#v0-86">v0.86</a></li>
<li class="toctree-l4"><a class="reference internal" href="../giant/#v0-85">v0.85</a></li>
<li class="toctree-l4"><a class="reference internal" href="../giant/#v0-84">v0.84</a></li>
<li class="toctree-l4"><a class="reference internal" href="../giant/#v0-83">v0.83</a></li>
<li class="toctree-l4"><a class="reference internal" href="../giant/#v0-82">v0.82</a></li>
<li class="toctree-l4"><a class="reference internal" href="../giant/#v0-81">v0.81</a></li>
<li class="toctree-l4"><a class="reference internal" href="../firefly/">v0.80.11 Firefly</a></li>
<li class="toctree-l4"><a class="reference internal" href="../firefly/#v0-80-10-firefly">v0.80.10 Firefly</a></li>
<li class="toctree-l4"><a class="reference internal" href="../firefly/#v0-80-9-firefly">v0.80.9 Firefly</a></li>
<li class="toctree-l4"><a class="reference internal" href="../firefly/#v0-80-8-firefly">v0.80.8 Firefly</a></li>
<li class="toctree-l4"><a class="reference internal" href="../firefly/#v0-80-7-firefly">v0.80.7 Firefly</a></li>
<li class="toctree-l4"><a class="reference internal" href="../firefly/#v0-80-6-firefly">v0.80.6 Firefly</a></li>
<li class="toctree-l4"><a class="reference internal" href="../firefly/#v0-80-5-firefly">v0.80.5 Firefly</a></li>
<li class="toctree-l4"><a class="reference internal" href="../firefly/#v0-80-4-firefly">v0.80.4 Firefly</a></li>
<li class="toctree-l4"><a class="reference internal" href="../firefly/#v0-80-3-firefly">v0.80.3 Firefly</a></li>
<li class="toctree-l4"><a class="reference internal" href="../firefly/#v0-80-2-firefly">v0.80.2 Firefly</a></li>
<li class="toctree-l4"><a class="reference internal" href="../firefly/#v0-80-1-firefly">v0.80.1 Firefly</a></li>
<li class="toctree-l4"><a class="reference internal" href="../firefly/#v0-80-firefly">v0.80 Firefly</a></li>
<li class="toctree-l4"><a class="reference internal" href="../firefly/#v0-79">v0.79</a></li>
<li class="toctree-l4"><a class="reference internal" href="../firefly/#v0-78">v0.78</a></li>
<li class="toctree-l4"><a class="reference internal" href="../firefly/#v0-77">v0.77</a></li>
<li class="toctree-l4"><a class="reference internal" href="../firefly/#v0-76">v0.76</a></li>
<li class="toctree-l4"><a class="reference internal" href="../firefly/#v0-75">v0.75</a></li>
<li class="toctree-l4"><a class="reference internal" href="../firefly/#v0-74">v0.74</a></li>
<li class="toctree-l4"><a class="reference internal" href="../firefly/#v0-73">v0.73</a></li>
<li class="toctree-l4"><a class="reference internal" href="../emperor/">v0.72.3 Emperor (pending release)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../emperor/#v0-72-2-emperor">v0.72.2 Emperor</a></li>
<li class="toctree-l4"><a class="reference internal" href="../emperor/#v0-72-1-emperor">v0.72.1 Emperor</a></li>
<li class="toctree-l4"><a class="reference internal" href="../emperor/#v0-72-emperor">v0.72 Emperor</a></li>
<li class="toctree-l4"><a class="reference internal" href="../emperor/#v0-71">v0.71</a></li>
<li class="toctree-l4"><a class="reference internal" href="../emperor/#v0-70">v0.70</a></li>
<li class="toctree-l4"><a class="reference internal" href="../emperor/#v0-69">v0.69</a></li>
<li class="toctree-l4"><a class="reference internal" href="../emperor/#v0-68">v0.68</a></li>
<li class="toctree-l4"><a class="reference internal" href="../dumpling/">v0.67.12 “Dumpling” (draft)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../dumpling/#v0-67-11-dumpling">v0.67.11 “Dumpling”</a></li>
<li class="toctree-l4"><a class="reference internal" href="../dumpling/#v0-67-10-dumpling">v0.67.10 “Dumpling”</a></li>
<li class="toctree-l4"><a class="reference internal" href="../dumpling/#v0-67-9-dumpling">v0.67.9 “Dumpling”</a></li>
<li class="toctree-l4"><a class="reference internal" href="../dumpling/#v0-67-8-dumpling">v0.67.8 “Dumpling”</a></li>
<li class="toctree-l4"><a class="reference internal" href="../dumpling/#v0-67-7-dumpling">v0.67.7 “Dumpling”</a></li>
<li class="toctree-l4"><a class="reference internal" href="../dumpling/#v0-67-6-dumpling">v0.67.6 “Dumpling”</a></li>
<li class="toctree-l4"><a class="reference internal" href="../dumpling/#v0-67-5-dumpling">v0.67.5 “Dumpling”</a></li>
<li class="toctree-l4"><a class="reference internal" href="../dumpling/#v0-67-4-dumpling">v0.67.4 “Dumpling”</a></li>
<li class="toctree-l4"><a class="reference internal" href="../dumpling/#v0-67-3-dumpling">v0.67.3 “Dumpling”</a></li>
<li class="toctree-l4"><a class="reference internal" href="../dumpling/#v0-67-2-dumpling">v0.67.2 “Dumpling”</a></li>
<li class="toctree-l4"><a class="reference internal" href="../dumpling/#v0-67-1-dumpling">v0.67.1 “Dumpling”</a></li>
<li class="toctree-l4"><a class="reference internal" href="../dumpling/#v0-67-dumpling">v0.67 “Dumpling”</a></li>
<li class="toctree-l4"><a class="reference internal" href="../dumpling/#v0-66">v0.66</a></li>
<li class="toctree-l4"><a class="reference internal" href="../dumpling/#v0-65">v0.65</a></li>
<li class="toctree-l4"><a class="reference internal" href="../dumpling/#v0-64">v0.64</a></li>
<li class="toctree-l4"><a class="reference internal" href="../dumpling/#v0-63">v0.63</a></li>
<li class="toctree-l4"><a class="reference internal" href="../dumpling/#v0-62">v0.62</a></li>
<li class="toctree-l4"><a class="reference internal" href="../cuttlefish/">v0.61.9 “Cuttlefish”</a></li>
<li class="toctree-l4"><a class="reference internal" href="../cuttlefish/#v0-61-8-cuttlefish">v0.61.8 “Cuttlefish”</a></li>
<li class="toctree-l4"><a class="reference internal" href="../cuttlefish/#v0-61-7-cuttlefish">v0.61.7 “Cuttlefish”</a></li>
<li class="toctree-l4"><a class="reference internal" href="../cuttlefish/#v0-61-6-cuttlefish">v0.61.6 “Cuttlefish”</a></li>
<li class="toctree-l4"><a class="reference internal" href="../cuttlefish/#v0-61-5-cuttlefish">v0.61.5 “Cuttlefish”</a></li>
<li class="toctree-l4"><a class="reference internal" href="../cuttlefish/#v0-61-4-cuttlefish">v0.61.4 “Cuttlefish”</a></li>
<li class="toctree-l4"><a class="reference internal" href="../cuttlefish/#v0-61-3-cuttlefish">v0.61.3 “Cuttlefish”</a></li>
<li class="toctree-l4"><a class="reference internal" href="../cuttlefish/#v0-61-2-cuttlefish">v0.61.2 “Cuttlefish”</a></li>
<li class="toctree-l4"><a class="reference internal" href="../cuttlefish/#v0-61-1-cuttlefish">v0.61.1 “Cuttlefish”</a></li>
<li class="toctree-l4"><a class="reference internal" href="../cuttlefish/#v0-61-cuttlefish">v0.61 “Cuttlefish”</a></li>
<li class="toctree-l4"><a class="reference internal" href="../cuttlefish/#v0-60">v0.60</a></li>
<li class="toctree-l4"><a class="reference internal" href="../cuttlefish/#v0-59">v0.59</a></li>
<li class="toctree-l4"><a class="reference internal" href="../cuttlefish/#v0-58">v0.58</a></li>
<li class="toctree-l4"><a class="reference internal" href="../cuttlefish/#v0-57">v0.57</a></li>
<li class="toctree-l4"><a class="reference internal" href="../bobtail/">v0.56.7 “bobtail”</a></li>
<li class="toctree-l4"><a class="reference internal" href="../bobtail/#v0-56-6-bobtail">v0.56.6 “bobtail”</a></li>
<li class="toctree-l4"><a class="reference internal" href="../bobtail/#v0-56-5-bobtail">v0.56.5 “bobtail”</a></li>
<li class="toctree-l4"><a class="reference internal" href="../bobtail/#v0-56-4-bobtail">v0.56.4 “bobtail”</a></li>
<li class="toctree-l4"><a class="reference internal" href="../bobtail/#v0-56-3-bobtail">v0.56.3 “bobtail”</a></li>
<li class="toctree-l4"><a class="reference internal" href="../bobtail/#v0-56-2-bobtail">v0.56.2 “bobtail”</a></li>
<li class="toctree-l4"><a class="reference internal" href="../bobtail/#v0-56-1-bobtail">v0.56.1 “bobtail”</a></li>
<li class="toctree-l4"><a class="reference internal" href="../bobtail/#v0-56-bobtail">v0.56 “bobtail”</a></li>
<li class="toctree-l4"><a class="reference internal" href="../bobtail/#v0-54">v0.54</a></li>
<li class="toctree-l4"><a class="reference internal" href="../argonaut/">v0.48.3 “argonaut”</a></li>
<li class="toctree-l4"><a class="reference internal" href="../argonaut/#v0-48-2-argonaut">v0.48.2 “argonaut”</a></li>
<li class="toctree-l4"><a class="reference internal" href="../argonaut/#v0-48-1-argonaut">v0.48.1 “argonaut”</a></li>
<li class="toctree-l4"><a class="reference internal" href="../argonaut/#v0-48-argonaut">v0.48 “argonaut”</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../glossary/">Ceph 术语</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../translation_cn/">中文版翻译资源</a></li>
</ul>


<!-- ugly kludge to make genindex look like it's part of the toc -->
<ul style="margin-top: -10px"><li class="toctree-l1"><a class="reference internal" href="../../genindex/">Index</a></li></ul>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search/" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex/" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../../py-modindex/" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="../hammer/" title="v0.94.10 Hammer"
             >next</a> |</li>
        <li class="right" >
          <a href="../jewel/" title="v10.2.11 Jewel"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../">Ceph Documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../" >Ceph 版本（索引）</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="../archived-index/" >归档的版本</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2016, Ceph authors and contributors. Licensed under Creative Commons Attribution Share Alike 3.0 (CC-BY-SA-3.0).
    </div>
  </body>
</html>