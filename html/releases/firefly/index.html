
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>v0.80.11 Firefly &#8212; Ceph Documentation</title>
    <link rel="stylesheet" href="../../_static/nature.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../_static/graphviz.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/custom.css" />
    <script id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/language_data.js"></script>
    <script src="../../_static/js/ceph.js"></script>
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../../genindex/" />
    <link rel="search" title="Search" href="../../search/" />
    <link rel="next" title="v0.72.3 Emperor (pending release)" href="../emperor/" />
    <link rel="prev" title="v0.87.2 Giant" href="../giant/" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex/" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../py-modindex/" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="../emperor/" title="v0.72.3 Emperor (pending release)"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="../giant/" title="v0.87.2 Giant"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../">Ceph Documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../" >Ceph 版本（索引）</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="../archived-index/" accesskey="U">归档的版本</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            

<div id="dev-warning" class="admonition note" style="display:none;">
  <p class="first admonition-title">Notice</p>
  <p class="last">This document is for a development version of Ceph.</p>
</div>

<div id="eol-warning" class="admonition warning" style="display:none;">
  <p class="first admonition-title">Warning</p>
  <p class="last">This document is for an unsupported version of Ceph.</p>
</div>
  <div id="docubetter" align="right" style="display:none; padding: 15px; font-weight: bold;">
    <a id="edit-on-github" href="https://github.com/ceph/ceph/edit/master/doc/releases/firefly.rst" rel="nofollow">Edit on GitHub</a> | <a href="https://pad.ceph.com/p/Report_Documentation_Bugs">Report a Documentation Bug</a>
  </div>

  
  <div class="section" id="v0-80-11-firefly">
<h1>v0.80.11 Firefly<a class="headerlink" href="#v0-80-11-firefly" title="Permalink to this headline">¶</a></h1>
<p>This is a bugfix release for Firefly.  This Firefly 0.80.x is nearing
its planned end of life in January 2016 it may also be the last.</p>
<p>We recommend that all Firefly users upgrade.</p>
<p>For more detailed information, see <a class="reference download internal" download="" href="../../_downloads/e4b4d925b1b4777f594c7666ab9f36af/v0.80.11.txt"><code class="xref download docutils literal notranslate"><span class="pre">the</span> <span class="pre">complete</span> <span class="pre">changelog</span></code></a>.</p>
<div class="section" id="notable-changes">
<h2>Notable Changes<a class="headerlink" href="#notable-changes" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>build/ops: /etc/init.d/radosgw restart does not work correctly (<a class="reference external" href="http://tracker.ceph.com/issues/11140">issue#11140</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/5831">pr#5831</a>, Dmitry Yatsushkevich)</p></li>
<li><p>build/ops: Fix -Wno-format and -Werror=format-security options clash  (<a class="reference external" href="http://tracker.ceph.com/issues/13417">issue#13417</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/6207">pr#6207</a>, Boris Ranto)</p></li>
<li><p>build/ops: ceph-common needs python-argparse on older distros, but doesn’t require it (<a class="reference external" href="http://tracker.ceph.com/issues/12034">issue#12034</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/5217">pr#5217</a>, Nathan Cutler)</p></li>
<li><p>build/ops: ceph.spec.in running fdupes unnecessarily (<a class="reference external" href="http://tracker.ceph.com/issues/12301">issue#12301</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/5224">pr#5224</a>, Nathan Cutler)</p></li>
<li><p>build/ops: ceph.spec.in: 50-rbd.rules conditional is wrong (<a class="reference external" href="http://tracker.ceph.com/issues/12166">issue#12166</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/5225">pr#5225</a>, Nathan Cutler)</p></li>
<li><p>build/ops: ceph.spec.in: useless %py_requires breaks SLE11-SP3 build (<a class="reference external" href="http://tracker.ceph.com/issues/12351">issue#12351</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/5394">pr#5394</a>, Nathan Cutler)</p></li>
<li><p>build/ops: fedora21 has junit, not junit4  (<a class="reference external" href="http://tracker.ceph.com/issues/10728">issue#10728</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/6203">pr#6203</a>, Ken Dreyer, Loic Dachary)</p></li>
<li><p>build/ops: upstart: configuration is too generous on restarts (<a class="reference external" href="http://tracker.ceph.com/issues/11798">issue#11798</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/5992">pr#5992</a>, Sage Weil)</p></li>
<li><p>common: Client admin socket leaks file descriptors (<a class="reference external" href="http://tracker.ceph.com/issues/11535">issue#11535</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/4633">pr#4633</a>, Jon Bernard)</p></li>
<li><p>common: FileStore calls syncfs(2) even it is not supported (<a class="reference external" href="http://tracker.ceph.com/issues/12512">issue#12512</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/5529">pr#5529</a>, Danny Al-Gaaf, Kefu Chai, Jianpeng Ma)</p></li>
<li><p>common: HeartBeat: include types (<a class="reference external" href="http://tracker.ceph.com/issues/13088">issue#13088</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/6038">pr#6038</a>, Sage Weil)</p></li>
<li><p>common: Malformed JSON command output when non-ASCII strings are present  (<a class="reference external" href="http://tracker.ceph.com/issues/7387">issue#7387</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/4635">pr#4635</a>, Kefu Chai, Tim Serong)</p></li>
<li><p>common: Memory leak in Mutex.cc, pthread_mutexattr_init without pthread_mutexattr_destroy (<a class="reference external" href="http://tracker.ceph.com/issues/11762">issue#11762</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/5403">pr#5403</a>, Ketor Meng)</p></li>
<li><p>common: Thread:pthread_attr_destroy(thread_attr) when done with it (<a class="reference external" href="http://tracker.ceph.com/issues/12570">issue#12570</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/6325">pr#6325</a>, Piotr Dałek, Zheng Qiankun)</p></li>
<li><p>common: ThreadPool add/remove work queue methods not thread safe (<a class="reference external" href="http://tracker.ceph.com/issues/12662">issue#12662</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/5991">pr#5991</a>, Jason Dillaman)</p></li>
<li><p>common: buffer: critical bufferlist::zero bug (<a class="reference external" href="http://tracker.ceph.com/issues/12252">issue#12252</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/5388">pr#5388</a>, Haomai Wang)</p></li>
<li><p>common: log: take mutex while opening fd (<a class="reference external" href="http://tracker.ceph.com/issues/12465">issue#12465</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/5406">pr#5406</a>, Samuel Just)</p></li>
<li><p>common: recursive lock of md_config_t (0) (<a class="reference external" href="http://tracker.ceph.com/issues/12614">issue#12614</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/5814">pr#5814</a>, Josh Durgin)</p></li>
<li><p>crush: take crashes due to invalid arg (<a class="reference external" href="http://tracker.ceph.com/issues/11602">issue#11602</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/4769">pr#4769</a>, Sage Weil)</p></li>
<li><p>doc: backport v0.80.10 release notes to firefly (<a class="reference external" href="http://tracker.ceph.com/issues/11090">issue#11090</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/5307">pr#5307</a>, Loic Dachary, Sage Weil)</p></li>
<li><p>doc: update docs to point to download.ceph.com (<a class="reference external" href="http://tracker.ceph.com/issues/13162">issue#13162</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/5993">pr#5993</a>, Alfredo Deza)</p></li>
<li><p>fs: MDSMonitor: handle MDSBeacon messages properly (<a class="reference external" href="http://tracker.ceph.com/issues/11590">issue#11590</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/5199">pr#5199</a>, Kefu Chai)</p></li>
<li><p>fs: client nonce collision due to unshared pid namespaces (<a class="reference external" href="http://tracker.ceph.com/issues/13032">issue#13032</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/6087">pr#6087</a>, Josh Durgin, Sage Weil)</p></li>
<li><p>librbd: Objectcacher setting max object counts too low (<a class="reference external" href="http://tracker.ceph.com/issues/7385">issue#7385</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/4639">pr#4639</a>, Jason Dillaman)</p></li>
<li><p>librbd: aio calls may block (<a class="reference external" href="http://tracker.ceph.com/issues/11056">issue#11056</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/4854">pr#4854</a>, Haomai Wang, Sage Weil, Jason Dillaman)</p></li>
<li><p>librbd: internal.cc: 1967: FAILED assert(watchers.size() == 1) (<a class="reference external" href="http://tracker.ceph.com/issues/12176">issue#12176</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/5171">pr#5171</a>, Jason Dillaman)</p></li>
<li><p>mon: Clock skew causes missing summary and confuses Calamari (<a class="reference external" href="http://tracker.ceph.com/issues/11877">issue#11877</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/4867">pr#4867</a>, Thorsten Behrens)</p></li>
<li><p>mon: EC pools are not allowed as cache pools, disallow in the mon (<a class="reference external" href="http://tracker.ceph.com/issues/11650">issue#11650</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/5389">pr#5389</a>, Samuel Just)</p></li>
<li><p>mon: Make it more difficult to delete pools in firefly (<a class="reference external" href="http://tracker.ceph.com/issues/11800">issue#11800</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/4788">pr#4788</a>, Sage Weil)</p></li>
<li><p>mon: MonitorDBStore: get_next_key() only if prefix matches (<a class="reference external" href="http://tracker.ceph.com/issues/11786">issue#11786</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/5360">pr#5360</a>, Joao Eduardo Luis)</p></li>
<li><p>mon: PaxosService: call post_refresh() instead of post_paxos_update() (<a class="reference external" href="http://tracker.ceph.com/issues/11470">issue#11470</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/5358">pr#5358</a>, Joao Eduardo Luis)</p></li>
<li><p>mon: add a cache layer over MonitorDBStore (<a class="reference external" href="http://tracker.ceph.com/issues/12638">issue#12638</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/5698">pr#5698</a>, Kefu Chai)</p></li>
<li><p>mon: adding exsting pool as tier with –force-nonempty clobbers removed_snaps (<a class="reference external" href="http://tracker.ceph.com/issues/11493">issue#11493</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/5236">pr#5236</a>, Sage Weil, Samuel Just)</p></li>
<li><p>mon: ceph fails to compile with boost 1.58 (<a class="reference external" href="http://tracker.ceph.com/issues/11576">issue#11576</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/5129">pr#5129</a>, Kefu Chai)</p></li>
<li><p>mon: does not check for IO errors on every transaction (<a class="reference external" href="http://tracker.ceph.com/issues/13089">issue#13089</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/6091">pr#6091</a>, Sage Weil)</p></li>
<li><p>mon: get pools health’info have error (<a class="reference external" href="http://tracker.ceph.com/issues/12402">issue#12402</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/5410">pr#5410</a>, renhwztetecs)</p></li>
<li><p>mon: increase globalid default for firefly (<a class="reference external" href="http://tracker.ceph.com/issues/13255">issue#13255</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/6010">pr#6010</a>, Sage Weil)</p></li>
<li><p>mon: pgmonitor: wrong at/near target max“ reporting (<a class="reference external" href="http://tracker.ceph.com/issues/12401">issue#12401</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/5409">pr#5409</a>, huangjun)</p></li>
<li><p>mon: register_new_pgs() should check ruleno instead of its index (<a class="reference external" href="http://tracker.ceph.com/issues/12210">issue#12210</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/5404">pr#5404</a>, Xinze Chi)</p></li>
<li><p>mon: scrub error (osdmap encoding mismatch?) upgrading from 0.80 to ~0.80.2 (<a class="reference external" href="http://tracker.ceph.com/issues/8815">issue#8815</a>, <a class="reference external" href="http://tracker.ceph.com/issues/8674">issue#8674</a>, <a class="reference external" href="http://tracker.ceph.com/issues/9064">issue#9064</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/5200">pr#5200</a>, Sage Weil, Zhiqiang Wang, Samuel Just)</p></li>
<li><p>mon: the output is wrong when runing ceph osd reweight (<a class="reference external" href="http://tracker.ceph.com/issues/12251">issue#12251</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/5408">pr#5408</a>, Joao Eduardo Luis)</p></li>
<li><p>objecter: can get stuck in redirect loop if osdmap epoch == last_force_op_resend (<a class="reference external" href="http://tracker.ceph.com/issues/11026">issue#11026</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/4597">pr#4597</a>, Jianpeng Ma, Sage Weil)</p></li>
<li><p>objecter: pg listing can deadlock when throttling is in use (<a class="reference external" href="http://tracker.ceph.com/issues/9008">issue#9008</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/5043">pr#5043</a>, Guang Yang)</p></li>
<li><p>objecter: resend linger ops on split (<a class="reference external" href="http://tracker.ceph.com/issues/9806">issue#9806</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/5062">pr#5062</a>, Josh Durgin, Samuel Just)</p></li>
<li><p>osd: Cleanup boost optionals for boost 1.56 (<a class="reference external" href="http://tracker.ceph.com/issues/9983">issue#9983</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/5039">pr#5039</a>, William A. Kennington III)</p></li>
<li><p>osd: LibRadosTwoPools[EC]PP.PromoteSnap failure (<a class="reference external" href="http://tracker.ceph.com/issues/10052">issue#10052</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/5050">pr#5050</a>, Sage Weil)</p></li>
<li><p>osd: Mutex Assert from PipeConnection::try_get_pipe (<a class="reference external" href="http://tracker.ceph.com/issues/12437">issue#12437</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/5815">pr#5815</a>, David Zafman)</p></li>
<li><p>osd: PG stuck with remapped (<a class="reference external" href="http://tracker.ceph.com/issues/9614">issue#9614</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/5044">pr#5044</a>, Guang Yang)</p></li>
<li><p>osd: PG::handle_advance_map: on_pool_change after handling the map change (<a class="reference external" href="http://tracker.ceph.com/issues/12809">issue#12809</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/5988">pr#5988</a>, Samuel Just)</p></li>
<li><p>osd: PGLog: split divergent priors as well (<a class="reference external" href="http://tracker.ceph.com/issues/11069">issue#11069</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/4631">pr#4631</a>, Samuel Just)</p></li>
<li><p>osd: PGLog::proc_replica_log: correctly handle case where entries between olog.head and log.tail were split out (<a class="reference external" href="http://tracker.ceph.com/issues/11358">issue#11358</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/5287">pr#5287</a>, Samuel Just)</p></li>
<li><p>osd: WBThrottle::clear_object: signal on cond when we reduce throttle values (<a class="reference external" href="http://tracker.ceph.com/issues/12223">issue#12223</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/5822">pr#5822</a>, Samuel Just)</p></li>
<li><p>osd: cache full mode still skips young objects (<a class="reference external" href="http://tracker.ceph.com/issues/10006">issue#10006</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/5051">pr#5051</a>, Xinze Chi, Zhiqiang Wang)</p></li>
<li><p>osd: crash creating/deleting pools (<a class="reference external" href="http://tracker.ceph.com/issues/12429">issue#12429</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/5526">pr#5526</a>, John Spray)</p></li>
<li><p>osd: explicitly specify OSD features in MOSDBoot (<a class="reference external" href="http://tracker.ceph.com/issues/10911">issue#10911</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/4960">pr#4960</a>, Sage Weil)</p></li>
<li><p>osd: is_new_interval() fixes (<a class="reference external" href="http://tracker.ceph.com/issues/11771">issue#11771</a>, <a class="reference external" href="http://tracker.ceph.com/issues/10399">issue#10399</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/5726">pr#5726</a>, Samuel Just, Jason Dillaman)</p></li>
<li><p>osd: make the all osd/filestore thread pool suicide timeouts separately configurable (<a class="reference external" href="http://tracker.ceph.com/issues/11439">issue#11439</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/5823">pr#5823</a>, Samuel Just)</p></li>
<li><p>osd: object creation by write cannot use an offset on an erasure coded pool (<a class="reference external" href="http://tracker.ceph.com/issues/11507">issue#11507</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/4632">pr#4632</a>, Jianpeng Ma, Loic Dachary)</p></li>
<li><p>osd: os/FileJournal: Fix journal write fail, align for direct io (<a class="reference external" href="http://tracker.ceph.com/issues/12943">issue#12943</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/5619">pr#5619</a>, Xie Rui)</p></li>
<li><p>osd: osd/PGLog.cc: 732: FAILED assert(log.log.size() == log_keys_debug.size()) (<a class="reference external" href="http://tracker.ceph.com/issues/12652">issue#12652</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/5820">pr#5820</a>, Sage Weil)</p></li>
<li><p>osd: read on chunk-aligned xattr not handled (<a class="reference external" href="http://tracker.ceph.com/issues/12309">issue#12309</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/5235">pr#5235</a>, Sage Weil)</p></li>
<li><p>rgw: Change variable length array of std::strings (not legal in C++) to std::vector&lt;std::string&gt; (<a class="reference external" href="http://tracker.ceph.com/issues/12467">issue#12467</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/4583">pr#4583</a>, Daniel J. Hofmann)</p></li>
<li><p>rgw: Civetweb RGW appears to report full size of object as downloaded when only partially downloaded (<a class="reference external" href="http://tracker.ceph.com/issues/11851">issue#11851</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/5234">pr#5234</a>, Yehuda Sadeh)</p></li>
<li><p>rgw: Keystone PKI token expiration is not enforced (<a class="reference external" href="http://tracker.ceph.com/issues/11367">issue#11367</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/4765">pr#4765</a>, Anton Aksola)</p></li>
<li><p>rgw: Object copy bug (<a class="reference external" href="http://tracker.ceph.com/issues/11639">issue#11639</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/4762">pr#4762</a>, Javier M. Mellid)</p></li>
<li><p>rgw: RGW returns requested bucket name raw in “Bucket” response header (<a class="reference external" href="http://tracker.ceph.com/issues/11860">issue#11860</a>, <a class="reference external" href="http://tracker.ceph.com/issues/12537">issue#12537</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/5730">pr#5730</a>, Yehuda Sadeh, Wido den Hollander)</p></li>
<li><p>rgw: Swift API: response for PUT on /container does not contain the mandatory Content-Length header when FCGI is used (<a class="reference external" href="http://tracker.ceph.com/issues/11036">issue#11036</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/5170">pr#5170</a>, Radoslaw Zarzynski)</p></li>
<li><p>rgw: content length parsing calls strtol() instead of strtoll() (<a class="reference external" href="http://tracker.ceph.com/issues/10701">issue#10701</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/5997">pr#5997</a>, Yehuda Sadeh)</p></li>
<li><p>rgw: delete bucket does not remove .bucket.meta file (<a class="reference external" href="http://tracker.ceph.com/issues/11149">issue#11149</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/4641">pr#4641</a>, Orit Wasserman)</p></li>
<li><p>rgw: doesn’t return ‘x-timestamp’ in header which is used by ‘View Details’ of OpenStack (<a class="reference external" href="http://tracker.ceph.com/issues/8911">issue#8911</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/4584">pr#4584</a>, Yehuda Sadeh)</p></li>
<li><p>rgw: init some manifest fields when handling explicit objs (<a class="reference external" href="http://tracker.ceph.com/issues/11455">issue#11455</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/5729">pr#5729</a>, Yehuda Sadeh)</p></li>
<li><p>rgw: logfile does not get chowned properly (<a class="reference external" href="http://tracker.ceph.com/issues/12073">issue#12073</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/5233">pr#5233</a>, Thorsten Behrens)</p></li>
<li><p>rgw: logrotate.conf calls service with wrong init script name (<a class="reference external" href="http://tracker.ceph.com/issues/12043">issue#12043</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/5390">pr#5390</a>, wuxingyi)</p></li>
<li><p>rgw: quota not respected in POST object (<a class="reference external" href="http://tracker.ceph.com/issues/11323">issue#11323</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/4642">pr#4642</a>, Sergey Arkhipov)</p></li>
<li><p>rgw: swift smoke test fails on TestAccountUTF8 (<a class="reference external" href="http://tracker.ceph.com/issues/11091">issue#11091</a>, <a class="reference external" href="http://tracker.ceph.com/issues/11438">issue#11438</a>, <a class="reference external" href="http://tracker.ceph.com/issues/12939">issue#12939</a>, <a class="reference external" href="http://tracker.ceph.com/issues/12157">issue#12157</a>, <a class="reference external" href="http://tracker.ceph.com/issues/12158">issue#12158</a>, <a class="reference external" href="http://tracker.ceph.com/issues/12363">issue#12363</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/5532">pr#5532</a>, Radoslaw Zarzynski, Orit Wasserman, Robin H. Johnson)</p></li>
<li><p>rgw: use correct objv_tracker for bucket instance (<a class="reference external" href="http://tracker.ceph.com/issues/11416">issue#11416</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/4535">pr#4535</a>, Yehuda Sadeh)</p></li>
<li><p>tests: ceph-fuse crash in test_client_recovery (<a class="reference external" href="http://tracker.ceph.com/issues/12673">issue#12673</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/5813">pr#5813</a>, Loic Dachary)</p></li>
<li><p>tests: kernel_untar_build fails on EL7 (<a class="reference external" href="http://tracker.ceph.com/issues/11758">issue#11758</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/6000">pr#6000</a>, Greg Farnum)</p></li>
<li><p>tests: qemu workunit refers to apt-mirror.front.sepia.ceph.com (<a class="reference external" href="http://tracker.ceph.com/issues/13420">issue#13420</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/6328">pr#6328</a>, Yuan Zhou, Sage Weil)</p></li>
<li><p>tools:  src/ceph-disk : disk zap sgdisk invocation (<a class="reference external" href="http://tracker.ceph.com/issues/11143">issue#11143</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/4636">pr#4636</a>, Thorsten Behrens, Owen Synge)</p></li>
<li><p>tools: ceph-disk: sometimes the journal symlink is not created (<a class="reference external" href="http://tracker.ceph.com/issues/10146">issue#10146</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/5541">pr#5541</a>, Dan van der Ster)</p></li>
<li><p>tools: ceph-disk: support NVMe device partitions (<a class="reference external" href="http://tracker.ceph.com/issues/11612">issue#11612</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/4771">pr#4771</a>, Ilja Slepnev)</p></li>
<li><p>tools: ceph-post-file fails on rhel7 (<a class="reference external" href="http://tracker.ceph.com/issues/11836">issue#11836</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/5037">pr#5037</a>, Joseph McDonald, Sage Weil)</p></li>
<li><p>tools: ceph_argparse_flag has no regular 3rd parameter (<a class="reference external" href="http://tracker.ceph.com/issues/11543">issue#11543</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/4582">pr#4582</a>, Thorsten Behrens)</p></li>
<li><p>tools: use a new disk as journal disk,ceph-disk prepare fail (<a class="reference external" href="http://tracker.ceph.com/issues/10983">issue#10983</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/4630">pr#4630</a>, Loic Dachary)</p></li>
</ul>
</div>
</div>
<div class="section" id="v0-80-10-firefly">
<h1>v0.80.10 Firefly<a class="headerlink" href="#v0-80-10-firefly" title="Permalink to this headline">¶</a></h1>
<p>This is a bugfix release for Firefly.</p>
<p>We recommend that all Firefly users upgrade.</p>
<p>For more detailed information, see <a class="reference download internal" download="" href="../../_downloads/56d391dbf54e696d74a1d344b74b53c3/v0.80.10.txt"><code class="xref download docutils literal notranslate"><span class="pre">the</span> <span class="pre">complete</span> <span class="pre">changelog</span></code></a>.</p>
<div class="section" id="id1">
<h2>Notable Changes<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>build/ops: ceph.spec.in: package mkcephfs on EL6 (<a class="reference external" href="http://tracker.ceph.com/issues/11955">issue#11955</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/4924">pr#4924</a>, Ken Dreyer)</p></li>
<li><p>build/ops: debian: ceph-test and rest-bench debug packages should require their respective binary packages (<a class="reference external" href="http://tracker.ceph.com/issues/11673">issue#11673</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/4766">pr#4766</a>, Ken Dreyer)</p></li>
<li><p>build/ops: run RGW as root (<a class="reference external" href="http://tracker.ceph.com/issues/11453">issue#11453</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/4638">pr#4638</a>, Ken Dreyer)</p></li>
<li><p>common: messages/MWatchNotify: include an error code in the message (<a class="reference external" href="http://tracker.ceph.com/issues/9193">issue#9193</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/3944">pr#3944</a>, Sage Weil)</p></li>
<li><p>common: Rados.shutdown() dies with Illegal instruction (core dumped) (<a class="reference external" href="http://tracker.ceph.com/issues/10153">issue#10153</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/3963">pr#3963</a>, Federico Simoncelli)</p></li>
<li><p>common: SimpleMessenger: allow RESETSESSION whenever we forget an endpoint (<a class="reference external" href="http://tracker.ceph.com/issues/10080">issue#10080</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/3915">pr#3915</a>, Greg Farnum)</p></li>
<li><p>common: WorkQueue: make wait timeout on empty queue configurable (<a class="reference external" href="http://tracker.ceph.com/issues/10817">issue#10817</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/3941">pr#3941</a>, Samuel Just)</p></li>
<li><p>crush: set_choose_tries = 100 for erasure code rulesets (<a class="reference external" href="http://tracker.ceph.com/issues/10353">issue#10353</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/3824">pr#3824</a>, Loic Dachary)</p></li>
<li><p>doc: backport ceph-disk man page to Firefly (<a class="reference external" href="http://tracker.ceph.com/issues/10724">issue#10724</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/3936">pr#3936</a>, Nilamdyuti Goswami)</p></li>
<li><p>doc: Fix ceph command manpage to match ceph -h (<a class="reference external" href="http://tracker.ceph.com/issues/10676">issue#10676</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/3996">pr#3996</a>, David Zafman)</p></li>
<li><p>fs: mount.ceph: avoid spurious error message (<a class="reference external" href="http://tracker.ceph.com/issues/10351">issue#10351</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/3927">pr#3927</a>, Yan, Zheng)</p></li>
<li><p>librados: Fix memory leak in python rados bindings (<a class="reference external" href="http://tracker.ceph.com/issues/10723">issue#10723</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/3935">pr#3935</a>, Josh Durgin)</p></li>
<li><p>librados: fix resources leakage in RadosClient::connect() (<a class="reference external" href="http://tracker.ceph.com/issues/10425">issue#10425</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/3828">pr#3828</a>, Radoslaw Zarzynski)</p></li>
<li><p>librados: Translate operation flags from C APIs (<a class="reference external" href="http://tracker.ceph.com/issues/10497">issue#10497</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/3930">pr#3930</a>, Matt Richards)</p></li>
<li><p>librbd: acquire cache_lock before refreshing parent (<a class="reference external" href="http://tracker.ceph.com/issues/5488">issue#5488</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/4206">pr#4206</a>, Jason Dillaman)</p></li>
<li><p>librbd: snap_remove should ignore -ENOENT errors (<a class="reference external" href="http://tracker.ceph.com/issues/11113">issue#11113</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/4245">pr#4245</a>, Jason Dillaman)</p></li>
<li><p>mds: fix assertion caused by system clock backwards (<a class="reference external" href="http://tracker.ceph.com/issues/11053">issue#11053</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/3970">pr#3970</a>, Yan, Zheng)</p></li>
<li><p>mon: ignore osd failures from before up_from (<a class="reference external" href="http://tracker.ceph.com/issues/10762">issue#10762</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/3937">pr#3937</a>, Sage Weil)</p></li>
<li><p>mon: MonCap: take EntityName instead when expanding profiles (<a class="reference external" href="http://tracker.ceph.com/issues/10844">issue#10844</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/3942">pr#3942</a>, Joao Eduardo Luis)</p></li>
<li><p>mon: Monitor: fix timecheck rounds period (<a class="reference external" href="http://tracker.ceph.com/issues/10546">issue#10546</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/3932">pr#3932</a>, Joao Eduardo Luis)</p></li>
<li><p>mon: OSDMonitor: do not trust small values in osd epoch cache (<a class="reference external" href="http://tracker.ceph.com/issues/10787">issue#10787</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/3823">pr#3823</a>, Sage Weil)</p></li>
<li><p>mon: OSDMonitor: fallback to json-pretty in case of invalid formatter (<a class="reference external" href="http://tracker.ceph.com/issues/9538">issue#9538</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/4475">pr#4475</a>, Loic Dachary)</p></li>
<li><p>mon: PGMonitor: several stats output error fixes (<a class="reference external" href="http://tracker.ceph.com/issues/10257">issue#10257</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/3826">pr#3826</a>, Joao Eduardo Luis)</p></li>
<li><p>objecter: fix map skipping (<a class="reference external" href="http://tracker.ceph.com/issues/9986">issue#9986</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/3952">pr#3952</a>, Ding Dinghua)</p></li>
<li><p>osd: cache tiering: fix the atime logic of the eviction (<a class="reference external" href="http://tracker.ceph.com/issues/9915">issue#9915</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/3949">pr#3949</a>, Zhiqiang Wang)</p></li>
<li><p>osd: cancel_pull: requeue waiters (<a class="reference external" href="http://tracker.ceph.com/issues/11244">issue#11244</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/4415">pr#4415</a>, Samuel Just)</p></li>
<li><p>osd: check that source OSD is valid for MOSDRepScrub (<a class="reference external" href="http://tracker.ceph.com/issues/9555">issue#9555</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/3947">pr#3947</a>, Sage Weil)</p></li>
<li><p>osd: DBObjectMap: lock header_lock on sync() (<a class="reference external" href="http://tracker.ceph.com/issues/9891">issue#9891</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/3948">pr#3948</a>, Samuel Just)</p></li>
<li><p>osd: do not ignore deleted pgs on startup (<a class="reference external" href="http://tracker.ceph.com/issues/10617">issue#10617</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/3933">pr#3933</a>, Sage Weil)</p></li>
<li><p>osd: ENOENT on clone (<a class="reference external" href="http://tracker.ceph.com/issues/11199">issue#11199</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/4385">pr#4385</a>, Samuel Just)</p></li>
<li><p>osd: erasure-code-profile set races with erasure-code-profile rm (<a class="reference external" href="http://tracker.ceph.com/issues/11144">issue#11144</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/4383">pr#4383</a>, Loic Dachary)</p></li>
<li><p>osd: FAILED assert(soid &lt; scrubber.start || soid &gt;= scrubber.end) (<a class="reference external" href="http://tracker.ceph.com/issues/11156">issue#11156</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/4185">pr#4185</a>, Samuel Just)</p></li>
<li><p>osd: FileJournal: fix journalq population in do_read_entry() (<a class="reference external" href="http://tracker.ceph.com/issues/6003">issue#6003</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/3960">pr#3960</a>, Samuel Just)</p></li>
<li><p>osd: fix negative degraded objects during backfilling (<a class="reference external" href="http://tracker.ceph.com/issues/7737">issue#7737</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/4021">pr#4021</a>, Guang Yang)</p></li>
<li><p>osd: get the currently atime of the object in cache pool for eviction (<a class="reference external" href="http://tracker.ceph.com/issues/9985">issue#9985</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/3950">pr#3950</a>, Sage Weil)</p></li>
<li><p>osd: load_pgs: we need to handle the case where an upgrade from earlier versions which ignored non-existent pgs resurrects a pg with a prehistoric osdmap (<a class="reference external" href="http://tracker.ceph.com/issues/11429">issue#11429</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/4556">pr#4556</a>, Samuel Just)</p></li>
<li><p>osd: ObjectStore: Don’t use largest_data_off to calc data_align. (<a class="reference external" href="http://tracker.ceph.com/issues/10014">issue#10014</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/3954">pr#3954</a>, Jianpeng Ma)</p></li>
<li><p>osd: osd_types: op_queue_age_hist and fs_perf_stat should be in osd_stat_t::o… (<a class="reference external" href="http://tracker.ceph.com/issues/10259">issue#10259</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/3827">pr#3827</a>, Samuel Just)</p></li>
<li><p>osd: PG::actingset should be used when checking the number of acting OSDs for… (<a class="reference external" href="http://tracker.ceph.com/issues/11454">issue#11454</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/4453">pr#4453</a>, Guang Yang)</p></li>
<li><p>osd: PG::all_unfound_are_queried_or_lost for non-existent osds (<a class="reference external" href="http://tracker.ceph.com/issues/10976">issue#10976</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/4416">pr#4416</a>, Mykola Golub)</p></li>
<li><p>osd: PG: always clear_primary_state (<a class="reference external" href="http://tracker.ceph.com/issues/10059">issue#10059</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/3955">pr#3955</a>, Samuel Just)</p></li>
<li><p>osd: PGLog.h: 279: FAILED assert(log.log.size() == log_keys_debug.size()) (<a class="reference external" href="http://tracker.ceph.com/issues/10718">issue#10718</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/4382">pr#4382</a>, Samuel Just)</p></li>
<li><p>osd: PGLog: include rollback_info_trimmed_to in (read|write)_log (<a class="reference external" href="http://tracker.ceph.com/issues/10157">issue#10157</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/3964">pr#3964</a>, Samuel Just)</p></li>
<li><p>osd: pg stuck stale after create with activation delay (<a class="reference external" href="http://tracker.ceph.com/issues/11197">issue#11197</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/4384">pr#4384</a>, Samuel Just)</p></li>
<li><p>osd: ReplicatedPG: fail a non-blocking flush if the object is being scrubbed (<a class="reference external" href="http://tracker.ceph.com/issues/8011">issue#8011</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/3943">pr#3943</a>, Samuel Just)</p></li>
<li><p>osd: ReplicatedPG::on_change: clean up callbacks_for_degraded_object (<a class="reference external" href="http://tracker.ceph.com/issues/8753">issue#8753</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/3940">pr#3940</a>, Samuel Just)</p></li>
<li><p>osd: ReplicatedPG::scan_range: an object can disappear between the list and t… (<a class="reference external" href="http://tracker.ceph.com/issues/10150">issue#10150</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/3962">pr#3962</a>, Samuel Just)</p></li>
<li><p>osd: requeue blocked op before flush it was blocked on (<a class="reference external" href="http://tracker.ceph.com/issues/10512">issue#10512</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/3931">pr#3931</a>, Sage Weil)</p></li>
<li><p>rgw: check for timestamp for s3 keystone auth (<a class="reference external" href="http://tracker.ceph.com/issues/10062">issue#10062</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/3958">pr#3958</a>, Abhishek Lekshmanan)</p></li>
<li><p>rgw: civetweb should use unique request id (<a class="reference external" href="http://tracker.ceph.com/issues/11720">issue#11720</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/4780">pr#4780</a>, Orit Wasserman)</p></li>
<li><p>rgw: don’t allow negative / invalid content length (<a class="reference external" href="http://tracker.ceph.com/issues/11890">issue#11890</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/4829">pr#4829</a>, Yehuda Sadeh)</p></li>
<li><p>rgw: fail s3 POST auth if keystone not configured (<a class="reference external" href="http://tracker.ceph.com/issues/10698">issue#10698</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/3966">pr#3966</a>, Yehuda Sadeh)</p></li>
<li><p>rgw: flush xml header on get acl request (<a class="reference external" href="http://tracker.ceph.com/issues/10106">issue#10106</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/3961">pr#3961</a>, Yehuda Sadeh)</p></li>
<li><p>rgw: generate new tag for object when setting object attrs (<a class="reference external" href="http://tracker.ceph.com/issues/11256">issue#11256</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/4571">pr#4571</a>, Yehuda Sadeh)</p></li>
<li><p>rgw: generate the “Date” HTTP header for civetweb. (<a class="reference external" href="http://tracker.ceph.com/issues/11871,11891">issue#11871,11891</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/4851">pr#4851</a>, Radoslaw Zarzynski)</p></li>
<li><p>rgw: keystone token cache does not work correctly (<a class="reference external" href="http://tracker.ceph.com/issues/11125">issue#11125</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/4414">pr#4414</a>, Yehuda Sadeh)</p></li>
<li><p>rgw: merge manifests correctly when there’s prefix override (<a class="reference external" href="http://tracker.ceph.com/issues/11622">issue#11622</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/4697">pr#4697</a>, Yehuda Sadeh)</p></li>
<li><p>rgw: send appropriate op to cancel bucket index pending operation (<a class="reference external" href="http://tracker.ceph.com/issues/10770">issue#10770</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/3938">pr#3938</a>, Yehuda Sadeh)</p></li>
<li><p>rgw: shouldn’t need to disable rgw_socket_path if frontend is configured (<a class="reference external" href="http://tracker.ceph.com/issues/11160">issue#11160</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/4275">pr#4275</a>, Yehuda Sadeh)</p></li>
<li><p>rgw: Swift API. Dump container’s custom metadata. (<a class="reference external" href="http://tracker.ceph.com/issues/10665">issue#10665</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/3934">pr#3934</a>, Dmytro Iurchenko)</p></li>
<li><p>rgw: Swift API. Support for X-Remove-Container-Meta-{key} header. (<a class="reference external" href="http://tracker.ceph.com/issues/10475">issue#10475</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/3929">pr#3929</a>, Dmytro Iurchenko)</p></li>
<li><p>rgw: use correct objv_tracker for bucket instance (<a class="reference external" href="http://tracker.ceph.com/issues/11416">issue#11416</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/4379">pr#4379</a>, Yehuda Sadeh)</p></li>
<li><p>tests: force checkout of submodules (<a class="reference external" href="http://tracker.ceph.com/issues/11157">issue#11157</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/4079">pr#4079</a>, Loic Dachary)</p></li>
<li><p>tools: Backport ceph-objectstore-tool changes to firefly (<a class="reference external" href="http://tracker.ceph.com/issues/12327">issue#12327</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/3866">pr#3866</a>, David Zafman)</p></li>
<li><p>tools: ceph-objectstore-tool: Output only unsupported features when incomatible (<a class="reference external" href="http://tracker.ceph.com/issues/11176">issue#11176</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/4126">pr#4126</a>, David Zafman)</p></li>
<li><p>tools: ceph-objectstore-tool: Use exit status 11 for incompatible import attemp… (<a class="reference external" href="http://tracker.ceph.com/issues/11139">issue#11139</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/4129">pr#4129</a>, David Zafman)</p></li>
<li><p>tools: Fix do_autogen.sh so that -L is allowed (<a class="reference external" href="http://tracker.ceph.com/issues/11303">issue#11303</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/4247">pr#4247</a>, Alfredo Deza)</p></li>
</ul>
</div>
</div>
<div class="section" id="v0-80-9-firefly">
<h1>v0.80.9 Firefly<a class="headerlink" href="#v0-80-9-firefly" title="Permalink to this headline">¶</a></h1>
<p>This is a bugfix release for firefly.  It fixes a performance
regression in librbd, an important CRUSH misbehavior (see below), and
several RGW bugs.  We have also backported support for flock/fcntl
locks to ceph-fuse and libcephfs.</p>
<p>We recommend that all Firefly users upgrade.</p>
<p>For more detailed information, see <a class="reference download internal" download="" href="../../_downloads/db81f70bf4543a391d58e39bcca43b9c/v0.80.9.txt"><code class="xref download docutils literal notranslate"><span class="pre">the</span> <span class="pre">complete</span> <span class="pre">changelog</span></code></a>.</p>
<div class="section" id="adjusting-crush-maps">
<h2>Adjusting CRUSH maps<a class="headerlink" href="#adjusting-crush-maps" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p>This point release fixes several issues with CRUSH that trigger
excessive data migration when adjusting OSD weights.  These are most
obvious when a very small weight change (e.g., a change from 0 to
.01) triggers a large amount of movement, but the same set of bugs
can also lead to excessive (though less noticeable) movement in
other cases.</p>
<p>However, because the bug may already have affected your cluster,
fixing it may trigger movement <em>back</em> to the more correct location.
For this reason, you must manually opt-in to the fixed behavior.</p>
<p>In order to set the new tunable to correct the behavior:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ceph</span> <span class="n">osd</span> <span class="n">crush</span> <span class="nb">set</span><span class="o">-</span><span class="n">tunable</span> <span class="n">straw_calc_version</span> <span class="mi">1</span>
</pre></div>
</div>
<p>Note that this change will have no immediate effect.  However, from
this point forward, any ‘straw’ bucket in your CRUSH map that is
adjusted will get non-buggy internal weights, and that transition
may trigger some rebalancing.</p>
<p>You can estimate how much rebalancing will eventually be necessary
on your cluster with:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>  <span class="n">ceph</span> <span class="n">osd</span> <span class="n">getcrushmap</span> <span class="o">-</span><span class="n">o</span> <span class="o">/</span><span class="n">tmp</span><span class="o">/</span><span class="n">cm</span>
  <span class="n">crushtool</span> <span class="o">-</span><span class="n">i</span> <span class="o">/</span><span class="n">tmp</span><span class="o">/</span><span class="n">cm</span> <span class="o">--</span><span class="n">num</span><span class="o">-</span><span class="n">rep</span> <span class="mi">3</span> <span class="o">--</span><span class="n">test</span> <span class="o">--</span><span class="n">show</span><span class="o">-</span><span class="n">mappings</span> <span class="o">&gt;</span> <span class="o">/</span><span class="n">tmp</span><span class="o">/</span><span class="n">a</span> <span class="mi">2</span><span class="o">&gt;&amp;</span><span class="mi">1</span>
  <span class="n">crushtool</span> <span class="o">-</span><span class="n">i</span> <span class="o">/</span><span class="n">tmp</span><span class="o">/</span><span class="n">cm</span> <span class="o">--</span><span class="nb">set</span><span class="o">-</span><span class="n">straw</span><span class="o">-</span><span class="n">calc</span><span class="o">-</span><span class="n">version</span> <span class="mi">1</span> <span class="o">-</span><span class="n">o</span> <span class="o">/</span><span class="n">tmp</span><span class="o">/</span><span class="n">cm2</span>
  <span class="n">crushtool</span> <span class="o">-</span><span class="n">i</span> <span class="o">/</span><span class="n">tmp</span><span class="o">/</span><span class="n">cm2</span> <span class="o">--</span><span class="n">reweight</span> <span class="o">-</span><span class="n">o</span> <span class="o">/</span><span class="n">tmp</span><span class="o">/</span><span class="n">cm2</span>
  <span class="n">crushtool</span> <span class="o">-</span><span class="n">i</span> <span class="o">/</span><span class="n">tmp</span><span class="o">/</span><span class="n">cm2</span> <span class="o">--</span><span class="n">num</span><span class="o">-</span><span class="n">rep</span> <span class="mi">3</span> <span class="o">--</span><span class="n">test</span> <span class="o">--</span><span class="n">show</span><span class="o">-</span><span class="n">mappings</span> <span class="o">&gt;</span> <span class="o">/</span><span class="n">tmp</span><span class="o">/</span><span class="n">b</span> <span class="mi">2</span><span class="o">&gt;&amp;</span><span class="mi">1</span>
  <span class="n">wc</span> <span class="o">-</span><span class="n">l</span> <span class="o">/</span><span class="n">tmp</span><span class="o">/</span><span class="n">a</span>                          <span class="c1"># num total mappings</span>
  <span class="n">diff</span> <span class="o">-</span><span class="n">u</span> <span class="o">/</span><span class="n">tmp</span><span class="o">/</span><span class="n">a</span> <span class="o">/</span><span class="n">tmp</span><span class="o">/</span><span class="n">b</span> <span class="o">|</span> <span class="n">grep</span> <span class="o">-</span><span class="n">c</span> <span class="o">^+</span>    <span class="c1"># num changed mappings</span>

<span class="n">Divide</span> <span class="n">the</span> <span class="n">number</span> <span class="n">of</span> <span class="n">changed</span> <span class="n">lines</span> <span class="n">by</span> <span class="n">the</span> <span class="n">total</span> <span class="n">number</span> <span class="n">of</span> <span class="n">lines</span> <span class="ow">in</span>
<span class="o">/</span><span class="n">tmp</span><span class="o">/</span><span class="n">a</span><span class="o">.</span>  <span class="n">We</span><span class="s1">&#39;ve found that most clusters are under 10%.</span>

<span class="n">You</span> <span class="n">can</span> <span class="n">force</span> <span class="nb">all</span> <span class="n">of</span> <span class="n">this</span> <span class="n">rebalancing</span> <span class="n">to</span> <span class="n">happen</span> <span class="n">at</span> <span class="n">once</span> <span class="k">with</span><span class="p">::</span>

  <span class="n">ceph</span> <span class="n">osd</span> <span class="n">crush</span> <span class="n">reweight</span><span class="o">-</span><span class="nb">all</span>

<span class="n">Otherwise</span><span class="p">,</span> <span class="n">it</span> <span class="n">will</span> <span class="n">happen</span> <span class="n">at</span> <span class="n">some</span> <span class="n">unknown</span> <span class="n">point</span> <span class="ow">in</span> <span class="n">the</span> <span class="n">future</span> <span class="n">when</span>
<span class="n">CRUSH</span> <span class="n">weights</span> <span class="n">are</span> <span class="nb">next</span> <span class="n">adjusted</span><span class="o">.</span>
</pre></div>
</div>
</li>
</ul>
</div>
<div class="section" id="id3">
<h2>Notable Changes<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>ceph-fuse: flock, fcntl lock support (Yan, Zheng, Greg Farnum)</p></li>
<li><p>crush: fix straw bucket weight calculation, add straw_calc_version tunable (#10095 Sage Weil)</p></li>
<li><p>crush: fix tree bucket (Rongzu Zhu)</p></li>
<li><p>crush: fix underflow of tree weights (Loic Dachary, Sage Weil)</p></li>
<li><p>crushtool: add –reweight (Sage Weil)</p></li>
<li><p>librbd: complete pending operations before losing image (#10299 Jason Dillaman)</p></li>
<li><p>librbd: fix read caching performance regression (#9854 Jason Dillaman)</p></li>
<li><p>librbd: gracefully handle deleted/renamed pools (#10270 Jason Dillaman)</p></li>
<li><p>mon: fix dump of chooseleaf_vary_r tunable (Sage Weil)</p></li>
<li><p>osd: fix PG ref leak in snaptrimmer on peering (#10421 Kefu Chai)</p></li>
<li><p>osd: handle no-op write with snapshot (#10262 Sage Weil)</p></li>
<li><p>radosgw-admin: create subuser when creating user (#10103 Yehuda Sadeh)</p></li>
<li><p>rgw: change multipart uplaod id magic (#10271 Georgio Dimitrakakis, Yehuda Sadeh)</p></li>
<li><p>rgw: don’t overwrite bucket/object owner when setting ACLs (#10978 Yehuda Sadeh)</p></li>
<li><p>rgw: enable IPv6 for embedded civetweb (#10965 Yehuda Sadeh)</p></li>
<li><p>rgw: fix partial swift GET (#10553 Yehuda Sadeh)</p></li>
<li><p>rgw: fix quota disable (#9907 Dong Lei)</p></li>
<li><p>rgw: index swift keys appropriately (#10471 Hemant Burman, Yehuda Sadeh)</p></li>
<li><p>rgw: make setattrs update bucket index (#5595 Yehuda Sadeh)</p></li>
<li><p>rgw: pass civetweb configurables (#10907 Yehuda Sadeh)</p></li>
<li><p>rgw: remove swift user manifest (DLO) hash calculation (#9973 Yehuda Sadeh)</p></li>
<li><p>rgw: return correct len for 0-len objects (#9877 Yehuda Sadeh)</p></li>
<li><p>rgw: S3 object copy content-type fix (#9478 Yehuda Sadeh)</p></li>
<li><p>rgw: send ETag on S3 object copy (#9479 Yehuda Sadeh)</p></li>
<li><p>rgw: send HTTP status reason explicitly in fastcgi (Yehuda Sadeh)</p></li>
<li><p>rgw: set ulimit -n from sysvinit (el6) init script (#9587 Sage Weil)</p></li>
<li><p>rgw: update swift subuser permission masks when authenticating (#9918 Yehuda Sadeh)</p></li>
<li><p>rgw: URL decode query params correctly (#10271 Georgio Dimitrakakis, Yehuda Sadeh)</p></li>
<li><p>rgw: use attrs when reading object attrs (#10307 Yehuda Sadeh)</p></li>
<li><p>rgw: use rn for http headers (#9254 Benedikt Fraunhofer, Yehuda Sadeh)</p></li>
</ul>
</div>
</div>
<div class="section" id="v0-80-8-firefly">
<h1>v0.80.8 Firefly<a class="headerlink" href="#v0-80-8-firefly" title="Permalink to this headline">¶</a></h1>
<p>This is a long-awaited bugfix release for firefly.  It has several
important (but relatively rare) OSD peering fixes, performance issues
when snapshots are trimmed, several RGW fixes, a paxos corner case
fix, and some packaging updates.</p>
<p>We recommend that all users for v0.80.x firefly upgrade when it is
convenient to do so.</p>
<p>For more detailed information, see <a class="reference download internal" download="" href="../../_downloads/6bcdd00c313702432dfd1a4a98cfcc5c/v0.80.8.txt"><code class="xref download docutils literal notranslate"><span class="pre">the</span> <span class="pre">complete</span> <span class="pre">changelog</span></code></a>.</p>
<div class="section" id="id4">
<h2>Notable Changes<a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>build: remove stack-execute bit from assembled code sections (#10114 Dan Mick)</p></li>
<li><p>ceph-disk: fix dmcrypt key permissions (#9785 Loic Dachary)</p></li>
<li><p>ceph-disk: fix keyring location (#9653 Loic Dachary)</p></li>
<li><p>ceph-disk: make partition checks more robust (#9721 #9665 Loic Dachary)</p></li>
<li><p>ceph: cleanly shut down librados context on shutdown (#8797 Dan Mick)</p></li>
<li><p>common: add $cctid config metavariable (#6228 Adam Crume)</p></li>
<li><p>crush: align rule and ruleset ids (#9675 Xiaoxi Chen)</p></li>
<li><p>crush: fix negative weight bug during create_or_move_item (#9998 Pawel Sadowski)</p></li>
<li><p>crush: fix potential buffer overflow in erasure rules (#9492 Johnu George)</p></li>
<li><p>debian: fix python-ceph -&gt; ceph file movement (Sage Weil)</p></li>
<li><p>libcephfs,ceph-fuse: fix flush tid wraparound bug (#9869 Greg Farnum, Yan, Zheng)</p></li>
<li><p>libcephfs: close fd befure umount (#10415 Yan, Zheng)</p></li>
<li><p>librados: fix crash from C API when read timeout is enabled (#9582 Sage Weil)</p></li>
<li><p>librados: handle reply race with pool deletion (#10372 Sage Weil)</p></li>
<li><p>librbd: cap memory utilization for read requests (Jason Dillaman)</p></li>
<li><p>librbd: do not close a closed parent image on failure (#10030 Jason Dillaman)</p></li>
<li><p>librbd: fix diff tests (#10002 Josh Durgin)</p></li>
<li><p>librbd: protect list_children from invalid pools (#10123 Jason Dillaman)</p></li>
<li><p>make check improvemens (Loic Dachary)</p></li>
<li><p>mds: fix ctime updates (#9514 Greg Farnum)</p></li>
<li><p>mds: fix journal import tool (#10025 John Spray)</p></li>
<li><p>mds: fix rare NULL deref in cap flush handler (Greg Farnum)</p></li>
<li><p>mds: handle unknown lock messages (Yan, Zheng)</p></li>
<li><p>mds: store backtrace for straydir (Yan, Zheng)</p></li>
<li><p>mon: abort startup if disk is full (#9502 Joao Eduardo Luis)</p></li>
<li><p>mon: add paxos instrumentation (Sage Weil)</p></li>
<li><p>mon: fix double-free in rare OSD startup path (Sage Weil)</p></li>
<li><p>mon: fix osdmap trimming (#9987 Sage Weil)</p></li>
<li><p>mon: fix paxos corner cases (#9301 #9053 Sage Weil)</p></li>
<li><p>osd: cancel callback on blacklisted watchers (#8315 Samuel Just)</p></li>
<li><p>osd: cleanly abort set-alloc-hint operations during upgrade (#9419 David Zafman)</p></li>
<li><p>osd: clear rollback PG metadata on PG deletion (#9293 Samuel Just)</p></li>
<li><p>osd: do not abort deep scrub if hinfo is missing (#10018 Loic Dachary)</p></li>
<li><p>osd: erasure-code regression tests (Loic Dachary)</p></li>
<li><p>osd: fix distro metadata reporting for SUSE (#8654 Danny Al-Gaaf)</p></li>
<li><p>osd: fix full OSD checks during backfill (#9574 Samuel Just)</p></li>
<li><p>osd: fix ioprio parsing (#9677 Loic Dachary)</p></li>
<li><p>osd: fix journal direct-io shutdown (#9073 Mark Kirkwood, Ma Jianpeng, Somnath Roy)</p></li>
<li><p>osd: fix journal dump (Ma Jianpeng)</p></li>
<li><p>osd: fix occasional stall during peering or activation (Sage Weil)</p></li>
<li><p>osd: fix past_interval display bug (#9752 Loic Dachary)</p></li>
<li><p>osd: fix rare crash triggered by admin socket dump_ops_in_filght (#9916 Dong Lei)</p></li>
<li><p>osd: fix snap trimming performance issues (#9487 #9113 Samuel Just, Sage Weil, Dan van der Ster, Florian Haas)</p></li>
<li><p>osd: fix snapdir handling on cache eviction (#8629 Sage Weil)</p></li>
<li><p>osd: handle map gaps in map advance code (Sage Weil)</p></li>
<li><p>osd: handle undefined CRUSH results in interval check (#9718 Samuel Just)</p></li>
<li><p>osd: include shard in JSON dump of ghobject (#10063 Loic Dachary)</p></li>
<li><p>osd: make backfill reservation denial handling more robust (#9626 Samuel Just)</p></li>
<li><p>osd: make misdirected op checks handle EC + primary affinity (#9835 Samuel Just, Sage Weil)</p></li>
<li><p>osd: mount XFS with inode64 by default (Sage Weil)</p></li>
<li><p>osd: other misc bugs (#9821 #9875 Samuel Just)</p></li>
<li><p>rgw: add .log to default log path (#9353 Alexandre Marangone)</p></li>
<li><p>rgw: clean up fcgi request context (#10194 Yehuda Sadeh)</p></li>
<li><p>rgw: convet header underscores to dashes (#9206 Yehuda Sadeh)</p></li>
<li><p>rgw: copy object data if copy target is in different pool (#9039 Yehuda Sadeh)</p></li>
<li><p>rgw: don’t try to authenticate CORS peflight request (#8718 Robert Hubbard, Yehuda Sadeh)</p></li>
<li><p>rgw: fix civetweb URL decoding (#8621 Yehuda Sadeh)</p></li>
<li><p>rgw: fix hash calculation during PUT (Yehuda Sadeh)</p></li>
<li><p>rgw: fix misc bugs (#9089 #9201 Yehuda Sadeh)</p></li>
<li><p>rgw: fix object tail test (#9226 Sylvain Munaut, Yehuda Sadeh)</p></li>
<li><p>rgw: make sysvinit script run rgw under systemd context as needed (#10125 Loic Dachary)</p></li>
<li><p>rgw: separate civetweb log from rgw log (Yehuda Sadeh)</p></li>
<li><p>rgw: set length for keystone token validations (#7796 Mark Kirkwood, Yehuda Sadeh)</p></li>
<li><p>rgw: subuser creation fixes (#8587 Yehuda Sadeh)</p></li>
<li><p>rpm: misc packaging improvements (Sandon Van Ness, Dan Mick, Erik Logthenberg, Boris Ranto)</p></li>
<li><p>rpm: use standard udev rules for CentOS7/RHEL7 (#9747 Loic Dachary)</p></li>
</ul>
</div>
</div>
<div class="section" id="v0-80-7-firefly">
<h1>v0.80.7 Firefly<a class="headerlink" href="#v0-80-7-firefly" title="Permalink to this headline">¶</a></h1>
<p>This release fixes a few critical issues with v0.80.6, particularly
with clusters running mixed versions.</p>
<p>We recommend that all v0.80.x Firefly users upgrade to this release.</p>
<p>For more detailed information, see <a class="reference download internal" download="" href="../../_downloads/e05e6f4141ddb4f3f894bba6127ed60e/v0.80.7.txt"><code class="xref download docutils literal notranslate"><span class="pre">the</span> <span class="pre">complete</span> <span class="pre">changelog</span></code></a>.</p>
<div class="section" id="id5">
<h2>Notable Changes<a class="headerlink" href="#id5" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>osd: fix invalid memory reference in log trimming (#9731 Samuel Just)</p></li>
<li><p>osd: fix use-after-free in cache tiering code (#7588 Sage Weil)</p></li>
<li><p>osd: remove bad backfill assertion for mixed-version clusters (#9696 Samuel Just)</p></li>
</ul>
</div>
</div>
<div class="section" id="v0-80-6-firefly">
<h1>v0.80.6 Firefly<a class="headerlink" href="#v0-80-6-firefly" title="Permalink to this headline">¶</a></h1>
<p>This is a major bugfix release for firefly, fixing a range of issues
in the OSD and monitor, particularly with cache tiering.  There are
also important fixes in librados, with the watch/notify mechanism used
by librbd, and in radosgw.</p>
<p>A few pieces of new functionality of been backported, including improved
‘ceph df’ output (view amount of writeable space per pool), support for
non-default cluster names when using sysvinit or systemd, and improved
(and fixed) support for dmcrypt.</p>
<p>We recommend that all v0.80.x Firefly users upgrade to this release.</p>
<p>For more detailed information, see <a class="reference download internal" download="" href="../../_downloads/7cdc3ff374055e049122a8559a3ef16b/v0.80.6.txt"><code class="xref download docutils literal notranslate"><span class="pre">the</span> <span class="pre">complete</span> <span class="pre">changelog</span></code></a>.</p>
<div class="section" id="id6">
<h2>Notable Changes<a class="headerlink" href="#id6" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>build: fix atomic64_t on i386 (#8969 Sage Weil)</p></li>
<li><p>build: fix build on alpha (Michael Cree, Dmitry Smirnov)</p></li>
<li><p>build: fix build on hppa (Dmitry Smirnov)</p></li>
<li><p>build: fix yasm detection on x32 arch (Sage Weil)</p></li>
<li><p>ceph-disk: fix ‘list’ function with dmcrypt (Sage Weil)</p></li>
<li><p>ceph-disk: fix dmcrypt support (Alfredo Deza)</p></li>
<li><p>ceph: allow non-default cluster to be specified (#8944)</p></li>
<li><p>common: fix dup log messages to mon (#9080 Sage Weil)</p></li>
<li><p>global: write pid file when -f is used (systemd, upstart) (Alexandre Oliva)</p></li>
<li><p>librados: fix crash when read timeout is enabled (#9362 Matthias Kiefer, Sage Weil)</p></li>
<li><p>librados: fix lock leaks in error paths (#9022 Pavan Rallabhandi)</p></li>
<li><p>librados: fix watch resend on PG acting set change (#9220 Samuel Just)</p></li>
<li><p>librados: python: fix aio_read handling with 0 (Mohammad Salehe)</p></li>
<li><p>librbd: add interface to invalidate cached data (Josh Durgin)</p></li>
<li><p>librbd: fix crash when using clone of flattened image (#8845 Josh Durgin)</p></li>
<li><p>librbd: fix error path cleanup on open (#8912 Josh Durgin)</p></li>
<li><p>librbd: fix null pointer check (Danny Al-Gaaf)</p></li>
<li><p>librbd: limit dirty object count (Haomai Wang)</p></li>
<li><p>mds: fix rstats for root and mdsdir (Yan, Zheng)</p></li>
<li><p>mon: add ‘get’ command for new cache tier pool properties (Joao Eduardo Luis)</p></li>
<li><p>mon: add ‘osd pool get-quota’ (#8523 Joao Eduardo Luis)</p></li>
<li><p>mon: add cluster fingerprint (Sage Weil)</p></li>
<li><p>mon: disallow nonsensical cache-mode transitions (#8155 Joao Eduardo Luis)</p></li>
<li><p>mon: fix cache tier rounding error on i386 (Sage Weil)</p></li>
<li><p>mon: fix occasional memory leak (#9176 Sage Weil)</p></li>
<li><p>mon: fix reported latency for ‘osd perf’ (#9269 Samuel Just)</p></li>
<li><p>mon: include ‘max avail’ in ‘ceph df’ output (Sage Weil, Xioaxi Chen)</p></li>
<li><p>mon: persistently mark pools where scrub may find incomplete clones (#8882 Sage Weil)</p></li>
<li><p>mon: preload erasure plugins (Loic Dachary)</p></li>
<li><p>mon: prevent cache-specific settings on non-tier pools (#8696 Joao Eduardo Luis)</p></li>
<li><p>mon: reduce log spam (Aanchal Agrawal, Sage Weil)</p></li>
<li><p>mon: warn when cache pools have no hit_sets enabled (Sage Weil)</p></li>
<li><p>msgr: fix trivial memory leak (Sage Weil)</p></li>
<li><p>osd: automatically scrub PGs with invalid stats (#8147 Sage Weil)</p></li>
<li><p>osd: avoid sharing PG metadata that is not durable (Samuel Just)</p></li>
<li><p>osd: cap hit_set size (#9339 Samuel Just)</p></li>
<li><p>osd: create default erasure profile if needed (#8601 Loic Dachary)</p></li>
<li><p>osd: dump tid as JSON int (not string)  where appropriate (Joao Eduardo Luis)</p></li>
<li><p>osd: encode blacklist in deterministic order (#9211 Sage Weil)</p></li>
<li><p>osd: fix behavior when cache tier has no hit_sets enabled (#8982 Sage Weil)</p></li>
<li><p>osd: fix cache tier flushing of snapshots (#9054 Samuel Just)</p></li>
<li><p>osd: fix cache tier op ordering when going from full to non-full (#8931 Sage Weil)</p></li>
<li><p>osd: fix crash on dup recovery reservation (#8863 Sage Weil)</p></li>
<li><p>osd: fix division by zero when pg_num adjusted with no OSDs (#9052 Sage Weil)</p></li>
<li><p>osd: fix hint crash in experimental keyvaluestore_dev backend (Hoamai Wang)</p></li>
<li><p>osd: fix leak in copyfrom cancellation (#8894 Samuel Just)</p></li>
<li><p>osd: fix locking for copyfrom finish (#8889 Sage Weil)</p></li>
<li><p>osd: fix long filename handling in backend (#8701 Sage Weil)</p></li>
<li><p>osd: fix min_size check with backfill (#9497 Samuel Just)</p></li>
<li><p>osd: fix mount/remount sync race (#9144 Sage Weil)</p></li>
<li><p>osd: fix object listing + erasure code bug (Guang Yang)</p></li>
<li><p>osd: fix race on reconnect to failed OSD (#8944 Greg Farnum)</p></li>
<li><p>osd: fix recovery reservation deadlock (Samuel Just)</p></li>
<li><p>osd: fix tiering agent arithmetic for negative values (#9082 Karan Singh)</p></li>
<li><p>osd: improve shutdown order (#9218 Sage Weil)</p></li>
<li><p>osd: improve subop discard logic (#9259 Samuel Just)</p></li>
<li><p>osd: introduce optional sleep, io priority for scrub and snap trim (Sage Weil)</p></li>
<li><p>osd: make scrub check for and remove stale erasure-coded objects (Samuel Just)</p></li>
<li><p>osd: misc fixes (#9481 #9482 #9179 Sameul Just)</p></li>
<li><p>osd: mix keyvaluestore_dev improvements (Haomai Wang)</p></li>
<li><p>osd: only require CRUSH features for rules that are used (#8963 Sage Weil)</p></li>
<li><p>osd: preload erasure plugins on startup (Loic Dachary)</p></li>
<li><p>osd: prevent PGs from falling behind when consuming OSDMaps (#7576 Sage Weil)</p></li>
<li><p>osd: prevent old clients from using tiered pools (#8714 Sage Weil)</p></li>
<li><p>osd: set min_size on erasure pools to data chunk count (Sage Weil)</p></li>
<li><p>osd: trim old erasure-coded objects more aggressively (Samuel Just)</p></li>
<li><p>rados: enforce erasure code alignment (Lluis Pamies-Juarez)</p></li>
<li><p>rgw: align object stripes with erasure pool alignment (#8442 Yehuda Sadeh)</p></li>
<li><p>rgw: don’t send error body on HEAD for civetweb (#8539 Yehuda Sadeh)</p></li>
<li><p>rgw: fix crash in CORS preflight request (Yehuda Sadeh)</p></li>
<li><p>rgw: fix decoding of + in URL (#8702 Brian Rak)</p></li>
<li><p>rgw: fix object removal on object create (#8972 Patrycja Szabowska, Yehuda Sadeh)</p></li>
<li><p>systemd: use systemd-run when starting radosgw (JuanJose Galvez)</p></li>
<li><p>sysvinit: support non-default cluster name (Alfredo Deza)</p></li>
</ul>
</div>
</div>
<div class="section" id="v0-80-5-firefly">
<h1>v0.80.5 Firefly<a class="headerlink" href="#v0-80-5-firefly" title="Permalink to this headline">¶</a></h1>
<p>This release fixes a few important bugs in the radosgw and fixes
several packaging and environment issues, including OSD log rotation,
systemd environments, and daemon restarts on upgrade.</p>
<p>We recommend that all v0.80.x Firefly users upgrade, particularly if they
are using upstart, systemd, or radosgw.</p>
<div class="section" id="id7">
<h2>Notable Changes<a class="headerlink" href="#id7" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>ceph-dencoder: do not needlessly link to librgw, librados, etc. (Sage Weil)</p></li>
<li><p>do not needlessly link binaries to leveldb (Sage Weil)</p></li>
<li><p>mon: fix mon crash when no auth keys are present (#8851, Joao Eduardo Luis)</p></li>
<li><p>osd: fix cleanup (and avoid occasional crash) during shutdown (#7981, Sage Weil)</p></li>
<li><p>osd: fix log rotation under upstart (Sage Weil)</p></li>
<li><p>rgw: fix multipart upload when object has irregular size (#8846, Yehuda Sadeh, Sylvain Munaut)</p></li>
<li><p>rgw: improve bucket listing S3 compatibility (#8858, Yehuda Sadeh)</p></li>
<li><p>rgw: improve delimited bucket listing (Yehuda Sadeh)</p></li>
<li><p>rpm: do not restart daemons on upgrade (#8849, Alfredo Deza)</p></li>
</ul>
<p>For more detailed information, see <a class="reference download internal" download="" href="../../_downloads/9475425f97e86df233303a33dffbe14c/v0.80.5.txt"><code class="xref download docutils literal notranslate"><span class="pre">the</span> <span class="pre">complete</span> <span class="pre">changelog</span></code></a>.</p>
</div>
</div>
<div class="section" id="v0-80-4-firefly">
<h1>v0.80.4 Firefly<a class="headerlink" href="#v0-80-4-firefly" title="Permalink to this headline">¶</a></h1>
<p>This Firefly point release fixes an potential data corruption problem
when ceph-osd daemons run on top of XFS and service Firefly librbd
clients.  A recently added allocation hint that RBD utilizes triggers
an XFS bug on some kernels (Linux 3.2, and likely others) that leads
to data corruption and deep-scrub errors (and inconsistent PGs).  This
release avoids the situation by disabling the allocation hint until we
can validate which kernels are affected and/or are known to be safe to
use the hint on.</p>
<p>We recommend that all v0.80.x Firefly users urgently upgrade,
especially if they are using RBD.</p>
<div class="section" id="id8">
<h2>Notable Changes<a class="headerlink" href="#id8" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>osd: disable XFS extsize hint by default (#8830, Samuel Just)</p></li>
<li><p>rgw: fix extra data pool default name (Yehuda Sadeh)</p></li>
</ul>
<p>For more detailed information, see <a class="reference download internal" download="" href="../../_downloads/ba264583158a10770756039f0eb4d919/v0.80.4.txt"><code class="xref download docutils literal notranslate"><span class="pre">the</span> <span class="pre">complete</span> <span class="pre">changelog</span></code></a>.</p>
</div>
</div>
<div class="section" id="v0-80-3-firefly">
<h1>v0.80.3 Firefly<a class="headerlink" href="#v0-80-3-firefly" title="Permalink to this headline">¶</a></h1>
<p>This is the third Firefly point release.  It includes a single fix
for a radosgw regression that was discovered in v0.80.2 right after it
was released.</p>
<p>We recommend that all v0.80.x Firefly users upgrade.</p>
<div class="section" id="id9">
<h2>Notable Changes<a class="headerlink" href="#id9" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>radosgw: fix regression in manifest decoding (#8804, Sage Weil)</p></li>
</ul>
<p>For more detailed information, see <a class="reference download internal" download="" href="../../_downloads/992438032969efd966e87a7977851027/v0.80.3.txt"><code class="xref download docutils literal notranslate"><span class="pre">the</span> <span class="pre">complete</span> <span class="pre">changelog</span></code></a>.</p>
</div>
</div>
<div class="section" id="v0-80-2-firefly">
<h1>v0.80.2 Firefly<a class="headerlink" href="#v0-80-2-firefly" title="Permalink to this headline">¶</a></h1>
<p>This is the second Firefly point release.  It contains a range of
important fixes, including several bugs in the OSD cache tiering, some
compatibility checks that affect upgrade situations, several radosgw
bugs, and an irritating and unnecessary feature bit check that
prevents older clients from communicating with a cluster with any
erasure coded pools.</p>
<p>One someone large change in this point release is that the ceph RPM
package is separated into a ceph and ceph-common package, similar to
Debian.  The ceph-common package contains just the client libraries
without any of the server-side daemons.</p>
<p>We recommend that all v0.80.x Firefly users skip this release and use
v0.80.3.</p>
<div class="section" id="id10">
<h2>Notable Changes<a class="headerlink" href="#id10" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>ceph-disk: better debug logging (Alfredo Deza)</p></li>
<li><p>ceph-disk: fix preparation of OSDs with dmcrypt (#6700, Stephen F Taylor)</p></li>
<li><p>ceph-disk: partprobe on prepare to fix dm-crypt (#6966, Eric Eastman)</p></li>
<li><p>do not require ERASURE_CODE feature from clients (#8556, Sage Weil)</p></li>
<li><p>libcephfs-java: build with older JNI headers (Greg Farnum)</p></li>
<li><p>libcephfs-java: fix build with gcj-jdk (Dmitry Smirnov)</p></li>
<li><p>librados: fix osd op tid for redirected ops (#7588, Samuel Just)</p></li>
<li><p>librados: fix rados_pool_list buffer bounds checks (#8447, Sage Weil)</p></li>
<li><p>librados: resend ops when pool overlay changes (#8305, Sage Weil)</p></li>
<li><p>librbd, ceph-fuse: reduce CPU overhead for clean object check in cache (Haomai Wang)</p></li>
<li><p>mon: allow deletion of cephfs pools (John Spray)</p></li>
<li><p>mon: fix default pool ruleset choice (#8373, John Spray)</p></li>
<li><p>mon: fix health summary for mon low disk warning (Sage Weil)</p></li>
<li><p>mon: fix ‘osd pool set &lt;pool&gt; cache_target_full_ratio’ (Geoffrey Hartz)</p></li>
<li><p>mon: fix quorum feature check (Greg Farnum)</p></li>
<li><p>mon: fix request forwarding in mixed firefly+dumpling clusters 9#8727, Joao Eduardo Luis)</p></li>
<li><p>mon: fix rule vs ruleset check in ‘osd pool set … crush_ruleset’ command (John Spray)</p></li>
<li><p>mon: make osd ‘down’ count accurate (Sage Weil)</p></li>
<li><p>mon: set ‘next commit’ in primary-affinity reply (Ilya Dryomov)</p></li>
<li><p>mon: verify CRUSH features are supported by all mons (#8738, Greg Farnum)</p></li>
<li><p>msgr: fix sequence negotiation during connection reset (Guang Yang)</p></li>
<li><p>osd: block scrub on blocked objects (#8011, Samuel Just)</p></li>
<li><p>osd: call XFS hint ioctl less often (#8241, Ilya Dryomov)</p></li>
<li><p>osd: copy xattr spill out marker on clone (Haomai Wang)</p></li>
<li><p>osd: fix flush of snapped objects (#8334, Samuel Just)</p></li>
<li><p>osd: fix hashindex restart of merge operation (#8332, Samuel Just)</p></li>
<li><p>osd: fix osdmap subscription bug causing startup hang (Greg Farnum)</p></li>
<li><p>osd: fix potential null deref (#8328, Sage Weil)</p></li>
<li><p>osd: fix shutdown race (#8319, Sage Weil)</p></li>
<li><p>osd: handle ‘none’ in CRUSH results properly during peering (#8507, Samuel Just)</p></li>
<li><p>osd: set no spill out marker on new objects (Greg Farnum)</p></li>
<li><p>osd: skip op ordering debug checks on tiered pools (#8380, Sage Weil)</p></li>
<li><p>rados: enforce ‘put’ alignment (Lluis Pamies-Juarez)</p></li>
<li><p>rest-api: fix for ‘rx’ commands (Ailing Zhang)</p></li>
<li><p>rgw: calc user manifest etag and fix check (#8169, #8436, Yehuda Sadeh)</p></li>
<li><p>rgw: fetch attrs on multipart completion (#8452, Yehuda Sadeh, Sylvain Munaut)</p></li>
<li><p>rgw: fix buffer overflow for long instance ids (#8608, Yehuda Sadeh)</p></li>
<li><p>rgw: fix entity permission check on metadata put (#8428, Yehuda Sadeh)</p></li>
<li><p>rgw: fix multipart retry race (#8269, Yehuda Sadeh)</p></li>
<li><p>rpm: split ceph into ceph and ceph-common RPMs (Sandon Van Ness, Dan Mick)</p></li>
<li><p>sysvinit: continue startin daemons after failure doing mount (#8554, Sage Weil)</p></li>
</ul>
<p>For more detailed information, see <a class="reference download internal" download="" href="../../_downloads/4cc2151404bad12e5f907a4492027064/v0.80.2.txt"><code class="xref download docutils literal notranslate"><span class="pre">the</span> <span class="pre">complete</span> <span class="pre">changelog</span></code></a>.</p>
</div>
</div>
<div class="section" id="v0-80-1-firefly">
<h1>v0.80.1 Firefly<a class="headerlink" href="#v0-80-1-firefly" title="Permalink to this headline">¶</a></h1>
<p>This first Firefly point release fixes a few bugs, the most visible
being a problem that prevents scrub from completing in some cases.</p>
<div class="section" id="id11">
<h2>Notable Changes<a class="headerlink" href="#id11" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>osd: revert incomplete scrub fix (Samuel Just)</p></li>
<li><p>rgw: fix stripe calculation for manifest objects (Yehuda Sadeh)</p></li>
<li><p>rgw: improve handling, memory usage for abort reads (Yehuda Sadeh)</p></li>
<li><p>rgw: send Swift user manifest HTTP header (Yehuda Sadeh)</p></li>
<li><p>libcephfs, ceph-fuse: expose MDS session state via admin socket (Yan, Zheng)</p></li>
<li><p>osd: add simple throttle for snap trimming (Sage Weil)</p></li>
<li><p>monclient: fix possible hang from ill-timed monitor connection failure (Sage Weil)</p></li>
<li><p>osd: fix trimming of past HitSets (Sage Weil)</p></li>
<li><p>osd: fix whiteouts for non-writeback cache modes (Sage Weil)</p></li>
<li><p>osd: prevent divide by zero in tiering agent (David Zafman)</p></li>
<li><p>osd: prevent busy loop when tiering agent can do no work (David Zafman)</p></li>
</ul>
<p>For more detailed information, see <a class="reference download internal" download="" href="../../_downloads/23fb7db0859d89129e64ede8c9809cdc/v0.80.1.txt"><code class="xref download docutils literal notranslate"><span class="pre">the</span> <span class="pre">complete</span> <span class="pre">changelog</span></code></a>.</p>
</div>
</div>
<div class="section" id="v0-80-firefly">
<h1>v0.80 Firefly<a class="headerlink" href="#v0-80-firefly" title="Permalink to this headline">¶</a></h1>
<p>This release will form the basis for our long-term supported release
Firefly, v0.80.x.  The big new features are support for erasure coding
and cache tiering, although a broad range of other features, fixes,
and improvements have been made across the code base.  Highlights include:</p>
<ul class="simple">
<li><p><em>Erasure coding</em>: support for a broad range of erasure codes for lower
storage overhead and better data durability.</p></li>
<li><p><em>Cache tiering</em>: support for creating ‘cache pools’ that store hot,
recently accessed objects with automatic demotion of colder data to
a base tier.  Typically the cache pool is backed by faster storage
devices like SSDs.</p></li>
<li><p><em>Primary affinity</em>: Ceph now has the ability to skew selection of
OSDs as the “primary” copy, which allows the read workload to be
cheaply skewed away from parts of the cluster without migrating any
data.</p></li>
<li><p><em>Key/value OSD backend</em> (experimental): An alternative storage backend
for Ceph OSD processes that puts all data in a key/value database like
leveldb.  This provides better performance for workloads dominated by
key/value operations (like radosgw bucket indices).</p></li>
<li><p><em>Standalone radosgw</em> (experimental): The radosgw process can now run
in a standalone mode without an apache (or similar) web server or
fastcgi.  This simplifies deployment and can improve performance.</p></li>
</ul>
<p>We expect to maintain a series of stable releases based on v0.80
Firefly for as much as a year.  In the meantime, development of Ceph
continues with the next release, Giant, which will feature work on the
CephFS distributed file system, more alternative storage backends
(like RocksDB and f2fs), RDMA support, support for pyramid erasure
codes, and additional functionality in the block device (RBD) like
copy-on-read and multisite mirroring.</p>
<div class="section" id="upgrade-sequencing">
<h2>Upgrade Sequencing<a class="headerlink" href="#upgrade-sequencing" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p>If your existing cluster is running a version older than v0.67
Dumpling, please first upgrade to the latest Dumpling release before
upgrading to v0.80 Firefly.  Please refer to the <a class="reference internal" href="../dumpling/#dumpling-upgrade"><span class="std std-ref">Upgrade Sequencing</span></a>
documentation.</p></li>
<li><p>We recommend adding the following to the [mon] section of your
ceph.conf prior to upgrade:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">mon</span> <span class="n">warn</span> <span class="n">on</span> <span class="n">legacy</span> <span class="n">crush</span> <span class="n">tunables</span> <span class="o">=</span> <span class="n">false</span>
</pre></div>
</div>
<p>This will prevent health warnings due to the use of legacy CRUSH
placement.  Although it is possible to rebalance existing data
across your cluster (see the upgrade notes below), we do not
normally recommend it for production environments as a large amount
of data will move and there is a significant performance impact from
the rebalancing.</p>
</li>
<li><p>Upgrade daemons in the following order:</p>
<blockquote>
<div><ol class="arabic simple">
<li><p>Monitors</p></li>
<li><p>OSDs</p></li>
<li><p>MDSs and/or radosgw</p></li>
</ol>
</div></blockquote>
<p>If the ceph-mds daemon is restarted first, it will wait until all
OSDs have been upgraded before finishing its startup sequence.  If
the ceph-mon daemons are not restarted prior to the ceph-osd
daemons, they will not correctly register their new capabilities
with the cluster and new features may not be usable until they are
restarted a second time.</p>
</li>
<li><p>Upgrade radosgw daemons together.  There is a subtle change in behavior
for multipart uploads that prevents a multipart request that was initiated
with a new radosgw from being completed by an old radosgw.</p></li>
</ul>
</div>
<div class="section" id="upgrading-from-v0-79">
<h2>Upgrading from v0.79<a class="headerlink" href="#upgrading-from-v0-79" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>OSDMap’s json-formatted dump changed for keys ‘full’ and ‘nearfull’.
What was previously being outputted as ‘true’ or ‘false’ strings are
now being outputted ‘true’ and ‘false’ booleans according to json syntax.</p></li>
<li><p>HEALTH_WARN on ‘mon osd down out interval == 0’. Having this option set
to zero on the leader acts much like having the ‘noout’ flag set.  This
warning will only be reported if the monitor getting the ‘health’ or
‘status’ request has this option set to zero.</p></li>
<li><p>Monitor ‘auth’ commands now require the mon ‘x’ capability.  This matches
dumpling v0.67.x and earlier, but differs from emperor v0.72.x.</p></li>
<li><p>A librados WATCH operation on a non-existent object now returns ENOENT;
previously it did not.</p></li>
<li><p>Librados interface change:  As there are no partial writes, the rados_write()
and rados_append() operations now return 0 on success like rados_write_full()
always has.  This includes the C++ interface equivalents and AIO return
values for the aio variants.</p></li>
<li><p>The radosgw init script (sysvinit) how requires that the ‘host = …’ line in
ceph.conf, if present, match the short hostname (the output of ‘hostname -s’),
not the fully qualified hostname or the (occasionally non-short) output of
‘hostname’.  Failure to adjust this when upgrading from emperor or dumpling
may prevent the radosgw daemon from starting.</p></li>
</ul>
</div>
<div class="section" id="upgrading-from-v0-72-emperor">
<h2>Upgrading from v0.72 Emperor<a class="headerlink" href="#upgrading-from-v0-72-emperor" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>See notes above.</p></li>
<li><p>The ‘ceph -s’ or ‘ceph status’ command’s ‘num_in_osds’ field in the
JSON and XML output has been changed from a string to an int.</p></li>
<li><p>The recently added ‘ceph mds set allow_new_snaps’ command’s syntax
has changed slightly; it is now ‘ceph mds set allow_new_snaps true’.
The ‘unset’ command has been removed; instead, set the value to
‘false’.</p></li>
<li><p>The syntax for allowing snapshots is now ‘mds set allow_new_snaps
&lt;true|false&gt;’ instead of ‘mds &lt;set,unset&gt; allow_new_snaps’.</p></li>
<li><p>‘rbd ls’ on a pool which never held rbd images now exits with code
0. It outputs nothing in plain format, or an empty list in
non-plain format. This is consistent with the behavior for a pool
which used to hold images, but contains none. Scripts relying on
this behavior should be updated.</p></li>
<li><p>The MDS requires a new OSD operation TMAP2OMAP, added in this release.  When
upgrading, be sure to upgrade and restart the ceph-osd daemons before the
ceph-mds daemon.  The MDS will refuse to start if any up OSDs do not support
the new feature.</p></li>
<li><p>The ‘ceph mds set_max_mds N’ command is now deprecated in favor of
‘ceph mds set max_mds N’.</p></li>
<li><p>The ‘osd pool create …’ syntax has changed for erasure pools.</p></li>
<li><p>The default CRUSH rules and layouts are now using the ‘bobtail’
tunables and defaults.  Upgaded clusters using the old values will
now present with a health WARN state.  This can be disabled by
adding ‘mon warn on legacy crush tunables = false’ to ceph.conf and
restarting the monitors.  Alternatively, you can switch to the new
tunables with ‘ceph osd crush tunables firefly,’ but keep in mind
that this will involve moving a <em>significant</em> portion of the data
already stored in the cluster and in a large cluster may take
several days to complete.  We do not recommend adjusting tunables on a
production cluster.</p></li>
<li><p>We now default to the ‘bobtail’ CRUSH tunable values that are first supported
by Ceph clients in bobtail (v0.56) and Linux kernel version v3.9.  If you
plan to access a newly created Ceph cluster with an older kernel client, you
should use ‘ceph osd crush tunables legacy’ to switch back to the legacy
behavior.  Note that making that change will likely result in some data
movement in the system, so adjust the setting before populating the new
cluster with data.</p></li>
<li><p>We now set the HASHPSPOOL flag on newly created pools (and new
clusters) by default.  Support for this flag first appeared in
v0.64; v0.67 Dumpling is the first major release that supports it.
It is first supported by the Linux kernel version v3.9.  If you plan
to access a newly created Ceph cluster with an older kernel or
clients (e.g, librados, librbd) from a pre-dumpling Ceph release,
you should add ‘osd pool default flag hashpspool = false’ to the
‘[global]’ section of your ‘ceph.conf’ prior to creating your
monitors (e.g., after ‘ceph-deploy new’ but before ‘ceph-deploy mon
create …’).</p></li>
<li><p>The configuration option ‘osd pool default crush rule’ is deprecated
and replaced with ‘osd pool default crush replicated ruleset’. ‘osd
pool default crush rule’ takes precedence for backward compatibility
and a deprecation warning is displayed when it is used.</p></li>
<li><p>As part of fix for #6796, ‘ceph osd pool set &lt;pool&gt; &lt;var&gt; &lt;arg&gt;’ now
receives &lt;arg&gt; as an integer instead of a string.  This affects how
‘hashpspool’ flag is set/unset: instead of ‘true’ or ‘false’, it now
must be ‘0’ or ‘1’.</p></li>
<li><p>The behavior of the CRUSH ‘indep’ choose mode has been changed.  No
ceph cluster should have been using this behavior unless someone has
manually extracted a crush map, modified a CRUSH rule to replace
‘firstn’ with ‘indep’, recompiled, and reinjected the new map into
the cluster.  If the ‘indep’ mode is currently in use on a cluster,
the rule should be modified to use ‘firstn’ instead, and the
administrator should wait until any data movement completes before
upgrading.</p></li>
<li><p>The ‘osd dump’ command now dumps pool snaps as an array instead of an
object.</p></li>
</ul>
</div>
<div class="section" id="upgrading-from-v0-67-dumpling">
<h2>Upgrading from v0.67 Dumpling<a class="headerlink" href="#upgrading-from-v0-67-dumpling" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>See notes above.</p></li>
<li><p>ceph-fuse and radosgw now use the same default values for the admin
socket and log file paths that the other daemons (ceph-osd,
ceph-mon, etc.) do.  If you run these daemons as non-root, you may
need to adjust your ceph.conf to disable these options or to adjust
the permissions on /var/run/ceph and /var/log/ceph.</p></li>
<li><p>The MDS now disallows snapshots by default as they are not
considered stable.  The command ‘ceph mds set allow_snaps’ will
enable them.</p></li>
<li><p>For clusters that were created before v0.44 (pre-argonaut, Spring
2012) and store radosgw data, the auto-upgrade from TMAP to OMAP
objects has been disabled.  Before upgrading, make sure that any
buckets created on pre-argonaut releases have been modified (e.g.,
by PUTing and then DELETEing an object from each bucket).  Any
cluster created with argonaut (v0.48) or a later release or not
using radosgw never relied on the automatic conversion and is not
affected by this change.</p></li>
<li><p>Any direct users of the ‘tmap’ portion of the librados API should be
aware that the automatic tmap -&gt; omap conversion functionality has
been removed.</p></li>
<li><p>Most output that used K or KB (e.g., for kilobyte) now uses a
lower-case k to match the official SI convention.  Any scripts that
parse output and check for an upper-case K will need to be modified.</p></li>
<li><p>librados::Rados::pool_create_async() and librados::Rados::pool_delete_async()
don’t drop a reference to the completion object on error, caller needs to take
care of that. This has never really worked correctly and we were leaking an
object</p></li>
<li><p>‘ceph osd crush set &lt;id&gt; &lt;weight&gt; &lt;loc..&gt;’ no longer adds the osd to the
specified location, as that’s a job for ‘ceph osd crush add’.  It will
however continue to work just the same as long as the osd already exists
in the crush map.</p></li>
<li><p>The OSD now enforces that class write methods cannot both mutate an
object and return data.  The rbd.assign_bid method, the lone
offender, has been removed.  This breaks compatibility with
pre-bobtail librbd clients by preventing them from creating new
images.</p></li>
<li><p>librados now returns on commit instead of ack for synchronous calls.
This is a bit safer in the case where both OSDs and the client crash, and
is probably how it should have been acting from the beginning. Users are
unlikely to notice but it could result in lower performance in some
circumstances. Those who care should switch to using the async interfaces,
which let you specify safety semantics precisely.</p></li>
<li><p>The C++ librados AioComplete::get_version() method was incorrectly
returning an int (usually 32-bits).  To avoid breaking library
compatibility, a get_version64() method is added that returns the
full-width value.  The old method is deprecated and will be removed
in a future release.  Users of the C++ librados API that make use of
the get_version() method should modify their code to avoid getting a
value that is truncated from 64 to to 32 bits.</p></li>
</ul>
</div>
<div class="section" id="notable-changes-since-v0-79">
<h2>Notable changes since v0.79<a class="headerlink" href="#notable-changes-since-v0-79" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>ceph-fuse, libcephfs: fix several caching bugs (Yan, Zheng)</p></li>
<li><p>ceph-fuse: trim inodes in response to mds memory pressure (Yan, Zheng)</p></li>
<li><p>librados: fix inconsistencies in API error values (David Zafman)</p></li>
<li><p>librados: fix watch operations with cache pools (Sage Weil)</p></li>
<li><p>librados: new snap rollback operation (David Zafman)</p></li>
<li><p>mds: fix respawn (John Spray)</p></li>
<li><p>mds: misc bugs (Yan, Zheng)</p></li>
<li><p>mds: misc multi-mds fixes (Yan, Zheng)</p></li>
<li><p>mds: use shared_ptr for requests (Greg Farnum)</p></li>
<li><p>mon: fix peer feature checks (Sage Weil)</p></li>
<li><p>mon: require ‘x’ mon caps for auth operations (Joao Luis)</p></li>
<li><p>mon: shutdown when removed from mon cluster (Joao Luis)</p></li>
<li><p>msgr: fix locking bug in authentication (Josh Durgin)</p></li>
<li><p>osd: fix bug in journal replay/restart (Sage Weil)</p></li>
<li><p>osd: many many many bug fixes with cache tiering (Samuel Just)</p></li>
<li><p>osd: track omap and hit_set objects in pg stats (Samuel Just)</p></li>
<li><p>osd: warn if agent cannot enable due to invalid (post-split) stats (Sage Weil)</p></li>
<li><p>rados bench: track metadata for multiple runs separately (Guang Yang)</p></li>
<li><p>rgw: fixed subuser modify (Yehuda Sadeh)</p></li>
<li><p>rpm: fix redhat-lsb dependency (Sage Weil, Alfredo Deza)</p></li>
</ul>
</div>
<div class="section" id="notable-changes-since-v0-72-emperor">
<h2>Notable changes since v0.72 Emperor<a class="headerlink" href="#notable-changes-since-v0-72-emperor" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>buffer: some zero-copy groundwork (Josh Durgin)</p></li>
<li><p>build: misc improvements (Ken Dreyer)</p></li>
<li><p>ceph-conf: stop creating bogus log files (Josh Durgin, Sage Weil)</p></li>
<li><p>ceph-crush-location: new hook for setting CRUSH location of osd daemons on start)</p></li>
<li><p>ceph-disk: avoid fd0 (Loic Dachary)</p></li>
<li><p>ceph-disk: generalize path names, add tests (Loic Dachary)</p></li>
<li><p>ceph-disk: misc improvements for puppet (Loic Dachary)</p></li>
<li><p>ceph-disk: several bug fixes (Loic Dachary)</p></li>
<li><p>ceph-fuse: fix race for sync reads (Sage Weil)</p></li>
<li><p>ceph-fuse, libcephfs: fix several caching bugs (Yan, Zheng)</p></li>
<li><p>ceph-fuse: trim inodes in response to mds memory pressure (Yan, Zheng)</p></li>
<li><p>ceph-kvstore-tool: expanded command set and capabilities (Joao Eduardo Luis)</p></li>
<li><p>ceph.spec: fix build dependency (Loic Dachary)</p></li>
<li><p>common: bloom filter improvements (Sage Weil)</p></li>
<li><p>common: check preexisting admin socket for active daemon before removing (Loic Dachary)</p></li>
<li><p>common: fix aligned buffer allocation (Loic Dachary)</p></li>
<li><p>common: fix authentication on big-endian architectures (Dan Mick)</p></li>
<li><p>common: fix config variable substitution (Loic Dachary)</p></li>
<li><p>common: portability changes to support libc++ (Noah Watkins)</p></li>
<li><p>common: switch to unordered_map from hash_map (Noah Watkins)</p></li>
<li><p>config: recursive metavariable expansion (Loic Dachary)</p></li>
<li><p>crush: default to bobtail tunables (Sage Weil)</p></li>
<li><p>crush: fix off-by-one error in recent refactor (Sage Weil)</p></li>
<li><p>crush: many additional tests (Loic Dachary)</p></li>
<li><p>crush: misc fixes, cleanups (Loic Dachary)</p></li>
<li><p>crush: new rule steps to adjust retry attempts (Sage Weil)</p></li>
<li><p>crush, osd: s/rep/replicated/ for less confusion (Loic Dachary)</p></li>
<li><p>crush: refactor descend_once behavior; support set_choose*_tries for replicated rules (Sage Weil)</p></li>
<li><p>crush: usability and test improvements (Loic Dachary)</p></li>
<li><p>debian: change directory ownership between ceph and ceph-common (Sage Weil)</p></li>
<li><p>debian: integrate misc fixes from downstream packaging (James Page)</p></li>
<li><p>doc: big update to install docs (John Wilkins)</p></li>
<li><p>doc: many many install doc improvements (John Wilkins)</p></li>
<li><p>doc: many many updates (John Wilkins)</p></li>
<li><p>doc: misc fixes (David Moreau Simard, Kun Huang)</p></li>
<li><p>erasure-code: improve buffer alignment (Loic Dachary)</p></li>
<li><p>erasure-code: rewrite region-xor using vector operations (Andreas Peters)</p></li>
<li><p>init: fix startup ordering/timeout problem with OSDs (Dmitry Smirnov)</p></li>
<li><p>libcephfs: fix resource leak (Zheng Yan)</p></li>
<li><p>librados: add C API coverage for atomic write operations (Christian Marie)</p></li>
<li><p>librados: fix inconsistencies in API error values (David Zafman)</p></li>
<li><p>librados: fix throttle leak (and eventual deadlock) (Josh Durgin)</p></li>
<li><p>librados: fix watch operations with cache pools (Sage Weil)</p></li>
<li><p>librados: new snap rollback operation (David Zafman)</p></li>
<li><p>librados, osd: new TMAP2OMAP operation (Yan, Zheng)</p></li>
<li><p>librados: read directly into user buffer (Rutger ter Borg)</p></li>
<li><p>librbd: fix use-after-free aio completion bug #5426 (Josh Durgin)</p></li>
<li><p>librbd: localize/distribute parent reads (Sage Weil)</p></li>
<li><p>librbd: skip zeroes/holes when copying sparse images (Josh Durgin)</p></li>
<li><p>mailmap: affiliation updates (Loic Dachary)</p></li>
<li><p>mailmap updates (Loic Dachary)</p></li>
<li><p>many portability improvements (Noah Watkins)</p></li>
<li><p>many unit test improvements (Loic Dachary)</p></li>
<li><p>mds: always store backtrace in default pool (Yan, Zheng)</p></li>
<li><p>mds: cope with MDS failure during creation (John Spray)</p></li>
<li><p>mds: fix cap migration behavior (Yan, Zheng)</p></li>
<li><p>mds: fix client session flushing (Yan, Zheng)</p></li>
<li><p>mds: fix crash from client sleep/resume (Zheng Yan)</p></li>
<li><p>mds: fix many many multi-mds bugs (Yan, Zheng)</p></li>
<li><p>mds: fix readdir end check (Zheng Yan)</p></li>
<li><p>mds: fix Resetter locking (Alexandre Oliva)</p></li>
<li><p>mds: fix respawn (John Spray)</p></li>
<li><p>mds: inline data support (Li Wang, Yunchuan Wen)</p></li>
<li><p>mds: misc bugs (Yan, Zheng)</p></li>
<li><p>mds: misc fixes for directory fragments (Zheng Yan)</p></li>
<li><p>mds: misc fixes for larger directories (Zheng Yan)</p></li>
<li><p>mds: misc fixes for multiple MDSs (Zheng Yan)</p></li>
<li><p>mds: misc multi-mds fixes (Yan, Zheng)</p></li>
<li><p>mds: remove .ceph directory (John Spray)</p></li>
<li><p>mds: store directories in omap instead of tmap (Yan, Zheng)</p></li>
<li><p>mds: update old-format backtraces opportunistically (Zheng Yan)</p></li>
<li><p>mds: use shared_ptr for requests (Greg Farnum)</p></li>
<li><p>misc cleanups from coverity (Xing Lin)</p></li>
<li><p>misc coverity fixes, cleanups (Danny Al-Gaaf)</p></li>
<li><p>misc coverity fixes (Xing Lin, Li Wang, Danny Al-Gaaf)</p></li>
<li><p>misc portability fixes (Noah Watkins, Alan Somers)</p></li>
<li><p>misc portability fixes (Noah Watkins, Christophe Courtaut, Alan Somers, huanjun)</p></li>
<li><p>misc portability work (Noah Watkins)</p></li>
<li><p>mon: add erasure profiles and improve erasure pool creation (Loic Dachary)</p></li>
<li><p>mon: add ‘mon getmap EPOCH’ (Joao Eduardo Luis)</p></li>
<li><p>mon: allow adjustment of cephfs max file size via ‘ceph mds set max_file_size’ (Sage Weil)</p></li>
<li><p>mon: allow debug quorum_{enter,exit} commands via admin socket</p></li>
<li><p>mon: ‘ceph osd pg-temp …’ and primary-temp commands (Ilya Dryomov)</p></li>
<li><p>mon: change mds allow_new_snaps syntax to be more consistent (Sage Weil)</p></li>
<li><p>mon: clean up initial crush rule creation (Loic Dachary)</p></li>
<li><p>mon: collect misc metadata about osd (os, kernel, etc.), new ‘osd metadata’ command (Sage Weil)</p></li>
<li><p>mon: do not create erasure rules by default (Sage Weil)</p></li>
<li><p>mon: do not generate spurious MDSMaps in certain cases (Sage Weil)</p></li>
<li><p>mon: do not use keyring if auth = none (Loic Dachary)</p></li>
<li><p>mon: fix peer feature checks (Sage Weil)</p></li>
<li><p>mon: fix pg_temp leaks (Joao Eduardo Luis)</p></li>
<li><p>mon: fix pool count in ‘ceph -s’ output (Sage Weil)</p></li>
<li><p>mon: handle more whitespace (newline, tab) in mon capabilities (Sage Weil)</p></li>
<li><p>mon: improve (replicate or erasure) pool creation UX (Loic Dachary)</p></li>
<li><p>mon: infrastructure to handle mixed-version mon cluster and cli/rest API (Greg Farnum)</p></li>
<li><p>mon: MForward tests (Loic Dachary)</p></li>
<li><p>mon: mkfs now idempotent (Loic Dachary)</p></li>
<li><p>mon: only seed new osdmaps to current OSDs (Sage Weil)</p></li>
<li><p>mon, osd: create erasure style crush rules (Loic Dachary, Sage Weil)</p></li>
<li><p>mon: ‘osd crush show-tunables’ (Sage Weil)</p></li>
<li><p>mon: ‘osd dump’ dumps pool snaps as array, not object (Dan Mick)</p></li>
<li><p>mon, osd: new ‘erasure’ pool type (still not fully supported)</p></li>
<li><p>mon: persist quorum features to disk (Greg Farnum)</p></li>
<li><p>mon: prevent extreme changes in pool pg_num (Greg Farnum)</p></li>
<li><p>mon: require ‘x’ mon caps for auth operations (Joao Luis)</p></li>
<li><p>mon: shutdown when removed from mon cluster (Joao Luis)</p></li>
<li><p>mon: take ‘osd pool set …’ value as an int, not string (Joao Eduardo Luis)</p></li>
<li><p>mon: track osd features in OSDMap (Joao Luis, David Zafman)</p></li>
<li><p>mon: trim MDSMaps (Joao Eduardo Luis)</p></li>
<li><p>mon: warn if crush has non-optimal tunables (Sage Weil)</p></li>
<li><p>mount.ceph: add -n for autofs support (Steve Stock)</p></li>
<li><p>msgr: fix locking bug in authentication (Josh Durgin)</p></li>
<li><p>msgr: fix messenger restart race (Xihui He)</p></li>
<li><p>msgr: improve connection error detection between clients and monitors (Greg Farnum, Sage Weil)</p></li>
<li><p>osd: add/fix CPU feature detection for jerasure (Loic Dachary)</p></li>
<li><p>osd: add HitSet tracking for read ops (Sage Weil, Greg Farnum)</p></li>
<li><p>osd: avoid touching leveldb for some xattrs (Haomai Wang, Sage Weil)</p></li>
<li><p>osd: backfill to multiple targets (David Zafman)</p></li>
<li><p>osd: backfill to osds not in acting set (David Zafman)</p></li>
<li><p>osd: cache pool support for snapshots (Sage Weil)</p></li>
<li><p>osd: client IO path changes for EC (Samuel Just)</p></li>
<li><p>osd: default to 3x replication</p></li>
<li><p>osd: do not include backfill targets in acting set (David Zafman)</p></li>
<li><p>osd: enable new hashpspool layout by default (Sage Weil)</p></li>
<li><p>osd: erasure plugin benchmarking tool (Loic Dachary)</p></li>
<li><p>osd: fix and cleanup misc backfill issues (David Zafman)</p></li>
<li><p>osd: fix bug in journal replay/restart (Sage Weil)</p></li>
<li><p>osd: fix copy-get omap bug (Sage Weil)</p></li>
<li><p>osd: fix linux kernel version detection (Ilya Dryomov)</p></li>
<li><p>osd: fix memstore segv (Haomai Wang)</p></li>
<li><p>osd: fix object_info_t encoding bug from emperor (Sam Just)</p></li>
<li><p>osd: fix omap_clear operation to not zap xattrs (Sam Just, Yan, Zheng)</p></li>
<li><p>osd: fix several bugs with tier infrastructure</p></li>
<li><p>osd: fix throttle thread (Haomai Wang)</p></li>
<li><p>osd: fix XFS detection (Greg Farnum, Sushma Gurram)</p></li>
<li><p>osd: generalize scrubbing infrastructure to allow EC (David Zafman)</p></li>
<li><p>osd: handle more whitespace (newline, tab) in osd capabilities (Sage Weil)</p></li>
<li><p>osd: ignore num_objects_dirty on scrub for old pools (Sage Weil)</p></li>
<li><p>osd: improved scrub checks on clones (Sage Weil, Sam Just)</p></li>
<li><p>osd: improve locking in fd lookup cache (Samuel Just, Greg Farnum)</p></li>
<li><p>osd: include more info in pg query result (Sage Weil)</p></li>
<li><p>osd, librados: fix full cluster handling (Josh Durgin)</p></li>
<li><p>osd: many erasure fixes (Sam Just)</p></li>
<li><p>osd: many many many bug fixes with cache tiering (Samuel Just)</p></li>
<li><p>osd: move to jerasure2 library (Loic Dachary)</p></li>
<li><p>osd: new ‘chassis’ type in default crush hierarchy (Sage Weil)</p></li>
<li><p>osd: new keyvaluestore-dev backend based on leveldb (Haomai Wang)</p></li>
<li><p>osd: new OSDMap encoding (Greg Farnum)</p></li>
<li><p>osd: new tests for erasure pools (David Zafman)</p></li>
<li><p>osd: preliminary cache pool support (no snaps) (Greg Farnum, Sage Weil)</p></li>
<li><p>osd: reduce scrub lock contention (Guang Yang)</p></li>
<li><p>osd: requery unfound on stray notify (#6909) (Samuel Just)</p></li>
<li><p>osd: some PGBackend infrastructure (Samuel Just)</p></li>
<li><p>osd: support for new ‘memstore’ (memory-backed) backend (Sage Weil)</p></li>
<li><p>osd: track erasure compatibility (David Zafman)</p></li>
<li><p>osd: track omap and hit_set objects in pg stats (Samuel Just)</p></li>
<li><p>osd: warn if agent cannot enable due to invalid (post-split) stats (Sage Weil)</p></li>
<li><p>rados: add ‘crush location’, smart replica selection/balancing (Sage Weil)</p></li>
<li><p>rados bench: track metadata for multiple runs separately (Guang Yang)</p></li>
<li><p>rados: some performance optimizations (Yehuda Sadeh)</p></li>
<li><p>rados tool: fix listomapvals (Josh Durgin)</p></li>
<li><p>rbd: add ‘rbdmap’ init script for mapping rbd images on book (Adam Twardowski)</p></li>
<li><p>rbd: add rbdmap support for upstart (Laurent Barbe)</p></li>
<li><p>rbd: expose kernel rbd client options via ‘rbd map’ (Ilya Dryomov)</p></li>
<li><p>rbd: fix bench-write command (Hoamai Wang)</p></li>
<li><p>rbd: make ‘rbd list’ return empty list and success on empty pool (Josh Durgin)</p></li>
<li><p>rbd: prevent deletion of images with watchers (Ilya Dryomov)</p></li>
<li><p>rbd: support for 4096 mapped devices, up from ~250 (Ilya Dryomov)</p></li>
<li><p>rest-api: do not fail when no OSDs yet exist (Dan Mick)</p></li>
<li><p>rgw: add ‘status’ command to sysvinit script (David Moreau Simard)</p></li>
<li><p>rgw: allow multiple frontends (Yehuda Sadeh)</p></li>
<li><p>rgw: allow use of an erasure data pool (Yehuda Sadeh)</p></li>
<li><p>rgw: convert bucket info to new format on demand (Yehuda Sadeh)</p></li>
<li><p>rgw: fixed subuser modify (Yehuda Sadeh)</p></li>
<li><p>rgw: fix error setting empty owner on ACLs (Yehuda Sadeh)</p></li>
<li><p>rgw: fix fastcgi deadlock (do not return data from librados callback) (Yehuda Sadeh)</p></li>
<li><p>rgw: fix many-part multipart uploads (Yehuda Sadeh)</p></li>
<li><p>rgw: fix misc CORS bugs (Robin H. Johnson)</p></li>
<li><p>rgw: fix object placement read op (Yehuda Sadeh)</p></li>
<li><p>rgw: fix reading bucket policy (#6940)</p></li>
<li><p>rgw: fix read_user_buckets ‘max’ behavior (Yehuda Sadeh)</p></li>
<li><p>rgw: fix several CORS bugs (Robin H. Johnson)</p></li>
<li><p>rgw: fix use-after-free when releasing completion handle (Yehuda Sadeh)</p></li>
<li><p>rgw: improve swift temp URL support (Yehuda Sadeh)</p></li>
<li><p>rgw: make multi-object delete idempotent (Yehuda Sadeh)</p></li>
<li><p>rgw: optionally defer to bucket ACLs instead of object ACLs (Liam Monahan)</p></li>
<li><p>rgw: prototype mongoose frontend (Yehuda Sadeh)</p></li>
<li><p>rgw: several doc fixes (Alexandre Marangone)</p></li>
<li><p>rgw: support for password (instead of admin token) for keystone authentication (Christophe Courtaut)</p></li>
<li><p>rgw: switch from mongoose to civetweb (Yehuda Sadeh)</p></li>
<li><p>rgw: user quotas (Yehuda Sadeh)</p></li>
<li><p>rpm: fix redhat-lsb dependency (Sage Weil, Alfredo Deza)</p></li>
<li><p>specfile: fix RPM build on RHEL6 (Ken Dreyer, Derek Yarnell)</p></li>
<li><p>specfile: ship libdir/ceph (Key Dreyer)</p></li>
<li><p>sysvinit, upstart: prevent both init systems from starting the same daemons (Josh Durgin)</p></li>
</ul>
</div>
<div class="section" id="notable-changes-since-v0-67-dumpling">
<h2>Notable changes since v0.67 Dumpling<a class="headerlink" href="#notable-changes-since-v0-67-dumpling" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>build cleanly under clang (Christophe Courtaut)</p></li>
<li><p>build: Makefile refactor (Roald J. van Loon)</p></li>
<li><p>build: fix [/usr]/sbin locations (Alan Somers)</p></li>
<li><p>ceph-disk: fix journal preallocation</p></li>
<li><p>ceph-fuse, radosgw: enable admin socket and logging by default</p></li>
<li><p>ceph-fuse: fix problem with readahead vs truncate race (Yan, Zheng)</p></li>
<li><p>ceph-fuse: trim deleted inodes from cache (Yan, Zheng)</p></li>
<li><p>ceph-fuse: use newer fuse api (Jianpeng Ma)</p></li>
<li><p>ceph-kvstore-tool: new tool for working with leveldb (copy, crc) (Joao Luis)</p></li>
<li><p>ceph-post-file: new command to easily share logs or other files with ceph devs</p></li>
<li><p>ceph: improve parsing of CEPH_ARGS (Benoit Knecht)</p></li>
<li><p>ceph: make -h behave when monitors are down</p></li>
<li><p>ceph: parse CEPH_ARGS env variable</p></li>
<li><p>common: bloom_filter improvements, cleanups</p></li>
<li><p>common: cache crc32c values where possible</p></li>
<li><p>common: correct SI is kB not KB (Dan Mick)</p></li>
<li><p>common: fix looping on BSD (Alan Somers)</p></li>
<li><p>common: migrate SharedPtrRegistry to use boost::shared_ptr&lt;&gt; (Loic Dachary)</p></li>
<li><p>common: misc portability fixes (Noah Watkins)</p></li>
<li><p>crc32c: fix optimized crc32c code (it now detects arch support properly)</p></li>
<li><p>crc32c: improved intel-optimized crc32c support (~8x faster on my laptop!)</p></li>
<li><p>crush: fix name caching</p></li>
<li><p>doc: erasure coding design notes (Loic Dachary)</p></li>
<li><p>hadoop: removed old version of shim to avoid confusing users (Noah Watkins)</p></li>
<li><p>librados, mon: ability to query/ping out-of-quorum monitor status (Joao Luis)</p></li>
<li><p>librados: fix async aio completion wakeup</p></li>
<li><p>librados: fix installed header #includes (Dan Mick)</p></li>
<li><p>librados: get_version64() method for C++ API</p></li>
<li><p>librados: hello_world example (Greg Farnum)</p></li>
<li><p>librados: sync calls now return on commit (instead of ack) (Greg Farnum)</p></li>
<li><p>librbd python bindings: fix parent image name limit (Josh Durgin)</p></li>
<li><p>librbd, ceph-fuse: avoid some sources of ceph-fuse, rbd cache stalls</p></li>
<li><p>mds: avoid leaking objects when deleting truncated files (Yan, Zheng)</p></li>
<li><p>mds: fix F_GETLK (Yan, Zheng)</p></li>
<li><p>mds: fix LOOKUPSNAP bug</p></li>
<li><p>mds: fix heap profiler commands (Joao Luis)</p></li>
<li><p>mds: fix locking deadlock (David Disseldorp)</p></li>
<li><p>mds: fix many bugs with stray (unlinked) inodes (Yan, Zheng)</p></li>
<li><p>mds: fix many directory fragmentation bugs (Yan, Zheng)</p></li>
<li><p>mds: fix mds rejoin with legacy parent backpointer xattrs (Alexandre Oliva)</p></li>
<li><p>mds: fix rare restart/failure race during fs creation</p></li>
<li><p>mds: fix standby-replay when we fall behind (Yan, Zheng)</p></li>
<li><p>mds: fix stray directory purging (Yan, Zheng)</p></li>
<li><p>mds: notify clients about deleted files (so they can release from their cache) (Yan, Zheng)</p></li>
<li><p>mds: several bug fixes with clustered mds (Yan, Zheng)</p></li>
<li><p>mon, osd: improve osdmap trimming logic (Samuel Just)</p></li>
<li><p>mon, osd: initial CLI for configuring tiering</p></li>
<li><p>mon: a few ‘ceph mon add’ races fixed (command is now idempotent) (Joao Luis)</p></li>
<li><p>mon: allow (un)setting HASHPSPOOL flag on existing pools (Joao Luis)</p></li>
<li><p>mon: allow cap strings with . to be unquoted</p></li>
<li><p>mon: allow logging level of cluster log (/var/log/ceph/ceph.log) to be adjusted</p></li>
<li><p>mon: avoid rewriting full osdmaps on restart (Joao Luis)</p></li>
<li><p>mon: continue to discover peer addr info during election phase</p></li>
<li><p>mon: disallow CephFS snapshots until ‘ceph mds set allow_new_snaps’ (Greg Farnum)</p></li>
<li><p>mon: do not expose uncommitted state from ‘osd crush {add,set} …’ (Joao Luis)</p></li>
<li><p>mon: fix ‘ceph osd crush reweight …’ (Joao Luis)</p></li>
<li><p>mon: fix ‘osd crush move …’ command for buckets (Joao Luis)</p></li>
<li><p>mon: fix byte counts (off by factor of 4) (Dan Mick, Joao Luis)</p></li>
<li><p>mon: fix paxos corner case</p></li>
<li><p>mon: kv properties for pools to support EC (Loic Dachary)</p></li>
<li><p>mon: make ‘osd pool rename’ idempotent (Joao Luis)</p></li>
<li><p>mon: modify ‘auth add’ semantics to make a bit more sense (Joao Luis)</p></li>
<li><p>mon: new ‘osd perf’ command to dump recent performance information (Samuel Just)</p></li>
<li><p>mon: new and improved ‘ceph -s’ or ‘ceph status’ command (more info, easier to read)</p></li>
<li><p>mon: some auth check cleanups (Joao Luis)</p></li>
<li><p>mon: track per-pool stats (Joao Luis)</p></li>
<li><p>mon: warn about pools with bad pg_num</p></li>
<li><p>mon: warn when mon data stores grow very large (Joao Luis)</p></li>
<li><p>monc: fix small memory leak</p></li>
<li><p>new wireshark patches pulled into the tree (Kevin Jones)</p></li>
<li><p>objecter, librados: redirect requests based on cache tier config</p></li>
<li><p>objecter: fix possible hang when cluster is unpaused (Josh Durgin)</p></li>
<li><p>osd, librados: add new COPY_FROM rados operation</p></li>
<li><p>osd, librados: add new COPY_GET rados operations (used by COPY_FROM)</p></li>
<li><p>osd: ‘osd recover clone overlap limit’ option to limit cloning during recovery (Samuel Just)</p></li>
<li><p>osd: COPY_GET on-wire encoding improvements (Greg Farnum)</p></li>
<li><p>osd: add ‘osd heartbeat min healthy ratio’ configurable (was hard-coded at 33%)</p></li>
<li><p>osd: add option to disable pg log debug code (which burns CPU)</p></li>
<li><p>osd: allow cap strings with . to be unquoted</p></li>
<li><p>osd: automatically detect proper xattr limits (David Zafman)</p></li>
<li><p>osd: avoid extra copy in erasure coding reference implementation (Loic Dachary)</p></li>
<li><p>osd: basic cache pool redirects (Greg Farnum)</p></li>
<li><p>osd: basic whiteout, dirty flag support (not yet used)</p></li>
<li><p>osd: bloom_filter encodability, fixes, cleanups (Loic Dachary, Sage Weil)</p></li>
<li><p>osd: clean up and generalize copy-from code (Greg Farnum)</p></li>
<li><p>osd: cls_hello OSD class example</p></li>
<li><p>osd: erasure coding doc updates (Loic Dachary)</p></li>
<li><p>osd: erasure coding plugin infrastructure, tests (Loic Dachary)</p></li>
<li><p>osd: experiemental support for ZFS (zfsonlinux.org) (Yan, Zheng)</p></li>
<li><p>osd: fix RWORDER flags</p></li>
<li><p>osd: fix exponential backoff of slow request warnings (Loic Dachary)</p></li>
<li><p>osd: fix handling of racing read vs write (Samuel Just)</p></li>
<li><p>osd: fix version value returned by various operations (Greg Farnum)</p></li>
<li><p>osd: generalized temp object infrastructure</p></li>
<li><p>osd: ghobject_t infrastructure for EC (David Zafman)</p></li>
<li><p>osd: improvements for compatset support and storage (David Zafman)</p></li>
<li><p>osd: infrastructure to copy objects from other OSDs</p></li>
<li><p>osd: instrument peering states (David Zafman)</p></li>
<li><p>osd: misc copy-from improvements</p></li>
<li><p>osd: opportunistic crc checking on stored data (off by default)</p></li>
<li><p>osd: properly enforce RD/WR flags for rados classes</p></li>
<li><p>osd: reduce blocking on backing fs (Samuel Just)</p></li>
<li><p>osd: refactor recovery using PGBackend (Samuel Just)</p></li>
<li><p>osd: remove old magical tmap-&gt;omap conversion</p></li>
<li><p>osd: remove old pg log on upgrade (Samuel Just)</p></li>
<li><p>osd: revert xattr size limit (fixes large rgw uploads)</p></li>
<li><p>osd: use fdatasync(2) instead of fsync(2) to improve performance (Sam Just)</p></li>
<li><p>pybind: fix blacklisting nonce (Loic Dachary)</p></li>
<li><p>radosgw-agent: multi-region replication/DR</p></li>
<li><p>rgw: complete in-progress requests before shutting down</p></li>
<li><p>rgw: default log level is now more reasonable (Yehuda Sadeh)</p></li>
<li><p>rgw: fix S3 auth with response-* query string params (Sylvain Munaut, Yehuda Sadeh)</p></li>
<li><p>rgw: fix a few minor memory leaks (Yehuda Sadeh)</p></li>
<li><p>rgw: fix acl group check (Yehuda Sadeh)</p></li>
<li><p>rgw: fix inefficient use of std::list::size() (Yehuda Sadeh)</p></li>
<li><p>rgw: fix major CPU utilization bug with internal caching (Yehuda Sadeh, Mark Nelson)</p></li>
<li><p>rgw: fix ordering of write operations (preventing data loss on crash) (Yehuda Sadeh)</p></li>
<li><p>rgw: fix ordering of writes for mulitpart upload (Yehuda Sadeh)</p></li>
<li><p>rgw: fix various CORS bugs (Yehuda Sadeh)</p></li>
<li><p>rgw: fix/improve swift COPY support (Yehuda Sadeh)</p></li>
<li><p>rgw: improve help output (Christophe Courtaut)</p></li>
<li><p>rgw: misc fixes to support DR (Josh Durgin, Yehuda Sadeh)</p></li>
<li><p>rgw: per-bucket quota (Yehuda Sadeh)</p></li>
<li><p>rgw: validate S3 tokens against keystone (Roald J. van Loon)</p></li>
<li><p>rgw: wildcard support for keystone roles (Christophe Courtaut)</p></li>
<li><p>rpm: fix junit dependencies (Alan Grosskurth)</p></li>
<li><p>sysvinit radosgw: fix status return code (Danny Al-Gaaf)</p></li>
<li><p>sysvinit rbdmap: fix error ‘service rbdmap stop’ (Laurent Barbe)</p></li>
<li><p>sysvinit: add condrestart command (Dan van der Ster)</p></li>
<li><p>sysvinit: fix shutdown order (mons last) (Alfredo Deza)</p></li>
</ul>
</div>
</div>
<div class="section" id="v0-79">
<h1>v0.79<a class="headerlink" href="#v0-79" title="Permalink to this headline">¶</a></h1>
<p>This release is intended to serve as a release candidate for firefly,
which will hopefully be v0.80.  No changes are being made to the code
base at this point except those that fix bugs.  Please test this
release if you intend to make use of the new erasure-coded pools or
cache tiers in firefly.</p>
<p>This release fixes a range of bugs found in v0.78 and streamlines the
user experience when creating erasure-coded pools.  There is also a
raft of fixes for the MDS (multi-mds, directory fragmentation, and
large directories).  The main notable new piece of functionality is a
small change to allow radosgw to use an erasure-coded pool for object
data.</p>
<div class="section" id="upgrading">
<h2>Upgrading<a class="headerlink" href="#upgrading" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p>Erasure pools created with v0.78 will no longer function with v0.79.  You
will need to delete the old pool and create a new one.</p></li>
<li><p>A bug was fixed in the authentication handshake with big-endian
architectures that prevent authentication between big- and
little-endian machines in the same cluster.  If you have a cluster
that consists entirely of big-endian machines, you will need to
upgrade all daemons and clients and restart.</p></li>
<li><p>The ‘ceph.file.layout’ and ‘ceph.dir.layout’ extended attributes are
no longer included in the listxattr(2) results to prevent problems with
‘cp -a’ and similar tools.</p></li>
<li><p>Monitor ‘auth’ read-only commands now expect the user to have ‘rx’ caps.
This is the same behavior that was present in dumpling, but in emperor
and more recent development releases the ‘r’ cap was sufficient.  The
affected commands are:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ceph</span> <span class="n">auth</span> <span class="n">export</span>
<span class="n">ceph</span> <span class="n">auth</span> <span class="n">get</span>
<span class="n">ceph</span> <span class="n">auth</span> <span class="n">get</span><span class="o">-</span><span class="n">key</span>
<span class="n">ceph</span> <span class="n">auth</span> <span class="nb">print</span><span class="o">-</span><span class="n">key</span>
<span class="n">ceph</span> <span class="n">auth</span> <span class="nb">list</span>
</pre></div>
</div>
</li>
</ul>
</div>
<div class="section" id="id12">
<h2>Notable Changes<a class="headerlink" href="#id12" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>ceph-conf: stop creating bogus log files (Josh Durgin, Sage Weil)</p></li>
<li><p>common: fix authentication on big-endian architectures (Dan Mick)</p></li>
<li><p>debian: change directory ownership between ceph and ceph-common (Sage Weil)</p></li>
<li><p>init: fix startup ordering/timeout problem with OSDs (Dmitry Smirnov)</p></li>
<li><p>librbd: skip zeroes/holes when copying sparse images (Josh Durgin)</p></li>
<li><p>mds: cope with MDS failure during creation (John Spray)</p></li>
<li><p>mds: fix crash from client sleep/resume (Zheng Yan)</p></li>
<li><p>mds: misc fixes for directory fragments (Zheng Yan)</p></li>
<li><p>mds: misc fixes for larger directories (Zheng Yan)</p></li>
<li><p>mds: misc fixes for multiple MDSs (Zheng Yan)</p></li>
<li><p>mds: remove .ceph directory (John Spray)</p></li>
<li><p>misc coverity fixes, cleanups (Danny Al-Gaaf)</p></li>
<li><p>mon: add erasure profiles and improve erasure pool creation (Loic Dachary)</p></li>
<li><p>mon: ‘ceph osd pg-temp …’ and primary-temp commands (Ilya Dryomov)</p></li>
<li><p>mon: fix pool count in ‘ceph -s’ output (Sage Weil)</p></li>
<li><p>msgr: improve connection error detection between clients and monitors (Greg Farnum, Sage Weil)</p></li>
<li><p>osd: add/fix CPU feature detection for jerasure (Loic Dachary)</p></li>
<li><p>osd: improved scrub checks on clones (Sage Weil, Sam Just)</p></li>
<li><p>osd: many erasure fixes (Sam Just)</p></li>
<li><p>osd: move to jerasure2 library (Loic Dachary)</p></li>
<li><p>osd: new tests for erasure pools (David Zafman)</p></li>
<li><p>osd: reduce scrub lock contention (Guang Yang)</p></li>
<li><p>rgw: allow use of an erasure data pool (Yehuda Sadeh)</p></li>
</ul>
</div>
</div>
<div class="section" id="v0-78">
<h1>v0.78<a class="headerlink" href="#v0-78" title="Permalink to this headline">¶</a></h1>
<p>This development release includes two key features: erasure coding and
cache tiering.  A huge amount of code was merged for this release and
several additional weeks were spent stabilizing the code base, and it
is now in a state where it is ready to be tested by a broader user
base.</p>
<p>This is <em>not</em> the firefly release.  Firefly will be delayed for at
least another sprint so that we can get some operational experience
with the new code and do some additional testing before committing to
long term support.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Please note that while it is possible to create and test
erasure coded pools in this release, the pools will not be
usable when you upgrade to v0.79 as the OSDMap encoding will
subtlely change.  Please do not populate your test pools
with important data that can’t be reloaded.</p>
</div>
<div class="section" id="id13">
<h2>Upgrading<a class="headerlink" href="#id13" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p>Upgrade daemons in the following order:</p>
<blockquote>
<div><ol class="arabic simple">
<li><p>Monitors</p></li>
<li><p>OSDs</p></li>
<li><p>MDSs and/or radosgw</p></li>
</ol>
</div></blockquote>
<p>If the ceph-mds daemon is restarted first, it will wait until all
OSDs have been upgraded before finishing its startup sequence.  If
the ceph-mon daemons are not restarted prior to the ceph-osd
daemons, they will not correctly register their new capabilities
with the cluster and new features may not be usable until they are
restarted a second time.</p>
</li>
<li><p>Upgrade radosgw daemons together.  There is a subtle change in behavior
for multipart uploads that prevents a multipart request that was initiated
with a new radosgw from being completed by an old radosgw.</p></li>
<li><p>CephFS recently added support for a new ‘backtrace’ attribute on
file data objects that is used for lookup by inode number (i.e., NFS
reexport and hard links), and will later be used by fsck repair.
This replaces the existing anchor table mechanism that is used for
hard link resolution.  In order to completely phase that out, any
inode that has an outdated backtrace attribute will get updated when
the inode itself is modified.  This will result in some extra workload
after a legacy CephFS file system is upgraded.</p></li>
<li><p>The per-op return code in librados’ ObjectWriteOperation interface
is now filled in.</p></li>
<li><p>The librados cmpxattr operation now handles xattrs containing null bytes as
data rather than null-terminated strings.</p></li>
<li><p>Compound operations in librados that create and then delete the same object
are now explicitly disallowed (they fail with -EINVAL).</p></li>
<li><p>The default leveldb cache size for the ceph-osd daemon has been
increased from 4 MB to 128 MB.  This will increase the memory
footprint of that process but tends to increase performance of omap
(key/value) objects (used for CephFS and the radosgw).  If memory in your
deployment is tight, you can preserve the old behavio by adding:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">leveldb</span> <span class="n">write</span> <span class="n">buffer</span> <span class="n">size</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">leveldb</span> <span class="n">cache</span> <span class="n">size</span> <span class="o">=</span> <span class="mi">0</span>
</pre></div>
</div>
<p>to your ceph.conf to get back the (leveldb) defaults.</p>
</li>
</ul>
</div>
<div class="section" id="id14">
<h2>Notable Changes<a class="headerlink" href="#id14" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>ceph-brag: new client and server tools (Sebastien Han, Babu Shanmugam)</p></li>
<li><p>ceph-disk: use partx on RHEL or CentOS instead of partprobe (Alfredo Deza)</p></li>
<li><p>ceph: fix combination of ‘tell’ and interactive mode (Joao Eduardo Luis)</p></li>
<li><p>ceph-fuse: fix bugs with inline data and multiple MDSs (Zheng Yan)</p></li>
<li><p>client: fix getcwd() to use new LOOKUPPARENT operation (Zheng Yan)</p></li>
<li><p>common: fall back to json-pretty for admin socket (Loic Dachary)</p></li>
<li><p>common: fix ‘config dump’ debug prefix (Danny Al-Gaaf)</p></li>
<li><p>common: misc coverity fixes (Danny Al-Gaaf)</p></li>
<li><p>common: throtller, shared_cache performance improvements, TrackedOp (Greg Farnum, Samuel Just)</p></li>
<li><p>crush: fix JSON schema for dump (John Spray)</p></li>
<li><p>crush: misc cleanups, tests (Loic Dachary)</p></li>
<li><p>crush: new vary_r tunable (Sage Weil)</p></li>
<li><p>crush: prevent invalid buckets of type 0 (Sage Weil)</p></li>
<li><p>keyvaluestore: add perfcounters, misc bug fixes (Haomai Wang)</p></li>
<li><p>keyvaluestore: portability improvements (Noah Watkins)</p></li>
<li><p>libcephfs: API changes to better support NFS reexport via Ganesha (Matt Benjamin, Adam Emerson, Andrey Kuznetsov, Casey Bodley, David Zafman)</p></li>
<li><p>librados: API documentation improvements (John Wilkins, Josh Durgin)</p></li>
<li><p>librados: fix object enumeration bugs; allow iterator assignment (Josh Durgin)</p></li>
<li><p>librados: streamline tests (Josh Durgin)</p></li>
<li><p>librados: support for atomic read and omap operations for C API (Josh Durgin)</p></li>
<li><p>librados: support for osd and mon command timeouts (Josh Durgin)</p></li>
<li><p>librbd: pass allocation hints to OSD (Ilya Dryomov)</p></li>
<li><p>logrotate: fix bug that prevented rotation for some daemons (Loic Dachary)</p></li>
<li><p>mds: avoid duplicated discovers during recovery (Zheng Yan)</p></li>
<li><p>mds: fix file lock owner checks (Zheng Yan)</p></li>
<li><p>mds: fix LOOKUPPARENT, new LOOKUPNAME ops for reliable NFS reexport (Zheng Yan)</p></li>
<li><p>mds: fix xattr handling on setxattr (Zheng Yan)</p></li>
<li><p>mds: fix xattrs in getattr replies (Sage Weil)</p></li>
<li><p>mds: force backtrace updates for old inodes on update (Zheng Yan)</p></li>
<li><p>mds: several multi-mds and dirfrag bug fixes (Zheng Yan)</p></li>
<li><p>mon: encode erasure stripe width in pool metadata (Loic Dachary)</p></li>
<li><p>mon: erasure code crush rule creation (Loic Dachary)</p></li>
<li><p>mon: erasure code plugin support (Loic Dachary)</p></li>
<li><p>mon: fix bugs in initial post-mkfs quorum creation (Sage Weil)</p></li>
<li><p>mon: fix error output to terminal during startup (Joao Eduardo Luis)</p></li>
<li><p>mon: fix legacy CRUSH tunables warning (Sage Weil)</p></li>
<li><p>mon: fix osd_epochs lower bound tracking for map trimming (Sage Weil)</p></li>
<li><p>mon: fix OSDMap encoding features (Sage Weil, Aaron Ten Clay)</p></li>
<li><p>mon: fix ‘pg dump’ JSON output (John Spray)</p></li>
<li><p>mon: include dirty stats in ‘ceph df detail’ (Sage Weil)</p></li>
<li><p>mon: list quorum member names in quorum order (Sage Weil)</p></li>
<li><p>mon: prevent addition of non-empty cache tier (Sage Weil)</p></li>
<li><p>mon: prevent deletion of CephFS pools (John Spray)</p></li>
<li><p>mon: warn when cache tier approaches ‘full’ (Sage Weil)</p></li>
<li><p>osd: allocation hint, with XFS support (Ilya Dryomov)</p></li>
<li><p>osd: erasure coded pool support (Samuel Just)</p></li>
<li><p>osd: fix bug causing slow/stalled recovery (#7706) (Samuel Just)</p></li>
<li><p>osd: fix bugs in log merging (Samuel Just)</p></li>
<li><p>osd: fix/clarify end-of-object handling on read (Loic Dachary)</p></li>
<li><p>osd: fix impolite mon session backoff, reconnect behavior (Greg Farnum)</p></li>
<li><p>osd: fix SnapContext cache id bug (Samuel Just)</p></li>
<li><p>osd: increase default leveldb cache size and write buffer (Sage Weil, Dmitry Smirnov)</p></li>
<li><p>osd: limit size of ‘osd bench …’ arguments (Joao Eduardo Luis)</p></li>
<li><p>osdmaptool: new –test-map-pgs mode (Sage Weil, Ilya Dryomov)</p></li>
<li><p>osd, mon: add primary-affinity to adjust selection of primaries (Sage Weil)</p></li>
<li><p>osd: new ‘status’ admin socket command (Sage Weil)</p></li>
<li><p>osd: simple tiering agent (Sage Weil)</p></li>
<li><p>osd: store checksums for erasure coded object stripes (Samuel Just)</p></li>
<li><p>osd: tests for objectstore backends (Haomai Wang)</p></li>
<li><p>osd: various refactoring and bug fixes (Samuel Just, David Zafman)</p></li>
<li><p>rados: add ‘set-alloc-hint’ command (Ilya Dryomov)</p></li>
<li><p>rbd-fuse: fix enumerate_images overflow, memory leak (Ilya Dryomov)</p></li>
<li><p>rbdmap: fix upstart script (Stephan Renatus)</p></li>
<li><p>rgw: avoid logging system events to usage log (Yehuda Sadeh)</p></li>
<li><p>rgw: fix Swift range reponse (Yehuda Sadeh)</p></li>
<li><p>rgw: improve scalability for manifest objects (Yehuda Sadeh)</p></li>
<li><p>rgw: misc fixes for multipart objects, policies (Yehuda Sadeh)</p></li>
<li><p>rgw: support non-standard MultipartUpload command (Yehuda Sadeh)</p></li>
</ul>
</div>
</div>
<div class="section" id="v0-77">
<h1>v0.77<a class="headerlink" href="#v0-77" title="Permalink to this headline">¶</a></h1>
<p>This is the final development release before the Firefly feature
freeze.  The main items in this release include some additional
refactoring work in the OSD IO path (include some locking
improvements), per-user quotas for the radosgw, a switch to civetweb
from mongoose for the prototype radosgw standalone mode, and a
prototype leveldb-based backend for the OSD.  The C librados API also
got support for atomic write operations (read side transactions will
appear in v0.78).</p>
<div class="section" id="id15">
<h2>Upgrading<a class="headerlink" href="#id15" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>The ‘ceph -s’ or ‘ceph status’ command’s ‘num_in_osds’ field in the
JSON and XML output has been changed from a string to an int.</p></li>
<li><p>The recently added ‘ceph mds set allow_new_snaps’ command’s syntax
has changed slightly; it is now ‘ceph mds set allow_new_snaps true’.
The ‘unset’ command has been removed; instead, set the value to
‘false’.</p></li>
<li><p>The syntax for allowing snapshots is now ‘mds set allow_new_snaps
&lt;true|false&gt;’ instead of ‘mds &lt;set,unset&gt; allow_new_snaps’.</p></li>
</ul>
</div>
<div class="section" id="id16">
<h2>Notable Changes<a class="headerlink" href="#id16" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>osd: client IO path changes for EC (Samuel Just)</p></li>
<li><p>common: portability changes to support libc++ (Noah Watkins)</p></li>
<li><p>common: switch to unordered_map from hash_map (Noah Watkins)</p></li>
<li><p>rgw: switch from mongoose to civetweb (Yehuda Sadeh)</p></li>
<li><p>osd: improve locking in fd lookup cache (Samuel Just, Greg Farnum)</p></li>
<li><p>doc: many many updates (John Wilkins)</p></li>
<li><p>rgw: user quotas (Yehuda Sadeh)</p></li>
<li><p>mon: persist quorum features to disk (Greg Farnum)</p></li>
<li><p>mon: MForward tests (Loic Dachary)</p></li>
<li><p>mds: inline data support (Li Wang, Yunchuan Wen)</p></li>
<li><p>rgw: fix many-part multipart uploads (Yehuda Sadeh)</p></li>
<li><p>osd: new keyvaluestore-dev backend based on leveldb (Haomai Wang)</p></li>
<li><p>rbd: prevent deletion of images with watchers (Ilya Dryomov)</p></li>
<li><p>osd: avoid touching leveldb for some xattrs (Haomai Wang, Sage Weil)</p></li>
<li><p>mailmap: affiliation updates (Loic Dachary)</p></li>
<li><p>osd: new OSDMap encoding (Greg Farnum)</p></li>
<li><p>osd: generalize scrubbing infrastructure to allow EC (David Zafman)</p></li>
<li><p>rgw: several doc fixes (Alexandre Marangone)</p></li>
<li><p>librados: add C API coverage for atomic write operations (Christian Marie)</p></li>
<li><p>rgw: improve swift temp URL support (Yehuda Sadeh)</p></li>
<li><p>rest-api: do not fail when no OSDs yet exist (Dan Mick)</p></li>
<li><p>common: check preexisting admin socket for active daemon before removing (Loic Dachary)</p></li>
<li><p>osd: handle more whitespace (newline, tab) in osd capabilities (Sage Weil)</p></li>
<li><p>mon: handle more whitespace (newline, tab) in mon capabilities (Sage Weil)</p></li>
<li><p>rgw: make multi-object delete idempotent (Yehuda Sadeh)</p></li>
<li><p>crush: fix off-by-one error in recent refactor (Sage Weil)</p></li>
<li><p>rgw: fix read_user_buckets ‘max’ behavior (Yehuda Sadeh)</p></li>
<li><p>mon: change mds allow_new_snaps syntax to be more consistent (Sage Weil)</p></li>
</ul>
</div>
</div>
<div class="section" id="v0-76">
<h1>v0.76<a class="headerlink" href="#v0-76" title="Permalink to this headline">¶</a></h1>
<p>This release includes another batch of updates for firefly
functionality.  Most notably, the cache pool infrastructure now
support snapshots, the OSD backfill functionality has been generalized
to include multiple targets (necessary for the coming erasure pools),
and there were performance improvements to the erasure code plugin on
capable processors.  The MDS now properly utilizes (and seamlessly
migrates to) the OSD key/value interface (aka omap) for storing directory
objects.  There continue to be many other fixes and improvements for
usability and code portability across the tree.</p>
<div class="section" id="id17">
<h2>Upgrading<a class="headerlink" href="#id17" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>‘rbd ls’ on a pool which never held rbd images now exits with code
0. It outputs nothing in plain format, or an empty list in
non-plain format. This is consistent with the behavior for a pool
which used to hold images, but contains none. Scripts relying on
this behavior should be updated.</p></li>
<li><p>The MDS requires a new OSD operation TMAP2OMAP, added in this release.  When
upgrading, be sure to upgrade and restart the ceph-osd daemons before the
ceph-mds daemon.  The MDS will refuse to start if any up OSDs do not support
the new feature.</p></li>
<li><p>The ‘ceph mds set_max_mds N’ command is now deprecated in favor of
‘ceph mds set max_mds N’.</p></li>
</ul>
</div>
<div class="section" id="id18">
<h2>Notable Changes<a class="headerlink" href="#id18" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>build: misc improvements (Ken Dreyer)</p></li>
<li><p>ceph-disk: generalize path names, add tests (Loic Dachary)</p></li>
<li><p>ceph-disk: misc improvements for puppet (Loic Dachary)</p></li>
<li><p>ceph-disk: several bug fixes (Loic Dachary)</p></li>
<li><p>ceph-fuse: fix race for sync reads (Sage Weil)</p></li>
<li><p>config: recursive metavariable expansion (Loic Dachary)</p></li>
<li><p>crush: usability and test improvements (Loic Dachary)</p></li>
<li><p>doc: misc fixes (David Moreau Simard, Kun Huang)</p></li>
<li><p>erasure-code: improve buffer alignment (Loic Dachary)</p></li>
<li><p>erasure-code: rewrite region-xor using vector operations (Andreas Peters)</p></li>
<li><p>librados, osd: new TMAP2OMAP operation (Yan, Zheng)</p></li>
<li><p>mailmap updates (Loic Dachary)</p></li>
<li><p>many portability improvements (Noah Watkins)</p></li>
<li><p>many unit test improvements (Loic Dachary)</p></li>
<li><p>mds: always store backtrace in default pool (Yan, Zheng)</p></li>
<li><p>mds: store directories in omap instead of tmap (Yan, Zheng)</p></li>
<li><p>mon: allow adjustment of cephfs max file size via ‘ceph mds set max_file_size’ (Sage Weil)</p></li>
<li><p>mon: do not create erasure rules by default (Sage Weil)</p></li>
<li><p>mon: do not generate spurious MDSMaps in certain cases (Sage Weil)</p></li>
<li><p>mon: do not use keyring if auth = none (Loic Dachary)</p></li>
<li><p>mon: fix pg_temp leaks (Joao Eduardo Luis)</p></li>
<li><p>osd: backfill to multiple targets (David Zafman)</p></li>
<li><p>osd: cache pool support for snapshots (Sage Weil)</p></li>
<li><p>osd: fix and cleanup misc backfill issues (David Zafman)</p></li>
<li><p>osd: fix omap_clear operation to not zap xattrs (Sam Just, Yan, Zheng)</p></li>
<li><p>osd: ignore num_objects_dirty on scrub for old pools (Sage Weil)</p></li>
<li><p>osd: include more info in pg query result (Sage Weil)</p></li>
<li><p>osd: track erasure compatibility (David Zafman)</p></li>
<li><p>rbd: make ‘rbd list’ return empty list and success on empty pool (Josh Durgin)</p></li>
<li><p>rgw: fix object placement read op (Yehuda Sadeh)</p></li>
<li><p>rgw: fix several CORS bugs (Robin H. Johnson)</p></li>
<li><p>specfile: fix RPM build on RHEL6 (Ken Dreyer, Derek Yarnell)</p></li>
<li><p>specfile: ship libdir/ceph (Key Dreyer)</p></li>
</ul>
</div>
</div>
<div class="section" id="v0-75">
<h1>v0.75<a class="headerlink" href="#v0-75" title="Permalink to this headline">¶</a></h1>
<p>This is a big release, with lots of infrastructure going in for
firefly.  The big items include a prototype standalone frontend for
radosgw (which does not require apache or fastcgi), tracking for read
activity on the osds (to inform tiering decisions), preliminary cache
pool support (no snapshots yet), and lots of bug fixes and other work
across the tree to get ready for the next batch of erasure coding
patches.</p>
<p>For comparison, here are the diff stats for the last few versions:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">v0</span><span class="o">.</span><span class="mi">75</span> <span class="mi">291</span> <span class="n">files</span> <span class="n">changed</span><span class="p">,</span> <span class="mi">82713</span> <span class="n">insertions</span><span class="p">(</span><span class="o">+</span><span class="p">),</span> <span class="mi">33495</span> <span class="n">deletions</span><span class="p">(</span><span class="o">-</span><span class="p">)</span>
<span class="n">v0</span><span class="o">.</span><span class="mi">74</span> <span class="mi">192</span> <span class="n">files</span> <span class="n">changed</span><span class="p">,</span> <span class="mi">17980</span> <span class="n">insertions</span><span class="p">(</span><span class="o">+</span><span class="p">),</span> <span class="mi">1062</span> <span class="n">deletions</span><span class="p">(</span><span class="o">-</span><span class="p">)</span>
<span class="n">v0</span><span class="o">.</span><span class="mi">73</span> <span class="mi">148</span> <span class="n">files</span> <span class="n">changed</span><span class="p">,</span> <span class="mi">4464</span> <span class="n">insertions</span><span class="p">(</span><span class="o">+</span><span class="p">),</span> <span class="mi">2129</span> <span class="n">deletions</span><span class="p">(</span><span class="o">-</span><span class="p">)</span>
</pre></div>
</div>
<div class="section" id="id19">
<h2>Upgrading<a class="headerlink" href="#id19" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>The ‘osd pool create …’ syntax has changed for erasure pools.</p></li>
<li><p>The default CRUSH rules and layouts are now using the latest and
greatest tunables and defaults.  Clusters using the old values will
now present with a health WARN state.  This can be disabled by
adding ‘mon warn on legacy crush tunables = false’ to ceph.conf.</p></li>
</ul>
</div>
<div class="section" id="id20">
<h2>Notable Changes<a class="headerlink" href="#id20" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>common: bloom filter improvements (Sage Weil)</p></li>
<li><p>common: fix config variable substitution (Loic Dachary)</p></li>
<li><p>crush, osd: s/rep/replicated/ for less confusion (Loic Dachary)</p></li>
<li><p>crush: refactor descend_once behavior; support set_choose*_tries for replicated rules (Sage Weil)</p></li>
<li><p>librados: fix throttle leak (and eventual deadlock) (Josh Durgin)</p></li>
<li><p>librados: read directly into user buffer (Rutger ter Borg)</p></li>
<li><p>librbd: fix use-after-free aio completion bug #5426 (Josh Durgin)</p></li>
<li><p>librbd: localize/distribute parent reads (Sage Weil)</p></li>
<li><p>mds: fix Resetter locking (Alexandre Oliva)</p></li>
<li><p>mds: fix cap migration behavior (Yan, Zheng)</p></li>
<li><p>mds: fix client session flushing (Yan, Zheng)</p></li>
<li><p>mds: fix many many multi-mds bugs (Yan, Zheng)</p></li>
<li><p>misc portability work (Noah Watkins)</p></li>
<li><p>mon, osd: create erasure style crush rules (Loic Dachary, Sage Weil)</p></li>
<li><p>mon: ‘osd crush show-tunables’ (Sage Weil)</p></li>
<li><p>mon: clean up initial crush rule creation (Loic Dachary)</p></li>
<li><p>mon: improve (replicate or erasure) pool creation UX (Loic Dachary)</p></li>
<li><p>mon: infrastructure to handle mixed-version mon cluster and cli/rest API (Greg Farnum)</p></li>
<li><p>mon: mkfs now idempotent (Loic Dachary)</p></li>
<li><p>mon: only seed new osdmaps to current OSDs (Sage Weil)</p></li>
<li><p>mon: track osd features in OSDMap (Joao Luis, David Zafman)</p></li>
<li><p>mon: warn if crush has non-optimal tunables (Sage Weil)</p></li>
<li><p>mount.ceph: add -n for autofs support (Steve Stock)</p></li>
<li><p>msgr: fix messenger restart race (Xihui He)</p></li>
<li><p>osd, librados: fix full cluster handling (Josh Durgin)</p></li>
<li><p>osd: add HitSet tracking for read ops (Sage Weil, Greg Farnum)</p></li>
<li><p>osd: backfill to osds not in acting set (David Zafman)</p></li>
<li><p>osd: enable new hashpspool layout by default (Sage Weil)</p></li>
<li><p>osd: erasure plugin benchmarking tool (Loic Dachary)</p></li>
<li><p>osd: fix XFS detection (Greg Farnum, Sushma Gurram)</p></li>
<li><p>osd: fix copy-get omap bug (Sage Weil)</p></li>
<li><p>osd: fix linux kernel version detection (Ilya Dryomov)</p></li>
<li><p>osd: fix memstore segv (Haomai Wang)</p></li>
<li><p>osd: fix several bugs with tier infrastructure</p></li>
<li><p>osd: fix throttle thread (Haomai Wang)</p></li>
<li><p>osd: preliminary cache pool support (no snaps) (Greg Farnum, Sage Weil)</p></li>
<li><p>rados tool: fix listomapvals (Josh Durgin)</p></li>
<li><p>rados: add ‘crush location’, smart replica selection/balancing (Sage Weil)</p></li>
<li><p>rados: some performance optimizations (Yehuda Sadeh)</p></li>
<li><p>rbd: add rbdmap support for upstart (Laurent Barbe)</p></li>
<li><p>rbd: expose kernel rbd client options via ‘rbd map’ (Ilya Dryomov)</p></li>
<li><p>rbd: fix bench-write command (Hoamai Wang)</p></li>
<li><p>rbd: support for 4096 mapped devices, up from ~250 (Ilya Dryomov)</p></li>
<li><p>rgw: allow multiple frontends (Yehuda Sadeh)</p></li>
<li><p>rgw: convert bucket info to new format on demand (Yehuda Sadeh)</p></li>
<li><p>rgw: fix misc CORS bugs (Robin H. Johnson)</p></li>
<li><p>rgw: prototype mongoose frontend (Yehuda Sadeh)</p></li>
</ul>
</div>
</div>
<div class="section" id="v0-74">
<h1>v0.74<a class="headerlink" href="#v0-74" title="Permalink to this headline">¶</a></h1>
<p>This release includes a few substantial pieces for Firefly, including
a long-overdue switch to 3x replication by default and a switch to the
“new” CRUSH tunables by default (supported since bobtail).  There is
also a fix for a long-standing radosgw bug (stalled GET) that has
already been backported to emperor and dumpling.</p>
<div class="section" id="id21">
<h2>Upgrading<a class="headerlink" href="#id21" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>We now default to the ‘bobtail’ CRUSH tunable values that are first supported
by Ceph clients in bobtail (v0.56) and Linux kernel version v3.9.  If you
plan to access a newly created Ceph cluster with an older kernel client, you
should use ‘ceph osd crush tunables legacy’ to switch back to the legacy
behavior.  Note that making that change will likely result in some data
movement in the system, so adjust the setting before populating the new
cluster with data.</p></li>
<li><p>We now set the HASHPSPOOL flag on newly created pools (and new
clusters) by default.  Support for this flag first appeared in
v0.64; v0.67 Dumpling is the first major release that supports it.
It is first supported by the Linux kernel version v3.9.  If you plan
to access a newly created Ceph cluster with an older kernel or
clients (e.g, librados, librbd) from a pre-dumpling Ceph release,
you should add ‘osd pool default flag hashpspool = false’ to the
‘[global]’ section of your ‘ceph.conf’ prior to creating your
monitors (e.g., after ‘ceph-deploy new’ but before ‘ceph-deploy mon
create …’).</p></li>
<li><p>The configuration option ‘osd pool default crush rule’ is deprecated
and replaced with ‘osd pool default crush replicated ruleset’. ‘osd
pool default crush rule’ takes precedence for backward compatibility
and a deprecation warning is displayed when it is used.</p></li>
</ul>
</div>
<div class="section" id="id22">
<h2>Notable Changes<a class="headerlink" href="#id22" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>buffer: some zero-copy groundwork (Josh Durgin)</p></li>
<li><p>ceph-disk: avoid fd0 (Loic Dachary)</p></li>
<li><p>crush: default to bobtail tunables (Sage Weil)</p></li>
<li><p>crush: many additional tests (Loic Dachary)</p></li>
<li><p>crush: misc fixes, cleanups (Loic Dachary)</p></li>
<li><p>crush: new rule steps to adjust retry attempts (Sage Weil)</p></li>
<li><p>debian: integrate misc fixes from downstream packaging (James Page)</p></li>
<li><p>doc: big update to install docs (John Wilkins)</p></li>
<li><p>libcephfs: fix resource leak (Zheng Yan)</p></li>
<li><p>misc coverity fixes (Xing Lin, Li Wang, Danny Al-Gaaf)</p></li>
<li><p>misc portability fixes (Noah Watkins, Alan Somers)</p></li>
<li><p>mon, osd: new ‘erasure’ pool type (still not fully supported)</p></li>
<li><p>mon: add ‘mon getmap EPOCH’ (Joao Eduardo Luis)</p></li>
<li><p>mon: collect misc metadata about osd (os, kernel, etc.), new ‘osd metadata’ command (Sage Weil)</p></li>
<li><p>osd: default to 3x replication</p></li>
<li><p>osd: do not include backfill targets in acting set (David Zafman)</p></li>
<li><p>osd: new ‘chassis’ type in default crush hierarchy (Sage Weil)</p></li>
<li><p>osd: requery unfound on stray notify (#6909) (Samuel Just)</p></li>
<li><p>osd: some PGBackend infrastructure (Samuel Just)</p></li>
<li><p>osd: support for new ‘memstore’ (memory-backed) backend (Sage Weil)</p></li>
<li><p>rgw: fix fastcgi deadlock (do not return data from librados callback) (Yehuda Sadeh)</p></li>
<li><p>rgw: fix reading bucket policy (#6940)</p></li>
<li><p>rgw: fix use-after-free when releasing completion handle (Yehuda Sadeh)</p></li>
</ul>
</div>
</div>
<div class="section" id="v0-73">
<h1>v0.73<a class="headerlink" href="#v0-73" title="Permalink to this headline">¶</a></h1>
<p>This release, the first development release after emperor, includes
many bug fixes and a few additional pieces of functionality.  The
first batch of larger changes will be landing in the next version,
v0.74.</p>
<div class="section" id="id23">
<h2>Upgrading<a class="headerlink" href="#id23" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>As part of fix for #6796, ‘ceph osd pool set &lt;pool&gt; &lt;var&gt; &lt;arg&gt;’ now
receives &lt;arg&gt; as an integer instead of a string.  This affects how
‘hashpspool’ flag is set/unset: instead of ‘true’ or ‘false’, it now
must be ‘0’ or ‘1’.</p></li>
<li><p>The behavior of the CRUSH ‘indep’ choose mode has been changed.  No
ceph cluster should have been using this behavior unless someone has
manually extracted a crush map, modified a CRUSH rule to replace
‘firstn’ with ‘indep’, recompiled, and reinjected the new map into
the cluster.  If the ‘indep’ mode is currently in use on a cluster,
the rule should be modified to use ‘firstn’ instead, and the
administrator should wait until any data movement completes before
upgrading.</p></li>
<li><p>The ‘osd dump’ command now dumps pool snaps as an array instead of an
object.</p></li>
<li><p>The radosgw init script (sysvinit) how requires that the ‘host = …’ line in
ceph.conf, if present, match the short hostname (the output of ‘hostname -s’),
not the fully qualified hostname or the (occasionally non-short) output of
‘hostname’.  Failure to adjust this when upgrading from emperor or dumpling
may prevent the radosgw daemon from starting.</p></li>
</ul>
</div>
<div class="section" id="id24">
<h2>Notable Changes<a class="headerlink" href="#id24" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>ceph-crush-location: new hook for setting CRUSH location of osd daemons on start</p></li>
<li><p>ceph-kvstore-tool: expanded command set and capabilities (Joao Eduardo Luis)</p></li>
<li><p>ceph.spec: fix build dependency (Loic Dachary)</p></li>
<li><p>common: fix aligned buffer allocation (Loic Dachary)</p></li>
<li><p>doc: many many install doc improvements (John Wilkins)</p></li>
<li><p>mds: fix readdir end check (Zheng Yan)</p></li>
<li><p>mds: update old-format backtraces opportunistically (Zheng Yan)</p></li>
<li><p>misc cleanups from coverity (Xing Lin)</p></li>
<li><p>misc portability fixes (Noah Watkins, Christophe Courtaut, Alan Somers, huanjun)</p></li>
<li><p>mon: ‘osd dump’ dumps pool snaps as array, not object (Dan Mick)</p></li>
<li><p>mon: allow debug quorum_{enter,exit} commands via admin socket</p></li>
<li><p>mon: prevent extreme changes in pool pg_num (Greg Farnum)</p></li>
<li><p>mon: take ‘osd pool set …’ value as an int, not string (Joao Eduardo Luis)</p></li>
<li><p>mon: trim MDSMaps (Joao Eduardo Luis)</p></li>
<li><p>osd: fix object_info_t encoding bug from emperor (Sam Just)</p></li>
<li><p>rbd: add ‘rbdmap’ init script for mapping rbd images on book (Adam Twardowski)</p></li>
<li><p>rgw: add ‘status’ command to sysvinit script (David Moreau Simard)</p></li>
<li><p>rgw: fix error setting empty owner on ACLs (Yehuda Sadeh)</p></li>
<li><p>rgw: optionally defer to bucket ACLs instead of object ACLs (Liam Monahan)</p></li>
<li><p>rgw: support for password (instead of admin token) for keystone authentication (Christophe Courtaut)</p></li>
<li><p>sysvinit, upstart: prevent both init systems from starting the same daemons (Josh Durgin)</p></li>
</ul>
</div>
</div>



          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../../">
              <img class="logo" src="../../_static/logo.png" alt="Logo"/>
            </a></p>
<h3><a href="../../">Table Of Contents</a></h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../start/intro/">Ceph 简介</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../install/">安装 Ceph</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../cephadm/">Cephadm</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../rados/">Ceph 存储集群</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../cephfs/">Ceph 文件系统</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../rbd/">Ceph 块设备</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../radosgw/">Ceph 对象网关</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../mgr/">Ceph 管理器守护进程</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../mgr/dashboard/">Ceph 仪表盘</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api/">API 文档</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../architecture/">体系结构</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../dev/developer_guide/">开发者指南</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../dev/internals/">Ceph 内幕</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../governance/">项目管理</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../foundation/">Ceph 基金会</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../ceph-volume/">ceph-volume</a></li>
<li class="toctree-l1"><a class="reference internal" href="../general/">Ceph 版本（总目录）</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../">Ceph 版本（索引）</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../#id1">活跃版本</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../#id2">归档版本</a><ul class="current">
<li class="toctree-l3 current"><a class="reference internal" href="../archived-index/">归档版本目录</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="../luminous/">v12.2.13 Luminous</a></li>
<li class="toctree-l4"><a class="reference internal" href="../luminous/#v12-2-12-luminous">v12.2.12 Luminous</a></li>
<li class="toctree-l4"><a class="reference internal" href="../luminous/#v12-2-11-luminous">v12.2.11 Luminous</a></li>
<li class="toctree-l4"><a class="reference internal" href="../luminous/#v12-2-10-luminous">v12.2.10 Luminous</a></li>
<li class="toctree-l4"><a class="reference internal" href="../luminous/#v12-2-9-luminous">v12.2.9 Luminous</a></li>
<li class="toctree-l4"><a class="reference internal" href="../luminous/#v12-2-8-luminous">v12.2.8 Luminous</a></li>
<li class="toctree-l4"><a class="reference internal" href="../luminous/#v12-2-7-luminous">v12.2.7 Luminous</a></li>
<li class="toctree-l4"><a class="reference internal" href="../luminous/#v12-2-6-luminous">v12.2.6 Luminous</a></li>
<li class="toctree-l4"><a class="reference internal" href="../luminous/#v12-2-5-luminous">v12.2.5 Luminous</a></li>
<li class="toctree-l4"><a class="reference internal" href="../luminous/#v12-2-4-luminous">v12.2.4 Luminous</a></li>
<li class="toctree-l4"><a class="reference internal" href="../luminous/#v12-2-3-luminous">v12.2.3 Luminous</a></li>
<li class="toctree-l4"><a class="reference internal" href="../luminous/#v12-2-2-luminous">v12.2.2 Luminous</a></li>
<li class="toctree-l4"><a class="reference internal" href="../luminous/#v12-2-1-luminous">v12.2.1 Luminous</a></li>
<li class="toctree-l4"><a class="reference internal" href="../luminous/#v12-2-0-luminous">v12.2.0 Luminous</a></li>
<li class="toctree-l4"><a class="reference internal" href="../kraken/">v11.2.1 Kraken</a></li>
<li class="toctree-l4"><a class="reference internal" href="../kraken/#v11-2-0-kraken">v11.2.0 Kraken</a></li>
<li class="toctree-l4"><a class="reference internal" href="../kraken/#v11-0-2-kraken">v11.0.2 Kraken</a></li>
<li class="toctree-l4"><a class="reference internal" href="../jewel/">v10.2.11 Jewel</a></li>
<li class="toctree-l4"><a class="reference internal" href="../jewel/#v10-2-10-jewel">v10.2.10 Jewel</a></li>
<li class="toctree-l4"><a class="reference internal" href="../jewel/#v10-2-9-jewel">v10.2.9 Jewel</a></li>
<li class="toctree-l4"><a class="reference internal" href="../jewel/#v10-2-8-jewel">v10.2.8 Jewel</a></li>
<li class="toctree-l4"><a class="reference internal" href="../jewel/#v10-2-7-jewel">v10.2.7 Jewel</a></li>
<li class="toctree-l4"><a class="reference internal" href="../jewel/#v10-2-6-jewel">v10.2.6 Jewel</a></li>
<li class="toctree-l4"><a class="reference internal" href="../jewel/#v10-2-5-jewel">v10.2.5 Jewel</a></li>
<li class="toctree-l4"><a class="reference internal" href="../jewel/#v10-2-4-jewel">v10.2.4 Jewel</a></li>
<li class="toctree-l4"><a class="reference internal" href="../jewel/#v10-2-3-jewel">v10.2.3 Jewel</a></li>
<li class="toctree-l4"><a class="reference internal" href="../jewel/#v10-2-2-jewel">v10.2.2 Jewel</a></li>
<li class="toctree-l4"><a class="reference internal" href="../jewel/#v10-2-1-jewel">v10.2.1 Jewel</a></li>
<li class="toctree-l4"><a class="reference internal" href="../jewel/#v10-2-0-jewel">v10.2.0 Jewel</a></li>
<li class="toctree-l4"><a class="reference internal" href="../infernalis/">v9.2.1 Infernalis</a></li>
<li class="toctree-l4"><a class="reference internal" href="../infernalis/#v9-2-0-infernalis">v9.2.0 Infernalis</a></li>
<li class="toctree-l4"><a class="reference internal" href="../infernalis/#v9-1-0-infernalis-release-candidate">v9.1.0 Infernalis release candidate</a></li>
<li class="toctree-l4"><a class="reference internal" href="../infernalis/#v9-0-3">v9.0.3</a></li>
<li class="toctree-l4"><a class="reference internal" href="../infernalis/#v9-0-2">v9.0.2</a></li>
<li class="toctree-l4"><a class="reference internal" href="../infernalis/#v9-0-1">v9.0.1</a></li>
<li class="toctree-l4"><a class="reference internal" href="../infernalis/#v9-0-0">v9.0.0</a></li>
<li class="toctree-l4"><a class="reference internal" href="../hammer/">v0.94.10 Hammer</a></li>
<li class="toctree-l4"><a class="reference internal" href="../hammer/#v0-94-9-hammer">v0.94.9 Hammer</a></li>
<li class="toctree-l4"><a class="reference internal" href="../hammer/#v0-94-8-hammer">v0.94.8 Hammer</a></li>
<li class="toctree-l4"><a class="reference internal" href="../hammer/#v0-94-7-hammer">v0.94.7 Hammer</a></li>
<li class="toctree-l4"><a class="reference internal" href="../hammer/#v0-94-6-hammer">v0.94.6 Hammer</a></li>
<li class="toctree-l4"><a class="reference internal" href="../hammer/#v0-94-5-hammer">v0.94.5 Hammer</a></li>
<li class="toctree-l4"><a class="reference internal" href="../hammer/#v0-94-4-hammer">v0.94.4 Hammer</a></li>
<li class="toctree-l4"><a class="reference internal" href="../hammer/#v0-94-3-hammer">v0.94.3 Hammer</a></li>
<li class="toctree-l4"><a class="reference internal" href="../hammer/#v0-94-2-hammer">v0.94.2 Hammer</a></li>
<li class="toctree-l4"><a class="reference internal" href="../hammer/#v0-94-1-hammer">v0.94.1 Hammer</a></li>
<li class="toctree-l4"><a class="reference internal" href="../hammer/#v0-94-hammer">v0.94 Hammer</a></li>
<li class="toctree-l4"><a class="reference internal" href="../hammer/#v0-93">v0.93</a></li>
<li class="toctree-l4"><a class="reference internal" href="../hammer/#v0-92">v0.92</a></li>
<li class="toctree-l4"><a class="reference internal" href="../hammer/#v0-91">v0.91</a></li>
<li class="toctree-l4"><a class="reference internal" href="../hammer/#v0-90">v0.90</a></li>
<li class="toctree-l4"><a class="reference internal" href="../hammer/#v0-89">v0.89</a></li>
<li class="toctree-l4"><a class="reference internal" href="../hammer/#v0-88">v0.88</a></li>
<li class="toctree-l4"><a class="reference internal" href="../giant/">v0.87.2 Giant</a></li>
<li class="toctree-l4"><a class="reference internal" href="../giant/#v0-87-1-giant">v0.87.1 Giant</a></li>
<li class="toctree-l4"><a class="reference internal" href="../giant/#v0-87-giant">v0.87 Giant</a></li>
<li class="toctree-l4"><a class="reference internal" href="../giant/#v0-86">v0.86</a></li>
<li class="toctree-l4"><a class="reference internal" href="../giant/#v0-85">v0.85</a></li>
<li class="toctree-l4"><a class="reference internal" href="../giant/#v0-84">v0.84</a></li>
<li class="toctree-l4"><a class="reference internal" href="../giant/#v0-83">v0.83</a></li>
<li class="toctree-l4"><a class="reference internal" href="../giant/#v0-82">v0.82</a></li>
<li class="toctree-l4"><a class="reference internal" href="../giant/#v0-81">v0.81</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">v0.80.11 Firefly</a><ul>
<li class="toctree-l5"><a class="reference internal" href="#notable-changes">Notable Changes</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="#v0-80-10-firefly">v0.80.10 Firefly</a><ul>
<li class="toctree-l5"><a class="reference internal" href="#id1">Notable Changes</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="#v0-80-9-firefly">v0.80.9 Firefly</a><ul>
<li class="toctree-l5"><a class="reference internal" href="#adjusting-crush-maps">Adjusting CRUSH maps</a></li>
<li class="toctree-l5"><a class="reference internal" href="#id3">Notable Changes</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="#v0-80-8-firefly">v0.80.8 Firefly</a><ul>
<li class="toctree-l5"><a class="reference internal" href="#id4">Notable Changes</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="#v0-80-7-firefly">v0.80.7 Firefly</a><ul>
<li class="toctree-l5"><a class="reference internal" href="#id5">Notable Changes</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="#v0-80-6-firefly">v0.80.6 Firefly</a><ul>
<li class="toctree-l5"><a class="reference internal" href="#id6">Notable Changes</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="#v0-80-5-firefly">v0.80.5 Firefly</a><ul>
<li class="toctree-l5"><a class="reference internal" href="#id7">Notable Changes</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="#v0-80-4-firefly">v0.80.4 Firefly</a><ul>
<li class="toctree-l5"><a class="reference internal" href="#id8">Notable Changes</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="#v0-80-3-firefly">v0.80.3 Firefly</a><ul>
<li class="toctree-l5"><a class="reference internal" href="#id9">Notable Changes</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="#v0-80-2-firefly">v0.80.2 Firefly</a><ul>
<li class="toctree-l5"><a class="reference internal" href="#id10">Notable Changes</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="#v0-80-1-firefly">v0.80.1 Firefly</a><ul>
<li class="toctree-l5"><a class="reference internal" href="#id11">Notable Changes</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="#v0-80-firefly">v0.80 Firefly</a><ul>
<li class="toctree-l5"><a class="reference internal" href="#upgrade-sequencing">Upgrade Sequencing</a></li>
<li class="toctree-l5"><a class="reference internal" href="#upgrading-from-v0-79">Upgrading from v0.79</a></li>
<li class="toctree-l5"><a class="reference internal" href="#upgrading-from-v0-72-emperor">Upgrading from v0.72 Emperor</a></li>
<li class="toctree-l5"><a class="reference internal" href="#upgrading-from-v0-67-dumpling">Upgrading from v0.67 Dumpling</a></li>
<li class="toctree-l5"><a class="reference internal" href="#notable-changes-since-v0-79">Notable changes since v0.79</a></li>
<li class="toctree-l5"><a class="reference internal" href="#notable-changes-since-v0-72-emperor">Notable changes since v0.72 Emperor</a></li>
<li class="toctree-l5"><a class="reference internal" href="#notable-changes-since-v0-67-dumpling">Notable changes since v0.67 Dumpling</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="#v0-79">v0.79</a><ul>
<li class="toctree-l5"><a class="reference internal" href="#upgrading">Upgrading</a></li>
<li class="toctree-l5"><a class="reference internal" href="#id12">Notable Changes</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="#v0-78">v0.78</a><ul>
<li class="toctree-l5"><a class="reference internal" href="#id13">Upgrading</a></li>
<li class="toctree-l5"><a class="reference internal" href="#id14">Notable Changes</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="#v0-77">v0.77</a><ul>
<li class="toctree-l5"><a class="reference internal" href="#id15">Upgrading</a></li>
<li class="toctree-l5"><a class="reference internal" href="#id16">Notable Changes</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="#v0-76">v0.76</a><ul>
<li class="toctree-l5"><a class="reference internal" href="#id17">Upgrading</a></li>
<li class="toctree-l5"><a class="reference internal" href="#id18">Notable Changes</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="#v0-75">v0.75</a><ul>
<li class="toctree-l5"><a class="reference internal" href="#id19">Upgrading</a></li>
<li class="toctree-l5"><a class="reference internal" href="#id20">Notable Changes</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="#v0-74">v0.74</a><ul>
<li class="toctree-l5"><a class="reference internal" href="#id21">Upgrading</a></li>
<li class="toctree-l5"><a class="reference internal" href="#id22">Notable Changes</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="#v0-73">v0.73</a><ul>
<li class="toctree-l5"><a class="reference internal" href="#id23">Upgrading</a></li>
<li class="toctree-l5"><a class="reference internal" href="#id24">Notable Changes</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../emperor/">v0.72.3 Emperor (pending release)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../emperor/#v0-72-2-emperor">v0.72.2 Emperor</a></li>
<li class="toctree-l4"><a class="reference internal" href="../emperor/#v0-72-1-emperor">v0.72.1 Emperor</a></li>
<li class="toctree-l4"><a class="reference internal" href="../emperor/#v0-72-emperor">v0.72 Emperor</a></li>
<li class="toctree-l4"><a class="reference internal" href="../emperor/#v0-71">v0.71</a></li>
<li class="toctree-l4"><a class="reference internal" href="../emperor/#v0-70">v0.70</a></li>
<li class="toctree-l4"><a class="reference internal" href="../emperor/#v0-69">v0.69</a></li>
<li class="toctree-l4"><a class="reference internal" href="../emperor/#v0-68">v0.68</a></li>
<li class="toctree-l4"><a class="reference internal" href="../dumpling/">v0.67.12 “Dumpling” (draft)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../dumpling/#v0-67-11-dumpling">v0.67.11 “Dumpling”</a></li>
<li class="toctree-l4"><a class="reference internal" href="../dumpling/#v0-67-10-dumpling">v0.67.10 “Dumpling”</a></li>
<li class="toctree-l4"><a class="reference internal" href="../dumpling/#v0-67-9-dumpling">v0.67.9 “Dumpling”</a></li>
<li class="toctree-l4"><a class="reference internal" href="../dumpling/#v0-67-8-dumpling">v0.67.8 “Dumpling”</a></li>
<li class="toctree-l4"><a class="reference internal" href="../dumpling/#v0-67-7-dumpling">v0.67.7 “Dumpling”</a></li>
<li class="toctree-l4"><a class="reference internal" href="../dumpling/#v0-67-6-dumpling">v0.67.6 “Dumpling”</a></li>
<li class="toctree-l4"><a class="reference internal" href="../dumpling/#v0-67-5-dumpling">v0.67.5 “Dumpling”</a></li>
<li class="toctree-l4"><a class="reference internal" href="../dumpling/#v0-67-4-dumpling">v0.67.4 “Dumpling”</a></li>
<li class="toctree-l4"><a class="reference internal" href="../dumpling/#v0-67-3-dumpling">v0.67.3 “Dumpling”</a></li>
<li class="toctree-l4"><a class="reference internal" href="../dumpling/#v0-67-2-dumpling">v0.67.2 “Dumpling”</a></li>
<li class="toctree-l4"><a class="reference internal" href="../dumpling/#v0-67-1-dumpling">v0.67.1 “Dumpling”</a></li>
<li class="toctree-l4"><a class="reference internal" href="../dumpling/#v0-67-dumpling">v0.67 “Dumpling”</a></li>
<li class="toctree-l4"><a class="reference internal" href="../dumpling/#v0-66">v0.66</a></li>
<li class="toctree-l4"><a class="reference internal" href="../dumpling/#v0-65">v0.65</a></li>
<li class="toctree-l4"><a class="reference internal" href="../dumpling/#v0-64">v0.64</a></li>
<li class="toctree-l4"><a class="reference internal" href="../dumpling/#v0-63">v0.63</a></li>
<li class="toctree-l4"><a class="reference internal" href="../dumpling/#v0-62">v0.62</a></li>
<li class="toctree-l4"><a class="reference internal" href="../cuttlefish/">v0.61.9 “Cuttlefish”</a></li>
<li class="toctree-l4"><a class="reference internal" href="../cuttlefish/#v0-61-8-cuttlefish">v0.61.8 “Cuttlefish”</a></li>
<li class="toctree-l4"><a class="reference internal" href="../cuttlefish/#v0-61-7-cuttlefish">v0.61.7 “Cuttlefish”</a></li>
<li class="toctree-l4"><a class="reference internal" href="../cuttlefish/#v0-61-6-cuttlefish">v0.61.6 “Cuttlefish”</a></li>
<li class="toctree-l4"><a class="reference internal" href="../cuttlefish/#v0-61-5-cuttlefish">v0.61.5 “Cuttlefish”</a></li>
<li class="toctree-l4"><a class="reference internal" href="../cuttlefish/#v0-61-4-cuttlefish">v0.61.4 “Cuttlefish”</a></li>
<li class="toctree-l4"><a class="reference internal" href="../cuttlefish/#v0-61-3-cuttlefish">v0.61.3 “Cuttlefish”</a></li>
<li class="toctree-l4"><a class="reference internal" href="../cuttlefish/#v0-61-2-cuttlefish">v0.61.2 “Cuttlefish”</a></li>
<li class="toctree-l4"><a class="reference internal" href="../cuttlefish/#v0-61-1-cuttlefish">v0.61.1 “Cuttlefish”</a></li>
<li class="toctree-l4"><a class="reference internal" href="../cuttlefish/#v0-61-cuttlefish">v0.61 “Cuttlefish”</a></li>
<li class="toctree-l4"><a class="reference internal" href="../cuttlefish/#v0-60">v0.60</a></li>
<li class="toctree-l4"><a class="reference internal" href="../cuttlefish/#v0-59">v0.59</a></li>
<li class="toctree-l4"><a class="reference internal" href="../cuttlefish/#v0-58">v0.58</a></li>
<li class="toctree-l4"><a class="reference internal" href="../cuttlefish/#v0-57">v0.57</a></li>
<li class="toctree-l4"><a class="reference internal" href="../bobtail/">v0.56.7 “bobtail”</a></li>
<li class="toctree-l4"><a class="reference internal" href="../bobtail/#v0-56-6-bobtail">v0.56.6 “bobtail”</a></li>
<li class="toctree-l4"><a class="reference internal" href="../bobtail/#v0-56-5-bobtail">v0.56.5 “bobtail”</a></li>
<li class="toctree-l4"><a class="reference internal" href="../bobtail/#v0-56-4-bobtail">v0.56.4 “bobtail”</a></li>
<li class="toctree-l4"><a class="reference internal" href="../bobtail/#v0-56-3-bobtail">v0.56.3 “bobtail”</a></li>
<li class="toctree-l4"><a class="reference internal" href="../bobtail/#v0-56-2-bobtail">v0.56.2 “bobtail”</a></li>
<li class="toctree-l4"><a class="reference internal" href="../bobtail/#v0-56-1-bobtail">v0.56.1 “bobtail”</a></li>
<li class="toctree-l4"><a class="reference internal" href="../bobtail/#v0-56-bobtail">v0.56 “bobtail”</a></li>
<li class="toctree-l4"><a class="reference internal" href="../bobtail/#v0-54">v0.54</a></li>
<li class="toctree-l4"><a class="reference internal" href="../argonaut/">v0.48.3 “argonaut”</a></li>
<li class="toctree-l4"><a class="reference internal" href="../argonaut/#v0-48-2-argonaut">v0.48.2 “argonaut”</a></li>
<li class="toctree-l4"><a class="reference internal" href="../argonaut/#v0-48-1-argonaut">v0.48.1 “argonaut”</a></li>
<li class="toctree-l4"><a class="reference internal" href="../argonaut/#v0-48-argonaut">v0.48 “argonaut”</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../glossary/">Ceph 术语</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../translation_cn/">中文版翻译资源</a></li>
</ul>


<!-- ugly kludge to make genindex look like it's part of the toc -->
<ul style="margin-top: -10px"><li class="toctree-l1"><a class="reference internal" href="../../genindex/">Index</a></li></ul>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search/" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex/" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../../py-modindex/" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="../emperor/" title="v0.72.3 Emperor (pending release)"
             >next</a> |</li>
        <li class="right" >
          <a href="../giant/" title="v0.87.2 Giant"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../">Ceph Documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../" >Ceph 版本（索引）</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="../archived-index/" >归档的版本</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2016, Ceph authors and contributors. Licensed under Creative Commons Attribution Share Alike 3.0 (CC-BY-SA-3.0).
    </div>
  </body>
</html>