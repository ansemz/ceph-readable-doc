
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>v0.94.10 Hammer &#8212; Ceph Documentation</title>
    <link rel="stylesheet" href="../../_static/nature.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../_static/graphviz.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/custom.css" />
    <script id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/language_data.js"></script>
    <script src="../../_static/js/ceph.js"></script>
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../../genindex/" />
    <link rel="search" title="Search" href="../../search/" />
    <link rel="next" title="v0.87.2 Giant" href="../giant/" />
    <link rel="prev" title="v9.2.1 Infernalis" href="../infernalis/" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex/" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../py-modindex/" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="../giant/" title="v0.87.2 Giant"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="../infernalis/" title="v9.2.1 Infernalis"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../">Ceph Documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../" >Ceph 版本（索引）</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="../archived-index/" accesskey="U">归档的版本</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            

<div id="dev-warning" class="admonition note" style="display:none;">
  <p class="first admonition-title">Notice</p>
  <p class="last">This document is for a development version of Ceph.</p>
</div>

<div id="eol-warning" class="admonition warning" style="display:none;">
  <p class="first admonition-title">Warning</p>
  <p class="last">This document is for an unsupported version of Ceph.</p>
</div>
  <div id="docubetter" align="right" style="display:none; padding: 15px; font-weight: bold;">
    <a id="edit-on-github" href="https://github.com/ceph/ceph/edit/master/doc/releases/hammer.rst" rel="nofollow">Edit on GitHub</a> | <a href="https://pad.ceph.com/p/Report_Documentation_Bugs">Report a Documentation Bug</a>
  </div>

  
  <div class="section" id="v0-94-10-hammer">
<h1>v0.94.10 Hammer<a class="headerlink" href="#v0-94-10-hammer" title="Permalink to this headline">¶</a></h1>
<p>This Hammer point release fixes several bugs and adds two new features.</p>
<p>We recommend that all hammer v0.94.x users upgrade.</p>
<p>For more detailed information, see <a class="reference download internal" download="" href="../../_downloads/d826fbaa28344e90654263b1d070923b/v0.94.10.txt"><code class="xref download docutils literal notranslate"><span class="pre">the</span> <span class="pre">complete</span> <span class="pre">changelog</span></code></a>.</p>
<div class="section" id="new-features">
<h2>New Features<a class="headerlink" href="#new-features" title="Permalink to this headline">¶</a></h2>
<p>ceph-objectstore-tool and ceph-monstore-tool now enable user to
rebuild the monitor database from OSDs. (This feature is especially useful when
all monitors fail to boot due to leveldb corruption.)</p>
<p>In RADOS Gateway, it is now possible to reshard an existing bucket’s index
using an off-line tool.</p>
<p>Usage:</p>
<p>$ radosgw-admin bucket reshard –bucket=&lt;bucket_name&gt; –num_shards=&lt;num_shards&gt;</p>
<p>This will create a new linked bucket instance that points to the newly created
index objects. The old bucket instance still exists and currently it’s up to
the user to manually remove the old bucket index objects. (Note that bucket
resharding currently requires that all IO (especially writes) to the specific
bucket is quiesced.)</p>
</div>
<div class="section" id="other-notable-changes">
<h2>Other Notable Changes<a class="headerlink" href="#other-notable-changes" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>build/ops: ceph-create-keys loops forever (<a class="reference external" href="http://tracker.ceph.com/issues/17753">issue#17753</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/12805">pr#12805</a>, Alfredo Deza)</p></li>
<li><p>build/ops: improve ceph.in error message (<a class="reference external" href="http://tracker.ceph.com/issues/11101">issue#11101</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/10905">pr#10905</a>, Kefu Chai)</p></li>
<li><p>build/ops: make stop.sh more portable (<a class="reference external" href="http://tracker.ceph.com/issues/16918">issue#16918</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/10569">pr#10569</a>, Mykola Golub)</p></li>
<li><p>build/ops: remove SYSTEMD_RUN from initscript (<a class="reference external" href="http://tracker.ceph.com/issues/16440">issue#16440</a>, <a class="reference external" href="http://tracker.ceph.com/issues/7627">issue#7627</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/9873">pr#9873</a>, Vladislav Odintsov)</p></li>
<li><p>cephx: Fix multiple segfaults due to attempts to encrypt or decrypt (<a class="reference external" href="http://tracker.ceph.com/issues/16266">issue#16266</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/11930">pr#11930</a>, Brad Hubbard)</p></li>
<li><p>common: SIGABRT in TrackedOp::dump() via dump_ops_in_flight() (<a class="reference external" href="http://tracker.ceph.com/issues/8885">issue#8885</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/12121">pr#12121</a>, Jianpeng Ma, Zhiqiang Wang, David Zafman)</p></li>
<li><p>common: os/ObjectStore: fix _update_op for split dest_cid (<a class="reference external" href="http://tracker.ceph.com/issues/15345">issue#15345</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/12071">pr#12071</a>, Sage Weil)</p></li>
<li><p>crush: reset bucket-&gt;h.items[i] when removing tree item (<a class="reference external" href="http://tracker.ceph.com/issues/16525">issue#16525</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/10724">pr#10724</a>, Kefu Chai)</p></li>
<li><p>doc: add “Upgrading to Hammer” section (<a class="reference external" href="http://tracker.ceph.com/issues/17386">issue#17386</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/11372">pr#11372</a>, Kefu Chai)</p></li>
<li><p>doc: add orphan options to radosgw-admin –help and man page (<a class="reference external" href="http://tracker.ceph.com/issues/17281">issue#17281</a>, <a class="reference external" href="http://tracker.ceph.com/issues/17280">issue#17280</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/11140">pr#11140</a>, Abhishek Lekshmanan, Casey Bodley, Ken Dreyer, Thomas Serlin)</p></li>
<li><p>doc: clarify that RGW bucket object versioning is supported (<a class="reference external" href="http://tracker.ceph.com/issues/16574">issue#16574</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/10437">pr#10437</a>, Yuan Zhou, shawn chen)</p></li>
<li><p>librados: bad flags can crash the osd (<a class="reference external" href="http://tracker.ceph.com/issues/16012">issue#16012</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/11936">pr#11936</a>, Jianpeng Ma, Sage Weil)</p></li>
<li><p>librbd: ceph 10.2.2 rbd status on image format 2 returns “(2) No such file or directory” (<a class="reference external" href="http://tracker.ceph.com/issues/16887">issue#16887</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/10987">pr#10987</a>, Jason Dillaman)</p></li>
<li><p>librbd: diffs to clone’s first snapshot should include parent diffs (<a class="reference external" href="http://tracker.ceph.com/issues/18068">issue#18068</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/12446">pr#12446</a>, Jason Dillaman)</p></li>
<li><p>librbd: image.stat() call in librbdpy fails sometimes (<a class="reference external" href="http://tracker.ceph.com/issues/17310">issue#17310</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/11949">pr#11949</a>, Jason Dillaman)</p></li>
<li><p>librbd: request exclusive lock if current owner cannot execute op (<a class="reference external" href="http://tracker.ceph.com/issues/16171">issue#16171</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/12018">pr#12018</a>, Mykola Golub)</p></li>
<li><p>mds: fix cephfs-java ftruncate unit test failure (<a class="reference external" href="http://tracker.ceph.com/issues/11258">issue#11258</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/11939">pr#11939</a>, Yan, Zheng)</p></li>
<li><p>mon: %USED of ceph df is wrong (<a class="reference external" href="http://tracker.ceph.com/issues/16933">issue#16933</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/11934">pr#11934</a>, Kefu Chai)</p></li>
<li><p>mon: MonmapMonitor should return success when MON will be removed (<a class="reference external" href="http://tracker.ceph.com/issues/17725">issue#17725</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/12006">pr#12006</a>, Joao Eduardo Luis)</p></li>
<li><p>mon: OSDMonitor: Missing nearfull flag set (<a class="reference external" href="http://tracker.ceph.com/issues/17390">issue#17390</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/11273">pr#11273</a>, Igor Podoski)</p></li>
<li><p>mon: OSDs marked OUT wrongly after monitor failover (<a class="reference external" href="http://tracker.ceph.com/issues/17719">issue#17719</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/11946">pr#11946</a>, Dong Wu)</p></li>
<li><p>mon: fix memory leak in prepare_beacon (<a class="reference external" href="http://tracker.ceph.com/issues/17285">issue#17285</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/10238">pr#10238</a>, Igor Podoski)</p></li>
<li><p>mon: osd flag health message is misleading (<a class="reference external" href="http://tracker.ceph.com/issues/18175">issue#18175</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/12687">pr#12687</a>, Sage Weil)</p></li>
<li><p>mon: prepare_pgtemp needs to only update up_thru if newer than the existing one (<a class="reference external" href="http://tracker.ceph.com/issues/16185">issue#16185</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/11937">pr#11937</a>, Samuel Just)</p></li>
<li><p>mon: return size_t from MonitorDBStore::Transaction::size() (<a class="reference external" href="http://tracker.ceph.com/issues/14217">issue#14217</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/10904">pr#10904</a>, Kefu Chai)</p></li>
<li><p>mon: send updated monmap to its subscribers (<a class="reference external" href="http://tracker.ceph.com/issues/17558">issue#17558</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/11457">pr#11457</a>, Kefu Chai)</p></li>
<li><p>msgr: OpTracker needs to release the message throttle in _unregistered (<a class="reference external" href="http://tracker.ceph.com/issues/14248">issue#14248</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/11938">pr#11938</a>, Samuel Just)</p></li>
<li><p>msgr: simple/Pipe: error decoding addr (<a class="reference external" href="http://tracker.ceph.com/issues/18072">issue#18072</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/12266">pr#12266</a>, Sage Weil)</p></li>
<li><p>osd: PG::_update_calc_stats wrong for CRUSH_ITEM_NONE up set items (<a class="reference external" href="http://tracker.ceph.com/issues/16998">issue#16998</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/11933">pr#11933</a>, Samuel Just)</p></li>
<li><p>osd: PG::choose_acting valgrind error or ./common/hobject.h: 182: FAILED assert(!max || (*this == hobject_t(hobject_t::get_max()))) (<a class="reference external" href="http://tracker.ceph.com/issues/13967">issue#13967</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/11932">pr#11932</a>, Tao Chang)</p></li>
<li><p>osd: ReplicatedBackend::build_push_op: add a second config to limit omap entries/chunk independently of object data (<a class="reference external" href="http://tracker.ceph.com/issues/16128">issue#16128</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/12417">pr#12417</a>, Wanlong Gao)</p></li>
<li><p>osd: crash on EIO during deep-scrubbing (<a class="reference external" href="http://tracker.ceph.com/issues/16034">issue#16034</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/11935">pr#11935</a>, Nathan Cutler)</p></li>
<li><p>osd: filestore: FALLOC_FL_PUNCH_HOLE must be used with FALLOC_FL_KEEP_SIZE (<a class="reference external" href="http://tracker.ceph.com/issues/18446">issue#18446</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/13041">pr#13041</a>, xinxin shu)</p></li>
<li><p>osd: fix cached_removed_snaps bug in PGPool::update after map gap (<a class="reference external" href="http://tracker.ceph.com/issues/18628">issue#18628</a>, <a class="reference external" href="http://tracker.ceph.com/issues/15943">issue#15943</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/12906">pr#12906</a>, Samuel Just)</p></li>
<li><p>osd: fix collection_list shadow return value (<a class="reference external" href="http://tracker.ceph.com/issues/17713">issue#17713</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/11927">pr#11927</a>, Haomai Wang)</p></li>
<li><p>osd: fix fiemap issue in xfs when #extents &gt; 1364 (<a class="reference external" href="http://tracker.ceph.com/issues/17610">issue#17610</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/11615">pr#11615</a>, Kefu Chai, Ning Yao)</p></li>
<li><p>osd: update PGPool to detect map gaps and reset cached_removed_snaps (<a class="reference external" href="http://tracker.ceph.com/issues/15943">issue#15943</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/11676">pr#11676</a>, Samuel Just)</p></li>
<li><p>rbd: export diff should open image as read-only (<a class="reference external" href="http://tracker.ceph.com/issues/17671">issue#17671</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/11948">pr#11948</a>, liyankun)</p></li>
<li><p>rbd: fix parameter check (<a class="reference external" href="http://tracker.ceph.com/issues/18237">issue#18237</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/12312">pr#12312</a>, Yankun Li)</p></li>
<li><p>rbd: fix possible rbd data corruption (<a class="reference external" href="http://tracker.ceph.com/issues/16002">issue#16002</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/11618">pr#11618</a>, Yan, Zheng, Greg Farnum)</p></li>
<li><p>rgw: Anonymous user is able to read bucket with authenticated read ACL (<a class="reference external" href="http://tracker.ceph.com/issues/13207">issue#13207</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/11045">pr#11045</a>, <a class="reference external" href="mailto:rahul&#46;1aggarwal&#37;&#52;&#48;gmail&#46;com">rahul<span>&#46;</span>1aggarwal<span>&#64;</span>gmail<span>&#46;</span>com</a>)</p></li>
<li><p>rgw: COPY broke multipart files uploaded under dumpling (<a class="reference external" href="http://tracker.ceph.com/issues/16435">issue#16435</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/11950">pr#11950</a>, Yehuda Sadeh)</p></li>
<li><p>rgw: TempURL in radosgw behaves now like its Swift’s counterpart.  (<a class="reference external" href="http://tracker.ceph.com/issues/18316">issue#18316</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/12619">pr#12619</a>, Radoslaw Zarzynski)</p></li>
<li><p>rgw: default quota fixes (<a class="reference external" href="http://tracker.ceph.com/issues/16410">issue#16410</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/10839">pr#10839</a>, Pavan Rallabhandi, Daniel Gryniewicz)</p></li>
<li><p>rgw: do not abort when accept a CORS request with short origin (<a class="reference external" href="http://tracker.ceph.com/issues/18187">issue#18187</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/12398">pr#12398</a>, LiuYang)</p></li>
<li><p>rgw: do not omap_getvals with (u64)-1 max (<a class="reference external" href="http://tracker.ceph.com/issues/17985">issue#17985</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/12418">pr#12418</a>, Yehuda Sadeh, Sage Weil)</p></li>
<li><p>rgw: fix crash when client posts object with null condition (<a class="reference external" href="http://tracker.ceph.com/issues/17635">issue#17635</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/11809">pr#11809</a>, Yehuda Sadeh)</p></li>
<li><p>rgw: fix inconsistent uid/email handling in radosgw-admin (<a class="reference external" href="http://tracker.ceph.com/issues/13598">issue#13598</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/11952">pr#11952</a>, Matt Benjamin)</p></li>
<li><p>rgw: implement offline resharding command (<a class="reference external" href="http://tracker.ceph.com/issues/17745">issue#17745</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/12227">pr#12227</a>, Yehuda Sadeh, Orit Wasserman, weiqiaomiao)</p></li>
<li><p>rgw: swift: ranged request on a DLO provides wrong values in Content-Range HTTP header (<a class="reference external" href="http://tracker.ceph.com/issues/13452">issue#13452</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/11951">pr#11951</a>, Radoslaw Zarzynski)</p></li>
<li><p>rgw: the value of total_time is wrong in the result of ‘radosgw-admin log show’ opt (<a class="reference external" href="http://tracker.ceph.com/issues/17598">issue#17598</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/11899">pr#11899</a>, weiqiaomiao)</p></li>
<li><p>tests: Cannot clone ceph/s3-tests.git (missing branch) (<a class="reference external" href="http://tracker.ceph.com/issues/18384">issue#18384</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/12744">pr#12744</a>, Orit Wasserman)</p></li>
<li><p>tests: Cannot reserve CentOS 7.2 smithi machines (<a class="reference external" href="http://tracker.ceph.com/issues/18401">issue#18401</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/12762">pr#12762</a>, Nathan Cutler)</p></li>
<li><p>tests: OSDs commit suicide in rbd suite when testing on btrfs (<a class="reference external" href="http://tracker.ceph.com/issues/18397">issue#18397</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/12758">pr#12758</a>, Nathan Cutler)</p></li>
<li><p>tests: Workunits needlessly wget from git.ceph.com (<a class="reference external" href="http://tracker.ceph.com/issues/18336">issue#18336</a>, <a class="reference external" href="http://tracker.ceph.com/issues/18271">issue#18271</a>, <a class="reference external" href="http://tracker.ceph.com/issues/18388">issue#18388</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/12685">pr#12685</a>, Sage Weil, Nathan Cutler)</p></li>
<li><p>tests: cephfs test failures (ceph.com/qa is broken, should be download.ceph.com/qa) (<a class="reference external" href="http://tracker.ceph.com/issues/18574">issue#18574</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/13022">pr#13022</a>, John Spray)</p></li>
<li><p>tests: merge ceph-qa-suite (<a class="reference external" href="http://github.com/ceph/ceph/pull/12455">pr#12455</a>, Sage Weil)</p></li>
<li><p>tests: objecter_requests workunit fails on wip branches (<a class="reference external" href="http://tracker.ceph.com/issues/18393">issue#18393</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/12759">pr#12759</a>, Sage Weil)</p></li>
<li><p>tests: populate mnt_point in qa/tasks/ceph.py (<a class="reference external" href="http://tracker.ceph.com/issues/18383">issue#18383</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/12743">pr#12743</a>, Nathan Cutler)</p></li>
<li><p>tests: qemu/tests/qemu-iotests/077 fails in dumpling, hammer, and jewel (<a class="reference external" href="http://tracker.ceph.com/issues/10773">issue#10773</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/12423">pr#12423</a>, Jason Dillaman)</p></li>
<li><p>tests: run fs/thrash on xfs instead of btrfs (<a class="reference external" href="http://tracker.ceph.com/issues/17151">issue#17151</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/13039">pr#13039</a>, Nathan Cutler)</p></li>
<li><p>tests: update Ubuntu image url after ceph.com refactor (<a class="reference external" href="http://tracker.ceph.com/issues/18542">issue#18542</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/12957">pr#12957</a>, Jason Dillaman)</p></li>
<li><p>tests: update rbd/singleton/all/formatted-output.yaml to support ceph-ci * (<a class="reference external" href="http://tracker.ceph.com/issues/18440">issue#18440</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/12824">pr#12824 *</a>, Venky Shankar, Nathan Cutler)</p></li>
<li><p>tools: add a tool to rebuild mon store from OSD (<a class="reference external" href="http://tracker.ceph.com/issues/17179">issue#17179</a>, <a class="reference external" href="http://tracker.ceph.com/issues/17400">issue#17400</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/11125">pr#11125</a>, Kefu Chai, xie xingguo)</p></li>
<li><p>tools: ceph-objectstore-tool crashes if –journal-path &lt;a-directory&gt; (<a class="reference external" href="http://tracker.ceph.com/issues/17307">issue#17307</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/11929">pr#11929</a>, Kefu Chai)</p></li>
<li><p>tools: ceph-objectstore-tool: add a way to split filestore directories offline (<a class="reference external" href="http://tracker.ceph.com/issues/17220">issue#17220</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/11253">pr#11253</a>, Josh Durgin)</p></li>
<li><p>tools: crushtool –compile generates output despite missing item (<a class="reference external" href="http://tracker.ceph.com/issues/17306">issue#17306</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/11931">pr#11931</a>, Kefu Chai)</p></li>
</ul>
</div>
</div>
<div class="section" id="v0-94-9-hammer">
<h1>v0.94.9 Hammer<a class="headerlink" href="#v0-94-9-hammer" title="Permalink to this headline">¶</a></h1>
<p>This Hammer point release fixes a build issue present in 0.94.8 that prevented us
from generating packages for Ubuntu Precise and CentOS 6.x.</p>
<p>We recommend all users of v0.94.7 or older upgrade.</p>
<p>For more detailed information, see <a class="reference download internal" download="" href="../../_downloads/5cb364f4e3725d1b8f52d2219571d794/v0.94.9.txt"><code class="xref download docutils literal notranslate"><span class="pre">the</span> <span class="pre">complete</span> <span class="pre">changelog</span></code></a>.</p>
<div class="section" id="notable-changes">
<h2>Notable Changes<a class="headerlink" href="#notable-changes" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>build/ops: revert: boost uuid makes valgrind complain (<a class="reference external" href="http://github.com/ceph/ceph/pull/10913">pr#10913</a>, Sage Weil)</p></li>
</ul>
</div>
</div>
<div class="section" id="v0-94-8-hammer">
<h1>v0.94.8 Hammer<a class="headerlink" href="#v0-94-8-hammer" title="Permalink to this headline">¶</a></h1>
<p>This Hammer point release fixes several bugs.</p>
<p>We recommend that all hammer v0.94.x users upgrade.</p>
<p>For more detailed information, see <a class="reference download internal" download="" href="../../_downloads/4c33f2e733e48a339572ead1860a4163/v0.94.8.txt"><code class="xref download docutils literal notranslate"><span class="pre">the</span> <span class="pre">complete</span> <span class="pre">changelog</span></code></a>.</p>
<div class="section" id="id2">
<h2>Notable Changes<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>build/ops: rocksdb do not link against tcmalloc if it’s disabled (<a class="reference external" href="http://tracker.ceph.com/issues/14799">issue#14799</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/10750">pr#10750</a>, Sage Weil, Kefu Chai)</p></li>
<li><p>build/ops: Add -D_LARGEFILE64_SOURCE to Linux build. (<a class="reference external" href="http://tracker.ceph.com/issues/16611">issue#16611</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/10182">pr#10182</a>, Ira Cooper)</p></li>
<li><p>build/ops: boost uuid makes valgrind complain (<a class="reference external" href="http://tracker.ceph.com/issues/12736">issue#12736</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/9741">pr#9741</a>, Sage Weil, Rohan Mars)</p></li>
<li><p>build/ops: ceph-disk s/by-parttype-uuid/by-parttypeuuid/ (<a class="reference external" href="http://tracker.ceph.com/issues/15867">issue#15867</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/9107">pr#9107</a>, Nathan Cutler)</p></li>
<li><p>common: add units to rados bench output and clean up formatting (<a class="reference external" href="http://tracker.ceph.com/issues/12248">issue#12248</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/8960">pr#8960</a>, Dmitry Yatsushkevich, Brad Hubbard, Gu Zhongyan)</p></li>
<li><p>common: config set with negative value results in “error setting ‘filestore_merge_threshold’ to ‘-40’: (22) Invalid argument” (<a class="reference external" href="http://tracker.ceph.com/issues/13829">issue#13829</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/10291">pr#10291</a>, Brad Hubbard, Kefu Chai)</p></li>
<li><p>common: linking to -lrbd causes process startup times to balloon (<a class="reference external" href="http://tracker.ceph.com/issues/15225">issue#15225</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/8538">pr#8538</a>, Richard W.M. Jones)</p></li>
<li><p>doc: fix by-parttypeuuid in ceph-disk(8) nroff (<a class="reference external" href="http://tracker.ceph.com/issues/15867">issue#15867</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/10699">pr#10699</a>, Ken Dreyer)</p></li>
<li><p>fs: double decreased the count to trim caps which will cause failing to respond to cache pressure (<a class="reference external" href="http://tracker.ceph.com/issues/14319">issue#14319</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/8804">pr#8804</a>, Zhi Zhang)</p></li>
<li><p>log: do not repeat errors to stderr (<a class="reference external" href="http://tracker.ceph.com/issues/14616">issue#14616</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/10227">pr#10227</a>, Sage Weil)</p></li>
<li><p>mds: failing file operations on kernel based cephfs mount point leaves unaccessible file behind on hammer 0.94.7 (<a class="reference external" href="http://tracker.ceph.com/issues/16013">issue#16013</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/10198">pr#10198</a>, Yan, Zheng)</p></li>
<li><p>mds: fix stray purging in ‘stripe_count &gt; 1’ case (<a class="reference external" href="http://tracker.ceph.com/issues/15050">issue#15050</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/8042">pr#8042</a>, Yan, Zheng)</p></li>
<li><p>mds: wrongly treat symlink inode as normal file/dir when symlink inode is stale on kcephfs (<a class="reference external" href="http://tracker.ceph.com/issues/15702">issue#15702</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/9404">pr#9404</a>, Zhi Zhang)</p></li>
<li><p>mon: LibRadosMiscConnectFailure.ConnectFailure (not so intermittent) failure in upgrade/hammer-x  (<a class="reference external" href="http://tracker.ceph.com/issues/13992">issue#13992</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/8806">pr#8806</a>, Sage Weil)</p></li>
<li><p>mon: Monitor: validate prefix on handle_command() (<a class="reference external" href="http://tracker.ceph.com/issues/16297">issue#16297</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/10038">pr#10038</a>, You Ji)</p></li>
<li><p>mon: drop pg temps from not the current primary in OSDMonitor (<a class="reference external" href="http://tracker.ceph.com/issues/16127">issue#16127</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/9893">pr#9893</a>, Samuel Just)</p></li>
<li><p>mon: fix calculation of %USED (<a class="reference external" href="http://tracker.ceph.com/issues/15641">issue#15641</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/9125">pr#9125</a>, Ruifeng Yang, David Zafman)</p></li>
<li><p>mon: improve reweight_by_utilization() logic (<a class="reference external" href="http://tracker.ceph.com/issues/15686">issue#15686</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/9416">pr#9416</a>, xie xingguo)</p></li>
<li><p>mon: pool quota alarm is not in effect  (<a class="reference external" href="http://tracker.ceph.com/issues/15478">issue#15478</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/8593">pr#8593</a>, Danny Al-Gaaf)</p></li>
<li><p>mon: wrong ceph get mdsmap assertion (<a class="reference external" href="http://tracker.ceph.com/issues/14681">issue#14681</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/7542">pr#7542</a>, Vicente Cheng)</p></li>
<li><p>msgr: ceph-osd valgrind invalid reads/writes (<a class="reference external" href="http://tracker.ceph.com/issues/15870">issue#15870</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/9238">pr#9238</a>, Samuel Just)</p></li>
<li><p>objecter: LibRadosWatchNotifyPPTests/LibRadosWatchNotifyPP.WatchNotify2Timeout/1 segv (<a class="reference external" href="http://tracker.ceph.com/issues/15760">issue#15760</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/9400">pr#9400</a>, Sage Weil)</p></li>
<li><p>osd: OSD reporting ENOTEMPTY and crashing (<a class="reference external" href="http://tracker.ceph.com/issues/14766">issue#14766</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/9277">pr#9277</a>, Samuel Just)</p></li>
<li><p>osd: When generating past intervals due to an import end at pg epoch and fix build_past_intervals_parallel (<a class="reference external" href="http://tracker.ceph.com/issues/12387">issue#12387</a>, <a class="reference external" href="http://tracker.ceph.com/issues/14438">issue#14438</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/8464">pr#8464</a>, David Zafman)</p></li>
<li><p>osd: acting_primary not updated on split (<a class="reference external" href="http://tracker.ceph.com/issues/15523">issue#15523</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/9001">pr#9001</a>, Sage Weil)</p></li>
<li><p>osd: assert(!actingbackfill.empty()): old watch timeout tries to queue repop on replica (<a class="reference external" href="http://tracker.ceph.com/issues/15391">issue#15391</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/8665">pr#8665</a>, Sage Weil)</p></li>
<li><p>osd: assert(rollback_info_trimmed_to == head) in PGLog (<a class="reference external" href="http://tracker.ceph.com/issues/13965">issue#13965</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/8849">pr#8849</a>, Samuel Just)</p></li>
<li><p>osd: delete one of the repeated op-&gt;mark_started in ReplicatedBackend::sub_op_modify_impl (<a class="reference external" href="http://tracker.ceph.com/issues/16572">issue#16572</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/9977">pr#9977</a>, shun-s)</p></li>
<li><p>osd: fix omap digest compare when scrub (<a class="reference external" href="http://tracker.ceph.com/issues/16000">issue#16000</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/9271">pr#9271</a>, Xinze Chi)</p></li>
<li><p>osd: is_split crash in handle_pg_create (<a class="reference external" href="http://tracker.ceph.com/issues/15426">issue#15426</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/8805">pr#8805</a>, Kefu Chai)</p></li>
<li><p>osd: objects unfound after repair (fixed by repeering the pg) (<a class="reference external" href="http://tracker.ceph.com/issues/15006">issue#15006</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/7961">pr#7961</a>, Jianpeng Ma, Loic Dachary, Kefu Chai)</p></li>
<li><p>osd: rados cppool omap to ec pool crashes osd (<a class="reference external" href="http://tracker.ceph.com/issues/14695">issue#14695</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/8845">pr#8845</a>, Jianpeng Ma)</p></li>
<li><p>osd: remove all stale osdmaps in handle_osd_map() (<a class="reference external" href="http://tracker.ceph.com/issues/13990">issue#13990</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/9090">pr#9090</a>, Kefu Chai)</p></li>
<li><p>osd: send write and read sub ops on behalf of client ops at normal priority in ECBackend (<a class="reference external" href="http://tracker.ceph.com/issues/14313">issue#14313</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/8573">pr#8573</a>, Samuel Just)</p></li>
<li><p>rbd: snap rollback: restore the link to parent (<a class="reference external" href="http://tracker.ceph.com/issues/14512">issue#14512</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/8535">pr#8535</a>, Alexey Sheplyakov)</p></li>
<li><p>rgw: S3: set EncodingType in ListBucketResult (<a class="reference external" href="http://tracker.ceph.com/issues/15896">issue#15896</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/8987">pr#8987</a>, Victor Makarov, Robin H. Johnson)</p></li>
<li><p>rgw: backport rgwx-copy-if-newer for radosgw-agent (<a class="reference external" href="http://tracker.ceph.com/issues/16262">issue#16262</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/9671">pr#9671</a>, Yehuda Sadeh)</p></li>
<li><p>rgw: bucket listing following object delete is partial (<a class="reference external" href="http://tracker.ceph.com/issues/14826">issue#14826</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/10555">pr#10555</a>, Orit Wasserman)</p></li>
<li><p>rgw: convert plain object to versioned (with null version) when removing (<a class="reference external" href="http://tracker.ceph.com/issues/15243">issue#15243</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/8755">pr#8755</a>, Yehuda Sadeh)</p></li>
<li><p>rgw: fix multi-delete query param parsing. (<a class="reference external" href="http://tracker.ceph.com/issues/16618">issue#16618</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/10189">pr#10189</a>, Robin H. Johnson)</p></li>
<li><p>rgw: have a flavor of bucket deletion to bypass GC and to trigger (<a class="reference external" href="http://tracker.ceph.com/issues/15557">issue#15557</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/10509">pr#10509</a>, Pavan Rallabhandi)</p></li>
<li><p>rgw: keep track of written_objs correctly (<a class="reference external" href="http://tracker.ceph.com/issues/15886">issue#15886</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/9240">pr#9240</a>, Yehuda Sadeh)</p></li>
<li><p>rgw: multipart ListPartsResult has missing quotes on ETag (<a class="reference external" href="http://tracker.ceph.com/issues/15334">issue#15334</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/8475">pr#8475</a>, xie xingguo, Robin H. Johnson)</p></li>
<li><p>rgw: no Last-Modified, Content-Size and X-Object-Manifest headers if no segments in DLO manifest (<a class="reference external" href="http://tracker.ceph.com/issues/15812">issue#15812</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/9402">pr#9402</a>, Radoslaw Zarzynski)</p></li>
<li><p>rgw: radosgw server abort when user passed bad parameters to set quota (<a class="reference external" href="http://tracker.ceph.com/issues/14190">issue#14190</a>, <a class="reference external" href="http://tracker.ceph.com/issues/14191">issue#14191</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/8313">pr#8313</a>, Dunrong Huang)</p></li>
<li><p>rgw: radosgw-admin region-map set is not reporting the bucket quota correctly (<a class="reference external" href="http://tracker.ceph.com/issues/16815">issue#16815</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/10554">pr#10554</a>, Yehuda Sadeh, Orit Wasserman)</p></li>
<li><p>rgw: refrain from sending Content-Type/Content-Length for 304 responses (<a class="reference external" href="http://tracker.ceph.com/issues/16327">issue#16327</a>, <a class="reference external" href="http://tracker.ceph.com/issues/13582">issue#13582</a>, <a class="reference external" href="http://tracker.ceph.com/issues/15119">issue#15119</a>, <a class="reference external" href="http://tracker.ceph.com/issues/14005">issue#14005</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/8379">pr#8379</a>, Yehuda Sadeh, Nathan Cutler, Wido den Hollander)</p></li>
<li><p>rgw: remove bucket index objects when deleting the bucket (<a class="reference external" href="http://tracker.ceph.com/issues/16412">issue#16412</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/10530">pr#10530</a>, Orit Wasserman)</p></li>
<li><p>rgw: set Access-Control-Allow-Origin to an asterisk if allowed in a rule (<a class="reference external" href="http://tracker.ceph.com/issues/15348">issue#15348</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/8528">pr#8528</a>, Wido den Hollander)</p></li>
<li><p>rgw: subset of uploaded objects via radosgw are unretrievable when using EC pool (<a class="reference external" href="http://tracker.ceph.com/issues/15745">issue#15745</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/9407">pr#9407</a>, Yehuda Sadeh)</p></li>
<li><p>rgw: subuser rm fails with status 125 (<a class="reference external" href="http://tracker.ceph.com/issues/14375">issue#14375</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/9961">pr#9961</a>, Orit Wasserman)</p></li>
<li><p>rgw: the swift key remains after removing a subuser (<a class="reference external" href="http://tracker.ceph.com/issues/12890">issue#12890</a>, <a class="reference external" href="http://tracker.ceph.com/issues/14375">issue#14375</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/10718">pr#10718</a>, Orit Wasserman, Sangdi Xu)</p></li>
<li><p>rgw: user quota may not adjust on bucket removal (<a class="reference external" href="http://tracker.ceph.com/issues/14507">issue#14507</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/8113">pr#8113</a>, Edward Yang)</p></li>
<li><p>tests: be more generous with test timeout (<a class="reference external" href="http://tracker.ceph.com/issues/15403">issue#15403</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/8470">pr#8470</a>, Loic Dachary)</p></li>
<li><p>tests: qa/workunits/rbd: respect RBD_CREATE_ARGS environment variable (<a class="reference external" href="http://tracker.ceph.com/issues/16289">issue#16289</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/9722">pr#9722</a>, Mykola Golub)</p></li>
</ul>
</div>
</div>
<div class="section" id="v0-94-7-hammer">
<h1>v0.94.7 Hammer<a class="headerlink" href="#v0-94-7-hammer" title="Permalink to this headline">¶</a></h1>
<p>This Hammer point release fixes several minor bugs.  It also includes
a backport of an improved ‘ceph osd reweight-by-utilization’ command
for handling OSDs with higher-than-average utilizations.</p>
<p>We recommend that all hammer v0.94.x users upgrade.</p>
<p>For more detailed information, see <a class="reference download internal" download="" href="../../_downloads/e16c3dbf8fb8eeda26ca08ee86da8ac8/v0.94.7.txt"><code class="xref download docutils literal notranslate"><span class="pre">the</span> <span class="pre">complete</span> <span class="pre">changelog</span></code></a>.</p>
<div class="section" id="id5">
<h2>Notable Changes<a class="headerlink" href="#id5" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>auth: keyring permisions for mon deamon (<a class="reference external" href="http://tracker.ceph.com/issues/14950">issue#14950</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/8049">pr#8049</a>, Owen Synge)</p></li>
<li><p>auth: PK11_DestroyContext() is called twice if PK11_DigestFinal() fails (<a class="reference external" href="http://tracker.ceph.com/issues/14958">issue#14958</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/7922">pr#7922</a>, Brad Hubbard, Dunrong Huang)</p></li>
<li><p>auth: use libnss more safely (<a class="reference external" href="http://tracker.ceph.com/issues/14620">issue#14620</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/7488">pr#7488</a>, Sage Weil)</p></li>
<li><p>ceph-disk: use blkid instead of sgdisk -i (<a class="reference external" href="http://tracker.ceph.com/issues/14080">issue#14080</a>, <a class="reference external" href="http://tracker.ceph.com/issues/14094">issue#14094</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/7475">pr#7475</a>, Ilya Dryomov, Loic Dachary)</p></li>
<li><p>ceph-fuse: fix ceph-fuse writing to stale log file after log rotation (<a class="reference external" href="http://tracker.ceph.com/issues/12350">issue#12350</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/7110">pr#7110</a>, Zhi Zhang)</p></li>
<li><p>ceph init script unconditionally sources /lib/lsb/init-functions (<a class="reference external" href="http://tracker.ceph.com/issues/14402">issue#14402</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/7797">pr#7797</a>, Yan, Zheng)</p></li>
<li><p>ceph.in: Notify user that ‘tell’ can’t be used in interactive mode (<a class="reference external" href="http://tracker.ceph.com/issues/14773">issue#14773</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/7656">pr#7656</a>, David Zafman)</p></li>
<li><p>ceph-objectstore-tool, osd: Fix import handling (<a class="reference external" href="http://tracker.ceph.com/issues/10794">issue#10794</a>, <a class="reference external" href="http://tracker.ceph.com/issues/13382">issue#13382</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/7917">pr#7917</a>, Sage Weil, David Zafman)</p></li>
<li><p>client: added permission check based on getgrouplist (<a class="reference external" href="http://tracker.ceph.com/issues/13268">issue#13268</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/6604">pr#6604</a>, Yan, Zheng, Danny Al-Gaaf)</p></li>
<li><p>client: inoderef (<a class="reference external" href="http://tracker.ceph.com/issues/13729">issue#13729</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/6551">pr#6551</a>, Yan, Zheng)</p></li>
<li><p>common: clock skew report is incorrect by ceph health detail command (<a class="reference external" href="http://tracker.ceph.com/issues/14175">issue#14175</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/8051">pr#8051</a>, Joao Eduardo Luis)</p></li>
<li><p>global/pidfile: do not start two daemons with a single pid-file (<a class="reference external" href="http://tracker.ceph.com/issues/13422">issue#13422</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/7671">pr#7671</a>, Loic Dachary, shun song)</p></li>
<li><p>librados: segfault in Objecter::handle_watch_notify (<a class="reference external" href="http://tracker.ceph.com/issues/13805">issue#13805</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/7992">pr#7992</a>, Sage Weil)</p></li>
<li><p>librbd: flattening an rbd image with active IO can lead to hang (<a class="reference external" href="http://tracker.ceph.com/issues/14092">issue#14092</a>, <a class="reference external" href="http://tracker.ceph.com/issues/14483">issue#14483</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/7485">pr#7485</a>, Jason Dillaman)</p></li>
<li><p>librbd: possible QEMU deadlock after creating image snapshots (<a class="reference external" href="http://tracker.ceph.com/issues/14988">issue#14988</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/8011">pr#8011</a>, Jason Dillaman)</p></li>
<li><p>mon: Bucket owner isn’t changed after unlink/link (<a class="reference external" href="http://tracker.ceph.com/issues/11076">issue#11076</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/8583">pr#8583</a>, Zengran Zhang)</p></li>
<li><p>monclient: avoid key renew storm on clock skew (<a class="reference external" href="http://tracker.ceph.com/issues/12065">issue#12065</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/8398">pr#8398</a>, Alexey Sheplyakov)</p></li>
<li><p>mon: implement reweight-by-utilization feature (<a class="reference external" href="http://tracker.ceph.com/issues/15054">issue#15054</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/8026">pr#8026</a>, Kefu Chai, Dan van der Ster, Sage Weil)</p></li>
<li><p>mon/LogMonitor: use the configured facility if log to syslog (<a class="reference external" href="http://tracker.ceph.com/issues/13748">issue#13748</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/7648">pr#7648</a>, Kefu Chai)</p></li>
<li><p>mon: mon sync does not copy config-key (<a class="reference external" href="http://tracker.ceph.com/issues/14577">issue#14577</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/7576">pr#7576</a>, Xiaowei Chen)</p></li>
<li><p>mon/OSDMonitor: avoid underflow in reweight-by-utilization if max_change=1 (<a class="reference external" href="http://tracker.ceph.com/issues/15655">issue#15655</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/8979">pr#8979</a>, Samuel Just)</p></li>
<li><p>osd: consume_maps clearing of waiting_for_pg needs to check the spg_t shard for acting set membership (<a class="reference external" href="http://tracker.ceph.com/issues/14278">issue#14278</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/7577">pr#7577</a>, Samuel Just)</p></li>
<li><p>osd: log inconsistent shard sizes (<a class="reference external" href="http://tracker.ceph.com/issues/14009">issue#14009</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/6946">pr#6946</a>, Loic Dachary)</p></li>
<li><p>osd: OSD coredumps with leveldb compact on mount = true (<a class="reference external" href="http://tracker.ceph.com/issues/14748">issue#14748</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/7645">pr#7645</a>, Xiaoxi Chen)</p></li>
<li><p>osd/OSDMap: reset osd_primary_affinity shared_ptr when deepish_copy_from (<a class="reference external" href="http://tracker.ceph.com/issues/14686">issue#14686</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/7590">pr#7590</a>, Xinze Chi)</p></li>
<li><p>osd: Protect against excessively large object map sizes (<a class="reference external" href="http://tracker.ceph.com/issues/15121">issue#15121</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/8401">pr#8401</a>, Jason Dillaman)</p></li>
<li><p>osd/ReplicatedPG: do not proxy read <em>and</em> process op locally (<a class="reference external" href="http://tracker.ceph.com/issues/15171">issue#15171</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/8187">pr#8187</a>, Sage Weil)</p></li>
<li><p>osd: scrub bogus results when missing a clone (<a class="reference external" href="http://tracker.ceph.com/issues/14875">issue#14875</a>, <a class="reference external" href="http://tracker.ceph.com/issues/14874">issue#14874</a>, <a class="reference external" href="http://tracker.ceph.com/issues/14877">issue#14877</a>, <a class="reference external" href="http://tracker.ceph.com/issues/10098">issue#10098</a>, <a class="reference external" href="http://tracker.ceph.com/issues/14878">issue#14878</a>, <a class="reference external" href="http://tracker.ceph.com/issues/14881">issue#14881</a>, <a class="reference external" href="http://tracker.ceph.com/issues/14882">issue#14882</a>, <a class="reference external" href="http://tracker.ceph.com/issues/14883">issue#14883</a>, <a class="reference external" href="http://tracker.ceph.com/issues/14879">issue#14879</a>, <a class="reference external" href="http://tracker.ceph.com/issues/10290">issue#10290</a>, <a class="reference external" href="http://tracker.ceph.com/issues/12740">issue#12740</a>, <a class="reference external" href="http://tracker.ceph.com/issues/12738">issue#12738</a>, <a class="reference external" href="http://tracker.ceph.com/issues/14880">issue#14880</a>, <a class="reference external" href="http://tracker.ceph.com/issues/11135">issue#11135</a>, <a class="reference external" href="http://tracker.ceph.com/issues/14876">issue#14876</a>, <a class="reference external" href="http://tracker.ceph.com/issues/10809">issue#10809</a>, <a class="reference external" href="http://tracker.ceph.com/issues/12193">issue#12193</a>, <a class="reference external" href="http://tracker.ceph.com/issues/11237">issue#11237</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/7702">pr#7702</a>, Xinze Chi, Sage Weil, John Spray, Kefu Chai, Mykola Golub, David Zafman)</p></li>
<li><p>osd: Unable to bring up OSD’s after dealing with FULL cluster (OSD assert with /include/interval_set.h: 386: FAILED assert(_size &gt;= 0)) (<a class="reference external" href="http://tracker.ceph.com/issues/14428">issue#14428</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/7415">pr#7415</a>, Alexey Sheplyakov)</p></li>
<li><p>osd: use GMT time for the object name of hitsets (<a class="reference external" href="http://tracker.ceph.com/issues/13192">issue#13192</a>, <a class="reference external" href="http://tracker.ceph.com/issues/9732">issue#9732</a>, <a class="reference external" href="http://tracker.ceph.com/issues/12968">issue#12968</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/7883">pr#7883</a>, Kefu Chai, David Zafman)</p></li>
<li><p>qa/workunits/post-file.sh: sudo (<a class="reference external" href="http://tracker.ceph.com/issues/14586">issue#14586</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/7456">pr#7456</a>, Sage Weil)</p></li>
<li><p>qa/workunits: remove ‘mds setmap’ from workunits (<a class="reference external" href="http://github.com/ceph/ceph/pull/8123">pr#8123</a>, Sage Weil)</p></li>
<li><p>rgw: default quota params (<a class="reference external" href="http://tracker.ceph.com/issues/12997">issue#12997</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/7188">pr#7188</a>, Daniel Gryniewicz)</p></li>
<li><p>rgw: make rgw_fronends more forgiving of whitespace (<a class="reference external" href="http://tracker.ceph.com/issues/12038">issue#12038</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/7414">pr#7414</a>, Matt Benjamin)</p></li>
<li><p>rgw: radosgw-admin bucket check –fix not work (<a class="reference external" href="http://tracker.ceph.com/issues/14215">issue#14215</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/7185">pr#7185</a>, Weijun Duan)</p></li>
<li><p>rpm package building fails if the build machine has lttng and babeltrace development packages installed locally (<a class="reference external" href="http://tracker.ceph.com/issues/14844">issue#14844</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/8440">pr#8440</a>, Kefu Chai)</p></li>
<li><p>rpm: redhat-lsb-core dependency was dropped, but is still needed (<a class="reference external" href="http://tracker.ceph.com/issues/14906">issue#14906</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/7876">pr#7876</a>, Nathan Cutler)</p></li>
<li><p>test_bit_vector.cc uses magic numbers against #defines that vary (<a class="reference external" href="http://tracker.ceph.com/issues/14747">issue#14747</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/7672">pr#7672</a>, Jason Dillaman)</p></li>
<li><p>test/librados/tier.cc doesn’t completely clean up EC pools (<a class="reference external" href="http://tracker.ceph.com/issues/13878">issue#13878</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/8052">pr#8052</a>, Loic Dachary, Dan Mick)</p></li>
<li><p>tests: bufferlist: do not expect !is_page_aligned() after unaligned rebuild (<a class="reference external" href="http://tracker.ceph.com/issues/15305">issue#15305</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/8272">pr#8272</a>, Kefu Chai)</p></li>
<li><p>tools: fix race condition in seq/rand bench (part 1) (<a class="reference external" href="http://tracker.ceph.com/issues/14968">issue#14968</a>, <a class="reference external" href="http://tracker.ceph.com/issues/14873">issue#14873</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/7896">pr#7896</a>, Alexey Sheplyakov, Piotr Dałek)</p></li>
<li><p>tools: fix race condition in seq/rand bench (part 2) (<a class="reference external" href="http://tracker.ceph.com/issues/14873">issue#14873</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/7817">pr#7817</a>, Alexey Sheplyakov)</p></li>
<li><p>tools/rados: add bench smoke tests (<a class="reference external" href="http://tracker.ceph.com/issues/14971">issue#14971</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/7903">pr#7903</a>, Piotr Dałek)</p></li>
<li><p>tools, test: Add ceph-objectstore-tool to operate on the meta collection (<a class="reference external" href="http://tracker.ceph.com/issues/14977">issue#14977</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/7911">pr#7911</a>, David Zafman)</p></li>
<li><p>unittest_crypto: benchmark 100,000 CryptoKey::encrypt() calls (<a class="reference external" href="http://tracker.ceph.com/issues/14863">issue#14863</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/7801">pr#7801</a>, Sage Weil)</p></li>
</ul>
</div>
</div>
<div class="section" id="v0-94-6-hammer">
<h1>v0.94.6 Hammer<a class="headerlink" href="#v0-94-6-hammer" title="Permalink to this headline">¶</a></h1>
<p>This Hammer point release fixes a range of bugs, most notably a fix
for unbounded growth of the monitor’s leveldb store, and a workaround
in the OSD to keep most xattrs small enough to be stored inline in XFS
inodes.</p>
<p>We recommend that all hammer v0.94.x users upgrade.</p>
<p>For more detailed information, see <a class="reference download internal" download="" href="../../_downloads/359f93fd6ea72037034d08d0083573ef/v0.94.6.txt"><code class="xref download docutils literal notranslate"><span class="pre">the</span> <span class="pre">complete</span> <span class="pre">changelog</span></code></a>.</p>
<div class="section" id="id7">
<h2>Notable Changes<a class="headerlink" href="#id7" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>build/ops: Ceph daemon failed to start, because the service name was already used. (<a class="reference external" href="http://tracker.ceph.com/issues/13474">issue#13474</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/6832">pr#6832</a>, Chuanhong Wang)</p></li>
<li><p>build/ops: LTTng-UST tracing should be dynamically enabled (<a class="reference external" href="http://tracker.ceph.com/issues/13274">issue#13274</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/6415">pr#6415</a>, Jason Dillaman)</p></li>
<li><p>build/ops: ceph upstart script rbdmap.conf incorrectly processes parameters (<a class="reference external" href="http://tracker.ceph.com/issues/13214">issue#13214</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/6159">pr#6159</a>, Sage Weil)</p></li>
<li><p>build/ops: ceph.spec.in License line does not reflect COPYING (<a class="reference external" href="http://tracker.ceph.com/issues/12935">issue#12935</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/6680">pr#6680</a>, Nathan Cutler)</p></li>
<li><p>build/ops: ceph.spec.in libcephfs_jni1 has no %post and %postun  (<a class="reference external" href="http://tracker.ceph.com/issues/12927">issue#12927</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/5789">pr#5789</a>, Owen Synge)</p></li>
<li><p>build/ops: configure.ac: no use to add “+” before ac_ext=c (<a class="reference external" href="http://tracker.ceph.com/issues/14330">issue#14330</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/6973">pr#6973</a>, Kefu Chai, Robin H. Johnson)</p></li>
<li><p>build/ops: deb: strip tracepoint libraries from Wheezy/Precise builds (<a class="reference external" href="http://tracker.ceph.com/issues/14801">issue#14801</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/7316">pr#7316</a>, Jason Dillaman)</p></li>
<li><p>build/ops: init script reload doesn’t work on EL7 (<a class="reference external" href="http://tracker.ceph.com/issues/13709">issue#13709</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/7187">pr#7187</a>, Hervé Rousseau)</p></li>
<li><p>build/ops: init-rbdmap uses distro-specific functions (<a class="reference external" href="http://tracker.ceph.com/issues/12415">issue#12415</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/6528">pr#6528</a>, Boris Ranto)</p></li>
<li><p>build/ops: logrotate reload error on Ubuntu 14.04 (<a class="reference external" href="http://tracker.ceph.com/issues/11330">issue#11330</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/5787">pr#5787</a>, Sage Weil)</p></li>
<li><p>build/ops: miscellaneous spec file fixes (<a class="reference external" href="http://tracker.ceph.com/issues/12931">issue#12931</a>, <a class="reference external" href="http://tracker.ceph.com/issues/12994">issue#12994</a>, <a class="reference external" href="http://tracker.ceph.com/issues/12924">issue#12924</a>, <a class="reference external" href="http://tracker.ceph.com/issues/12360">issue#12360</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/5790">pr#5790</a>, Boris Ranto, Nathan Cutler, Owen Synge, Travis Rhoden, Ken Dreyer)</p></li>
<li><p>build/ops: pass tcmalloc env through to ceph-os (<a class="reference external" href="http://tracker.ceph.com/issues/14802">issue#14802</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/7365">pr#7365</a>, Sage Weil)</p></li>
<li><p>build/ops: rbd-replay-* moved from ceph-test-dbg to ceph-common-dbg as well (<a class="reference external" href="http://tracker.ceph.com/issues/13785">issue#13785</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/6580">pr#6580</a>, Loic Dachary)</p></li>
<li><p>build/ops: unknown argument –quiet in udevadm settle (<a class="reference external" href="http://tracker.ceph.com/issues/13560">issue#13560</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/6530">pr#6530</a>, Jason Dillaman)</p></li>
<li><p>common: Objecter: pool op callback may hang forever. (<a class="reference external" href="http://tracker.ceph.com/issues/13642">issue#13642</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/6588">pr#6588</a>, xie xingguo)</p></li>
<li><p>common: Objecter: potential null pointer access when do pool_snap_list. (<a class="reference external" href="http://tracker.ceph.com/issues/13639">issue#13639</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/6839">pr#6839</a>, xie xingguo)</p></li>
<li><p>common: ThreadPool add/remove work queue methods not thread safe (<a class="reference external" href="http://tracker.ceph.com/issues/12662">issue#12662</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/5889">pr#5889</a>, Jason Dillaman)</p></li>
<li><p>common: auth/cephx: large amounts of log are produced by osd (<a class="reference external" href="http://tracker.ceph.com/issues/13610">issue#13610</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/6835">pr#6835</a>, Qiankun Zheng)</p></li>
<li><p>common: client nonce collision due to unshared pid namespaces (<a class="reference external" href="http://tracker.ceph.com/issues/13032">issue#13032</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/6151">pr#6151</a>, Josh Durgin)</p></li>
<li><p>common: common/Thread:pthread_attr_destroy(thread_attr) when done with it (<a class="reference external" href="http://tracker.ceph.com/issues/12570">issue#12570</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/6157">pr#6157</a>, Piotr Dałek)</p></li>
<li><p>common: log: Log.cc: Assign LOG_DEBUG priority to syslog calls (<a class="reference external" href="http://tracker.ceph.com/issues/13993">issue#13993</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/6994">pr#6994</a>, Brad Hubbard)</p></li>
<li><p>common: objecter: cancellation bugs (<a class="reference external" href="http://tracker.ceph.com/issues/13071">issue#13071</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/6155">pr#6155</a>, Jianpeng Ma)</p></li>
<li><p>common: pure virtual method called (<a class="reference external" href="http://tracker.ceph.com/issues/13636">issue#13636</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/6587">pr#6587</a>, Jason Dillaman)</p></li>
<li><p>common: small probability sigabrt when setting rados_osd_op_timeout (<a class="reference external" href="http://tracker.ceph.com/issues/13208">issue#13208</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/6143">pr#6143</a>, Ruifeng Yang)</p></li>
<li><p>common: wrong conditional for boolean function KeyServer::get_auth() (<a class="reference external" href="http://tracker.ceph.com/issues/9756">issue#9756</a>, <a class="reference external" href="http://tracker.ceph.com/issues/13424">issue#13424</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/6213">pr#6213</a>, Nathan Cutler)</p></li>
<li><p>crush: crash if we see CRUSH_ITEM_NONE in early rule step (<a class="reference external" href="http://tracker.ceph.com/issues/13477">issue#13477</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/6430">pr#6430</a>, Sage Weil)</p></li>
<li><p>doc: man: document listwatchers cmd in “rados” manpage (<a class="reference external" href="http://tracker.ceph.com/issues/14556">issue#14556</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/7434">pr#7434</a>, Kefu Chai)</p></li>
<li><p>doc: regenerate man pages, add orphans commands to radosgw-admin(8) (<a class="reference external" href="http://tracker.ceph.com/issues/14637">issue#14637</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/7524">pr#7524</a>, Ken Dreyer)</p></li>
<li><p>fs: CephFS restriction on removing cache tiers is overly strict (<a class="reference external" href="http://tracker.ceph.com/issues/11504">issue#11504</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/6402">pr#6402</a>, John Spray)</p></li>
<li><p>fs: fsstress.sh fails (<a class="reference external" href="http://tracker.ceph.com/issues/12710">issue#12710</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/7454">pr#7454</a>, Yan, Zheng)</p></li>
<li><p>librados: LibRadosWatchNotify.WatchNotify2Timeout (<a class="reference external" href="http://tracker.ceph.com/issues/13114">issue#13114</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/6336">pr#6336</a>, Sage Weil)</p></li>
<li><p>librbd: ImageWatcher shouldn’t block the notification thread (<a class="reference external" href="http://tracker.ceph.com/issues/14373">issue#14373</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/7407">pr#7407</a>, Jason Dillaman)</p></li>
<li><p>librbd: diff_iterate needs to handle holes in parent images (<a class="reference external" href="http://tracker.ceph.com/issues/12885">issue#12885</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/6097">pr#6097</a>, Jason Dillaman)</p></li>
<li><p>librbd: fix merge-diff for &gt;2GB diff-files (<a class="reference external" href="http://tracker.ceph.com/issues/14030">issue#14030</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/6980">pr#6980</a>, Jason Dillaman)</p></li>
<li><p>librbd: invalidate object map on error even w/o holding lock (<a class="reference external" href="http://tracker.ceph.com/issues/13372">issue#13372</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/6289">pr#6289</a>, Jason Dillaman)</p></li>
<li><p>librbd: reads larger than cache size hang (<a class="reference external" href="http://tracker.ceph.com/issues/13164">issue#13164</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/6354">pr#6354</a>, Lu Shi)</p></li>
<li><p>mds: ceph mds add_data_pool check for EC pool is wrong (<a class="reference external" href="http://tracker.ceph.com/issues/12426">issue#12426</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/5766">pr#5766</a>, John Spray)</p></li>
<li><p>mon: MonitorDBStore: get_next_key() only if prefix matches (<a class="reference external" href="http://tracker.ceph.com/issues/11786">issue#11786</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/5361">pr#5361</a>, Joao Eduardo Luis)</p></li>
<li><p>mon: OSDMonitor: do not assume a session exists in send_incremental() (<a class="reference external" href="http://tracker.ceph.com/issues/14236">issue#14236</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/7150">pr#7150</a>, Joao Eduardo Luis)</p></li>
<li><p>mon: check for store writeablility before participating in election (<a class="reference external" href="http://tracker.ceph.com/issues/13089">issue#13089</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/6144">pr#6144</a>, Sage Weil)</p></li>
<li><p>mon: compact full epochs also (<a class="reference external" href="http://tracker.ceph.com/issues/14537">issue#14537</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/7446">pr#7446</a>, Kefu Chai)</p></li>
<li><p>mon: include min_last_epoch_clean as part of PGMap::print_summary and PGMap::dump (<a class="reference external" href="http://tracker.ceph.com/issues/13198">issue#13198</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/6152">pr#6152</a>, Guang Yang)</p></li>
<li><p>mon: map_cache can become inaccurate if osd does not receive the osdmaps (<a class="reference external" href="http://tracker.ceph.com/issues/10930">issue#10930</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/5773">pr#5773</a>, Kefu Chai)</p></li>
<li><p>mon: should not set isvalid = true when cephx_verify_authorizer return false (<a class="reference external" href="http://tracker.ceph.com/issues/13525">issue#13525</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/6391">pr#6391</a>, Ruifeng Yang)</p></li>
<li><p>osd: Ceph Pools’ MAX AVAIL is 0 if some OSDs’ weight is 0 (<a class="reference external" href="http://tracker.ceph.com/issues/13840">issue#13840</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/6834">pr#6834</a>, Chengyuan Li)</p></li>
<li><p>osd: FileStore calls syncfs(2) even it is not supported (<a class="reference external" href="http://tracker.ceph.com/issues/12512">issue#12512</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/5530">pr#5530</a>, Kefu Chai)</p></li>
<li><p>osd: FileStore: potential memory leak if getattrs fails. (<a class="reference external" href="http://tracker.ceph.com/issues/13597">issue#13597</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/6420">pr#6420</a>, xie xingguo)</p></li>
<li><p>osd: IO error on kvm/rbd with an erasure coded pool tier (<a class="reference external" href="http://tracker.ceph.com/issues/12012">issue#12012</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/5897">pr#5897</a>, Kefu Chai)</p></li>
<li><p>osd: OSD::build_past_intervals_parallel() shall reset primary and up_primary when begin a new past_interval. (<a class="reference external" href="http://tracker.ceph.com/issues/13471">issue#13471</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/6398">pr#6398</a>, xiexingguo)</p></li>
<li><p>osd: ReplicatedBackend: populate recovery_info.size for clone (bug symptom is size mismatch on replicated backend on a clone in scrub) (<a class="reference external" href="http://tracker.ceph.com/issues/12828">issue#12828</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/6153">pr#6153</a>, Samuel Just)</p></li>
<li><p>osd: ReplicatedPG: wrong result code checking logic during sparse_read (<a class="reference external" href="http://tracker.ceph.com/issues/14151">issue#14151</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/7179">pr#7179</a>, xie xingguo)</p></li>
<li><p>osd: ReplicatedPG::hit_set_trim osd/ReplicatedPG.cc: 11006: FAILED assert(obc) (<a class="reference external" href="http://tracker.ceph.com/issues/13192">issue#13192</a>, <a class="reference external" href="http://tracker.ceph.com/issues/9732">issue#9732</a>, <a class="reference external" href="http://tracker.ceph.com/issues/12968">issue#12968</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/5825">pr#5825</a>, Kefu Chai, Zhiqiang Wang, Samuel Just, David Zafman)</p></li>
<li><p>osd: avoid multi set osd_op.outdata in tier pool (<a class="reference external" href="http://tracker.ceph.com/issues/12540">issue#12540</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/6060">pr#6060</a>, Xinze Chi)</p></li>
<li><p>osd: bug with cache/tiering and snapshot reads (<a class="reference external" href="http://tracker.ceph.com/issues/12748">issue#12748</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/6589">pr#6589</a>, Kefu Chai)</p></li>
<li><p>osd: ceph osd pool stats broken in hammer (<a class="reference external" href="http://tracker.ceph.com/issues/13843">issue#13843</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/7180">pr#7180</a>, BJ Lougee)</p></li>
<li><p>osd: ceph-disk prepare fails if device is a symlink (<a class="reference external" href="http://tracker.ceph.com/issues/13438">issue#13438</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/7176">pr#7176</a>, Joe Julian)</p></li>
<li><p>osd: check for full before changing the cached obc (hammer) (<a class="reference external" href="http://tracker.ceph.com/issues/13098">issue#13098</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/6918">pr#6918</a>, Alexey Sheplyakov)</p></li>
<li><p>osd: config_opts: increase suicide timeout to 300 to match recovery (<a class="reference external" href="http://tracker.ceph.com/issues/14376">issue#14376</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/7236">pr#7236</a>, Samuel Just)</p></li>
<li><p>osd: disable filestore_xfs_extsize by default (<a class="reference external" href="http://tracker.ceph.com/issues/14397">issue#14397</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/7411">pr#7411</a>, Ken Dreyer)</p></li>
<li><p>osd: do not cache unused memory in attrs (<a class="reference external" href="http://tracker.ceph.com/issues/12565">issue#12565</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/6499">pr#6499</a>, Xinze Chi, Ning Yao)</p></li>
<li><p>osd: dumpling incrementals do not work properly on hammer and newer (<a class="reference external" href="http://tracker.ceph.com/issues/13234">issue#13234</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/6132">pr#6132</a>, Samuel Just)</p></li>
<li><p>osd: filestore: fix peek_queue for OpSequencer (<a class="reference external" href="http://tracker.ceph.com/issues/13209">issue#13209</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/6145">pr#6145</a>, Xinze Chi)</p></li>
<li><p>osd: hit set clear repops fired in same epoch as map change – segfault since they fall into the new interval even though the repops are cleared (<a class="reference external" href="http://tracker.ceph.com/issues/12809">issue#12809</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/5890">pr#5890</a>, Samuel Just)</p></li>
<li><p>osd: object_info_t::decode() has wrong version (<a class="reference external" href="http://tracker.ceph.com/issues/13462">issue#13462</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/6335">pr#6335</a>, David Zafman)</p></li>
<li><p>osd: osd/OSD.cc: 2469: FAILED assert(pg_stat_queue.empty()) on shutdown (<a class="reference external" href="http://tracker.ceph.com/issues/14212">issue#14212</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/7178">pr#7178</a>, Sage Weil)</p></li>
<li><p>osd: osd/PG.cc: 288: FAILED assert(info.last_epoch_started &gt;= info.history.last_epoch_started) (<a class="reference external" href="http://tracker.ceph.com/issues/14015">issue#14015</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/7177">pr#7177</a>, David Zafman)</p></li>
<li><p>osd: osd/PG.cc: 3837: FAILED assert(0 == “Running incompatible OSD”) (<a class="reference external" href="http://tracker.ceph.com/issues/11661">issue#11661</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/7206">pr#7206</a>, David Zafman)</p></li>
<li><p>osd: osd/ReplicatedPG: Recency fix (<a class="reference external" href="http://tracker.ceph.com/issues/14320">issue#14320</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/7207">pr#7207</a>, Sage Weil, Robert LeBlanc)</p></li>
<li><p>osd: pg stuck in replay (<a class="reference external" href="http://tracker.ceph.com/issues/13116">issue#13116</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/6401">pr#6401</a>, Sage Weil)</p></li>
<li><p>osd: race condition detected during send_failures (<a class="reference external" href="http://tracker.ceph.com/issues/13821">issue#13821</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/6755">pr#6755</a>, Sage Weil)</p></li>
<li><p>osd: randomize scrub times (<a class="reference external" href="http://tracker.ceph.com/issues/10973">issue#10973</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/6199">pr#6199</a>, Kefu Chai)</p></li>
<li><p>osd: requeue_scrub when kick_object_context_blocked (<a class="reference external" href="http://tracker.ceph.com/issues/12515">issue#12515</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/5891">pr#5891</a>, Xinze Chi)</p></li>
<li><p>osd: revert: use GMT time for hitsets (<a class="reference external" href="http://tracker.ceph.com/issues/13812">issue#13812</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/6644">pr#6644</a>, Loic Dachary)</p></li>
<li><p>osd: segfault in agent_work (<a class="reference external" href="http://tracker.ceph.com/issues/13199">issue#13199</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/6146">pr#6146</a>, Samuel Just)</p></li>
<li><p>osd: should recalc the min_last_epoch_clean when decode PGMap (<a class="reference external" href="http://tracker.ceph.com/issues/13112">issue#13112</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/6154">pr#6154</a>, Kefu Chai)</p></li>
<li><p>osd: smaller object_info_t xattrs (<a class="reference external" href="http://tracker.ceph.com/issues/14803">issue#14803</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/6544">pr#6544</a>, Sage Weil)</p></li>
<li><p>osd: we do not ignore notify from down osds (<a class="reference external" href="http://tracker.ceph.com/issues/12990">issue#12990</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/6158">pr#6158</a>, Samuel Just)</p></li>
<li><p>rbd: QEMU hangs after creating snapshot and stopping VM (<a class="reference external" href="http://tracker.ceph.com/issues/13726">issue#13726</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/6586">pr#6586</a>, Jason Dillaman)</p></li>
<li><p>rbd: TaskFinisher::cancel should remove event from SafeTimer (<a class="reference external" href="http://tracker.ceph.com/issues/14476">issue#14476</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/7417">pr#7417</a>, Douglas Fuller)</p></li>
<li><p>rbd: avoid re-writing old-format image header on resize (<a class="reference external" href="http://tracker.ceph.com/issues/13674">issue#13674</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/6585">pr#6585</a>, Jason Dillaman)</p></li>
<li><p>rbd: fix bench-write (<a class="reference external" href="http://tracker.ceph.com/issues/14225">issue#14225</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/7183">pr#7183</a>, Sage Weil)</p></li>
<li><p>rbd: rbd-replay does not check for EOF and goes to endless loop (<a class="reference external" href="http://tracker.ceph.com/issues/14452">issue#14452</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/7416">pr#7416</a>, Mykola Golub)</p></li>
<li><p>rbd: rbd-replay-prep and rbd-replay improvements (<a class="reference external" href="http://tracker.ceph.com/issues/13221">issue#13221</a>, <a class="reference external" href="http://tracker.ceph.com/issues/13220">issue#13220</a>, <a class="reference external" href="http://tracker.ceph.com/issues/13378">issue#13378</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/6286">pr#6286</a>, Jason Dillaman)</p></li>
<li><p>rbd: verify self-managed snapshot functionality on image create (<a class="reference external" href="http://tracker.ceph.com/issues/13633">issue#13633</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/7182">pr#7182</a>, Jason Dillaman)</p></li>
<li><p>rgw: Make RGW_MAX_PUT_SIZE configurable (<a class="reference external" href="http://tracker.ceph.com/issues/6999">issue#6999</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/7441">pr#7441</a>, Vladislav Odintsov, Yuan Zhou)</p></li>
<li><p>rgw: Setting ACL on Object removes ETag (<a class="reference external" href="http://tracker.ceph.com/issues/12955">issue#12955</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/6620">pr#6620</a>, Brian Felton)</p></li>
<li><p>rgw: backport content-type casing (<a class="reference external" href="http://tracker.ceph.com/issues/12939">issue#12939</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/5910">pr#5910</a>, Robin H. Johnson)</p></li>
<li><p>rgw: bucket listing hangs on versioned buckets (<a class="reference external" href="http://tracker.ceph.com/issues/12913">issue#12913</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/6352">pr#6352</a>, Yehuda Sadeh)</p></li>
<li><p>rgw: fix wrong etag calculation during POST on S3 bucket. (<a class="reference external" href="http://tracker.ceph.com/issues/11241">issue#11241</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/7442">pr#7442</a>, Vladislav Odintsov, Radoslaw Zarzynski)</p></li>
<li><p>rgw: get bucket location returns region name, not region api name (<a class="reference external" href="http://tracker.ceph.com/issues/13458">issue#13458</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/6349">pr#6349</a>, Yehuda Sadeh)</p></li>
<li><p>rgw: missing handling of encoding-type=url when listing keys in bucket (<a class="reference external" href="http://tracker.ceph.com/issues/12735">issue#12735</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/6527">pr#6527</a>, Jeff Weber)</p></li>
<li><p>rgw: orphan tool should be careful about removing head objects (<a class="reference external" href="http://tracker.ceph.com/issues/12958">issue#12958</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/6351">pr#6351</a>, Yehuda Sadeh)</p></li>
<li><p>rgw: orphans finish segfaults (<a class="reference external" href="http://tracker.ceph.com/issues/13824">issue#13824</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/7186">pr#7186</a>, Igor Fedotov)</p></li>
<li><p>rgw: rgw-admin: document orphans commands in usage (<a class="reference external" href="http://tracker.ceph.com/issues/14516">issue#14516</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/7526">pr#7526</a>, Yehuda Sadeh)</p></li>
<li><p>rgw: swift API returns more than real object count and bytes used when retrieving account metadata (<a class="reference external" href="http://tracker.ceph.com/issues/13140">issue#13140</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/6512">pr#6512</a>, Sangdi Xu)</p></li>
<li><p>rgw: swift use Civetweb ssl can not get right url (<a class="reference external" href="http://tracker.ceph.com/issues/13628">issue#13628</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/6491">pr#6491</a>, Weijun Duan)</p></li>
<li><p>rgw: value of Swift API’s X-Object-Manifest header is not url_decoded during segment look up (<a class="reference external" href="http://tracker.ceph.com/issues/12728">issue#12728</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/6353">pr#6353</a>, Radoslaw Zarzynski)</p></li>
<li><p>tests: fixed broken Makefiles after integration of ttng into rados (<a class="reference external" href="http://tracker.ceph.com/issues/13210">issue#13210</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/6322">pr#6322</a>, Sebastien Ponce)</p></li>
<li><p>tests: fsx failed to compile (<a class="reference external" href="http://tracker.ceph.com/issues/14384">issue#14384</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/7501">pr#7501</a>, Greg Farnum)</p></li>
<li><p>tests: notification slave needs to wait for master (<a class="reference external" href="http://tracker.ceph.com/issues/13810">issue#13810</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/7226">pr#7226</a>, Jason Dillaman)</p></li>
<li><p>tests: qa: remove legacy OS support from rbd/qemu-iotests (<a class="reference external" href="http://tracker.ceph.com/issues/13483">issue#13483</a>, <a class="reference external" href="http://tracker.ceph.com/issues/14385">issue#14385</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/7252">pr#7252</a>, Vasu Kulkarni, Jason Dillaman)</p></li>
<li><p>tests: testprofile must be removed before it is re-created (<a class="reference external" href="http://tracker.ceph.com/issues/13664">issue#13664</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/6450">pr#6450</a>, Loic Dachary)</p></li>
<li><p>tools: ceph-monstore-tool must do out_store.close() (<a class="reference external" href="http://tracker.ceph.com/issues/10093">issue#10093</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/7347">pr#7347</a>, huangjun)</p></li>
<li><p>tools: heavy memory shuffling in rados bench (<a class="reference external" href="http://tracker.ceph.com/issues/12946">issue#12946</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/5810">pr#5810</a>, Piotr Dałek)</p></li>
<li><p>tools: race condition in rados bench (<a class="reference external" href="http://tracker.ceph.com/issues/12947">issue#12947</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/6791">pr#6791</a>, Piotr Dałek)</p></li>
<li><p>tools: tool for artificially inflate the leveldb of the mon store for testing purposes  (<a class="reference external" href="http://tracker.ceph.com/issues/10093">issue#10093</a>, <a class="reference external" href="http://tracker.ceph.com/issues/11815">issue#11815</a>, <a class="reference external" href="http://tracker.ceph.com/issues/14217">issue#14217</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/7412">pr#7412</a>, Cilang Zhao, Bo Cai, Kefu Chai, huangjun, Joao Eduardo Luis)</p></li>
</ul>
</div>
</div>
<div class="section" id="v0-94-5-hammer">
<h1>v0.94.5 Hammer<a class="headerlink" href="#v0-94-5-hammer" title="Permalink to this headline">¶</a></h1>
<p>This Hammer point release fixes a critical regression in librbd that can cause
QEMU/KVM to crash when caching is enabled on images that have been cloned.</p>
<p>All v0.94.4 Hammer users are strongly encouraged to upgrade.</p>
<div class="section" id="id13">
<h2>Notable Changes<a class="headerlink" href="#id13" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>librbd: potential assertion failure during cache read (<a class="reference external" href="http://tracker.ceph.com/issues/13559">issue#13559</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/6348">pr#6348</a>, Jason Dillaman)</p></li>
<li><p>osd: osd/ReplicatedPG: remove stray debug line (<a class="reference external" href="http://tracker.ceph.com/issues/13455">issue#13455</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/6362">pr#6362</a>, Sage Weil)</p></li>
<li><p>tests: qemu workunit refers to apt-mirror.front.sepia.ceph.com (<a class="reference external" href="http://tracker.ceph.com/issues/13420">issue#13420</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/6330">pr#6330</a>, Yuan Zhou)</p></li>
</ul>
<p>For more detailed information, see <a class="reference download internal" download="" href="../../_downloads/122a9bd47871f555c91b4540d52eccc9/v0.94.5.txt"><code class="xref download docutils literal notranslate"><span class="pre">the</span> <span class="pre">complete</span> <span class="pre">changelog</span></code></a>.</p>
</div>
</div>
<div class="section" id="v0-94-4-hammer">
<h1>v0.94.4 Hammer<a class="headerlink" href="#v0-94-4-hammer" title="Permalink to this headline">¶</a></h1>
<p>This Hammer point release fixes several important bugs in Hammer, as well as
fixing interoperability issues that are required before an upgrade to
Infernalis. That is, all users of earlier version of Hammer or any
version of Firefly will first need to upgrade to hammer v0.94.4 or
later before upgrading to Infernalis (or future releases).</p>
<p>All v0.94.x Hammer users are strongly encouraged to upgrade.</p>
<div class="section" id="id14">
<h2>Notable Changes<a class="headerlink" href="#id14" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>build/ops: ceph.spec.in: 50-rbd.rules conditional is wrong (<a class="reference external" href="http://tracker.ceph.com/issues/12166">issue#12166</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/5207">pr#5207</a>, Nathan Cutler)</p></li>
<li><p>build/ops: ceph.spec.in: ceph-common needs python-argparse on older distros, but doesn’t require it (<a class="reference external" href="http://tracker.ceph.com/issues/12034">issue#12034</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/5216">pr#5216</a>, Nathan Cutler)</p></li>
<li><p>build/ops: ceph.spec.in: radosgw requires apache for SUSE only – makes no sense (<a class="reference external" href="http://tracker.ceph.com/issues/12358">issue#12358</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/5411">pr#5411</a>, Nathan Cutler)</p></li>
<li><p>build/ops: ceph.spec.in: rpm: cephfs_java not fully conditionalized (<a class="reference external" href="http://tracker.ceph.com/issues/11991">issue#11991</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/5202">pr#5202</a>, Nathan Cutler)</p></li>
<li><p>build/ops: ceph.spec.in: rpm: not possible to turn off Java (<a class="reference external" href="http://tracker.ceph.com/issues/11992">issue#11992</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/5203">pr#5203</a>, Owen Synge)</p></li>
<li><p>build/ops: ceph.spec.in: running fdupes unnecessarily (<a class="reference external" href="http://tracker.ceph.com/issues/12301">issue#12301</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/5223">pr#5223</a>, Nathan Cutler)</p></li>
<li><p>build/ops: ceph.spec.in: snappy-devel for all supported distros (<a class="reference external" href="http://tracker.ceph.com/issues/12361">issue#12361</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/5264">pr#5264</a>, Nathan Cutler)</p></li>
<li><p>build/ops: ceph.spec.in: SUSE/openSUSE builds need libbz2-devel (<a class="reference external" href="http://tracker.ceph.com/issues/11629">issue#11629</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/5204">pr#5204</a>, Nathan Cutler)</p></li>
<li><p>build/ops: ceph.spec.in: useless %py_requires breaks SLE11-SP3 build (<a class="reference external" href="http://tracker.ceph.com/issues/12351">issue#12351</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/5412">pr#5412</a>, Nathan Cutler)</p></li>
<li><p>build/ops: error in ext_mime_map_init() when /etc/mime.types is missing (<a class="reference external" href="http://tracker.ceph.com/issues/11864">issue#11864</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/5385">pr#5385</a>, Ken Dreyer)</p></li>
<li><p>build/ops: upstart: limit respawn to 3 in 30 mins (instead of 5 in 30s) (<a class="reference external" href="http://tracker.ceph.com/issues/11798">issue#11798</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/5930">pr#5930</a>, Sage Weil)</p></li>
<li><p>build/ops: With root as default user, unable to have multiple RGW instances running (<a class="reference external" href="http://tracker.ceph.com/issues/10927">issue#10927</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/6161">pr#6161</a>, Sage Weil)</p></li>
<li><p>build/ops: With root as default user, unable to have multiple RGW instances running (<a class="reference external" href="http://tracker.ceph.com/issues/11140">issue#11140</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/6161">pr#6161</a>, Sage Weil)</p></li>
<li><p>build/ops: With root as default user, unable to have multiple RGW instances running (<a class="reference external" href="http://tracker.ceph.com/issues/11686">issue#11686</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/6161">pr#6161</a>, Sage Weil)</p></li>
<li><p>build/ops: With root as default user, unable to have multiple RGW instances running (<a class="reference external" href="http://tracker.ceph.com/issues/12407">issue#12407</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/6161">pr#6161</a>, Sage Weil)</p></li>
<li><p>cli: ceph: cli throws exception on unrecognized errno (<a class="reference external" href="http://tracker.ceph.com/issues/11354">issue#11354</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/5368">pr#5368</a>, Kefu Chai)</p></li>
<li><p>cli: ceph tell: broken error message / misleading hinting (<a class="reference external" href="http://tracker.ceph.com/issues/11101">issue#11101</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/5371">pr#5371</a>, Kefu Chai)</p></li>
<li><p>common: arm: all programs that link to librados2 hang forever on startup (<a class="reference external" href="http://tracker.ceph.com/issues/12505">issue#12505</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/5366">pr#5366</a>, Boris Ranto)</p></li>
<li><p>common: buffer: critical bufferlist::zero bug (<a class="reference external" href="http://tracker.ceph.com/issues/12252">issue#12252</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/5365">pr#5365</a>, Haomai Wang)</p></li>
<li><p>common: ceph-object-corpus: add 0.94.2-207-g88e7ee7 hammer objects (<a class="reference external" href="http://tracker.ceph.com/issues/13070">issue#13070</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/5551">pr#5551</a>, Sage Weil)</p></li>
<li><p>common: do not insert emtpy ptr when rebuild emtpy bufferlist (<a class="reference external" href="http://tracker.ceph.com/issues/12775">issue#12775</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/5764">pr#5764</a>, Xinze Chi)</p></li>
<li><p>common: [  FAILED  ] TestLibRBD.BlockingAIO (<a class="reference external" href="http://tracker.ceph.com/issues/12479">issue#12479</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/5768">pr#5768</a>, Jason Dillaman)</p></li>
<li><p>common: LibCephFS.GetPoolId failure (<a class="reference external" href="http://tracker.ceph.com/issues/12598">issue#12598</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/5887">pr#5887</a>, Yan, Zheng)</p></li>
<li><p>common: Memory leak in Mutex.cc, pthread_mutexattr_init without pthread_mutexattr_destroy (<a class="reference external" href="http://tracker.ceph.com/issues/11762">issue#11762</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/5378">pr#5378</a>, Ketor Meng)</p></li>
<li><p>common: object_map_update fails with -EINVAL return code (<a class="reference external" href="http://tracker.ceph.com/issues/12611">issue#12611</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/5559">pr#5559</a>, Jason Dillaman)</p></li>
<li><p>common: Pipe: Drop connect_seq increase line (<a class="reference external" href="http://tracker.ceph.com/issues/13093">issue#13093</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/5908">pr#5908</a>, Haomai Wang)</p></li>
<li><p>common: recursive lock of md_config_t (0) (<a class="reference external" href="http://tracker.ceph.com/issues/12614">issue#12614</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/5759">pr#5759</a>, Josh Durgin)</p></li>
<li><p>crush: ceph osd crush reweight-subtree does not reweight parent node (<a class="reference external" href="http://tracker.ceph.com/issues/11855">issue#11855</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/5374">pr#5374</a>, Sage Weil)</p></li>
<li><p>doc: update docs to point to download.ceph.com (<a class="reference external" href="http://tracker.ceph.com/issues/13162">issue#13162</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/6156">pr#6156</a>, Alfredo Deza)</p></li>
<li><p>fs: ceph-fuse 0.94.2-1trusty segfaults / aborts (<a class="reference external" href="http://tracker.ceph.com/issues/12297">issue#12297</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/5381">pr#5381</a>, Greg Farnum)</p></li>
<li><p>fs: segfault launching ceph-fuse with bad –name (<a class="reference external" href="http://tracker.ceph.com/issues/12417">issue#12417</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/5382">pr#5382</a>, John Spray)</p></li>
<li><p>librados: Change radosgw pools default crush ruleset (<a class="reference external" href="http://tracker.ceph.com/issues/11640">issue#11640</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/5754">pr#5754</a>, Yuan Zhou)</p></li>
<li><p>librbd: correct issues discovered via lockdep / helgrind (<a class="reference external" href="http://tracker.ceph.com/issues/12345">issue#12345</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/5296">pr#5296</a>, Jason Dillaman)</p></li>
<li><p>librbd: Crash during TestInternal.MultipleResize (<a class="reference external" href="http://tracker.ceph.com/issues/12664">issue#12664</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/5769">pr#5769</a>, Jason Dillaman)</p></li>
<li><p>librbd: deadlock during cooperative exclusive lock transition (<a class="reference external" href="http://tracker.ceph.com/issues/11537">issue#11537</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/5319">pr#5319</a>, Jason Dillaman)</p></li>
<li><p>librbd: Possible crash while concurrently writing and shrinking an image (<a class="reference external" href="http://tracker.ceph.com/issues/11743">issue#11743</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/5318">pr#5318</a>, Jason Dillaman)</p></li>
<li><p>mon: add a cache layer over MonitorDBStore (<a class="reference external" href="http://tracker.ceph.com/issues/12638">issue#12638</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/5697">pr#5697</a>, Kefu Chai)</p></li>
<li><p>mon: fix crush testing for new pools (<a class="reference external" href="http://tracker.ceph.com/issues/13400">issue#13400</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/6192">pr#6192</a>, Sage Weil)</p></li>
<li><p>mon: get pools health’info have error (<a class="reference external" href="http://tracker.ceph.com/issues/12402">issue#12402</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/5369">pr#5369</a>, renhwztetecs)</p></li>
<li><p>mon: implicit erasure code crush ruleset is not validated (<a class="reference external" href="http://tracker.ceph.com/issues/11814">issue#11814</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/5276">pr#5276</a>, Loic Dachary)</p></li>
<li><p>mon: PaxosService: call post_refresh() instead of post_paxos_update() (<a class="reference external" href="http://tracker.ceph.com/issues/11470">issue#11470</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/5359">pr#5359</a>, Joao Eduardo Luis)</p></li>
<li><p>mon: pgmonitor: wrong at/near target max“ reporting (<a class="reference external" href="http://tracker.ceph.com/issues/12401">issue#12401</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/5370">pr#5370</a>, huangjun)</p></li>
<li><p>mon: register_new_pgs() should check ruleno instead of its index (<a class="reference external" href="http://tracker.ceph.com/issues/12210">issue#12210</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/5377">pr#5377</a>, Xinze Chi)</p></li>
<li><p>mon: Show osd as NONE in ceph osd map &lt;pool&gt; &lt;object&gt;  output (<a class="reference external" href="http://tracker.ceph.com/issues/11820">issue#11820</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/5376">pr#5376</a>, Shylesh Kumar)</p></li>
<li><p>mon: the output is wrong when runing ceph osd reweight (<a class="reference external" href="http://tracker.ceph.com/issues/12251">issue#12251</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/5372">pr#5372</a>, Joao Eduardo Luis)</p></li>
<li><p>osd: allow peek_map_epoch to return an error (<a class="reference external" href="http://tracker.ceph.com/issues/13060">issue#13060</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/5892">pr#5892</a>, Sage Weil)</p></li>
<li><p>osd: cache agent is idle although one object is left in the cache (<a class="reference external" href="http://tracker.ceph.com/issues/12673">issue#12673</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/5765">pr#5765</a>, Loic Dachary)</p></li>
<li><p>osd: copy-from doesn’t preserve truncate_{seq,size} (<a class="reference external" href="http://tracker.ceph.com/issues/12551">issue#12551</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/5885">pr#5885</a>, Samuel Just)</p></li>
<li><p>osd: crash creating/deleting pools (<a class="reference external" href="http://tracker.ceph.com/issues/12429">issue#12429</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/5527">pr#5527</a>, John Spray)</p></li>
<li><p>osd: fix repair when recorded digest is wrong (<a class="reference external" href="http://tracker.ceph.com/issues/12577">issue#12577</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/5468">pr#5468</a>, Sage Weil)</p></li>
<li><p>osd: include/ceph_features: define HAMMER_0_94_4 feature (<a class="reference external" href="http://tracker.ceph.com/issues/13026">issue#13026</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/5687">pr#5687</a>, Sage Weil)</p></li>
<li><p>osd: is_new_interval() fixes (<a class="reference external" href="http://tracker.ceph.com/issues/10399">issue#10399</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/5691">pr#5691</a>, Jason Dillaman)</p></li>
<li><p>osd: is_new_interval() fixes (<a class="reference external" href="http://tracker.ceph.com/issues/11771">issue#11771</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/5691">pr#5691</a>, Jason Dillaman)</p></li>
<li><p>osd: long standing slow requests: connection-&gt;session-&gt;waiting_for_map-&gt;connection ref cycle (<a class="reference external" href="http://tracker.ceph.com/issues/12338">issue#12338</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/5761">pr#5761</a>, Samuel Just)</p></li>
<li><p>osd: Mutex Assert from PipeConnection::try_get_pipe (<a class="reference external" href="http://tracker.ceph.com/issues/12437">issue#12437</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/5758">pr#5758</a>, David Zafman)</p></li>
<li><p>osd: pg_interval_t::check_new_interval - for ec pool, should not rely on min_size to determine if the PG was active at the interval (<a class="reference external" href="http://tracker.ceph.com/issues/12162">issue#12162</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/5373">pr#5373</a>, Guang G Yang)</p></li>
<li><p>osd: PGLog.cc: 732: FAILED assert(log.log.size() == log_keys_debug.size()) (<a class="reference external" href="http://tracker.ceph.com/issues/12652">issue#12652</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/5763">pr#5763</a>, Sage Weil)</p></li>
<li><p>osd: PGLog::proc_replica_log: correctly handle case where entries between olog.head and log.tail were split out (<a class="reference external" href="http://tracker.ceph.com/issues/11358">issue#11358</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/5380">pr#5380</a>, Samuel Just)</p></li>
<li><p>osd: read on chunk-aligned xattr not handled (<a class="reference external" href="http://tracker.ceph.com/issues/12309">issue#12309</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/5367">pr#5367</a>, Sage Weil)</p></li>
<li><p>osd: suicide timeout during peering - search for missing objects (<a class="reference external" href="http://tracker.ceph.com/issues/12523">issue#12523</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/5762">pr#5762</a>, Guang G Yang)</p></li>
<li><p>osd: WBThrottle::clear_object: signal on cond when we reduce throttle values (<a class="reference external" href="http://tracker.ceph.com/issues/12223">issue#12223</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/5757">pr#5757</a>, Samuel Just)</p></li>
<li><p>rbd: crash during shutdown after writeback blocked by IO errors (<a class="reference external" href="http://tracker.ceph.com/issues/12597">issue#12597</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/5767">pr#5767</a>, Jianpeng Ma)</p></li>
<li><p>rgw: add delimiter to prefix only when path is specified (<a class="reference external" href="http://tracker.ceph.com/issues/12960">issue#12960</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/5860">pr#5860</a>, Sylvain Baubeau)</p></li>
<li><p>rgw: create a tool for orphaned objects cleanup (<a class="reference external" href="http://tracker.ceph.com/issues/9604">issue#9604</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/5717">pr#5717</a>, Yehuda Sadeh)</p></li>
<li><p>rgw: don’t preserve acls when copying object (<a class="reference external" href="http://tracker.ceph.com/issues/11563">issue#11563</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/6039">pr#6039</a>, Yehuda Sadeh)</p></li>
<li><p>rgw: don’t preserve acls when copying object (<a class="reference external" href="http://tracker.ceph.com/issues/12370">issue#12370</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/6039">pr#6039</a>, Yehuda Sadeh)</p></li>
<li><p>rgw: don’t preserve acls when copying object (<a class="reference external" href="http://tracker.ceph.com/issues/13015">issue#13015</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/6039">pr#6039</a>, Yehuda Sadeh)</p></li>
<li><p>rgw: Ensure that swift keys don’t include backslashes (<a class="reference external" href="http://tracker.ceph.com/issues/7647">issue#7647</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/5716">pr#5716</a>, Yehuda Sadeh)</p></li>
<li><p>rgw: GWWatcher::handle_error -&gt; common/Mutex.cc: 95: FAILED assert(r == 0) (<a class="reference external" href="http://tracker.ceph.com/issues/12208">issue#12208</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/6164">pr#6164</a>, Yehuda Sadeh)</p></li>
<li><p>rgw: HTTP return code is not being logged by CivetWeb  (<a class="reference external" href="http://tracker.ceph.com/issues/12432">issue#12432</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/5498">pr#5498</a>, Yehuda Sadeh)</p></li>
<li><p>rgw: init_rados failed leads to repeated delete (<a class="reference external" href="http://tracker.ceph.com/issues/12978">issue#12978</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/6165">pr#6165</a>, Xiaowei Chen)</p></li>
<li><p>rgw: init some manifest fields when handling explicit objs (<a class="reference external" href="http://tracker.ceph.com/issues/11455">issue#11455</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/5732">pr#5732</a>, Yehuda Sadeh)</p></li>
<li><p>rgw: Keystone Fernet tokens break auth (<a class="reference external" href="http://tracker.ceph.com/issues/12761">issue#12761</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/6162">pr#6162</a>, Abhishek Lekshmanan)</p></li>
<li><p>rgw: region data still exist in region-map after region-map update (<a class="reference external" href="http://tracker.ceph.com/issues/12964">issue#12964</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/6163">pr#6163</a>, dwj192)</p></li>
<li><p>rgw: remove trailing :port from host for purposes of subdomain matching (<a class="reference external" href="http://tracker.ceph.com/issues/12353">issue#12353</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/6042">pr#6042</a>, Yehuda Sadeh)</p></li>
<li><p>rgw: rest-bench common/WorkQueue.cc: 54: FAILED assert(_threads.empty()) (<a class="reference external" href="http://tracker.ceph.com/issues/3896">issue#3896</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/5383">pr#5383</a>, huangjun)</p></li>
<li><p>rgw: returns requested bucket name raw in Bucket response header (<a class="reference external" href="http://tracker.ceph.com/issues/12537">issue#12537</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/5715">pr#5715</a>, Yehuda Sadeh)</p></li>
<li><p>rgw: segmentation fault when rgw_gc_max_objs &gt; HASH_PRIME (<a class="reference external" href="http://tracker.ceph.com/issues/12630">issue#12630</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/5719">pr#5719</a>, Ruifeng Yang)</p></li>
<li><p>rgw: segments are read during HEAD on Swift DLO (<a class="reference external" href="http://tracker.ceph.com/issues/12780">issue#12780</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/6160">pr#6160</a>, Yehuda Sadeh)</p></li>
<li><p>rgw: setting max number of buckets for user via ceph.conf option  (<a class="reference external" href="http://tracker.ceph.com/issues/12714">issue#12714</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/6166">pr#6166</a>, Vikhyat Umrao)</p></li>
<li><p>rgw: Swift API: X-Trans-Id header is wrongly formatted (<a class="reference external" href="http://tracker.ceph.com/issues/12108">issue#12108</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/5721">pr#5721</a>, Radoslaw Zarzynski)</p></li>
<li><p>rgw: testGetContentType and testHead failed (<a class="reference external" href="http://tracker.ceph.com/issues/11091">issue#11091</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/5718">pr#5718</a>, Radoslaw Zarzynski)</p></li>
<li><p>rgw: testGetContentType and testHead failed (<a class="reference external" href="http://tracker.ceph.com/issues/11438">issue#11438</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/5718">pr#5718</a>, Radoslaw Zarzynski)</p></li>
<li><p>rgw: testGetContentType and testHead failed (<a class="reference external" href="http://tracker.ceph.com/issues/12157">issue#12157</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/5718">pr#5718</a>, Radoslaw Zarzynski)</p></li>
<li><p>rgw: testGetContentType and testHead failed (<a class="reference external" href="http://tracker.ceph.com/issues/12158">issue#12158</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/5718">pr#5718</a>, Radoslaw Zarzynski)</p></li>
<li><p>rgw: testGetContentType and testHead failed (<a class="reference external" href="http://tracker.ceph.com/issues/12363">issue#12363</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/5718">pr#5718</a>, Radoslaw Zarzynski)</p></li>
<li><p>rgw: the arguments ‘domain’ should not be assigned when return false (<a class="reference external" href="http://tracker.ceph.com/issues/12629">issue#12629</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/5720">pr#5720</a>, Ruifeng Yang)</p></li>
<li><p>tests: qa/workunits/cephtool/test.sh: don’t assume crash_replay_interval=45 (<a class="reference external" href="http://tracker.ceph.com/issues/13406">issue#13406</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/6172">pr#6172</a>, Sage Weil)</p></li>
<li><p>tests: TEST_crush_rule_create_erasure consistently fails on i386 builder (<a class="reference external" href="http://tracker.ceph.com/issues/12419">issue#12419</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/6201">pr#6201</a>, Loic Dachary)</p></li>
<li><p>tools: ceph-disk zap should ensure block device (<a class="reference external" href="http://tracker.ceph.com/issues/11272">issue#11272</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/5755">pr#5755</a>, Loic Dachary)</p></li>
</ul>
<p>For more detailed information, see <a class="reference download internal" download="" href="../../_downloads/e70c8d6e456e0527540fcbb01fb50e34/v0.94.4.txt"><code class="xref download docutils literal notranslate"><span class="pre">the</span> <span class="pre">complete</span> <span class="pre">changelog</span></code></a>.</p>
</div>
</div>
<div class="section" id="v0-94-3-hammer">
<h1>v0.94.3 Hammer<a class="headerlink" href="#v0-94-3-hammer" title="Permalink to this headline">¶</a></h1>
<p>This Hammer point release fixes a critical (though rare) data
corruption bug that could be triggered when logs are rotated via
SIGHUP.  It also fixes a range of other important bugs in the OSD,
monitor, RGW, RGW, and CephFS.</p>
<p>All v0.94.x Hammer users are strongly encouraged to upgrade.</p>
<div class="section" id="upgrading">
<h2>Upgrading<a class="headerlink" href="#upgrading" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>The <code class="docutils literal notranslate"><span class="pre">pg</span> <span class="pre">ls-by-{pool,primary,osd}</span></code> commands and <code class="docutils literal notranslate"><span class="pre">pg</span> <span class="pre">ls</span></code> now take
the argument <code class="docutils literal notranslate"><span class="pre">recovering</span></code> instead of <code class="docutils literal notranslate"><span class="pre">recovery</span></code> in order to
include the recovering pgs in the listed pgs.</p></li>
</ul>
</div>
<div class="section" id="id26">
<h2>Notable Changes<a class="headerlink" href="#id26" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>librbd: aio calls may block (<a class="reference external" href="http://tracker.ceph.com/issues/11770">issue#11770</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/4875">pr#4875</a>, Jason Dillaman)</p></li>
<li><p>osd: make the all osd/filestore thread pool suicide timeouts separately configurable (<a class="reference external" href="http://tracker.ceph.com/issues/11701">issue#11701</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/5159">pr#5159</a>, Samuel Just)</p></li>
<li><p>mon: ceph fails to compile with boost 1.58 (<a class="reference external" href="http://tracker.ceph.com/issues/11982">issue#11982</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/5122">pr#5122</a>, Kefu Chai)</p></li>
<li><p>tests: TEST_crush_reject_empty must not run a mon (<a class="reference external" href="http://tracker.ceph.com/issues/12285,11975">issue#12285,11975</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/5208">pr#5208</a>, Kefu Chai)</p></li>
<li><p>osd: FAILED assert(!old_value.deleted()) in upgrade:giant-x-hammer-distro-basic-multi run (<a class="reference external" href="http://tracker.ceph.com/issues/11983">issue#11983</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/5121">pr#5121</a>, Samuel Just)</p></li>
<li><p>build/ops: linking ceph to tcmalloc causes segfault on SUSE SLE11-SP3 (<a class="reference external" href="http://tracker.ceph.com/issues/12368">issue#12368</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/5265">pr#5265</a>, Thorsten Behrens)</p></li>
<li><p>common: utf8 and old gcc breakage on RHEL6.5 (<a class="reference external" href="http://tracker.ceph.com/issues/7387">issue#7387</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/4687">pr#4687</a>, Kefu Chai)</p></li>
<li><p>crush: take crashes due to invalid arg (<a class="reference external" href="http://tracker.ceph.com/issues/11740">issue#11740</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/4891">pr#4891</a>, Sage Weil)</p></li>
<li><p>rgw: need conversion tool to handle fixes following #11974 (<a class="reference external" href="http://tracker.ceph.com/issues/12502">issue#12502</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/5384">pr#5384</a>, Yehuda Sadeh)</p></li>
<li><p>rgw: Swift API: support for 202 Accepted response code on container creation (<a class="reference external" href="http://tracker.ceph.com/issues/12299">issue#12299</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/5214">pr#5214</a>, Radoslaw Zarzynski)</p></li>
<li><p>common: Log::reopen_log_file: take m_flush_mutex (<a class="reference external" href="http://tracker.ceph.com/issues/12520">issue#12520</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/5405">pr#5405</a>, Samuel Just)</p></li>
<li><p>rgw: Properly respond to the Connection header with Civetweb (<a class="reference external" href="http://tracker.ceph.com/issues/12398">issue#12398</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/5284">pr#5284</a>, Wido den Hollander)</p></li>
<li><p>rgw: multipart list part response returns incorrect field (<a class="reference external" href="http://tracker.ceph.com/issues/12399">issue#12399</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/5285">pr#5285</a>, Henry Chang)</p></li>
<li><p>build/ops: ceph.spec.in: 95-ceph-osd.rules, mount.ceph, and mount.fuse.ceph not installed properly on SUSE (<a class="reference external" href="http://tracker.ceph.com/issues/12397">issue#12397</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/5283">pr#5283</a>, Nathan Cutler)</p></li>
<li><p>rgw: radosgw-admin dumps user info twice (<a class="reference external" href="http://tracker.ceph.com/issues/12400">issue#12400</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/5286">pr#5286</a>, guce)</p></li>
<li><p>doc: fix doc build (<a class="reference external" href="http://tracker.ceph.com/issues/12180">issue#12180</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/5095">pr#5095</a>, Kefu Chai)</p></li>
<li><p>tests: backport 11493 fixes, and test, preventing ec cache pools (<a class="reference external" href="http://tracker.ceph.com/issues/12314">issue#12314</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/4961">pr#4961</a>, Samuel Just)</p></li>
<li><p>rgw: does not send Date HTTP header when civetweb frontend is used (<a class="reference external" href="http://tracker.ceph.com/issues/11872">issue#11872</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/5228">pr#5228</a>, Radoslaw Zarzynski)</p></li>
<li><p>mon: pg ls is broken (<a class="reference external" href="http://tracker.ceph.com/issues/11910">issue#11910</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/5160">pr#5160</a>, Kefu Chai)</p></li>
<li><p>librbd: A client opening an image mid-resize can result in the object map being invalidated (<a class="reference external" href="http://tracker.ceph.com/issues/12237">issue#12237</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/5279">pr#5279</a>, Jason Dillaman)</p></li>
<li><p>doc: missing man pages for ceph-create-keys, ceph-disk-* (<a class="reference external" href="http://tracker.ceph.com/issues/11862">issue#11862</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/4846">pr#4846</a>, Nathan Cutler)</p></li>
<li><p>tools: ceph-post-file fails on rhel7 (<a class="reference external" href="http://tracker.ceph.com/issues/11876">issue#11876</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/5038">pr#5038</a>, Sage Weil)</p></li>
<li><p>build/ops: rcceph script is buggy (<a class="reference external" href="http://tracker.ceph.com/issues/12090">issue#12090</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/5028">pr#5028</a>, Owen Synge)</p></li>
<li><p>rgw: Bucket header is enclosed by quotes (<a class="reference external" href="http://tracker.ceph.com/issues/11874">issue#11874</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/4862">pr#4862</a>, Wido den Hollander)</p></li>
<li><p>build/ops: packaging: add SuSEfirewall2 service files (<a class="reference external" href="http://tracker.ceph.com/issues/12092">issue#12092</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/5030">pr#5030</a>, Tim Serong)</p></li>
<li><p>rgw: Keystone PKI token expiration is not enforced (<a class="reference external" href="http://tracker.ceph.com/issues/11722">issue#11722</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/4884">pr#4884</a>, Anton Aksola)</p></li>
<li><p>build/ops: debian/control: ceph-common (&gt;&gt; 0.94.2) must be &gt;= 0.94.2-2 (<a class="reference external" href="http://tracker.ceph.com/issues/12529,11998">issue#12529,11998</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/5417">pr#5417</a>, Loic Dachary)</p></li>
<li><p>mon: Clock skew causes missing summary and confuses Calamari (<a class="reference external" href="http://tracker.ceph.com/issues/11879">issue#11879</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/4868">pr#4868</a>, Thorsten Behrens)</p></li>
<li><p>rgw: rados objects wronly deleted (<a class="reference external" href="http://tracker.ceph.com/issues/12099">issue#12099</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/5117">pr#5117</a>, wuxingyi)</p></li>
<li><p>tests: kernel_untar_build fails on EL7 (<a class="reference external" href="http://tracker.ceph.com/issues/12098">issue#12098</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/5119">pr#5119</a>, Greg Farnum)</p></li>
<li><p>fs: Fh ref count will leak if readahead does not need to do read from osd (<a class="reference external" href="http://tracker.ceph.com/issues/12319">issue#12319</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/5427">pr#5427</a>, Zhi Zhang)</p></li>
<li><p>mon: OSDMonitor: allow addition of cache pool with non-empty snaps with co… (<a class="reference external" href="http://tracker.ceph.com/issues/12595">issue#12595</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/5252">pr#5252</a>, Samuel Just)</p></li>
<li><p>mon: MDSMonitor: handle MDSBeacon messages properly (<a class="reference external" href="http://tracker.ceph.com/issues/11979">issue#11979</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/5123">pr#5123</a>, Kefu Chai)</p></li>
<li><p>tools: ceph-disk: get_partition_type fails on /dev/cciss… (<a class="reference external" href="http://tracker.ceph.com/issues/11760">issue#11760</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/4892">pr#4892</a>, islepnev)</p></li>
<li><p>build/ops: max files open limit for OSD daemon is too low (<a class="reference external" href="http://tracker.ceph.com/issues/12087">issue#12087</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/5026">pr#5026</a>, Owen Synge)</p></li>
<li><p>mon: add an “osd crush tree” command (<a class="reference external" href="http://tracker.ceph.com/issues/11833">issue#11833</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/5248">pr#5248</a>, Kefu Chai)</p></li>
<li><p>mon: mon crashes when “ceph osd tree 85 –format json” (<a class="reference external" href="http://tracker.ceph.com/issues/11975">issue#11975</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/4936">pr#4936</a>, Kefu Chai)</p></li>
<li><p>build/ops: ceph / ceph-dbg steal ceph-objecstore-tool from ceph-test / ceph-test-dbg (<a class="reference external" href="http://tracker.ceph.com/issues/11806">issue#11806</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/5069">pr#5069</a>, Loic Dachary)</p></li>
<li><p>rgw: DragonDisk fails to create directories via S3: MissingContentLength (<a class="reference external" href="http://tracker.ceph.com/issues/12042">issue#12042</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/5118">pr#5118</a>, Yehuda Sadeh)</p></li>
<li><p>build/ops: /usr/bin/ceph from ceph-common is broken without installing ceph (<a class="reference external" href="http://tracker.ceph.com/issues/11998">issue#11998</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/5206">pr#5206</a>, Ken Dreyer)</p></li>
<li><p>build/ops: systemd: Increase max files open limit for OSD daemon (<a class="reference external" href="http://tracker.ceph.com/issues/11964">issue#11964</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/5040">pr#5040</a>, Owen Synge)</p></li>
<li><p>build/ops: rgw/logrotate.conf calls service with wrong init script name (<a class="reference external" href="http://tracker.ceph.com/issues/12044">issue#12044</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/5055">pr#5055</a>, wuxingyi)</p></li>
<li><p>common: OPT_INT option interprets 3221225472 as -1073741824, and crashes in Throttle::Throttle() (<a class="reference external" href="http://tracker.ceph.com/issues/11738">issue#11738</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/4889">pr#4889</a>, Kefu Chai)</p></li>
<li><p>doc: doc/release-notes: v0.94.2 (<a class="reference external" href="http://tracker.ceph.com/issues/11492">issue#11492</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/4934">pr#4934</a>, Sage Weil)</p></li>
<li><p>common: admin_socket: close socket descriptor in destructor (<a class="reference external" href="http://tracker.ceph.com/issues/11706">issue#11706</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/4657">pr#4657</a>, Jon Bernard)</p></li>
<li><p>rgw: Object copy bug (<a class="reference external" href="http://tracker.ceph.com/issues/11755">issue#11755</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/4885">pr#4885</a>, Javier M. Mellid)</p></li>
<li><p>rgw: empty json response when getting user quota (<a class="reference external" href="http://tracker.ceph.com/issues/12245">issue#12245</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/5237">pr#5237</a>, wuxingyi)</p></li>
<li><p>fs: cephfs Dumper tries to load whole journal into memory at once (<a class="reference external" href="http://tracker.ceph.com/issues/11999">issue#11999</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/5120">pr#5120</a>, John Spray)</p></li>
<li><p>rgw: Fix tool for #11442 does not correctly fix objects created via multipart uploads (<a class="reference external" href="http://tracker.ceph.com/issues/12242">issue#12242</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/5229">pr#5229</a>, Yehuda Sadeh)</p></li>
<li><p>rgw: Civetweb RGW appears to report full size of object as downloaded when only partially downloaded (<a class="reference external" href="http://tracker.ceph.com/issues/12243">issue#12243</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/5231">pr#5231</a>, Yehuda Sadeh)</p></li>
<li><p>osd: stuck incomplete (<a class="reference external" href="http://tracker.ceph.com/issues/12362">issue#12362</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/5269">pr#5269</a>, Samuel Just)</p></li>
<li><p>osd: start_flush: filter out removed snaps before determining snapc’s (<a class="reference external" href="http://tracker.ceph.com/issues/11911">issue#11911</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/4899">pr#4899</a>, Samuel Just)</p></li>
<li><p>librbd: internal.cc: 1967: FAILED assert(watchers.size() == 1) (<a class="reference external" href="http://tracker.ceph.com/issues/12239">issue#12239</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/5243">pr#5243</a>, Jason Dillaman)</p></li>
<li><p>librbd: new QA client upgrade tests (<a class="reference external" href="http://tracker.ceph.com/issues/12109">issue#12109</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/5046">pr#5046</a>, Jason Dillaman)</p></li>
<li><p>librbd: [  FAILED  ] TestLibRBD.ExclusiveLockTransition (<a class="reference external" href="http://tracker.ceph.com/issues/12238">issue#12238</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/5241">pr#5241</a>, Jason Dillaman)</p></li>
<li><p>rgw: Swift API: XML document generated in response for GET on account does not contain account name (<a class="reference external" href="http://tracker.ceph.com/issues/12323">issue#12323</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/5227">pr#5227</a>, Radoslaw Zarzynski)</p></li>
<li><p>rgw: keystone does not support chunked input (<a class="reference external" href="http://tracker.ceph.com/issues/12322">issue#12322</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/5226">pr#5226</a>, Hervé Rousseau)</p></li>
<li><p>mds: MDS is crashed (mds/CDir.cc: 1391: FAILED assert(!is_complete())) (<a class="reference external" href="http://tracker.ceph.com/issues/11737">issue#11737</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/4886">pr#4886</a>, Yan, Zheng)</p></li>
<li><p>cli: ceph: cli interactive mode does not understand quotes (<a class="reference external" href="http://tracker.ceph.com/issues/11736">issue#11736</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/4776">pr#4776</a>, Kefu Chai)</p></li>
<li><p>librbd: add valgrind memory checks for unit tests (<a class="reference external" href="http://tracker.ceph.com/issues/12384">issue#12384</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/5280">pr#5280</a>, Zhiqiang Wang)</p></li>
<li><p>build/ops: admin/build-doc: script fails silently under certain circumstances (<a class="reference external" href="http://tracker.ceph.com/issues/11902">issue#11902</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/4877">pr#4877</a>, John Spray)</p></li>
<li><p>osd: Fixes for rados ops with snaps (<a class="reference external" href="http://tracker.ceph.com/issues/11908">issue#11908</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/4902">pr#4902</a>, Samuel Just)</p></li>
<li><p>build/ops: ceph.spec.in: ceph-common subpackage def needs tweaking for SUSE/openSUSE (<a class="reference external" href="http://tracker.ceph.com/issues/12308">issue#12308</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/4883">pr#4883</a>, Nathan Cutler)</p></li>
<li><p>fs: client: reference counting ‘struct Fh’ (<a class="reference external" href="http://tracker.ceph.com/issues/12088">issue#12088</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/5222">pr#5222</a>, Yan, Zheng)</p></li>
<li><p>build/ops: ceph.spec: update OpenSUSE BuildRequires  (<a class="reference external" href="http://tracker.ceph.com/issues/11611">issue#11611</a>, <a class="reference external" href="http://github.com/ceph/ceph/pull/4667">pr#4667</a>, Loic Dachary)</p></li>
</ul>
<p>For more detailed information, see <a class="reference download internal" download="" href="../../_downloads/410307caa7c28a74a2fc3d85cb1667b7/v0.94.3.txt"><code class="xref download docutils literal notranslate"><span class="pre">the</span> <span class="pre">complete</span> <span class="pre">changelog</span></code></a>.</p>
</div>
</div>
<div class="section" id="v0-94-2-hammer">
<h1>v0.94.2 Hammer<a class="headerlink" href="#v0-94-2-hammer" title="Permalink to this headline">¶</a></h1>
<p>This Hammer point release fixes a few critical bugs in RGW that can
prevent objects starting with underscore from behaving properly and
that prevent garbage collection of deleted objects when using the
Civetweb standalone mode.</p>
<p>All v0.94.x Hammer users are strongly encouraged to upgrade, and to
make note of the repair procedure below if RGW is in use.</p>
<div class="section" id="upgrading-from-previous-hammer-release">
<h2>Upgrading from previous Hammer release<a class="headerlink" href="#upgrading-from-previous-hammer-release" title="Permalink to this headline">¶</a></h2>
<p>Bug #11442 introduced a change that made rgw objects that start with underscore
incompatible with previous versions. The fix to that bug reverts to the
previous behavior. In order to be able to access objects that start with an
underscore and were created in prior Hammer releases, following the upgrade it
is required to run (for each affected bucket):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ radosgw-admin bucket check --check-head-obj-locator \
                             --bucket=&lt;bucket&gt; [--fix]
</pre></div>
</div>
</div>
<div class="section" id="id27">
<h2>Notable changes<a class="headerlink" href="#id27" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>build: compilation error: No high-precision counter available  (armhf, powerpc..) (#11432, James Page)</p></li>
<li><p>ceph-dencoder links to libtcmalloc, and shouldn’t (#10691, Boris Ranto)</p></li>
<li><p>ceph-disk: disk zap sgdisk invocation (#11143, Owen Synge)</p></li>
<li><p>ceph-disk: use a new disk as journal disk,ceph-disk prepare fail (#10983, Loic Dachary)</p></li>
<li><p>ceph-objectstore-tool should be in the ceph server package (#11376, Ken Dreyer)</p></li>
<li><p>librados: can get stuck in redirect loop if osdmap epoch == last_force_op_resend (#11026, Jianpeng Ma)</p></li>
<li><p>librbd: A retransmit of proxied flatten request can result in -EINVAL (Jason Dillaman)</p></li>
<li><p>librbd: ImageWatcher should cancel in-flight ops on watch error (#11363, Jason Dillaman)</p></li>
<li><p>librbd: Objectcacher setting max object counts too low (#7385, Jason Dillaman)</p></li>
<li><p>librbd: Periodic failure of TestLibRBD.DiffIterateStress (#11369, Jason Dillaman)</p></li>
<li><p>librbd: Queued AIO reference counters not properly updated (#11478, Jason Dillaman)</p></li>
<li><p>librbd: deadlock in image refresh (#5488, Jason Dillaman)</p></li>
<li><p>librbd: notification race condition on snap_create (#11342, Jason Dillaman)</p></li>
<li><p>mds: Hammer uclient checking (#11510, John Spray)</p></li>
<li><p>mds: remove caps from revoking list when caps are voluntarily released (#11482, Yan, Zheng)</p></li>
<li><p>messenger: double clear of pipe in reaper (#11381, Haomai Wang)</p></li>
<li><p>mon: Total size of OSDs is a maginitude less than it is supposed to be. (#11534, Zhe Zhang)</p></li>
<li><p>osd: don’t check order in finish_proxy_read (#11211, Zhiqiang Wang)</p></li>
<li><p>osd: handle old semi-deleted pgs after upgrade (#11429, Samuel Just)</p></li>
<li><p>osd: object creation by write cannot use an offset on an erasure coded pool (#11507, Jianpeng Ma)</p></li>
<li><p>rgw: Improve rgw HEAD request by avoiding read the body of the first chunk (#11001, Guang Yang)</p></li>
<li><p>rgw: civetweb is hitting a limit (number of threads 1024) (#10243, Yehuda Sadeh)</p></li>
<li><p>rgw: civetweb should use unique request id (#10295, Orit Wasserman)</p></li>
<li><p>rgw: critical fixes for hammer (#11447, #11442, Yehuda Sadeh)</p></li>
<li><p>rgw: fix swift COPY headers (#10662, #10663, #11087, #10645, Radoslaw Zarzynski)</p></li>
<li><p>rgw: improve performance for large object  (multiple chunks) GET (#11322, Guang Yang)</p></li>
<li><p>rgw: init-radosgw: run RGW as root (#11453, Ken Dreyer)</p></li>
<li><p>rgw: keystone token cache does not work correctly (#11125, Yehuda Sadeh)</p></li>
<li><p>rgw: make quota/gc thread configurable for starting (#11047, Guang Yang)</p></li>
<li><p>rgw: make swift responses of RGW return last-modified, content-length, x-trans-id headers.(#10650, Radoslaw Zarzynski)</p></li>
<li><p>rgw: merge manifests correctly when there’s prefix override (#11622, Yehuda Sadeh)</p></li>
<li><p>rgw: quota not respected in POST object (#11323, Sergey Arkhipov)</p></li>
<li><p>rgw: restore buffer of multipart upload after EEXIST (#11604, Yehuda Sadeh)</p></li>
<li><p>rgw: shouldn’t need to disable rgw_socket_path if frontend is configured (#11160, Yehuda Sadeh)</p></li>
<li><p>rgw: swift: Response header of GET request for container does not contain X-Container-Object-Count, X-Container-Bytes-Used and x-trans-id headers (#10666, Dmytro Iurchenko)</p></li>
<li><p>rgw: swift: Response header of POST request for object does not contain content-length and x-trans-id headers (#10661, Radoslaw Zarzynski)</p></li>
<li><p>rgw: swift: response for GET/HEAD on container does not contain the X-Timestamp header (#10938, Radoslaw Zarzynski)</p></li>
<li><p>rgw: swift: response for PUT on /container does not contain the mandatory Content-Length header when FCGI is used (#11036, #10971, Radoslaw Zarzynski)</p></li>
<li><p>rgw: swift: wrong handling of empty metadata on Swift container (#11088, Radoslaw Zarzynski)</p></li>
<li><p>tests: TestFlatIndex.cc races with TestLFNIndex.cc (#11217, Xinze Chi)</p></li>
<li><p>tests: ceph-helpers kill_daemons fails when kill fails (#11398, Loic Dachary)</p></li>
</ul>
<p>For more detailed information, see <a class="reference download internal" download="" href="../../_downloads/3a89ae112adc8a6be21cc83fba08270e/v0.94.2.txt"><code class="xref download docutils literal notranslate"><span class="pre">the</span> <span class="pre">complete</span> <span class="pre">changelog</span></code></a>.</p>
</div>
</div>
<div class="section" id="v0-94-1-hammer">
<h1>v0.94.1 Hammer<a class="headerlink" href="#v0-94-1-hammer" title="Permalink to this headline">¶</a></h1>
<p>This bug fix release fixes a few critical issues with CRUSH.  The most
important addresses a bug in feature bit enforcement that may prevent
pre-hammer clients from communicating with the cluster during an
upgrade.  This only manifests in some cases (for example, when the
‘rack’ type is in use in the CRUSH map, and possibly other cases), but for
safety we strongly recommend that all users use 0.94.1 instead of 0.94 when
upgrading.</p>
<p>There is also a fix in the new straw2 buckets when OSD weights are 0.</p>
<p>We recommend that all v0.94 users upgrade.</p>
<div class="section" id="id28">
<h2>Notable changes<a class="headerlink" href="#id28" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>crush: fix divide-by-0 in straw2 (#11357 Sage Weil)</p></li>
<li><p>crush: fix has_v4_buckets (#11364 Sage Weil)</p></li>
<li><p>osd: fix negative degraded objects during backfilling (#7737 Guang Yang)</p></li>
</ul>
<p>For more detailed information, see <a class="reference download internal" download="" href="../../_downloads/ed4f04f1d6a960e303c10fc04f954504/v0.94.1.txt"><code class="xref download docutils literal notranslate"><span class="pre">the</span> <span class="pre">complete</span> <span class="pre">changelog</span></code></a>.</p>
</div>
</div>
<div class="section" id="v0-94-hammer">
<h1>v0.94 Hammer<a class="headerlink" href="#v0-94-hammer" title="Permalink to this headline">¶</a></h1>
<p>This major release is expected to form the basis of the next long-term
stable series.  It is intended to supersede v0.80.x Firefly.</p>
<p>Highlights since Giant include:</p>
<ul class="simple">
<li><p><em>RADOS Performance</em>: a range of improvements have been made in the
OSD and client-side librados code that improve the throughput on
flash backends and improve parallelism and scaling on fast machines.</p></li>
<li><p><em>Simplified RGW deployment</em>: the ceph-deploy tool now has a new
‘ceph-deploy rgw create HOST’ command that quickly deploys a
instance of the S3/Swift gateway using the embedded Civetweb server.
This is vastly simpler than the previous Apache-based deployment.
There are a few rough edges (e.g., around SSL support) but we
encourage users to try <a class="reference external" href="../start/quick-ceph-deploy/#add-an-rgw-instance">the new method</a>.</p></li>
<li><p><em>RGW object versioning</em>: RGW now supports the S3 object versioning
API, which preserves old version of objects instead of overwriting
them.</p></li>
<li><p><em>RGW bucket sharding</em>: RGW can now shard the bucket index for large
buckets across, improving performance for very large buckets.</p></li>
<li><p><em>RBD object maps</em>: RBD now has an object map function that tracks
which parts of the image are allocating, improving performance for
clones and for commands like export and delete.</p></li>
<li><p><em>RBD mandatory locking</em>: RBD has a new mandatory locking framework
(still disabled by default) that adds additional safeguards to
prevent multiple clients from using the same image at the same time.</p></li>
<li><p><em>RBD copy-on-read</em>: RBD now supports copy-on-read for image clones,
improving performance for some workloads.</p></li>
<li><p><em>CephFS snapshot improvements</em>: Many many bugs have been fixed with
CephFS snapshots.  Although they are still disabled by default,
stability has improved significantly.</p></li>
<li><p><em>CephFS Recovery tools</em>: We have built some journal recovery and
diagnostic tools. Stability and performance of single-MDS systems is
vastly improved in Giant, and more improvements have been made now
in Hammer.  Although we still recommend caution when storing
important data in CephFS, we do encourage testing for non-critical
workloads so that we can better gauge the feature, usability,
performance, and stability gaps.</p></li>
<li><p><em>CRUSH improvements</em>: We have added a new straw2 bucket algorithm
that reduces the amount of data migration required when changes are
made to the cluster.</p></li>
<li><p><em>Shingled erasure codes (SHEC)</em>: The OSDs now have experimental
support for shingled erasure codes, which allow a small amount of
additional storage to be traded for improved recovery performance.</p></li>
<li><p><em>RADOS cache tiering</em>: A series of changes have been made in the
cache tiering code that improve performance and reduce latency.</p></li>
<li><p><em>RDMA support</em>: There is now experimental support the RDMA via the
Accelio (libxio) library.</p></li>
<li><p><em>New administrator commands</em>: The ‘ceph osd df’ command shows
pertinent details on OSD disk utilizations.  The ‘ceph pg ls …’
command makes it much simpler to query PG states while diagnosing
cluster issues.</p></li>
</ul>
<p>Other highlights since Firefly include:</p>
<ul class="simple">
<li><p><em>CephFS</em>: we have fixed a raft of bugs in CephFS and built some
basic journal recovery and diagnostic tools.  Stability and
performance of single-MDS systems is vastly improved in Giant.
Although we do not yet recommend CephFS for production deployments,
we do encourage testing for non-critical workloads so that we can
better gauge the feature, usability, performance, and stability
gaps.</p></li>
<li><p><em>Local Recovery Codes</em>: the OSDs now support an erasure-coding scheme
that stores some additional data blocks to reduce the IO required to
recover from single OSD failures.</p></li>
<li><p><em>Degraded vs misplaced</em>: the Ceph health reports from ‘ceph -s’ and
related commands now make a distinction between data that is
degraded (there are fewer than the desired number of copies) and
data that is misplaced (stored in the wrong location in the
cluster).  The distinction is important because the latter does not
compromise data safety.</p></li>
<li><p><em>Tiering improvements</em>: we have made several improvements to the
cache tiering implementation that improve performance.  Most
notably, objects are not promoted into the cache tier by a single
read; they must be found to be sufficiently hot before that happens.</p></li>
<li><p><em>Monitor performance</em>: the monitors now perform writes to the local
data store asynchronously, improving overall responsiveness.</p></li>
<li><p><em>Recovery tools</em>: the ceph-objectstore-tool is greatly expanded to
allow manipulation of an individual OSDs data store for debugging
and repair purposes.  This is most heavily used by our QA
infrastructure to exercise recovery code.</p></li>
</ul>
<p>I would like to take this opportunity to call out the amazing growth
in contributors to Ceph beyond the core development team from Inktank.
Hammer features major new features and improvements from Intel, Fujitsu,
UnitedStack, Yahoo, UbuntuKylin, CohortFS, Mellanox, CERN, Deutsche
Telekom, Mirantis, and SanDisk.</p>
<div class="section" id="dedication">
<h2>Dedication<a class="headerlink" href="#dedication" title="Permalink to this headline">¶</a></h2>
<p>This release is dedicated in memoriam to Sandon Van Ness, aka
Houkouonchi, who unexpectedly passed away a few weeks ago.  Sandon was
responsible for maintaining the large and complex Sepia lab that
houses the Ceph project’s build and test infrastructure.  His efforts
have made an important impact on our ability to reliably test Ceph
with a relatively small group of people.  He was a valued member of
the team and we will miss him.  H is also for Houkouonchi.</p>
</div>
<div class="section" id="id29">
<h2>Upgrading<a class="headerlink" href="#id29" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p>If your existing cluster is running a version older than v0.80.x
Firefly, please first upgrade to the latest Firefly release before
moving on to Giant.  We have not tested upgrades directly from
Emperor, Dumpling, or older releases.</p>
<p>We <em>have</em> tested:</p>
<blockquote>
<div><ul class="simple">
<li><p>Firefly to Hammer</p></li>
<li><p>Giant to Hammer</p></li>
<li><p>Dumpling to Firefly to Hammer</p></li>
</ul>
</div></blockquote>
</li>
<li><p>Please upgrade daemons in the following order:</p>
<blockquote>
<div><ol class="arabic simple">
<li><p>Monitors</p></li>
<li><p>OSDs</p></li>
<li><p>MDSs and/or radosgw</p></li>
</ol>
</div></blockquote>
<p>Note that the relative ordering of OSDs and monitors should not matter, but
we primarily tested upgrading monitors first.</p>
</li>
<li><p>The ceph-osd daemons will perform a disk-format upgrade improve the
PG metadata layout and to repair a minor bug in the on-disk format.
It may take a minute or two for this to complete, depending on how
many objects are stored on the node; do not be alarmed if they do
not marked “up” by the cluster immediately after starting.</p></li>
<li><dl class="simple">
<dt>If upgrading from v0.93, set</dt><dd><p>osd enable degraded writes = false</p>
</dd>
</dl>
<p>on all osds prior to upgrading.  The degraded writes feature has
been reverted due to 11155.</p>
</li>
<li><p>The LTTNG tracing in librbd and librados is disabled in the release packages
until we find a way to avoid violating distro security policies when linking
libust.</p></li>
</ul>
</div>
<div class="section" id="upgrading-from-v0-87-x-giant">
<h2>Upgrading from v0.87.x Giant<a class="headerlink" href="#upgrading-from-v0-87-x-giant" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p>librbd and librados include lttng tracepoints on distros with
liblttng 2.4 or later (only Ubuntu Trusty for the ceph.com
packages). When running a daemon that uses these libraries, i.e. an
application that calls fork(2) or clone(2) without exec(3), you must
set LD_PRELOAD=liblttng-ust-fork.so.0 to prevent a crash in the
lttng atexit handler when the process exits. The only ceph tool that
requires this is rbd-fuse.</p></li>
<li><p>If rgw_socket_path is defined and rgw_frontends defines a
socket_port and socket_host, we now allow the rgw_frontends settings
to take precedence.  This change should only affect users who have
made non-standard changes to their radosgw configuration.</p></li>
<li><p>If you are upgrading specifically from v0.92, you must stop all OSD
daemons and flush their journals (<code class="docutils literal notranslate"><span class="pre">ceph-osd</span> <span class="pre">-i</span> <span class="pre">NNN</span>
<span class="pre">--flush-journal</span></code>) before upgrading.  There was a transaction
encoding bug in v0.92 that broke compatibility.  Upgrading from v0.93,
v0.91, or anything earlier is safe.</p></li>
<li><p>The experimental ‘keyvaluestore-dev’ OSD backend has been renamed
‘keyvaluestore’ (for simplicity) and marked as experimental.  To
enable this untested feature and acknowledge that you understand
that it is untested and may destroy data, you need to add the
following to your ceph.conf:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">enable</span> <span class="n">experimental</span> <span class="n">unrecoverable</span> <span class="n">data</span> <span class="n">corrupting</span> <span class="n">features</span> <span class="o">=</span> <span class="n">keyvaluestore</span>
</pre></div>
</div>
</li>
<li><p>The following librados C API function calls take a ‘flags’ argument whose value
is now correctly interpreted:</p>
<blockquote>
<div><p>rados_write_op_operate()
rados_aio_write_op_operate()
rados_read_op_operate()
rados_aio_read_op_operate()</p>
</div></blockquote>
<p>The flags were not correctly being translated from the librados constants to the
internal values.  Now they are.  Any code that is passing flags to these methods
should be audited to ensure that they are using the correct LIBRADOS_OP_FLAG_*
constants.</p>
</li>
<li><p>The ‘rados’ CLI ‘copy’ and ‘cppool’ commands now use the copy-from operation,
which means the latest CLI cannot run these commands against pre-firefly OSDs.</p></li>
<li><p>The librados watch/notify API now includes a watch_flush() operation to flush
the async queue of notify operations.  This should be called by any watch/notify
user prior to rados_shutdown().</p></li>
<li><p>The ‘category’ field for objects has been removed.  This was originally added
to track PG stat summations over different categories of objects for use by
radosgw.  It is no longer has any known users and is prone to abuse because it
can lead to a pg_stat_t structure that is unbounded.  The librados API calls
that accept this field now ignore it, and the OSD no longer tracks the
per-category summations.</p></li>
<li><p>The output for ‘rados df’ has changed.  The ‘category’ level has been
eliminated, so there is now a single stat object per pool.  The structure of
the JSON output is different, and the plaintext output has one less column.</p></li>
<li><p>The ‘rados create &lt;objectname&gt; [category]’ optional category argument is no
longer supported or recognized.</p></li>
<li><p>rados.py’s Rados class no longer has a __del__ method; it was causing
problems on interpreter shutdown and use of threads.  If your code has
Rados objects with limited lifetimes and you’re concerned about locked
resources, call Rados.shutdown() explicitly.</p></li>
<li><p>There is a new version of the librados watch/notify API with vastly
improved semantics.  Any applications using this interface are
encouraged to migrate to the new API.  The old API calls are marked
as deprecated and will eventually be removed.</p></li>
<li><p>The librados rados_unwatch() call used to be safe to call on an
invalid handle.  The new version has undefined behavior when passed
a bogus value (for example, when rados_watch() returns an error and
handle is not defined).</p></li>
<li><p>The structure of the formatted ‘pg stat’ command is changed for the
portion that counts states by name to avoid using the ‘+’ character
(which appears in state names) as part of the XML token (it is not
legal).</p></li>
<li><p>Previously, the formatted output of ‘ceph pg stat -f …’ was a full
pg dump that included all metadata about all PGs in the system.  It
is now a concise summary of high-level PG stats, just like the
unformatted ‘ceph pg stat’ command.</p></li>
<li><p>All JSON dumps of floating point values were incorrecting surrounding the
value with quotes.  These quotes have been removed.  Any consumer of structured
JSON output that was consuming the floating point values was previously having
to interpret the quoted string and will most likely need to be fixed to take
the unquoted number.</p></li>
<li><p>New ability to list all objects from all namespaces that can fail or
return incomplete results when not all OSDs have been upgraded.
Features rados –all ls, rados cppool, rados export, rados
cache-flush-evict-all and rados cache-try-flush-evict-all can also
fail or return incomplete results.</p></li>
<li><p>Due to a change in the Linux kernel version 3.18 and the limits of the FUSE
interface, ceph-fuse needs be mounted as root on at least some systems. See
issues #9997, #10277, and #10542 for details.</p></li>
</ul>
</div>
<div class="section" id="upgrading-from-v0-80x-firefly-additional-notes">
<h2>Upgrading from v0.80x Firefly (additional notes)<a class="headerlink" href="#upgrading-from-v0-80x-firefly-additional-notes" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p>The client-side caching for librbd is now enabled by default (rbd
cache = true).  A safety option (rbd cache writethrough until flush
= true) is also enabled so that writeback caching is not used until
the library observes a ‘flush’ command, indicating that the librbd
users is passing that operation through from the guest VM.  This
avoids potential data loss when used with older versions of qemu
that do not support flush.</p>
<blockquote>
<div><p>leveldb_write_buffer_size = 8*1024*1024  = 33554432   // 8MB
leveldb_cache_size        = 512*1024*1204 = 536870912 // 512MB
leveldb_block_size        = 64*1024       = 65536     // 64KB
leveldb_compression       = false
leveldb_log               = “”</p>
</div></blockquote>
<p>OSDs will still maintain the following osd-specific defaults:</p>
<blockquote>
<div><p>leveldb_log               = “”</p>
</div></blockquote>
</li>
<li><p>The ‘rados getxattr …’ command used to add a gratuitous newline to the attr
value; it now does not.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">*_kb</span> <span class="pre">perf</span></code> counters on the monitor have been removed.  These are
replaced with a new set of <code class="docutils literal notranslate"><span class="pre">*_bytes</span></code> counters (e.g., <code class="docutils literal notranslate"><span class="pre">cluster_osd_kb</span></code> is
replaced by <code class="docutils literal notranslate"><span class="pre">cluster_osd_bytes</span></code>).</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">rd_kb</span></code> and <code class="docutils literal notranslate"><span class="pre">wr_kb</span></code> fields in the JSON dumps for pool stats (accessed
via the <code class="docutils literal notranslate"><span class="pre">ceph</span> <span class="pre">df</span> <span class="pre">detail</span> <span class="pre">-f</span> <span class="pre">json-pretty</span></code> and related commands) have been
replaced with corresponding <code class="docutils literal notranslate"><span class="pre">*_bytes</span></code> fields.  Similarly, the
<code class="docutils literal notranslate"><span class="pre">total_space</span></code>, <code class="docutils literal notranslate"><span class="pre">total_used</span></code>, and <code class="docutils literal notranslate"><span class="pre">total_avail</span></code> fields are replaced with
<code class="docutils literal notranslate"><span class="pre">total_bytes</span></code>, <code class="docutils literal notranslate"><span class="pre">total_used_bytes</span></code>,  and <code class="docutils literal notranslate"><span class="pre">total_avail_bytes</span></code> fields.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">rados</span> <span class="pre">df</span> <span class="pre">--format=json</span></code> output <code class="docutils literal notranslate"><span class="pre">read_bytes</span></code> and <code class="docutils literal notranslate"><span class="pre">write_bytes</span></code>
fields were incorrectly reporting ops; this is now fixed.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">rados</span> <span class="pre">df</span> <span class="pre">--format=json</span></code> output previously included <code class="docutils literal notranslate"><span class="pre">read_kb</span></code> and
<code class="docutils literal notranslate"><span class="pre">write_kb</span></code> fields; these have been removed.  Please use <code class="docutils literal notranslate"><span class="pre">read_bytes</span></code> and
<code class="docutils literal notranslate"><span class="pre">write_bytes</span></code> instead (and divide by 1024 if appropriate).</p></li>
<li><p>The experimental keyvaluestore-dev OSD backend had an on-disk format
change that prevents existing OSD data from being upgraded.  This
affects developers and testers only.</p></li>
<li><p>mon-specific and osd-specific leveldb options have been removed.
From this point onward users should use the <cite>leveldb_*</cite> generic
options and add the options in the appropriate sections of their
configuration files.  Monitors will still maintain the following
monitor-specific defaults:</p>
<blockquote>
<div><p>leveldb_write_buffer_size = 8*1024*1024  = 33554432   // 8MB
leveldb_cache_size        = 512*1024*1204 = 536870912 // 512MB
leveldb_block_size        = 64*1024       = 65536     // 64KB
leveldb_compression       = false
leveldb_log               = “”</p>
</div></blockquote>
<p>OSDs will still maintain the following osd-specific defaults:</p>
<blockquote>
<div><p>leveldb_log               = “”</p>
</div></blockquote>
</li>
<li><p>CephFS support for the legacy anchor table has finally been removed.
Users with file systems created before firefly should ensure that inodes
with multiple hard links are modified <em>prior</em> to the upgrade to ensure that
the backtraces are written properly.  For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">find</span> <span class="o">/</span><span class="n">mnt</span><span class="o">/</span><span class="n">cephfs</span> <span class="o">-</span><span class="nb">type</span> <span class="n">f</span> <span class="o">-</span><span class="n">links</span> <span class="o">+</span><span class="mi">1</span> <span class="o">-</span><span class="n">exec</span> <span class="n">touch</span> \<span class="p">{</span>\<span class="p">}</span> \<span class="p">;</span>
</pre></div>
</div>
</li>
<li><p>We disallow nonsensical ‘tier cache-mode’ transitions.  From this point
onward, ‘writeback’ can only transition to ‘forward’ and ‘forward’
can transition to 1) ‘writeback’ if there are dirty objects, or 2) any if
there are no dirty objects.</p></li>
</ul>
</div>
<div class="section" id="notable-changes-since-v0-93">
<h2>Notable changes since v0.93<a class="headerlink" href="#notable-changes-since-v0-93" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>build: a few cmake fixes (Matt Benjamin)</p></li>
<li><p>build: fix build on RHEL/CentOS 5.9 (Rohan Mars)</p></li>
<li><p>build: reorganize Makefile to allow modular builds (Boris Ranto)</p></li>
<li><p>ceph-fuse: be more forgiving on remount (#10982 Greg Farnum)</p></li>
<li><p>ceph: improve CLI parsing (#11093 David Zafman)</p></li>
<li><p>common: fix cluster logging to default channel (#11177 Sage Weil)</p></li>
<li><p>crush: fix parsing of straw2 buckets (#11015 Sage Weil)</p></li>
<li><p>doc: update man pages (David Zafman)</p></li>
<li><p>librados: fix leak in C_TwoContexts (Xiong Yiliang)</p></li>
<li><p>librados: fix leak in watch/notify path (Sage Weil)</p></li>
<li><p>librbd: fix and improve AIO cache invalidation (#10958 Jason Dillaman)</p></li>
<li><p>librbd: fix memory leak (Jason Dillaman)</p></li>
<li><p>librbd: fix ordering/queueing of resize operations (Jason Dillaman)</p></li>
<li><p>librbd: validate image is r/w on resize/flatten (Jason Dillaman)</p></li>
<li><p>librbd: various internal locking fixes (Jason Dillaman)</p></li>
<li><p>lttng: tracing is disabled until we streamline dependencies (Josh Durgin)</p></li>
<li><p>mon: add bootstrap-rgw profile (Sage Weil)</p></li>
<li><p>mon: do not pollute mon dir with CSV files from CRUSH check (Loic Dachary)</p></li>
<li><p>mon: fix clock drift time check interval (#10546 Joao Eduardo Luis)</p></li>
<li><p>mon: fix units in store stats (Joao Eduardo Luis)</p></li>
<li><p>mon: improve error handling on erasure code profile set (#10488, #11144 Loic Dachary)</p></li>
<li><p>mon: set {read,write}_tier on ‘osd tier add-cache …’ (Jianpeng Ma)</p></li>
<li><p>ms: xio: fix misc bugs (Matt Benjamin, Vu Pham)</p></li>
<li><p>osd: DBObjectMap: fix locking to prevent rare crash (#9891 Samuel Just)</p></li>
<li><p>osd: fix and document last_epoch_started semantics (Samuel Just)</p></li>
<li><p>osd: fix divergent entry handling on PG split (Samuel Just)</p></li>
<li><p>osd: fix leak on shutdown (Kefu Chai)</p></li>
<li><p>osd: fix recording of digest on scrub (Samuel Just)</p></li>
<li><p>osd: fix whiteout handling (Sage Weil)</p></li>
<li><p>rbd: allow v2 striping parameters for clones and imports (Jason Dillaman)</p></li>
<li><p>rbd: fix formatted output of image features (Jason Dillaman)</p></li>
<li><p>rbd: updat eman page (Ilya Dryomov)</p></li>
<li><p>rgw: don’t overwrite bucket/object owner when setting ACLs (#10978 Yehuda Sadeh)</p></li>
<li><p>rgw: enable IPv6 for civetweb (#10965 Yehuda Sadeh)</p></li>
<li><p>rgw: fix sysvinit script when rgw_socket_path is not defined (#11159 Yehuda Sadeh, Dan Mick)</p></li>
<li><p>rgw: pass civetweb configurables through (#10907 Yehuda Sadeh)</p></li>
<li><p>rgw: use new watch/notify API (Yehuda Sadeh, Sage Weil)</p></li>
<li><p>osd: reverted degraded writes feature due to 11155</p></li>
</ul>
</div>
<div class="section" id="notable-changes-since-v0-87-x-giant">
<h2>Notable changes since v0.87.x Giant<a class="headerlink" href="#notable-changes-since-v0-87-x-giant" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>add experimental features option (Sage Weil)</p></li>
<li><p>arch: fix NEON feaeture detection (#10185 Loic Dachary)</p></li>
<li><p>asyncmsgr: misc fixes (Haomai Wang)</p></li>
<li><p>buffer: add ‘shareable’ construct (Matt Benjamin)</p></li>
<li><p>buffer: add list::get_contiguous (Sage Weil)</p></li>
<li><p>buffer: avoid rebuild if buffer already contiguous (Jianpeng Ma)</p></li>
<li><p>build: CMake support (Ali Maredia, Casey Bodley, Adam Emerson, Marcus Watts, Matt Benjamin)</p></li>
<li><p>build: a few cmake fixes (Matt Benjamin)</p></li>
<li><p>build: aarch64 build fixes (Noah Watkins, Haomai Wang)</p></li>
<li><p>build: adjust build deps for yasm, virtualenv (Jianpeng Ma)</p></li>
<li><p>build: fix ‘make check’ races (#10384 Loic Dachary)</p></li>
<li><p>build: fix build on RHEL/CentOS 5.9 (Rohan Mars)</p></li>
<li><p>build: fix pkg names when libkeyutils is missing (Pankag Garg, Ken Dreyer)</p></li>
<li><p>build: improve build dependency tooling (Loic Dachary)</p></li>
<li><p>build: reorganize Makefile to allow modular builds (Boris Ranto)</p></li>
<li><p>build: support for jemalloc (Shishir Gowda)</p></li>
<li><p>ceph-disk: Scientific Linux support (Dan van der Ster)</p></li>
<li><p>ceph-disk: allow journal partition re-use (#10146 Loic Dachary, Dav van der Ster)</p></li>
<li><p>ceph-disk: call partx/partprobe consistency (#9721 Loic Dachary)</p></li>
<li><p>ceph-disk: do not re-use partition if encryption is required (Loic Dachary)</p></li>
<li><p>ceph-disk: fix dmcrypt key permissions (Loic Dachary)</p></li>
<li><p>ceph-disk: fix umount race condition (#10096 Blaine Gardner)</p></li>
<li><p>ceph-disk: improved systemd support (Owen Synge)</p></li>
<li><p>ceph-disk: init=none option (Loic Dachary)</p></li>
<li><p>ceph-disk: misc fixes (Christos Stavrakakis)</p></li>
<li><p>ceph-disk: respect –statedir for keyring (Loic Dachary)</p></li>
<li><p>ceph-disk: set guid if reusing journal partition (Dan van der Ster)</p></li>
<li><p>ceph-disk: support LUKS for encrypted partitions (Andrew Bartlett, Loic Dachary)</p></li>
<li><p>ceph-fuse, libcephfs: POSIX file lock support (Yan, Zheng)</p></li>
<li><p>ceph-fuse, libcephfs: allow xattr caps in inject_release_failure (#9800 John Spray)</p></li>
<li><p>ceph-fuse, libcephfs: fix I_COMPLETE_ORDERED checks (#9894 Yan, Zheng)</p></li>
<li><p>ceph-fuse, libcephfs: fix cap flush overflow (Greg Farnum, Yan, Zheng)</p></li>
<li><p>ceph-fuse, libcephfs: fix root inode xattrs (Yan, Zheng)</p></li>
<li><p>ceph-fuse, libcephfs: preserve dir ordering (#9178 Yan, Zheng)</p></li>
<li><p>ceph-fuse, libcephfs: trim inodes before reconnecting to MDS (Yan, Zheng)</p></li>
<li><p>ceph-fuse,libcephfs: add support for O_NOFOLLOW and O_PATH (Greg Farnum)</p></li>
<li><p>ceph-fuse,libcephfs: resend requests before completing cap reconnect (#10912 Yan, Zheng)</p></li>
<li><p>ceph-fuse: be more forgiving on remount (#10982 Greg Farnum)</p></li>
<li><p>ceph-fuse: fix dentry invalidation on 3.18+ kernels (#9997 Yan, Zheng)</p></li>
<li><p>ceph-fuse: fix kernel cache trimming (#10277 Yan, Zheng)</p></li>
<li><p>ceph-fuse: select kernel cache invalidation mechanism based on kernel version (Greg Farnum)</p></li>
<li><p>ceph-monstore-tool: fix shutdown (#10093 Loic Dachary)</p></li>
<li><p>ceph-monstore-tool: fix/improve CLI (Joao Eduardo Luis)</p></li>
<li><p>ceph-objectstore-tool: fix import (#10090 David Zafman)</p></li>
<li><p>ceph-objectstore-tool: improved import (David Zafman)</p></li>
<li><p>ceph-objectstore-tool: many improvements and tests (David Zafman)</p></li>
<li><p>ceph-objectstore-tool: many many improvements (David Zafman)</p></li>
<li><p>ceph-objectstore-tool: misc improvements, fixes (#9870 #9871 David Zafman)</p></li>
<li><p>ceph.spec: package rbd-replay-prep (Ken Dreyer)</p></li>
<li><p>ceph: add ‘ceph osd df [tree]’ command (#10452 Mykola Golub)</p></li>
<li><p>ceph: do not parse injectargs twice (Loic Dachary)</p></li>
<li><p>ceph: fix ‘ceph tell …’ command validation (#10439 Joao Eduardo Luis)</p></li>
<li><p>ceph: improve ‘ceph osd tree’ output (Mykola Golub)</p></li>
<li><p>ceph: improve CLI parsing (#11093 David Zafman)</p></li>
<li><p>ceph: make ‘ceph -s’ output more readable (Sage Weil)</p></li>
<li><p>ceph: make ‘ceph -s’ show PG state counts in sorted order (Sage Weil)</p></li>
<li><p>ceph: make ‘ceph tell mon.* version’ work (Mykola Golub)</p></li>
<li><p>ceph: new ‘ceph tell mds.$name_or_rank_or_gid’ (John Spray)</p></li>
<li><p>ceph: show primary-affinity in ‘ceph osd tree’ (Mykola Golub)</p></li>
<li><p>ceph: test robustness (Joao Eduardo Luis)</p></li>
<li><p>ceph_objectstore_tool: behave with sharded flag (#9661 David Zafman)</p></li>
<li><p>cephfs-journal-tool: add recover_dentries function (#9883 John Spray)</p></li>
<li><p>cephfs-journal-tool: fix journal import (#10025 John Spray)</p></li>
<li><p>cephfs-journal-tool: skip up to expire_pos (#9977 John Spray)</p></li>
<li><p>cleanup rados.h definitions with macros (Ilya Dryomov)</p></li>
<li><p>common: add ‘perf reset …’ admin command (Jianpeng Ma)</p></li>
<li><p>common: add TableFormatter (Andreas Peters)</p></li>
<li><p>common: add newline to flushed json output (Sage Weil)</p></li>
<li><p>common: check syncfs() return code (Jianpeng Ma)</p></li>
<li><p>common: do not unlock rwlock on destruction (Federico Simoncelli)</p></li>
<li><p>common: filtering for ‘perf dump’ (John Spray)</p></li>
<li><p>common: fix Formatter factory breakage (#10547 Loic Dachary)</p></li>
<li><p>common: fix block device discard check (#10296 Sage Weil)</p></li>
<li><p>common: make json-pretty output prettier (Sage Weil)</p></li>
<li><p>common: remove broken CEPH_LOCKDEP optoin (Kefu Chai)</p></li>
<li><p>common: shared_cache unit tests (Cheng Cheng)</p></li>
<li><p>common: support new gperftools header locations (Key Dreyer)</p></li>
<li><p>config: add $cctid meta variable (Adam Crume)</p></li>
<li><p>crush: fix buffer overrun for poorly formed rules (#9492 Johnu George)</p></li>
<li><p>crush: fix detach_bucket (#10095 Sage Weil)</p></li>
<li><p>crush: fix parsing of straw2 buckets (#11015 Sage Weil)</p></li>
<li><p>crush: fix several bugs in adjust_item_weight (Rongze Zhu)</p></li>
<li><p>crush: fix tree bucket behavior (Rongze Zhu)</p></li>
<li><p>crush: improve constness (Loic Dachary)</p></li>
<li><p>crush: new and improved straw2 bucket type (Sage Weil, Christina Anderson, Xiaoxi Chen)</p></li>
<li><p>crush: straw bucket weight calculation fixes (#9998 Sage Weil)</p></li>
<li><p>crush: update tries stats for indep rules (#10349 Loic Dachary)</p></li>
<li><p>crush: use larger choose_tries value for erasure code rulesets (#10353 Loic Dachary)</p></li>
<li><p>crushtool: add –location &lt;id&gt; command (Sage Weil, Loic Dachary)</p></li>
<li><p>debian,rpm: move RBD udev rules to ceph-common (#10864 Ken Dreyer)</p></li>
<li><p>debian: split python-ceph into python-{rbd,rados,cephfs} (Boris Ranto)</p></li>
<li><p>default to libnss instead of crypto++ (Federico Gimenez)</p></li>
<li><p>doc: CephFS disaster recovery guidance (John Spray)</p></li>
<li><p>doc: CephFS for early adopters (John Spray)</p></li>
<li><p>doc: add build-doc guidlines for Fedora and CentOS/RHEL (Nilamdyuti Goswami)</p></li>
<li><p>doc: add dumpling to firefly upgrade section (#7679 John Wilkins)</p></li>
<li><p>doc: ceph osd reweight vs crush weight (Laurent Guerby)</p></li>
<li><p>doc: do not suggest dangerous XFS nobarrier option (Dan van der Ster)</p></li>
<li><p>doc: document erasure coded pool operations (#9970 Loic Dachary)</p></li>
<li><p>doc: document the LRC per-layer plugin configuration (Yuan Zhou)</p></li>
<li><p>doc: enable rbd cache on openstack deployments (Sebastien Han)</p></li>
<li><p>doc: erasure code doc updates (Loic Dachary)</p></li>
<li><p>doc: file system osd config settings (Kevin Dalley)</p></li>
<li><p>doc: fix OpenStack Glance docs (#10478 Sebastien Han)</p></li>
<li><p>doc: improved installation nots on CentOS/RHEL installs (John Wilkins)</p></li>
<li><p>doc: key/value store config reference (John Wilkins)</p></li>
<li><p>doc: misc cleanups (Adam Spiers, Sebastien Han, Nilamdyuti Goswami, Ken Dreyer, John Wilkins)</p></li>
<li><p>doc: misc improvements (Nilamdyuti Goswami, John Wilkins, Chris Holcombe)</p></li>
<li><p>doc: misc updates (#9793 #9922 #10204 #10203 Travis Rhoden, Hazem, Ayari, Florian Coste, Andy Allan, Frank Yu, Baptiste Veuillez-Mainard, Yuan Zhou, Armando Segnini, Robert Jansen, Tyler Brekke, Viktor Suprun)</p></li>
<li><p>doc: misc updates (Alfredo Deza, VRan Liu)</p></li>
<li><p>doc: misc updates (Nilamdyuti Goswami, John Wilkins)</p></li>
<li><p>doc: new man pages (Nilamdyuti Goswami)</p></li>
<li><p>doc: preflight doc fixes (John Wilkins)</p></li>
<li><p>doc: replace cloudfiles with swiftclient Python Swift example (Tim Freund)</p></li>
<li><p>doc: update PG count guide (Gerben Meijer, Laurent Guerby, Loic Dachary)</p></li>
<li><p>doc: update man pages (David Zafman)</p></li>
<li><p>doc: update openstack docs for Juno (Sebastien Han)</p></li>
<li><p>doc: update release descriptions (Ken Dreyer)</p></li>
<li><p>doc: update sepia hardware inventory (Sandon Van Ness)</p></li>
<li><p>erasure-code: add mSHEC erasure code support (Takeshi Miyamae)</p></li>
<li><p>erasure-code: improved docs (#10340 Loic Dachary)</p></li>
<li><p>erasure-code: set max_size to 20 (#10363 Loic Dachary)</p></li>
<li><p>fix cluster logging from non-mon daemons (Sage Weil)</p></li>
<li><p>init-ceph: check for systemd-run before using it (Boris Ranto)</p></li>
<li><p>install-deps.sh: do not require sudo when root (Loic Dachary)</p></li>
<li><p>keyvaluestore: misc fixes (Haomai Wang)</p></li>
<li><p>keyvaluestore: performance improvements (Haomai Wang)</p></li>
<li><p>libcephfs,ceph-fuse: add ‘status’ asok (John Spray)</p></li>
<li><p>libcephfs,ceph-fuse: fix getting zero-length xattr (#10552 Yan, Zheng)</p></li>
<li><p>libcephfs: fix dirfrag trimming (#10387 Yan, Zheng)</p></li>
<li><p>libcephfs: fix mount timeout (#10041 Yan, Zheng)</p></li>
<li><p>libcephfs: fix test (#10415 Yan, Zheng)</p></li>
<li><p>libcephfs: fix use-afer-free on umount (#10412 Yan, Zheng)</p></li>
<li><p>libcephfs: include ceph and git version in client metadata (Sage Weil)</p></li>
<li><p>librados, osd: new watch/notify implementation (Sage Weil)</p></li>
<li><p>librados: add blacklist_add convenience method (Jason Dillaman)</p></li>
<li><p>librados: add rados_pool_get_base_tier() call (Adam Crume)</p></li>
<li><p>librados: add watch_flush() operation (Sage Weil, Haomai Wang)</p></li>
<li><p>librados: avoid memcpy on getxattr, read (Jianpeng Ma)</p></li>
<li><p>librados: cap buffer length (Loic Dachary)</p></li>
<li><p>librados: create ioctx by pool id (Jason Dillaman)</p></li>
<li><p>librados: do notify completion in fast-dispatch (Sage Weil)</p></li>
<li><p>librados: drop ‘category’ feature (Sage Weil)</p></li>
<li><p>librados: expose rados_{read|write}_op_assert_version in C API (Kim Vandry)</p></li>
<li><p>librados: fix infinite loop with skipped map epochs (#9986 Ding Dinghua)</p></li>
<li><p>librados: fix iterator operator= bugs (#10082 David Zafman, Yehuda Sadeh)</p></li>
<li><p>librados: fix leak in C_TwoContexts (Xiong Yiliang)</p></li>
<li><p>librados: fix leak in watch/notify path (Sage Weil)</p></li>
<li><p>librados: fix null deref when pool DNE (#9944 Sage Weil)</p></li>
<li><p>librados: fix objecter races (#9617 Josh Durgin)</p></li>
<li><p>librados: fix pool deletion handling (#10372 Sage Weil)</p></li>
<li><p>librados: fix pool name caching (#10458 Radoslaw Zarzynski)</p></li>
<li><p>librados: fix resource leak, misc bugs (#10425 Radoslaw Zarzynski)</p></li>
<li><p>librados: fix some watch/notify locking (Jason Dillaman, Josh Durgin)</p></li>
<li><p>librados: fix timer race from recent refactor (Sage Weil)</p></li>
<li><p>librados: new fadvise API (Ma Jianpeng)</p></li>
<li><p>librados: only export public API symbols (Jason Dillaman)</p></li>
<li><p>librados: remove shadowed variable (Kefu Chain)</p></li>
<li><p>librados: translate op flags from C APIs (Matthew Richards)</p></li>
<li><p>libradosstriper: fix remove() (Dongmao Zhang)</p></li>
<li><p>libradosstriper: fix shutdown hang (Dongmao Zhang)</p></li>
<li><p>libradosstriper: fix stat strtoll (Dongmao Zhang)</p></li>
<li><p>libradosstriper: fix trunc method (#10129 Sebastien Ponce)</p></li>
<li><p>libradosstriper: fix write_full when ENOENT (#10758 Sebastien Ponce)</p></li>
<li><p>libradosstriper: misc fixes (Sebastien Ponce)</p></li>
<li><p>librbd: CRC protection for RBD image map (Jason Dillaman)</p></li>
<li><p>librbd: add missing python docstrings (Jason Dillaman)</p></li>
<li><p>librbd: add per-image object map for improved performance (Jason Dillaman)</p></li>
<li><p>librbd: add readahead (Adam Crume)</p></li>
<li><p>librbd: add support for an “object map” indicating which objects exist (Jason Dillaman)</p></li>
<li><p>librbd: adjust internal locking (Josh Durgin, Jason Dillaman)</p></li>
<li><p>librbd: better handling of watch errors (Jason Dillaman)</p></li>
<li><p>librbd: complete pending ops before closing image (#10299 Josh Durgin)</p></li>
<li><p>librbd: coordinate maint operations through lock owner (Jason Dillaman)</p></li>
<li><p>librbd: copy-on-read (Min Chen, Li Wang, Yunchuan Wen, Cheng Cheng, Jason Dillaman)</p></li>
<li><p>librbd: differentiate between R/O vs R/W features (Jason Dillaman)</p></li>
<li><p>librbd: don’t close a closed parent in failure path (#10030 Jason Dillaman)</p></li>
<li><p>librbd: enforce write ordering with a snapshot (Jason Dillaman)</p></li>
<li><p>librbd: exclusive image locking (Jason Dillaman)</p></li>
<li><p>librbd: fadvise API (Ma Jianpeng)</p></li>
<li><p>librbd: fadvise-style hints; add misc hints for certain operations (Jianpeng Ma)</p></li>
<li><p>librbd: fix and improve AIO cache invalidation (#10958 Jason Dillaman)</p></li>
<li><p>librbd: fix cache tiers in list_children and snap_unprotect (Adam Crume)</p></li>
<li><p>librbd: fix coverity false-positives (Jason Dillaman)</p></li>
<li><p>librbd: fix diff test (#10002 Josh Durgin)</p></li>
<li><p>librbd: fix list_children from invalid pool ioctxs (#10123 Jason Dillaman)</p></li>
<li><p>librbd: fix locking for readahead (#10045 Jason Dillaman)</p></li>
<li><p>librbd: fix memory leak (Jason Dillaman)</p></li>
<li><p>librbd: fix ordering/queueing of resize operations (Jason Dillaman)</p></li>
<li><p>librbd: fix performance regression in ObjectCacher (#9513 Adam Crume)</p></li>
<li><p>librbd: fix snap create races (Jason Dillaman)</p></li>
<li><p>librbd: fix write vs import race (#10590 Jason Dillaman)</p></li>
<li><p>librbd: flush AIO operations asynchronously (#10714 Jason Dillaman)</p></li>
<li><p>librbd: gracefully handle deleted/renamed pools (#10270 Jason Dillaman)</p></li>
<li><p>librbd: lttng tracepoints (Adam Crume)</p></li>
<li><p>librbd: make async versions of long-running maint operations (Jason Dillaman)</p></li>
<li><p>librbd: misc fixes (Xinxin Shu, Jason Dillaman)</p></li>
<li><p>librbd: mock tests (Jason Dillaman)</p></li>
<li><p>librbd: only export public API symbols (Jason Dillaman)</p></li>
<li><p>librbd: optionally blacklist clients before breaking locks (#10761 Jason Dillaman)</p></li>
<li><p>librbd: prevent copyup during shrink (Jason Dillaman)</p></li>
<li><p>librbd: refactor unit tests to use fixtures (Jason Dillaman)</p></li>
<li><p>librbd: validate image is r/w on resize/flatten (Jason Dillaman)</p></li>
<li><p>librbd: various internal locking fixes (Jason Dillaman)</p></li>
<li><p>many coverity fixes (Danny Al-Gaaf)</p></li>
<li><p>many many coverity cleanups (Danny Al-Gaaf)</p></li>
<li><p>mds: ‘flush journal’ admin command (John Spray)</p></li>
<li><p>mds: ENOSPC and OSDMap epoch barriers (#7317 John Spray)</p></li>
<li><p>mds: a whole bunch of initial scrub infrastructure (Greg Farnum)</p></li>
<li><p>mds: add cephfs-table-tool (John Spray)</p></li>
<li><p>mds: asok command for fetching subtree map (John Spray)</p></li>
<li><p>mds: avoid sending traceless replies in most cases (Yan, Zheng)</p></li>
<li><p>mds: constify MDSCacheObjects (John Spray)</p></li>
<li><p>mds: dirfrag buf fix (Yan, Zheng)</p></li>
<li><p>mds: disallow most commands on inactive MDS’s (Greg Farnum)</p></li>
<li><p>mds: drop dentries, leases on deleted directories (#10164 Yan, Zheng)</p></li>
<li><p>mds: export dir asok command (John Spray)</p></li>
<li><p>mds: fix MDLog IO callback deadlock (John Spray)</p></li>
<li><p>mds: fix compat_version for MClientSession (#9945 John Spray)</p></li>
<li><p>mds: fix deadlock during journal probe vs purge (#10229 Yan, Zheng)</p></li>
<li><p>mds: fix race trimming log segments (Yan, Zheng)</p></li>
<li><p>mds: fix reply snapbl (Yan, Zheng)</p></li>
<li><p>mds: fix sessionmap lifecycle bugs (Yan, Zheng)</p></li>
<li><p>mds: fix stray/purge perfcounters (#10388 John Spray)</p></li>
<li><p>mds: handle heartbeat_reset during shutdown (#10382 John Spray)</p></li>
<li><p>mds: handle zero-size xattr (#10335 Yan, Zheng)</p></li>
<li><p>mds: initialize root inode xattr version (Yan, Zheng)</p></li>
<li><p>mds: introduce auth caps (John Spray)</p></li>
<li><p>mds: many many snapshot-related fixes (Yan, Zheng)</p></li>
<li><p>mds: misc bugs (Greg Farnum, John Spray, Yan, Zheng, Henry Change)</p></li>
<li><p>mds: refactor, improve Session storage (John Spray)</p></li>
<li><p>mds: store backtrace for stray dir (Yan, Zheng)</p></li>
<li><p>mds: subtree quota support (Yunchuan Wen)</p></li>
<li><p>mds: verify backtrace when fetching dirfrag (#9557 Yan, Zheng)</p></li>
<li><p>memstore: free space tracking (John Spray)</p></li>
<li><p>misc cleanup (Danny Al-Gaaf, David Anderson)</p></li>
<li><p>misc coverity fixes (Danny Al-Gaaf)</p></li>
<li><p>misc coverity fixes (Danny Al-Gaaf)</p></li>
<li><p>misc: various valgrind fixes and cleanups (Danny Al-Gaaf)</p></li>
<li><p>mon: ‘osd crush reweight-all’ command (Sage Weil)</p></li>
<li><p>mon: add ‘ceph osd rename-bucket …’ command (Loic Dachary)</p></li>
<li><p>mon: add bootstrap-rgw profile (Sage Weil)</p></li>
<li><p>mon: add max pgs per osd warning (Sage Weil)</p></li>
<li><p>mon: add noforward flag for some mon commands (Mykola Golub)</p></li>
<li><p>mon: allow adding tiers to fs pools (#10135 John Spray)</p></li>
<li><p>mon: allow full flag to be manually cleared (#9323 Sage Weil)</p></li>
<li><p>mon: clean up auth list output (Loic Dachary)</p></li>
<li><p>mon: delay failure injection (Joao Eduardo Luis)</p></li>
<li><p>mon: disallow empty pool names (#10555 Wido den Hollander)</p></li>
<li><p>mon: do not deactivate last mds (#10862 John Spray)</p></li>
<li><p>mon: do not pollute mon dir with CSV files from CRUSH check (Loic Dachary)</p></li>
<li><p>mon: drop old ceph_mon_store_converter (Sage Weil)</p></li>
<li><p>mon: fix ‘ceph pg dump_stuck degraded’ (Xinxin Shu)</p></li>
<li><p>mon: fix ‘mds fail’ for standby MDSs (John Spray)</p></li>
<li><p>mon: fix ‘osd crush link’ id resolution (John Spray)</p></li>
<li><p>mon: fix ‘profile osd’ use of config-key function on mon (#10844 Joao Eduardo Luis)</p></li>
<li><p>mon: fix <em>_ratio</em> units and types (Sage Weil)</p></li>
<li><p>mon: fix JSON dumps to dump floats as flots and not strings (Sage Weil)</p></li>
<li><p>mon: fix MDS health status from peons (#10151 John Spray)</p></li>
<li><p>mon: fix caching for min_last_epoch_clean (#9987 Sage Weil)</p></li>
<li><p>mon: fix clock drift time check interval (#10546 Joao Eduardo Luis)</p></li>
<li><p>mon: fix compatset initalization during mkfs (Joao Eduardo Luis)</p></li>
<li><p>mon: fix error output for add_data_pool (#9852 Joao Eduardo Luis)</p></li>
<li><p>mon: fix feature tracking during elections (Joao Eduardo Luis)</p></li>
<li><p>mon: fix formatter ‘pg stat’ command output (Sage Weil)</p></li>
<li><p>mon: fix mds gid/rank/state parsing (John Spray)</p></li>
<li><p>mon: fix misc error paths (Joao Eduardo Luis)</p></li>
<li><p>mon: fix paxos off-by-one corner case (#9301 Sage Weil)</p></li>
<li><p>mon: fix paxos timeouts (#10220 Joao Eduardo Luis)</p></li>
<li><p>mon: fix stashed monmap encoding (#5203 Xie Rui)</p></li>
<li><p>mon: fix units in store stats (Joao Eduardo Luis)</p></li>
<li><p>mon: get canonical OSDMap from leader (#10422 Sage Weil)</p></li>
<li><p>mon: ignore failure reports from before up_from (#10762 Dan van der Ster, Sage Weil)</p></li>
<li><p>mon: implement ‘fs reset’ command (John Spray)</p></li>
<li><p>mon: improve error handling on erasure code profile set (#10488, #11144 Loic Dachary)</p></li>
<li><p>mon: improved corrupt CRUSH map detection (Joao Eduardo Luis)</p></li>
<li><p>mon: include entity name in audit log for forwarded requests (#9913 Joao Eduardo Luis)</p></li>
<li><p>mon: include pg_temp count in osdmap summary (Sage Weil)</p></li>
<li><p>mon: log health summary to cluster log (#9440 Joao Eduardo Luis)</p></li>
<li><p>mon: make ‘mds fail’ idempotent (John Spray)</p></li>
<li><p>mon: make pg dump {sum,pgs,pgs_brief} work for format=plain (#5963 #6759 Mykola Golub)</p></li>
<li><p>mon: new ‘ceph pool ls [detail]’ command (Sage Weil)</p></li>
<li><p>mon: new pool safety flags nodelete, nopgchange, nosizechange (#9792 Mykola Golub)</p></li>
<li><p>mon: new, friendly ‘ceph pg ls …’ command (Xinxin Shu)</p></li>
<li><p>mon: paxos: allow reads while proposing (#9321 #9322 Joao Eduardo Luis)</p></li>
<li><p>mon: prevent MDS transition from STOPPING (#10791 Greg Farnum)</p></li>
<li><p>mon: propose all pending work in one transaction (Sage Weil)</p></li>
<li><p>mon: remove pg_temps for nonexistent pools (Joao Eduardo Luis)</p></li>
<li><p>mon: require mon_allow_pool_delete option to remove pools (Sage Weil)</p></li>
<li><p>mon: respect down flag when promoting standbys (John Spray)</p></li>
<li><p>mon: set globalid prealloc to larger value (Sage Weil)</p></li>
<li><p>mon: set {read,write}_tier on ‘osd tier add-cache …’ (Jianpeng Ma)</p></li>
<li><p>mon: skip zeroed osd stats in get_rule_avail (#10257 Joao Eduardo Luis)</p></li>
<li><p>mon: validate min_size range (Jianpeng Ma)</p></li>
<li><p>mon: wait for writeable before cross-proposing (#9794 Joao Eduardo Luis)</p></li>
<li><p>mount.ceph: fix suprious error message (#10351 Yan, Zheng)</p></li>
<li><p>ms: xio: fix misc bugs (Matt Benjamin, Vu Pham)</p></li>
<li><p>msgr: async: bind threads to CPU cores, improved poll (Haomai Wang)</p></li>
<li><p>msgr: async: many fixes, unit tests (Haomai Wang)</p></li>
<li><p>msgr: async: several fixes (Haomai Wang)</p></li>
<li><p>msgr: asyncmessenger: add kqueue support (#9926 Haomai Wang)</p></li>
<li><p>msgr: avoid useless new/delete (Haomai Wang)</p></li>
<li><p>msgr: fix RESETSESSION bug (#10080 Greg Farnum)</p></li>
<li><p>msgr: fix crc configuration (Mykola Golub)</p></li>
<li><p>msgr: fix delay injection bug (#9910 Sage Weil, Greg Farnum)</p></li>
<li><p>msgr: misc unit tests (Haomai Wang)</p></li>
<li><p>msgr: new AsymcMessenger alternative implementation (Haomai Wang)</p></li>
<li><p>msgr: prefetch data when doing recv (Yehuda Sadeh)</p></li>
<li><p>msgr: simple: fix rare deadlock (Greg Farnum)</p></li>
<li><p>msgr: simple: retry binding to port on failure (#10029 Wido den Hollander)</p></li>
<li><p>msgr: xio: XioMessenger RDMA support (Casey Bodley, Vu Pham, Matt Benjamin)</p></li>
<li><p>objectstore: deprecate collection attrs (Sage Weil)</p></li>
<li><p>osd, librados: fadvise-style librados hints (Jianpeng Ma)</p></li>
<li><p>osd, librados: fix xattr_cmp_u64 (Dongmao Zhang)</p></li>
<li><p>osd, librados: revamp PG listing API to handle namespaces (#9031 #9262 #9438 David Zafman)</p></li>
<li><p>osd, mds: ‘ops’ as shorthand for ‘dump_ops_in_flight’ on asok (Sage Weil)</p></li>
<li><p>osd, mon: add checksums to all OSDMaps (Sage Weil)</p></li>
<li><p>osd, mon: send intiial pg create time from mon to osd (#9887 David Zafman)</p></li>
<li><p>osd,mon: add ‘norebalance’ flag (Kefu Chai)</p></li>
<li><p>osd,mon: specify OSD features explicitly in MOSDBoot (#10911 Sage Weil)</p></li>
<li><p>osd: DBObjectMap: fix locking to prevent rare crash (#9891 Samuel Just)</p></li>
<li><p>osd: EIO on whole-object reads when checksum is wrong (Sage Weil)</p></li>
<li><p>osd: add erasure code corpus (Loic Dachary)</p></li>
<li><p>osd: add fadvise flags to ObjectStore API (Jianpeng Ma)</p></li>
<li><p>osd: add get_latest_osdmap asok command (#9483 #9484 Mykola Golub)</p></li>
<li><p>osd: add misc tests (Loic Dachary, Danny Al-Gaaf)</p></li>
<li><p>osd: add option to prioritize heartbeat network traffic (Jian Wen)</p></li>
<li><p>osd: add support for the SHEC erasure-code algorithm (Takeshi Miyamae, Loic Dachary)</p></li>
<li><p>osd: allow deletion of objects with watcher (#2339 Sage Weil)</p></li>
<li><p>osd: allow recovery while below min_size (Samuel Just)</p></li>
<li><p>osd: allow recovery with fewer than min_size OSDs (Samuel Just)</p></li>
<li><p>osd: allow sparse read for Push/Pull (Haomai Wang)</p></li>
<li><p>osd: allow whiteout deletion in cache pool (Sage Weil)</p></li>
<li><p>osd: allow writes to degraded objects (Samuel Just)</p></li>
<li><p>osd: allow writes to degraded objects (Samuel Just)</p></li>
<li><p>osd: avoid publishing unchanged PG stats (Sage Weil)</p></li>
<li><p>osd: batch pg log trim (Xinze Chi)</p></li>
<li><p>osd: cache pool: ignore min flush age when cache is full (Xinze Chi)</p></li>
<li><p>osd: cache recent ObjectContexts (Dong Yuan)</p></li>
<li><p>osd: cache reverse_nibbles hash value (Dong Yuan)</p></li>
<li><p>osd: clean up internal ObjectStore interface (Sage Weil)</p></li>
<li><p>osd: cleanup boost optionals (William Kennington)</p></li>
<li><p>osd: clear cache on interval change (Samuel Just)</p></li>
<li><p>osd: do no proxy reads unless target OSDs are new (#10788 Sage Weil)</p></li>
<li><p>osd: do not abort deep scrub on missing hinfo (#10018 Loic Dachary)</p></li>
<li><p>osd: do not update digest on inconsistent object (#10524 Samuel Just)</p></li>
<li><p>osd: don’t record digests for snapdirs (#10536 Samuel Just)</p></li>
<li><p>osd: drop upgrade support for pre-dumpling (Sage Weil)</p></li>
<li><p>osd: enable and use posix_fadvise (Sage Weil)</p></li>
<li><p>osd: erasure coding: allow bench.sh to test ISA backend (Yuan Zhou)</p></li>
<li><p>osd: erasure-code: encoding regression tests, corpus (#9420 Loic Dachary)</p></li>
<li><p>osd: erasure-code: enforce chunk size alignment (#10211 Loic Dachary)</p></li>
<li><p>osd: erasure-code: jerasure support for NEON (Loic Dachary)</p></li>
<li><p>osd: erasure-code: relax cauchy w restrictions (#10325 David Zhang, Loic Dachary)</p></li>
<li><p>osd: erasure-code: update gf-complete to latest upstream (Loic Dachary)</p></li>
<li><p>osd: expose non-journal backends via ceph-osd CLI (Hoamai Wang)</p></li>
<li><p>osd: filejournal: don’t cache journal when not using direct IO (Jianpeng Ma)</p></li>
<li><p>osd: fix JSON output for stray OSDs (Loic Dachary)</p></li>
<li><p>osd: fix OSDCap parser on old (el6) boost::spirit (#10757 Kefu Chai)</p></li>
<li><p>osd: fix OSDCap parsing on el6 (#10757 Kefu Chai)</p></li>
<li><p>osd: fix ObjectStore::Transaction encoding version (#10734 Samuel Just)</p></li>
<li><p>osd: fix WBTHrottle perf counters (Haomai Wang)</p></li>
<li><p>osd: fix and document last_epoch_started semantics (Samuel Just)</p></li>
<li><p>osd: fix auth object selection during repair (#10524 Samuel Just)</p></li>
<li><p>osd: fix backfill bug (#10150 Samuel Just)</p></li>
<li><p>osd: fix bug in pending digest updates (#10840 Samuel Just)</p></li>
<li><p>osd: fix cancel_proxy_read_ops (Sage Weil)</p></li>
<li><p>osd: fix cleanup of interrupted pg deletion (#10617 Sage Weil)</p></li>
<li><p>osd: fix divergent entry handling on PG split (Samuel Just)</p></li>
<li><p>osd: fix ghobject_t formatted output to include shard (#10063 Loic Dachary)</p></li>
<li><p>osd: fix ioprio option (Mykola Golub)</p></li>
<li><p>osd: fix ioprio options (Loic Dachary)</p></li>
<li><p>osd: fix journal shutdown race (Sage Weil)</p></li>
<li><p>osd: fix journal wrapping bug (#10883 David Zafman)</p></li>
<li><p>osd: fix leak in SnapTrimWQ (#10421 Kefu Chai)</p></li>
<li><p>osd: fix leak on shutdown (Kefu Chai)</p></li>
<li><p>osd: fix memstore free space calculation (Xiaoxi Chen)</p></li>
<li><p>osd: fix mixed-version peering issues (Samuel Just)</p></li>
<li><p>osd: fix object age eviction (Zhiqiang Wang)</p></li>
<li><p>osd: fix object atime calculation (Xinze Chi)</p></li>
<li><p>osd: fix object digest update bug (#10840 Samuel Just)</p></li>
<li><p>osd: fix occasional peering stalls (#10431 Sage Weil)</p></li>
<li><p>osd: fix ordering issue with new transaction encoding (#10534 Dong Yuan)</p></li>
<li><p>osd: fix osd peer check on scrub messages (#9555 Sage Weil)</p></li>
<li><p>osd: fix past_interval display bug (#9752 Loic Dachary)</p></li>
<li><p>osd: fix past_interval generation (#10427 #10430 David Zafman)</p></li>
<li><p>osd: fix pgls filter ops (#9439 David Zafman)</p></li>
<li><p>osd: fix recording of digest on scrub (Samuel Just)</p></li>
<li><p>osd: fix scrub delay bug (#10693 Samuel Just)</p></li>
<li><p>osd: fix scrub vs try-flush bug (#8011 Samuel Just)</p></li>
<li><p>osd: fix short read handling on push (#8121 David Zafman)</p></li>
<li><p>osd: fix stderr with -f or -d (Dan Mick)</p></li>
<li><p>osd: fix transaction accounting (Jianpeng Ma)</p></li>
<li><p>osd: fix watch reconnect race (#10441 Sage Weil)</p></li>
<li><p>osd: fix watch timeout cache state update (#10784 David Zafman)</p></li>
<li><p>osd: fix whiteout handling (Sage Weil)</p></li>
<li><p>osd: flush snapshots from cache tier immediately (Sage Weil)</p></li>
<li><p>osd: force promotion of watch/notify ops (Zhiqiang Wang)</p></li>
<li><p>osd: handle no-op write with snapshot (#10262 Sage Weil)</p></li>
<li><p>osd: improve idempotency detection across cache promotion/demotion (#8935 Sage Weil, Samuel Just)</p></li>
<li><p>osd: include activating peers in blocked_by (#10477 Sage Weil)</p></li>
<li><p>osd: jerasure and gf-complete updates from upstream (#10216 Loic Dachary)</p></li>
<li><p>osd: journal: check fsync/fdatasync result (Jianpeng Ma)</p></li>
<li><p>osd: journal: fix alignment checks, avoid useless memmove (Jianpeng Ma)</p></li>
<li><p>osd: journal: fix hang on shutdown (#10474 David Zafman)</p></li>
<li><p>osd: journal: fix header.committed_up_to (Xinze Chi)</p></li>
<li><p>osd: journal: fix journal zeroing when direct IO is enabled (Xie Rui)</p></li>
<li><p>osd: journal: initialize throttle (Ning Yao)</p></li>
<li><p>osd: journal: misc bug fixes (#6003 David Zafman, Samuel Just)</p></li>
<li><p>osd: journal: update committed_thru after replay (#6756 Samuel Just)</p></li>
<li><p>osd: keyvaluestore: cleanup dead code (Ning Yao)</p></li>
<li><p>osd: keyvaluestore: fix getattr semantics (Haomai Wang)</p></li>
<li><p>osd: keyvaluestore: fix key ordering (#10119 Haomai Wang)</p></li>
<li><p>osd: keyvaluestore_dev: optimization (Chendi Xue)</p></li>
<li><p>osd: limit in-flight read requests (Jason Dillaman)</p></li>
<li><p>osd: log when scrub or repair starts (Loic Dachary)</p></li>
<li><p>osd: make misdirected op checks robust for EC pools (#9835 Sage Weil)</p></li>
<li><p>osd: memstore: fix size limit (Xiaoxi Chen)</p></li>
<li><p>osd: misc FIEMAP fixes (Ma Jianpeng)</p></li>
<li><p>osd: misc cleanup (Xinze Chi, Yongyue Sun)</p></li>
<li><p>osd: misc optimizations (Xinxin Shu, Zhiqiang Wang, Xinze Chi)</p></li>
<li><p>osd: misc scrub fixes (#10017 Loic Dachary)</p></li>
<li><p>osd: new ‘activating’ state between peering and active (Sage Weil)</p></li>
<li><p>osd: new optimized encoding for ObjectStore::Transaction (Dong Yuan)</p></li>
<li><p>osd: optimize Finisher (Xinze Chi)</p></li>
<li><p>osd: optimize WBThrottle map with unordered_map (Ning Yao)</p></li>
<li><p>osd: optimize filter_snapc (Ning Yao)</p></li>
<li><p>osd: preserve reqids for idempotency checks for promote/demote (Sage Weil, Zhiqiang Wang, Samuel Just)</p></li>
<li><p>osd: proxy read support (Zhiqiang Wang)</p></li>
<li><p>osd: proxy reads during cache promote (Zhiqiang Wang)</p></li>
<li><p>osd: remove dead locking code (Xinxin Shu)</p></li>
<li><p>osd: remove legacy classic scrub code (Sage Weil)</p></li>
<li><p>osd: remove unused fields in MOSDSubOp (Xiaoxi Chen)</p></li>
<li><p>osd: removed some dead code (Xinze Chi)</p></li>
<li><p>osd: replace MOSDSubOp messages with simpler, optimized MOSDRepOp (Xiaoxi Chen)</p></li>
<li><p>osd: restrict scrub to certain times of day (Xinze Chi)</p></li>
<li><p>osd: rocksdb: fix shutdown (Hoamai Wang)</p></li>
<li><p>osd: store PG metadata in per-collection objects for better concurrency (Sage Weil)</p></li>
<li><p>osd: store whole-object checksums on scrub, write_full (Sage Weil)</p></li>
<li><p>osd: support for discard for journal trim (Jianpeng Ma)</p></li>
<li><p>osd: use FIEMAP_FLAGS_SYNC instead of fsync (Jianpeng Ma)</p></li>
<li><p>osd: verify kernel is new enough before using XFS extsize ioctl, enable by default (#9956 Sage Weil)</p></li>
<li><p>pybind: fix memory leak in librados bindings (Billy Olsen)</p></li>
<li><p>pyrados: add object lock support (#6114 Mehdi Abaakouk)</p></li>
<li><p>pyrados: fix misnamed wait_* routings (#10104 Dan Mick)</p></li>
<li><p>pyrados: misc cleanups (Kefu Chai)</p></li>
<li><p>qa: add large auth ticket tests (Ilya Dryomov)</p></li>
<li><p>qa: fix mds tests (#10539 John Spray)</p></li>
<li><p>qa: fix osd create dup tests (#10083 Loic Dachary)</p></li>
<li><p>qa: ignore duplicates in rados ls (Josh Durgin)</p></li>
<li><p>qa: improve hadoop tests (Noah Watkins)</p></li>
<li><p>qa: many ‘make check’ improvements (Loic Dachary)</p></li>
<li><p>qa: misc tests (Loic Dachary, Yan, Zheng)</p></li>
<li><p>qa: parallelize make check (Loic Dachary)</p></li>
<li><p>qa: reorg fs quota tests (Greg Farnum)</p></li>
<li><p>qa: tolerate nearly-full disk for make check (Loic Dachary)</p></li>
<li><p>rados: fix put of /dev/null (Loic Dachary)</p></li>
<li><p>rados: fix usage (Jianpeng Ma)</p></li>
<li><p>rados: parse command-line arguments more strictly (#8983 Adam Crume)</p></li>
<li><p>rados: use copy-from operation for copy, cppool (Sage Weil)</p></li>
<li><p>radosgw-admin: add replicalog update command (Yehuda Sadeh)</p></li>
<li><p>rbd-fuse: clean up on shutdown (Josh Durgin)</p></li>
<li><p>rbd-fuse: fix memory leak (Adam Crume)</p></li>
<li><p>rbd-replay-many (Adam Crume)</p></li>
<li><p>rbd-replay: –anonymize flag to rbd-replay-prep (Adam Crume)</p></li>
<li><p>rbd: add ‘merge-diff’ function (MingXin Liu, Yunchuan Wen, Li Wang)</p></li>
<li><p>rbd: allow v2 striping parameters for clones and imports (Jason Dillaman)</p></li>
<li><p>rbd: fix ‘rbd diff’ for non-existent objects (Adam Crume)</p></li>
<li><p>rbd: fix buffer handling on image import (#10590 Jason Dillaman)</p></li>
<li><p>rbd: fix error when striping with format 1 (Sebastien Han)</p></li>
<li><p>rbd: fix export for image sizes over 2GB (Vicente Cheng)</p></li>
<li><p>rbd: fix formatted output of image features (Jason Dillaman)</p></li>
<li><p>rbd: leave exclusive lockin goff by default (Jason Dillaman)</p></li>
<li><p>rbd: updat eman page (Ilya Dryomov)</p></li>
<li><p>rbd: update init-rbdmap to fix dup mount point (Karel Striegel)</p></li>
<li><p>rbd: use IO hints for import, export, and bench operations (#10462 Jason Dillaman)</p></li>
<li><p>rbd: use rolling average for rbd bench-write throughput (Jason Dillaman)</p></li>
<li><p>rbd_recover_tool: RBD image recovery tool (Min Chen)</p></li>
<li><p>rgw: S3-style object versioning support (Yehuda Sadeh)</p></li>
<li><p>rgw: add location header when object is in another region (VRan Liu)</p></li>
<li><p>rgw: change multipart upload id magic (#10271 Yehuda Sadeh)</p></li>
<li><p>rgw: check keystone auth for S3 POST requests (#10062 Abhishek Lekshmanan)</p></li>
<li><p>rgw: check timestamp on s3 keystone auth (#10062 Abhishek Lekshmanan)</p></li>
<li><p>rgw: conditional PUT on ETag (#8562 Ray Lv)</p></li>
<li><p>rgw: create subuser if needed when creating user (#10103 Yehuda Sadeh)</p></li>
<li><p>rgw: decode http query params correction (#10271 Yehuda Sadeh)</p></li>
<li><p>rgw: don’t overwrite bucket/object owner when setting ACLs (#10978 Yehuda Sadeh)</p></li>
<li><p>rgw: enable IPv6 for civetweb (#10965 Yehuda Sadeh)</p></li>
<li><p>rgw: extend replica log API (purge-all) (Yehuda Sadeh)</p></li>
<li><p>rgw: fail S3 POST if keystone not configured (#10688 Valery Tschopp, Yehuda Sadeh)</p></li>
<li><p>rgw: fix If-Modified-Since (VRan Liu)</p></li>
<li><p>rgw: fix XML header on get ACL request (#10106 Yehuda Sadeh)</p></li>
<li><p>rgw: fix bucket removal with data purge (Yehuda Sadeh)</p></li>
<li><p>rgw: fix content length check (#10701 Axel Dunkel, Yehuda Sadeh)</p></li>
<li><p>rgw: fix content-length update (#9576 Yehuda Sadeh)</p></li>
<li><p>rgw: fix disabling of max_size quota (#9907 Dong Lei)</p></li>
<li><p>rgw: fix error codes (#10334 #10329 Yehuda Sadeh)</p></li>
<li><p>rgw: fix incorrect len when len is 0 (#9877 Yehuda Sadeh)</p></li>
<li><p>rgw: fix object copy content type (#9478 Yehuda Sadeh)</p></li>
<li><p>rgw: fix partial GET in swift (#10553 Yehuda Sadeh)</p></li>
<li><p>rgw: fix replica log indexing (#8251 Yehuda Sadeh)</p></li>
<li><p>rgw: fix shutdown (#10472 Yehuda Sadeh)</p></li>
<li><p>rgw: fix swift metadata header name (Dmytro Iurchenko)</p></li>
<li><p>rgw: fix sysvinit script when rgw_socket_path is not defined (#11159 Yehuda Sadeh, Dan Mick)</p></li>
<li><p>rgw: fix user stags in get-user-info API (#9359 Ray Lv)</p></li>
<li><p>rgw: include XML ns on get ACL request (#10106 Yehuda Sadeh)</p></li>
<li><p>rgw: index swift keys appropriately (#10471 Yehuda Sadeh)</p></li>
<li><p>rgw: make sysvinit script set ulimit -n properly (Sage Weil)</p></li>
<li><p>rgw: misc fixes (#10307 Yehuda Sadeh)</p></li>
<li><p>rgw: only track cleanup for objects we write (#10311 Yehuda Sadeh)</p></li>
<li><p>rgw: pass civetweb configurables through (#10907 Yehuda Sadeh)</p></li>
<li><p>rgw: prevent illegal bucket policy that doesn’t match placement rule (Yehuda Sadeh)</p></li>
<li><p>rgw: remove multipart entries from bucket index on abort (#10719 Yehuda Sadeh)</p></li>
<li><p>rgw: remove swift user manifest (DLO) hash calculation (#9973 Yehuda Sadeh)</p></li>
<li><p>rgw: respond with 204 to POST on containers (#10667 Yuan Zhou)</p></li>
<li><p>rgw: return timestamp on GET/HEAD (#8911 Yehuda Sadeh)</p></li>
<li><p>rgw: reuse fcgx connection struct (#10194 Yehuda Sadeh)</p></li>
<li><p>rgw: run radosgw as apache with systemd (#10125 Loic Dachary)</p></li>
<li><p>rgw: send explicit HTTP status string (Yehuda Sadeh)</p></li>
<li><p>rgw: set ETag on object copy (#9479 Yehuda Sadeh)</p></li>
<li><p>rgw: set length for keystone token validation request (#7796 Yehuda Sadeh, Mark Kirkwood)</p></li>
<li><p>rgw: support X-Storage-Policy header for Swift storage policy compat (Yehuda Sadeh)</p></li>
<li><p>rgw: support multiple host names (#7467 Yehuda Sadeh)</p></li>
<li><p>rgw: swift: dump container’s custom metadata (#10665 Ahmad Faheem, Dmytro Iurchenko)</p></li>
<li><p>rgw: swift: support Accept header for response format (#10746 Dmytro Iurchenko)</p></li>
<li><p>rgw: swift: support for X-Remove-Container-Meta-{key} (#10475 Dmytro Iurchenko)</p></li>
<li><p>rgw: tweak error codes (#10329 #10334 Yehuda Sadeh)</p></li>
<li><p>rgw: update bucket index on attr changes, for multi-site sync (#5595 Yehuda Sadeh)</p></li>
<li><p>rgw: use rn for http headers (#9254 Yehuda Sadeh)</p></li>
<li><p>rgw: use gc for multipart abort (#10445 Aaron Bassett, Yehuda Sadeh)</p></li>
<li><p>rgw: use new watch/notify API (Yehuda Sadeh, Sage Weil)</p></li>
<li><p>rpm: misc fixes (Key Dreyer)</p></li>
<li><p>rpm: move rgw logrotate to radosgw subpackage (Ken Dreyer)</p></li>
<li><p>systemd: better systemd unit files (Owen Synge)</p></li>
<li><p>sysvinit: fix race in ‘stop’ (#10389 Loic Dachary)</p></li>
<li><p>test: fix bufferlist tests (Jianpeng Ma)</p></li>
<li><p>tests: ability to run unit tests under docker (Loic Dachary)</p></li>
<li><p>tests: centos-6 dockerfile (#10755 Loic Dachary)</p></li>
<li><p>tests: improve docker-based tests (Loic Dachary)</p></li>
<li><p>tests: unit tests for shared_cache (Dong Yuan)</p></li>
<li><p>udev: fix rules for CentOS7/RHEL7 (Loic Dachary)</p></li>
<li><p>use clock_gettime instead of gettimeofday (Jianpeng Ma)</p></li>
<li><p>vstart.sh: set up environment for s3-tests (Luis Pabon)</p></li>
<li><p>vstart.sh: work with cmake (Yehuda Sadeh)</p></li>
</ul>
</div>
</div>
<div class="section" id="v0-93">
<h1>v0.93<a class="headerlink" href="#v0-93" title="Permalink to this headline">¶</a></h1>
<p>This is the first release candidate for Hammer, and includes all of
the features that will be present in the final release.  We welcome
and encourage any and all testing in non-production clusters to identify
any problems with functionality, stability, or performance before the
final Hammer release.</p>
<p>We suggest some caution in one area: librbd.  There is a lot of new
functionality around object maps and locking that is disabled by
default but may still affect stability for existing images.  We are
continuing to shake out those bugs so that the final Hammer release
(probably v0.94) will be rock solid.</p>
<p>Major features since Giant include:</p>
<ul class="simple">
<li><p>cephfs: journal scavenger repair tool (John Spray)</p></li>
<li><p>crush: new and improved straw2 bucket type (Sage Weil, Christina Anderson, Xiaoxi Chen)</p></li>
<li><p>doc: improved guidance for CephFS early adopters (John Spray)</p></li>
<li><p>librbd: add per-image object map for improved performance (Jason Dillaman)</p></li>
<li><p>librbd: copy-on-read (Min Chen, Li Wang, Yunchuan Wen, Cheng Cheng)</p></li>
<li><p>librados: fadvise-style IO hints (Jianpeng Ma)</p></li>
<li><p>mds: many many snapshot-related fixes (Yan, Zheng)</p></li>
<li><p>mon: new ‘ceph osd df’ command (Mykola Golub)</p></li>
<li><p>mon: new ‘ceph pg ls …’ command (Xinxin Shu)</p></li>
<li><p>osd: improved performance for high-performance backends</p></li>
<li><p>osd: improved recovery behavior (Samuel Just)</p></li>
<li><p>osd: improved cache tier behavior with reads (Zhiqiang Wang)</p></li>
<li><p>rgw: S3-compatible bucket versioning support (Yehuda Sadeh)</p></li>
<li><p>rgw: large bucket index sharding (Guang Yang, Yehuda Sadeh)</p></li>
<li><p>RDMA “xio” messenger support (Matt Benjamin, Vu Pham)</p></li>
</ul>
<div class="section" id="id30">
<h2>Upgrading<a class="headerlink" href="#id30" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>If you are upgrading from v0.92, you must stop all OSD daemons and flush their
journals (<code class="docutils literal notranslate"><span class="pre">ceph-osd</span> <span class="pre">-i</span> <span class="pre">NNN</span> <span class="pre">--flush-journal</span></code>) before upgrading.  There was
a transaction encoding bug in v0.92 that broke compatibility.  Upgrading from
v0.91 or anything earlier is safe.</p></li>
<li><p>No special restrictions when upgrading from firefly or giant.</p></li>
</ul>
</div>
<div class="section" id="id31">
<h2>Notable Changes<a class="headerlink" href="#id31" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>build: CMake support (Ali Maredia, Casey Bodley, Adam Emerson, Marcus Watts, Matt Benjamin)</p></li>
<li><p>ceph-disk: do not re-use partition if encryption is required (Loic Dachary)</p></li>
<li><p>ceph-disk: support LUKS for encrypted partitions (Andrew Bartlett, Loic Dachary)</p></li>
<li><p>ceph-fuse,libcephfs: add support for O_NOFOLLOW and O_PATH (Greg Farnum)</p></li>
<li><p>ceph-fuse,libcephfs: resend requests before completing cap reconnect (#10912 Yan, Zheng)</p></li>
<li><p>ceph-fuse: select kernel cache invalidation mechanism based on kernel version (Greg Farnum)</p></li>
<li><p>ceph-objectstore-tool: improved import (David Zafman)</p></li>
<li><p>ceph-objectstore-tool: misc improvements, fixes (#9870 #9871 David Zafman)</p></li>
<li><p>ceph: add ‘ceph osd df [tree]’ command (#10452 Mykola Golub)</p></li>
<li><p>ceph: fix ‘ceph tell …’ command validation (#10439 Joao Eduardo Luis)</p></li>
<li><p>ceph: improve ‘ceph osd tree’ output (Mykola Golub)</p></li>
<li><p>cephfs-journal-tool: add recover_dentries function (#9883 John Spray)</p></li>
<li><p>common: add newline to flushed json output (Sage Weil)</p></li>
<li><p>common: filtering for ‘perf dump’ (John Spray)</p></li>
<li><p>common: fix Formatter factory breakage (#10547 Loic Dachary)</p></li>
<li><p>common: make json-pretty output prettier (Sage Weil)</p></li>
<li><p>crush: new and improved straw2 bucket type (Sage Weil, Christina Anderson, Xiaoxi Chen)</p></li>
<li><p>crush: update tries stats for indep rules (#10349 Loic Dachary)</p></li>
<li><p>crush: use larger choose_tries value for erasure code rulesets (#10353 Loic Dachary)</p></li>
<li><p>debian,rpm: move RBD udev rules to ceph-common (#10864 Ken Dreyer)</p></li>
<li><p>debian: split python-ceph into python-{rbd,rados,cephfs} (Boris Ranto)</p></li>
<li><p>doc: CephFS disaster recovery guidance (John Spray)</p></li>
<li><p>doc: CephFS for early adopters (John Spray)</p></li>
<li><p>doc: fix OpenStack Glance docs (#10478 Sebastien Han)</p></li>
<li><p>doc: misc updates (#9793 #9922 #10204 #10203 Travis Rhoden, Hazem, Ayari, Florian Coste, Andy Allan, Frank Yu, Baptiste Veuillez-Mainard, Yuan Zhou, Armando Segnini, Robert Jansen, Tyler Brekke, Viktor Suprun)</p></li>
<li><p>doc: replace cloudfiles with swiftclient Python Swift example (Tim Freund)</p></li>
<li><p>erasure-code: add mSHEC erasure code support (Takeshi Miyamae)</p></li>
<li><p>erasure-code: improved docs (#10340 Loic Dachary)</p></li>
<li><p>erasure-code: set max_size to 20 (#10363 Loic Dachary)</p></li>
<li><p>libcephfs,ceph-fuse: fix getting zero-length xattr (#10552 Yan, Zheng)</p></li>
<li><p>librados: add blacklist_add convenience method (Jason Dillaman)</p></li>
<li><p>librados: expose rados_{read|write}_op_assert_version in C API (Kim Vandry)</p></li>
<li><p>librados: fix pool name caching (#10458 Radoslaw Zarzynski)</p></li>
<li><p>librados: fix resource leak, misc bugs (#10425 Radoslaw Zarzynski)</p></li>
<li><p>librados: fix some watch/notify locking (Jason Dillaman, Josh Durgin)</p></li>
<li><p>libradosstriper: fix write_full when ENOENT (#10758 Sebastien Ponce)</p></li>
<li><p>librbd: CRC protection for RBD image map (Jason Dillaman)</p></li>
<li><p>librbd: add per-image object map for improved performance (Jason Dillaman)</p></li>
<li><p>librbd: add support for an “object map” indicating which objects exist (Jason Dillaman)</p></li>
<li><p>librbd: adjust internal locking (Josh Durgin, Jason Dillaman)</p></li>
<li><p>librbd: better handling of watch errors (Jason Dillaman)</p></li>
<li><p>librbd: coordinate maint operations through lock owner (Jason Dillaman)</p></li>
<li><p>librbd: copy-on-read (Min Chen, Li Wang, Yunchuan Wen, Cheng Cheng, Jason Dillaman)</p></li>
<li><p>librbd: enforce write ordering with a snapshot (Jason Dillaman)</p></li>
<li><p>librbd: fadvise-style hints; add misc hints for certain operations (Jianpeng Ma)</p></li>
<li><p>librbd: fix coverity false-positives (Jason Dillaman)</p></li>
<li><p>librbd: fix snap create races (Jason Dillaman)</p></li>
<li><p>librbd: flush AIO operations asynchronously (#10714 Jason Dillaman)</p></li>
<li><p>librbd: make async versions of long-running maint operations (Jason Dillaman)</p></li>
<li><p>librbd: mock tests (Jason Dillaman)</p></li>
<li><p>librbd: optionally blacklist clients before breaking locks (#10761 Jason Dillaman)</p></li>
<li><p>librbd: prevent copyup during shrink (Jason Dillaman)</p></li>
<li><p>mds: add cephfs-table-tool (John Spray)</p></li>
<li><p>mds: avoid sending traceless replies in most cases (Yan, Zheng)</p></li>
<li><p>mds: export dir asok command (John Spray)</p></li>
<li><p>mds: fix stray/purge perfcounters (#10388 John Spray)</p></li>
<li><p>mds: handle heartbeat_reset during shutdown (#10382 John Spray)</p></li>
<li><p>mds: many many snapshot-related fixes (Yan, Zheng)</p></li>
<li><p>mds: refactor, improve Session storage (John Spray)</p></li>
<li><p>misc coverity fixes (Danny Al-Gaaf)</p></li>
<li><p>mon: add noforward flag for some mon commands (Mykola Golub)</p></li>
<li><p>mon: disallow empty pool names (#10555 Wido den Hollander)</p></li>
<li><p>mon: do not deactivate last mds (#10862 John Spray)</p></li>
<li><p>mon: drop old ceph_mon_store_converter (Sage Weil)</p></li>
<li><p>mon: fix ‘ceph pg dump_stuck degraded’ (Xinxin Shu)</p></li>
<li><p>mon: fix ‘profile osd’ use of config-key function on mon (#10844 Joao Eduardo Luis)</p></li>
<li><p>mon: fix compatset initalization during mkfs (Joao Eduardo Luis)</p></li>
<li><p>mon: fix feature tracking during elections (Joao Eduardo Luis)</p></li>
<li><p>mon: fix mds gid/rank/state parsing (John Spray)</p></li>
<li><p>mon: ignore failure reports from before up_from (#10762 Dan van der Ster, Sage Weil)</p></li>
<li><p>mon: improved corrupt CRUSH map detection (Joao Eduardo Luis)</p></li>
<li><p>mon: include pg_temp count in osdmap summary (Sage Weil)</p></li>
<li><p>mon: log health summary to cluster log (#9440 Joao Eduardo Luis)</p></li>
<li><p>mon: make ‘mds fail’ idempotent (John Spray)</p></li>
<li><p>mon: make pg dump {sum,pgs,pgs_brief} work for format=plain (#5963 #6759 Mykola Golub)</p></li>
<li><p>mon: new pool safety flags nodelete, nopgchange, nosizechange (#9792 Mykola Golub)</p></li>
<li><p>mon: new, friendly ‘ceph pg ls …’ command (Xinxin Shu)</p></li>
<li><p>mon: prevent MDS transition from STOPPING (#10791 Greg Farnum)</p></li>
<li><p>mon: propose all pending work in one transaction (Sage Weil)</p></li>
<li><p>mon: remove pg_temps for nonexistent pools (Joao Eduardo Luis)</p></li>
<li><p>mon: require mon_allow_pool_delete option to remove pools (Sage Weil)</p></li>
<li><p>mon: set globalid prealloc to larger value (Sage Weil)</p></li>
<li><p>mon: skip zeroed osd stats in get_rule_avail (#10257 Joao Eduardo Luis)</p></li>
<li><p>mon: validate min_size range (Jianpeng Ma)</p></li>
<li><p>msgr: async: bind threads to CPU cores, improved poll (Haomai Wang)</p></li>
<li><p>msgr: fix crc configuration (Mykola Golub)</p></li>
<li><p>msgr: misc unit tests (Haomai Wang)</p></li>
<li><p>msgr: xio: XioMessenger RDMA support (Casey Bodley, Vu Pham, Matt Benjamin)</p></li>
<li><p>osd, librados: fadvise-style librados hints (Jianpeng Ma)</p></li>
<li><p>osd, librados: fix xattr_cmp_u64 (Dongmao Zhang)</p></li>
<li><p>osd,mon: add ‘norebalance’ flag (Kefu Chai)</p></li>
<li><p>osd,mon: specify OSD features explicitly in MOSDBoot (#10911 Sage Weil)</p></li>
<li><p>osd: add option to prioritize heartbeat network traffic (Jian Wen)</p></li>
<li><p>osd: add support for the SHEC erasure-code algorithm (Takeshi Miyamae, Loic Dachary)</p></li>
<li><p>osd: allow recovery while below min_size (Samuel Just)</p></li>
<li><p>osd: allow recovery with fewer than min_size OSDs (Samuel Just)</p></li>
<li><p>osd: allow writes to degraded objects (Samuel Just)</p></li>
<li><p>osd: allow writes to degraded objects (Samuel Just)</p></li>
<li><p>osd: avoid publishing unchanged PG stats (Sage Weil)</p></li>
<li><p>osd: cache recent ObjectContexts (Dong Yuan)</p></li>
<li><p>osd: clear cache on interval change (Samuel Just)</p></li>
<li><p>osd: do no proxy reads unless target OSDs are new (#10788 Sage Weil)</p></li>
<li><p>osd: do not update digest on inconsistent object (#10524 Samuel Just)</p></li>
<li><p>osd: don’t record digests for snapdirs (#10536 Samuel Just)</p></li>
<li><p>osd: fix OSDCap parser on old (el6) boost::spirit (#10757 Kefu Chai)</p></li>
<li><p>osd: fix OSDCap parsing on el6 (#10757 Kefu Chai)</p></li>
<li><p>osd: fix ObjectStore::Transaction encoding version (#10734 Samuel Just)</p></li>
<li><p>osd: fix auth object selection during repair (#10524 Samuel Just)</p></li>
<li><p>osd: fix bug in pending digest updates (#10840 Samuel Just)</p></li>
<li><p>osd: fix cancel_proxy_read_ops (Sage Weil)</p></li>
<li><p>osd: fix cleanup of interrupted pg deletion (#10617 Sage Weil)</p></li>
<li><p>osd: fix journal wrapping bug (#10883 David Zafman)</p></li>
<li><p>osd: fix leak in SnapTrimWQ (#10421 Kefu Chai)</p></li>
<li><p>osd: fix memstore free space calculation (Xiaoxi Chen)</p></li>
<li><p>osd: fix mixed-version peering issues (Samuel Just)</p></li>
<li><p>osd: fix object digest update bug (#10840 Samuel Just)</p></li>
<li><p>osd: fix ordering issue with new transaction encoding (#10534 Dong Yuan)</p></li>
<li><p>osd: fix past_interval generation (#10427 #10430 David Zafman)</p></li>
<li><p>osd: fix short read handling on push (#8121 David Zafman)</p></li>
<li><p>osd: fix watch timeout cache state update (#10784 David Zafman)</p></li>
<li><p>osd: force promotion of watch/notify ops (Zhiqiang Wang)</p></li>
<li><p>osd: improve idempotency detection across cache promotion/demotion (#8935 Sage Weil, Samuel Just)</p></li>
<li><p>osd: include activating peers in blocked_by (#10477 Sage Weil)</p></li>
<li><p>osd: jerasure and gf-complete updates from upstream (#10216 Loic Dachary)</p></li>
<li><p>osd: journal: check fsync/fdatasync result (Jianpeng Ma)</p></li>
<li><p>osd: journal: fix hang on shutdown (#10474 David Zafman)</p></li>
<li><p>osd: journal: fix header.committed_up_to (Xinze Chi)</p></li>
<li><p>osd: journal: initialize throttle (Ning Yao)</p></li>
<li><p>osd: journal: misc bug fixes (#6003 David Zafman, Samuel Just)</p></li>
<li><p>osd: misc cleanup (Xinze Chi, Yongyue Sun)</p></li>
<li><p>osd: new ‘activating’ state between peering and active (Sage Weil)</p></li>
<li><p>osd: preserve reqids for idempotency checks for promote/demote (Sage Weil, Zhiqiang Wang, Samuel Just)</p></li>
<li><p>osd: remove dead locking code (Xinxin Shu)</p></li>
<li><p>osd: restrict scrub to certain times of day (Xinze Chi)</p></li>
<li><p>osd: rocksdb: fix shutdown (Hoamai Wang)</p></li>
<li><p>pybind: fix memory leak in librados bindings (Billy Olsen)</p></li>
<li><p>qa: fix mds tests (#10539 John Spray)</p></li>
<li><p>qa: ignore duplicates in rados ls (Josh Durgin)</p></li>
<li><p>qa: improve hadoop tests (Noah Watkins)</p></li>
<li><p>qa: reorg fs quota tests (Greg Farnum)</p></li>
<li><p>rados: fix usage (Jianpeng Ma)</p></li>
<li><p>radosgw-admin: add replicalog update command (Yehuda Sadeh)</p></li>
<li><p>rbd-fuse: clean up on shutdown (Josh Durgin)</p></li>
<li><p>rbd: add ‘merge-diff’ function (MingXin Liu, Yunchuan Wen, Li Wang)</p></li>
<li><p>rbd: fix buffer handling on image import (#10590 Jason Dillaman)</p></li>
<li><p>rbd: leave exclusive lockin goff by default (Jason Dillaman)</p></li>
<li><p>rbd: update init-rbdmap to fix dup mount point (Karel Striegel)</p></li>
<li><p>rbd: use IO hints for import, export, and bench operations (#10462 Jason Dillaman)</p></li>
<li><p>rbd_recover_tool: RBD image recovery tool (Min Chen)</p></li>
<li><p>rgw: S3-style object versioning support (Yehuda Sadeh)</p></li>
<li><p>rgw: check keystone auth for S3 POST requests (#10062 Abhishek Lekshmanan)</p></li>
<li><p>rgw: extend replica log API (purge-all) (Yehuda Sadeh)</p></li>
<li><p>rgw: fail S3 POST if keystone not configured (#10688 Valery Tschopp, Yehuda Sadeh)</p></li>
<li><p>rgw: fix XML header on get ACL request (#10106 Yehuda Sadeh)</p></li>
<li><p>rgw: fix bucket removal with data purge (Yehuda Sadeh)</p></li>
<li><p>rgw: fix replica log indexing (#8251 Yehuda Sadeh)</p></li>
<li><p>rgw: fix swift metadata header name (Dmytro Iurchenko)</p></li>
<li><p>rgw: remove multipart entries from bucket index on abort (#10719 Yehuda Sadeh)</p></li>
<li><p>rgw: respond with 204 to POST on containers (#10667 Yuan Zhou)</p></li>
<li><p>rgw: reuse fcgx connection struct (#10194 Yehuda Sadeh)</p></li>
<li><p>rgw: support multiple host names (#7467 Yehuda Sadeh)</p></li>
<li><p>rgw: swift: dump container’s custom metadata (#10665 Ahmad Faheem, Dmytro Iurchenko)</p></li>
<li><p>rgw: swift: support Accept header for response format (#10746 Dmytro Iurchenko)</p></li>
<li><p>rgw: swift: support for X-Remove-Container-Meta-{key} (#10475 Dmytro Iurchenko)</p></li>
<li><p>rpm: move rgw logrotate to radosgw subpackage (Ken Dreyer)</p></li>
<li><p>tests: centos-6 dockerfile (#10755 Loic Dachary)</p></li>
<li><p>tests: unit tests for shared_cache (Dong Yuan)</p></li>
<li><p>vstart.sh: work with cmake (Yehuda Sadeh)</p></li>
</ul>
</div>
</div>
<div class="section" id="v0-92">
<h1>v0.92<a class="headerlink" href="#v0-92" title="Permalink to this headline">¶</a></h1>
<p>This is the second-to-last chunk of new stuff before Hammer.  Big items
include additional checksums on OSD objects, proxied reads in the
cache tier, image locking in RBD, optimized OSD Transaction and
replication messages, and a big pile of RGW and MDS bug fixes.</p>
<div class="section" id="id32">
<h2>Upgrading<a class="headerlink" href="#id32" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p>The experimental ‘keyvaluestore-dev’ OSD backend has been renamed
‘keyvaluestore’ (for simplicity) and marked as experimental.  To
enable this untested feature and acknowledge that you understand
that it is untested and may destroy data, you need to add the
following to your ceph.conf:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">enable</span> <span class="n">experimental</span> <span class="n">unrecoverable</span> <span class="n">data</span> <span class="n">corrupting</span> <span class="n">features</span> <span class="o">=</span> <span class="n">keyvaluestore</span>
</pre></div>
</div>
</li>
<li><p>The following librados C API function calls take a ‘flags’ argument whose value
is now correctly interpreted:</p>
<blockquote>
<div><p>rados_write_op_operate()
rados_aio_write_op_operate()
rados_read_op_operate()
rados_aio_read_op_operate()</p>
</div></blockquote>
<p>The flags were not correctly being translated from the librados constants to the
internal values.  Now they are.  Any code that is passing flags to these methods
should be audited to ensure that they are using the correct LIBRADOS_OP_FLAG_*
constants.</p>
</li>
<li><p>The ‘rados’ CLI ‘copy’ and ‘cppool’ commands now use the copy-from operation,
which means the latest CLI cannot run these commands against pre-firefly OSDs.</p></li>
<li><p>The librados watch/notify API now includes a watch_flush() operation to flush
the async queue of notify operations.  This should be called by any watch/notify
user prior to rados_shutdown().</p></li>
</ul>
</div>
<div class="section" id="id33">
<h2>Notable Changes<a class="headerlink" href="#id33" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>add experimental features option (Sage Weil)</p></li>
<li><p>build: fix ‘make check’ races (#10384 Loic Dachary)</p></li>
<li><p>build: fix pkg names when libkeyutils is missing (Pankag Garg, Ken Dreyer)</p></li>
<li><p>ceph: make ‘ceph -s’ show PG state counts in sorted order (Sage Weil)</p></li>
<li><p>ceph: make ‘ceph tell mon.* version’ work (Mykola Golub)</p></li>
<li><p>ceph-monstore-tool: fix/improve CLI (Joao Eduardo Luis)</p></li>
<li><p>ceph: show primary-affinity in ‘ceph osd tree’ (Mykola Golub)</p></li>
<li><p>common: add TableFormatter (Andreas Peters)</p></li>
<li><p>common: check syncfs() return code (Jianpeng Ma)</p></li>
<li><p>doc: do not suggest dangerous XFS nobarrier option (Dan van der Ster)</p></li>
<li><p>doc: misc updates (Nilamdyuti Goswami, John Wilkins)</p></li>
<li><p>install-deps.sh: do not require sudo when root (Loic Dachary)</p></li>
<li><p>libcephfs: fix dirfrag trimming (#10387 Yan, Zheng)</p></li>
<li><p>libcephfs: fix mount timeout (#10041 Yan, Zheng)</p></li>
<li><p>libcephfs: fix test (#10415 Yan, Zheng)</p></li>
<li><p>libcephfs: fix use-afer-free on umount (#10412 Yan, Zheng)</p></li>
<li><p>libcephfs: include ceph and git version in client metadata (Sage Weil)</p></li>
<li><p>librados: add watch_flush() operation (Sage Weil, Haomai Wang)</p></li>
<li><p>librados: avoid memcpy on getxattr, read (Jianpeng Ma)</p></li>
<li><p>librados: create ioctx by pool id (Jason Dillaman)</p></li>
<li><p>librados: do notify completion in fast-dispatch (Sage Weil)</p></li>
<li><p>librados: remove shadowed variable (Kefu Chain)</p></li>
<li><p>librados: translate op flags from C APIs (Matthew Richards)</p></li>
<li><p>librbd: differentiate between R/O vs R/W features (Jason Dillaman)</p></li>
<li><p>librbd: exclusive image locking (Jason Dillaman)</p></li>
<li><p>librbd: fix write vs import race (#10590 Jason Dillaman)</p></li>
<li><p>librbd: gracefully handle deleted/renamed pools (#10270 Jason Dillaman)</p></li>
<li><p>mds: asok command for fetching subtree map (John Spray)</p></li>
<li><p>mds: constify MDSCacheObjects (John Spray)</p></li>
<li><p>misc: various valgrind fixes and cleanups (Danny Al-Gaaf)</p></li>
<li><p>mon: fix ‘mds fail’ for standby MDSs (John Spray)</p></li>
<li><p>mon: fix stashed monmap encoding (#5203 Xie Rui)</p></li>
<li><p>mon: implement ‘fs reset’ command (John Spray)</p></li>
<li><p>mon: respect down flag when promoting standbys (John Spray)</p></li>
<li><p>mount.ceph: fix suprious error message (#10351 Yan, Zheng)</p></li>
<li><p>msgr: async: many fixes, unit tests (Haomai Wang)</p></li>
<li><p>msgr: simple: retry binding to port on failure (#10029 Wido den Hollander)</p></li>
<li><p>osd: add fadvise flags to ObjectStore API (Jianpeng Ma)</p></li>
<li><p>osd: add get_latest_osdmap asok command (#9483 #9484 Mykola Golub)</p></li>
<li><p>osd: EIO on whole-object reads when checksum is wrong (Sage Weil)</p></li>
<li><p>osd: filejournal: don’t cache journal when not using direct IO (Jianpeng Ma)</p></li>
<li><p>osd: fix ioprio option (Mykola Golub)</p></li>
<li><p>osd: fix scrub delay bug (#10693 Samuel Just)</p></li>
<li><p>osd: fix watch reconnect race (#10441 Sage Weil)</p></li>
<li><p>osd: handle no-op write with snapshot (#10262 Sage Weil)</p></li>
<li><p>osd: journal: fix journal zeroing when direct IO is enabled (Xie Rui)</p></li>
<li><p>osd: keyvaluestore: cleanup dead code (Ning Yao)</p></li>
<li><p>osd, mds: ‘ops’ as shorthand for ‘dump_ops_in_flight’ on asok (Sage Weil)</p></li>
<li><p>osd: memstore: fix size limit (Xiaoxi Chen)</p></li>
<li><p>osd: misc scrub fixes (#10017 Loic Dachary)</p></li>
<li><p>osd: new optimized encoding for ObjectStore::Transaction (Dong Yuan)</p></li>
<li><p>osd: optimize filter_snapc (Ning Yao)</p></li>
<li><p>osd: optimize WBThrottle map with unordered_map (Ning Yao)</p></li>
<li><p>osd: proxy reads during cache promote (Zhiqiang Wang)</p></li>
<li><p>osd: proxy read support (Zhiqiang Wang)</p></li>
<li><p>osd: remove legacy classic scrub code (Sage Weil)</p></li>
<li><p>osd: remove unused fields in MOSDSubOp (Xiaoxi Chen)</p></li>
<li><p>osd: replace MOSDSubOp messages with simpler, optimized MOSDRepOp (Xiaoxi Chen)</p></li>
<li><p>osd: store whole-object checksums on scrub, write_full (Sage Weil)</p></li>
<li><p>osd: verify kernel is new enough before using XFS extsize ioctl, enable by default (#9956 Sage Weil)</p></li>
<li><p>rados: use copy-from operation for copy, cppool (Sage Weil)</p></li>
<li><p>rgw: change multipart upload id magic (#10271 Yehuda Sadeh)</p></li>
<li><p>rgw: decode http query params correction (#10271 Yehuda Sadeh)</p></li>
<li><p>rgw: fix content length check (#10701 Axel Dunkel, Yehuda Sadeh)</p></li>
<li><p>rgw: fix partial GET in swift (#10553 Yehuda Sadeh)</p></li>
<li><p>rgw: fix shutdown (#10472 Yehuda Sadeh)</p></li>
<li><p>rgw: include XML ns on get ACL request (#10106 Yehuda Sadeh)</p></li>
<li><p>rgw: misc fixes (#10307 Yehuda Sadeh)</p></li>
<li><p>rgw: only track cleanup for objects we write (#10311 Yehuda Sadeh)</p></li>
<li><p>rgw: tweak error codes (#10329 #10334 Yehuda Sadeh)</p></li>
<li><p>rgw: use gc for multipart abort (#10445 Aaron Bassett, Yehuda Sadeh)</p></li>
<li><p>sysvinit: fix race in ‘stop’ (#10389 Loic Dachary)</p></li>
<li><p>test: fix bufferlist tests (Jianpeng Ma)</p></li>
<li><p>tests: improve docker-based tests (Loic Dachary)</p></li>
</ul>
</div>
</div>
<div class="section" id="v0-91">
<h1>v0.91<a class="headerlink" href="#v0-91" title="Permalink to this headline">¶</a></h1>
<p>We are quickly approaching the Hammer feature freeze but have a few
more dev releases to go before we get there.  The headline items are
subtree-based quota support in CephFS (ceph-fuse/libcephfs client
support only for now), a rewrite of the watch/notify librados API used
by RBD and RGW, OSDMap checksums to ensure that maps are always
consistent inside the cluster, new API calls in librados and librbd
for IO hinting modeled after posix_fadvise, and improved storage of
per-PG state.</p>
<p>We expect two more releases before the Hammer feature freeze (v0.93).</p>
<div class="section" id="id34">
<h2>Upgrading<a class="headerlink" href="#id34" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>The ‘category’ field for objects has been removed.  This was originally added
to track PG stat summations over different categories of objects for use by
radosgw.  It is no longer has any known users and is prone to abuse because it
can lead to a pg_stat_t structure that is unbounded.  The librados API calls
that accept this field now ignore it, and the OSD no longer tracks the
per-category summations.</p></li>
<li><p>The output for ‘rados df’ has changed.  The ‘category’ level has been
eliminated, so there is now a single stat object per pool.  The structure of
the JSON output is different, and the plaintext output has one less column.</p></li>
<li><p>The ‘rados create &lt;objectname&gt; [category]’ optional category argument is no
longer supported or recognized.</p></li>
<li><p>rados.py’s Rados class no longer has a __del__ method; it was causing
problems on interpreter shutdown and use of threads.  If your code has
Rados objects with limited lifetimes and you’re concerned about locked
resources, call Rados.shutdown() explicitly.</p></li>
<li><p>There is a new version of the librados watch/notify API with vastly
improved semantics.  Any applications using this interface are
encouraged to migrate to the new API.  The old API calls are marked
as deprecated and will eventually be removed.</p></li>
<li><p>The librados rados_unwatch() call used to be safe to call on an
invalid handle.  The new version has undefined behavior when passed
a bogus value (for example, when rados_watch() returns an error and
handle is not defined).</p></li>
<li><p>The structure of the formatted ‘pg stat’ command is changed for the
portion that counts states by name to avoid using the ‘+’ character
(which appears in state names) as part of the XML token (it is not
legal).</p></li>
</ul>
</div>
<div class="section" id="id35">
<h2>Notable Changes<a class="headerlink" href="#id35" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>asyncmsgr: misc fixes (Haomai Wang)</p></li>
<li><p>buffer: add ‘shareable’ construct (Matt Benjamin)</p></li>
<li><p>build: aarch64 build fixes (Noah Watkins, Haomai Wang)</p></li>
<li><p>build: support for jemalloc (Shishir Gowda)</p></li>
<li><p>ceph-disk: allow journal partition re-use (#10146 Loic Dachary, Dav van der Ster)</p></li>
<li><p>ceph-disk: misc fixes (Christos Stavrakakis)</p></li>
<li><p>ceph-fuse: fix kernel cache trimming (#10277 Yan, Zheng)</p></li>
<li><p>ceph-objectstore-tool: many many improvements (David Zafman)</p></li>
<li><p>common: support new gperftools header locations (Key Dreyer)</p></li>
<li><p>crush: straw bucket weight calculation fixes (#9998 Sage Weil)</p></li>
<li><p>doc: misc improvements (Nilamdyuti Goswami, John Wilkins, Chris Holcombe)</p></li>
<li><p>libcephfs,ceph-fuse: add ‘status’ asok (John Spray)</p></li>
<li><p>librados, osd: new watch/notify implementation (Sage Weil)</p></li>
<li><p>librados: drop ‘category’ feature (Sage Weil)</p></li>
<li><p>librados: fix pool deletion handling (#10372 Sage Weil)</p></li>
<li><p>librados: new fadvise API (Ma Jianpeng)</p></li>
<li><p>libradosstriper: fix remove() (Dongmao Zhang)</p></li>
<li><p>librbd: complete pending ops before closing image (#10299 Josh Durgin)</p></li>
<li><p>librbd: fadvise API (Ma Jianpeng)</p></li>
<li><p>mds: ENOSPC and OSDMap epoch barriers (#7317 John Spray)</p></li>
<li><p>mds: dirfrag buf fix (Yan, Zheng)</p></li>
<li><p>mds: disallow most commands on inactive MDS’s (Greg Farnum)</p></li>
<li><p>mds: drop dentries, leases on deleted directories (#10164 Yan, Zheng)</p></li>
<li><p>mds: handle zero-size xattr (#10335 Yan, Zheng)</p></li>
<li><p>mds: subtree quota support (Yunchuan Wen)</p></li>
<li><p>memstore: free space tracking (John Spray)</p></li>
<li><p>misc cleanup (Danny Al-Gaaf, David Anderson)</p></li>
<li><p>mon: ‘osd crush reweight-all’ command (Sage Weil)</p></li>
<li><p>mon: allow full flag to be manually cleared (#9323 Sage Weil)</p></li>
<li><p>mon: delay failure injection (Joao Eduardo Luis)</p></li>
<li><p>mon: fix paxos timeouts (#10220 Joao Eduardo Luis)</p></li>
<li><p>mon: get canonical OSDMap from leader (#10422 Sage Weil)</p></li>
<li><p>msgr: fix RESETSESSION bug (#10080 Greg Farnum)</p></li>
<li><p>objectstore: deprecate collection attrs (Sage Weil)</p></li>
<li><p>osd, mon: add checksums to all OSDMaps (Sage Weil)</p></li>
<li><p>osd: allow deletion of objects with watcher (#2339 Sage Weil)</p></li>
<li><p>osd: allow sparse read for Push/Pull (Haomai Wang)</p></li>
<li><p>osd: cache reverse_nibbles hash value (Dong Yuan)</p></li>
<li><p>osd: drop upgrade support for pre-dumpling (Sage Weil)</p></li>
<li><p>osd: enable and use posix_fadvise (Sage Weil)</p></li>
<li><p>osd: erasure-code: enforce chunk size alignment (#10211 Loic Dachary)</p></li>
<li><p>osd: erasure-code: jerasure support for NEON (Loic Dachary)</p></li>
<li><p>osd: erasure-code: relax cauchy w restrictions (#10325 David Zhang, Loic Dachary)</p></li>
<li><p>osd: erasure-code: update gf-complete to latest upstream (Loic Dachary)</p></li>
<li><p>osd: fix WBTHrottle perf counters (Haomai Wang)</p></li>
<li><p>osd: fix backfill bug (#10150 Samuel Just)</p></li>
<li><p>osd: fix occasional peering stalls (#10431 Sage Weil)</p></li>
<li><p>osd: fix scrub vs try-flush bug (#8011 Samuel Just)</p></li>
<li><p>osd: fix stderr with -f or -d (Dan Mick)</p></li>
<li><p>osd: misc FIEMAP fixes (Ma Jianpeng)</p></li>
<li><p>osd: optimize Finisher (Xinze Chi)</p></li>
<li><p>osd: store PG metadata in per-collection objects for better concurrency (Sage Weil)</p></li>
<li><p>pyrados: add object lock support (#6114 Mehdi Abaakouk)</p></li>
<li><p>pyrados: fix misnamed wait_* routings (#10104 Dan Mick)</p></li>
<li><p>pyrados: misc cleanups (Kefu Chai)</p></li>
<li><p>qa: add large auth ticket tests (Ilya Dryomov)</p></li>
<li><p>qa: many ‘make check’ improvements (Loic Dachary)</p></li>
<li><p>qa: misc tests (Loic Dachary, Yan, Zheng)</p></li>
<li><p>rgw: conditional PUT on ETag (#8562 Ray Lv)</p></li>
<li><p>rgw: fix error codes (#10334 #10329 Yehuda Sadeh)</p></li>
<li><p>rgw: index swift keys appropriately (#10471 Yehuda Sadeh)</p></li>
<li><p>rgw: prevent illegal bucket policy that doesn’t match placement rule (Yehuda Sadeh)</p></li>
<li><p>rgw: run radosgw as apache with systemd (#10125 Loic Dachary)</p></li>
<li><p>rgw: support X-Storage-Policy header for Swift storage policy compat (Yehuda Sadeh)</p></li>
<li><p>rgw: use rn for http headers (#9254 Yehuda Sadeh)</p></li>
<li><p>rpm: misc fixes (Key Dreyer)</p></li>
</ul>
</div>
</div>
<div class="section" id="v0-90">
<h1>v0.90<a class="headerlink" href="#v0-90" title="Permalink to this headline">¶</a></h1>
<p>This is the last development release before Christmas.  There are some
API cleanups for librados and librbd, and lots of bug fixes across the
board for the OSD, MDS, RGW, and CRUSH.  The OSD also gets support for
discard (potentially helpful on SSDs, although it is off by default), and there
are several improvements to ceph-disk.</p>
<p>The next two development releases will be getting a slew of new
functionality for hammer.  Stay tuned!</p>
<div class="section" id="id36">
<h2>Upgrading<a class="headerlink" href="#id36" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>Previously, the formatted output of ‘ceph pg stat -f …’ was a full
pg dump that included all metadata about all PGs in the system.  It
is now a concise summary of high-level PG stats, just like the
unformatted ‘ceph pg stat’ command.</p></li>
<li><p>All JSON dumps of floating point values were incorrecting surrounding the
value with quotes.  These quotes have been removed.  Any consumer of structured
JSON output that was consuming the floating point values was previously having
to interpret the quoted string and will most likely need to be fixed to take
the unquoted number.</p></li>
</ul>
</div>
<div class="section" id="id37">
<h2>Notable Changes<a class="headerlink" href="#id37" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>arch: fix NEON feaeture detection (#10185 Loic Dachary)</p></li>
<li><p>build: adjust build deps for yasm, virtualenv (Jianpeng Ma)</p></li>
<li><p>build: improve build dependency tooling (Loic Dachary)</p></li>
<li><p>ceph-disk: call partx/partprobe consistency (#9721 Loic Dachary)</p></li>
<li><p>ceph-disk: fix dmcrypt key permissions (Loic Dachary)</p></li>
<li><p>ceph-disk: fix umount race condition (#10096 Blaine Gardner)</p></li>
<li><p>ceph-disk: init=none option (Loic Dachary)</p></li>
<li><p>ceph-monstore-tool: fix shutdown (#10093 Loic Dachary)</p></li>
<li><p>ceph-objectstore-tool: fix import (#10090 David Zafman)</p></li>
<li><p>ceph-objectstore-tool: many improvements and tests (David Zafman)</p></li>
<li><p>ceph.spec: package rbd-replay-prep (Ken Dreyer)</p></li>
<li><p>common: add ‘perf reset …’ admin command (Jianpeng Ma)</p></li>
<li><p>common: do not unlock rwlock on destruction (Federico Simoncelli)</p></li>
<li><p>common: fix block device discard check (#10296 Sage Weil)</p></li>
<li><p>common: remove broken CEPH_LOCKDEP optoin (Kefu Chai)</p></li>
<li><p>crush: fix tree bucket behavior (Rongze Zhu)</p></li>
<li><p>doc: add build-doc guidlines for Fedora and CentOS/RHEL (Nilamdyuti Goswami)</p></li>
<li><p>doc: enable rbd cache on openstack deployments (Sebastien Han)</p></li>
<li><p>doc: improved installation nots on CentOS/RHEL installs (John Wilkins)</p></li>
<li><p>doc: misc cleanups (Adam Spiers, Sebastien Han, Nilamdyuti Goswami, Ken Dreyer, John Wilkins)</p></li>
<li><p>doc: new man pages (Nilamdyuti Goswami)</p></li>
<li><p>doc: update release descriptions (Ken Dreyer)</p></li>
<li><p>doc: update sepia hardware inventory (Sandon Van Ness)</p></li>
<li><p>librados: only export public API symbols (Jason Dillaman)</p></li>
<li><p>libradosstriper: fix stat strtoll (Dongmao Zhang)</p></li>
<li><p>libradosstriper: fix trunc method (#10129 Sebastien Ponce)</p></li>
<li><p>librbd: fix list_children from invalid pool ioctxs (#10123 Jason Dillaman)</p></li>
<li><p>librbd: only export public API symbols (Jason Dillaman)</p></li>
<li><p>many coverity fixes (Danny Al-Gaaf)</p></li>
<li><p>mds: ‘flush journal’ admin command (John Spray)</p></li>
<li><p>mds: fix MDLog IO callback deadlock (John Spray)</p></li>
<li><p>mds: fix deadlock during journal probe vs purge (#10229 Yan, Zheng)</p></li>
<li><p>mds: fix race trimming log segments (Yan, Zheng)</p></li>
<li><p>mds: store backtrace for stray dir (Yan, Zheng)</p></li>
<li><p>mds: verify backtrace when fetching dirfrag (#9557 Yan, Zheng)</p></li>
<li><p>mon: add max pgs per osd warning (Sage Weil)</p></li>
<li><p>mon: fix <em>_ratio</em> units and types (Sage Weil)</p></li>
<li><p>mon: fix JSON dumps to dump floats as flots and not strings (Sage Weil)</p></li>
<li><p>mon: fix formatter ‘pg stat’ command output (Sage Weil)</p></li>
<li><p>msgr: async: several fixes (Haomai Wang)</p></li>
<li><p>msgr: simple: fix rare deadlock (Greg Farnum)</p></li>
<li><p>osd: batch pg log trim (Xinze Chi)</p></li>
<li><p>osd: clean up internal ObjectStore interface (Sage Weil)</p></li>
<li><p>osd: do not abort deep scrub on missing hinfo (#10018 Loic Dachary)</p></li>
<li><p>osd: fix ghobject_t formatted output to include shard (#10063 Loic Dachary)</p></li>
<li><p>osd: fix osd peer check on scrub messages (#9555 Sage Weil)</p></li>
<li><p>osd: fix pgls filter ops (#9439 David Zafman)</p></li>
<li><p>osd: flush snapshots from cache tier immediately (Sage Weil)</p></li>
<li><p>osd: keyvaluestore: fix getattr semantics (Haomai Wang)</p></li>
<li><p>osd: keyvaluestore: fix key ordering (#10119 Haomai Wang)</p></li>
<li><p>osd: limit in-flight read requests (Jason Dillaman)</p></li>
<li><p>osd: log when scrub or repair starts (Loic Dachary)</p></li>
<li><p>osd: support for discard for journal trim (Jianpeng Ma)</p></li>
<li><p>qa: fix osd create dup tests (#10083 Loic Dachary)</p></li>
<li><p>rgw: add location header when object is in another region (VRan Liu)</p></li>
<li><p>rgw: check timestamp on s3 keystone auth (#10062 Abhishek Lekshmanan)</p></li>
<li><p>rgw: make sysvinit script set ulimit -n properly (Sage Weil)</p></li>
<li><p>systemd: better systemd unit files (Owen Synge)</p></li>
<li><p>tests: ability to run unit tests under docker (Loic Dachary)</p></li>
</ul>
</div>
</div>
<div class="section" id="v0-89">
<h1>v0.89<a class="headerlink" href="#v0-89" title="Permalink to this headline">¶</a></h1>
<p>This is the second development release since Giant.  The big items
include the first batch of scrub patchs from Greg for CephFS, a rework
in the librados object listing API to properly handle namespaces, and
a pile of bug fixes for RGW.  There are also several smaller issues
fixed up in the performance area with buffer alignment and memory
copies, osd cache tiering agent, and various CephFS fixes.</p>
<div class="section" id="id38">
<h2>Upgrading<a class="headerlink" href="#id38" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>New ability to list all objects from all namespaces can fail or
return incomplete results when not all OSDs have been upgraded.
Features rados –all ls, rados cppool, rados export, rados
cache-flush-evict-all and rados cache-try-flush-evict-all can also
fail or return incomplete results.</p></li>
</ul>
</div>
<div class="section" id="id39">
<h2>Notable Changes<a class="headerlink" href="#id39" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>buffer: add list::get_contiguous (Sage Weil)</p></li>
<li><p>buffer: avoid rebuild if buffer already contiguous (Jianpeng Ma)</p></li>
<li><p>ceph-disk: improved systemd support (Owen Synge)</p></li>
<li><p>ceph-disk: set guid if reusing journal partition (Dan van der Ster)</p></li>
<li><p>ceph-fuse, libcephfs: allow xattr caps in inject_release_failure (#9800 John Spray)</p></li>
<li><p>ceph-fuse, libcephfs: fix I_COMPLETE_ORDERED checks (#9894 Yan, Zheng)</p></li>
<li><p>ceph-fuse: fix dentry invalidation on 3.18+ kernels (#9997 Yan, Zheng)</p></li>
<li><p>crush: fix detach_bucket (#10095 Sage Weil)</p></li>
<li><p>crush: fix several bugs in adjust_item_weight (Rongze Zhu)</p></li>
<li><p>doc: add dumpling to firefly upgrade section (#7679 John Wilkins)</p></li>
<li><p>doc: document erasure coded pool operations (#9970 Loic Dachary)</p></li>
<li><p>doc: file system osd config settings (Kevin Dalley)</p></li>
<li><p>doc: key/value store config reference (John Wilkins)</p></li>
<li><p>doc: update openstack docs for Juno (Sebastien Han)</p></li>
<li><p>fix cluster logging from non-mon daemons (Sage Weil)</p></li>
<li><p>init-ceph: check for systemd-run before using it (Boris Ranto)</p></li>
<li><p>librados: fix infinite loop with skipped map epochs (#9986 Ding Dinghua)</p></li>
<li><p>librados: fix iterator operator= bugs (#10082 David Zafman, Yehuda Sadeh)</p></li>
<li><p>librados: fix null deref when pool DNE (#9944 Sage Weil)</p></li>
<li><p>librados: fix timer race from recent refactor (Sage Weil)</p></li>
<li><p>libradosstriper: fix shutdown hang (Dongmao Zhang)</p></li>
<li><p>librbd: don’t close a closed parent in failure path (#10030 Jason Dillaman)</p></li>
<li><p>librbd: fix diff test (#10002 Josh Durgin)</p></li>
<li><p>librbd: fix locking for readahead (#10045 Jason Dillaman)</p></li>
<li><p>librbd: refactor unit tests to use fixtures (Jason Dillaman)</p></li>
<li><p>many many coverity cleanups (Danny Al-Gaaf)</p></li>
<li><p>mds: a whole bunch of initial scrub infrastructure (Greg Farnum)</p></li>
<li><p>mds: fix compat_version for MClientSession (#9945 John Spray)</p></li>
<li><p>mds: fix reply snapbl (Yan, Zheng)</p></li>
<li><p>mon: allow adding tiers to fs pools (#10135 John Spray)</p></li>
<li><p>mon: fix MDS health status from peons (#10151 John Spray)</p></li>
<li><p>mon: fix caching for min_last_epoch_clean (#9987 Sage Weil)</p></li>
<li><p>mon: fix error output for add_data_pool (#9852 Joao Eduardo Luis)</p></li>
<li><p>mon: include entity name in audit log for forwarded requests (#9913 Joao Eduardo Luis)</p></li>
<li><p>mon: paxos: allow reads while proposing (#9321 #9322 Joao Eduardo Luis)</p></li>
<li><p>msgr: asyncmessenger: add kqueue support (#9926 Haomai Wang)</p></li>
<li><p>osd, librados: revamp PG listing API to handle namespaces (#9031 #9262 #9438 David Zafman)</p></li>
<li><p>osd, mon: send intiial pg create time from mon to osd (#9887 David Zafman)</p></li>
<li><p>osd: allow whiteout deletion in cache pool (Sage Weil)</p></li>
<li><p>osd: cache pool: ignore min flush age when cache is full (Xinze Chi)</p></li>
<li><p>osd: erasure coding: allow bench.sh to test ISA backend (Yuan Zhou)</p></li>
<li><p>osd: erasure-code: encoding regression tests, corpus (#9420 Loic Dachary)</p></li>
<li><p>osd: fix journal shutdown race (Sage Weil)</p></li>
<li><p>osd: fix object age eviction (Zhiqiang Wang)</p></li>
<li><p>osd: fix object atime calculation (Xinze Chi)</p></li>
<li><p>osd: fix past_interval display bug (#9752 Loic Dachary)</p></li>
<li><p>osd: journal: fix alignment checks, avoid useless memmove (Jianpeng Ma)</p></li>
<li><p>osd: journal: update committed_thru after replay (#6756 Samuel Just)</p></li>
<li><p>osd: keyvaluestore_dev: optimization (Chendi Xue)</p></li>
<li><p>osd: make misdirected op checks robust for EC pools (#9835 Sage Weil)</p></li>
<li><p>osd: removed some dead code (Xinze Chi)</p></li>
<li><p>qa: parallelize make check (Loic Dachary)</p></li>
<li><p>qa: tolerate nearly-full disk for make check (Loic Dachary)</p></li>
<li><p>rgw: create subuser if needed when creating user (#10103 Yehuda Sadeh)</p></li>
<li><p>rgw: fix If-Modified-Since (VRan Liu)</p></li>
<li><p>rgw: fix content-length update (#9576 Yehuda Sadeh)</p></li>
<li><p>rgw: fix disabling of max_size quota (#9907 Dong Lei)</p></li>
<li><p>rgw: fix incorrect len when len is 0 (#9877 Yehuda Sadeh)</p></li>
<li><p>rgw: fix object copy content type (#9478 Yehuda Sadeh)</p></li>
<li><p>rgw: fix user stags in get-user-info API (#9359 Ray Lv)</p></li>
<li><p>rgw: remove swift user manifest (DLO) hash calculation (#9973 Yehuda Sadeh)</p></li>
<li><p>rgw: return timestamp on GET/HEAD (#8911 Yehuda Sadeh)</p></li>
<li><p>rgw: set ETag on object copy (#9479 Yehuda Sadeh)</p></li>
<li><p>rgw: update bucket index on attr changes, for multi-site sync (#5595 Yehuda Sadeh)</p></li>
</ul>
</div>
</div>
<div class="section" id="v0-88">
<h1>v0.88<a class="headerlink" href="#v0-88" title="Permalink to this headline">¶</a></h1>
<p>This is the first development release after Giant.  The two main
features merged this round are the new AsyncMessenger (an alternative
implementation of the network layer) from Haomai Wang at UnitedStack,
and support for POSIX file locks in ceph-fuse and libcephfs from Yan,
Zheng.  There is also a big pile of smaller items that re merged while
we were stabilizing Giant, including a range of smaller performance
and bug fixes and some new tracepoints for LTTNG.</p>
<div class="section" id="id40">
<h2>Notable Changes<a class="headerlink" href="#id40" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>ceph-disk: Scientific Linux support (Dan van der Ster)</p></li>
<li><p>ceph-disk: respect –statedir for keyring (Loic Dachary)</p></li>
<li><p>ceph-fuse, libcephfs: POSIX file lock support (Yan, Zheng)</p></li>
<li><p>ceph-fuse, libcephfs: fix cap flush overflow (Greg Farnum, Yan, Zheng)</p></li>
<li><p>ceph-fuse, libcephfs: fix root inode xattrs (Yan, Zheng)</p></li>
<li><p>ceph-fuse, libcephfs: preserve dir ordering (#9178 Yan, Zheng)</p></li>
<li><p>ceph-fuse, libcephfs: trim inodes before reconnecting to MDS (Yan, Zheng)</p></li>
<li><p>ceph: do not parse injectargs twice (Loic Dachary)</p></li>
<li><p>ceph: make ‘ceph -s’ output more readable (Sage Weil)</p></li>
<li><p>ceph: new ‘ceph tell mds.$name_or_rank_or_gid’ (John Spray)</p></li>
<li><p>ceph: test robustness (Joao Eduardo Luis)</p></li>
<li><p>ceph_objectstore_tool: behave with sharded flag (#9661 David Zafman)</p></li>
<li><p>cephfs-journal-tool: fix journal import (#10025 John Spray)</p></li>
<li><p>cephfs-journal-tool: skip up to expire_pos (#9977 John Spray)</p></li>
<li><p>cleanup rados.h definitions with macros (Ilya Dryomov)</p></li>
<li><p>common: shared_cache unit tests (Cheng Cheng)</p></li>
<li><p>config: add $cctid meta variable (Adam Crume)</p></li>
<li><p>crush: fix buffer overrun for poorly formed rules (#9492 Johnu George)</p></li>
<li><p>crush: improve constness (Loic Dachary)</p></li>
<li><p>crushtool: add –location &lt;id&gt; command (Sage Weil, Loic Dachary)</p></li>
<li><p>default to libnss instead of crypto++ (Federico Gimenez)</p></li>
<li><p>doc: ceph osd reweight vs crush weight (Laurent Guerby)</p></li>
<li><p>doc: document the LRC per-layer plugin configuration (Yuan Zhou)</p></li>
<li><p>doc: erasure code doc updates (Loic Dachary)</p></li>
<li><p>doc: misc updates (Alfredo Deza, VRan Liu)</p></li>
<li><p>doc: preflight doc fixes (John Wilkins)</p></li>
<li><p>doc: update PG count guide (Gerben Meijer, Laurent Guerby, Loic Dachary)</p></li>
<li><p>keyvaluestore: misc fixes (Haomai Wang)</p></li>
<li><p>keyvaluestore: performance improvements (Haomai Wang)</p></li>
<li><p>librados: add rados_pool_get_base_tier() call (Adam Crume)</p></li>
<li><p>librados: cap buffer length (Loic Dachary)</p></li>
<li><p>librados: fix objecter races (#9617 Josh Durgin)</p></li>
<li><p>libradosstriper: misc fixes (Sebastien Ponce)</p></li>
<li><p>librbd: add missing python docstrings (Jason Dillaman)</p></li>
<li><p>librbd: add readahead (Adam Crume)</p></li>
<li><p>librbd: fix cache tiers in list_children and snap_unprotect (Adam Crume)</p></li>
<li><p>librbd: fix performance regression in ObjectCacher (#9513 Adam Crume)</p></li>
<li><p>librbd: lttng tracepoints (Adam Crume)</p></li>
<li><p>librbd: misc fixes (Xinxin Shu, Jason Dillaman)</p></li>
<li><p>mds: fix sessionmap lifecycle bugs (Yan, Zheng)</p></li>
<li><p>mds: initialize root inode xattr version (Yan, Zheng)</p></li>
<li><p>mds: introduce auth caps (John Spray)</p></li>
<li><p>mds: misc bugs (Greg Farnum, John Spray, Yan, Zheng, Henry Change)</p></li>
<li><p>misc coverity fixes (Danny Al-Gaaf)</p></li>
<li><p>mon: add ‘ceph osd rename-bucket …’ command (Loic Dachary)</p></li>
<li><p>mon: clean up auth list output (Loic Dachary)</p></li>
<li><p>mon: fix ‘osd crush link’ id resolution (John Spray)</p></li>
<li><p>mon: fix misc error paths (Joao Eduardo Luis)</p></li>
<li><p>mon: fix paxos off-by-one corner case (#9301 Sage Weil)</p></li>
<li><p>mon: new ‘ceph pool ls [detail]’ command (Sage Weil)</p></li>
<li><p>mon: wait for writeable before cross-proposing (#9794 Joao Eduardo Luis)</p></li>
<li><p>msgr: avoid useless new/delete (Haomai Wang)</p></li>
<li><p>msgr: fix delay injection bug (#9910 Sage Weil, Greg Farnum)</p></li>
<li><p>msgr: new AsymcMessenger alternative implementation (Haomai Wang)</p></li>
<li><p>msgr: prefetch data when doing recv (Yehuda Sadeh)</p></li>
<li><p>osd: add erasure code corpus (Loic Dachary)</p></li>
<li><p>osd: add misc tests (Loic Dachary, Danny Al-Gaaf)</p></li>
<li><p>osd: cleanup boost optionals (William Kennington)</p></li>
<li><p>osd: expose non-journal backends via ceph-osd CLI (Hoamai Wang)</p></li>
<li><p>osd: fix JSON output for stray OSDs (Loic Dachary)</p></li>
<li><p>osd: fix ioprio options (Loic Dachary)</p></li>
<li><p>osd: fix transaction accounting (Jianpeng Ma)</p></li>
<li><p>osd: misc optimizations (Xinxin Shu, Zhiqiang Wang, Xinze Chi)</p></li>
<li><p>osd: use FIEMAP_FLAGS_SYNC instead of fsync (Jianpeng Ma)</p></li>
<li><p>rados: fix put of /dev/null (Loic Dachary)</p></li>
<li><p>rados: parse command-line arguments more strictly (#8983 Adam Crume)</p></li>
<li><p>rbd-fuse: fix memory leak (Adam Crume)</p></li>
<li><p>rbd-replay-many (Adam Crume)</p></li>
<li><p>rbd-replay: –anonymize flag to rbd-replay-prep (Adam Crume)</p></li>
<li><p>rbd: fix ‘rbd diff’ for non-existent objects (Adam Crume)</p></li>
<li><p>rbd: fix error when striping with format 1 (Sebastien Han)</p></li>
<li><p>rbd: fix export for image sizes over 2GB (Vicente Cheng)</p></li>
<li><p>rbd: use rolling average for rbd bench-write throughput (Jason Dillaman)</p></li>
<li><p>rgw: send explicit HTTP status string (Yehuda Sadeh)</p></li>
<li><p>rgw: set length for keystone token validation request (#7796 Yehuda Sadeh, Mark Kirkwood)</p></li>
<li><p>udev: fix rules for CentOS7/RHEL7 (Loic Dachary)</p></li>
<li><p>use clock_gettime instead of gettimeofday (Jianpeng Ma)</p></li>
<li><p>vstart.sh: set up environment for s3-tests (Luis Pabon)</p></li>
</ul>
</div>
</div>



          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../../">
              <img class="logo" src="../../_static/logo.png" alt="Logo"/>
            </a></p>
<h3><a href="../../">Table Of Contents</a></h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../start/intro/">Ceph 简介</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../install/">安装 Ceph</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../cephadm/">Cephadm</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../rados/">Ceph 存储集群</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../cephfs/">Ceph 文件系统</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../rbd/">Ceph 块设备</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../radosgw/">Ceph 对象网关</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../mgr/">Ceph 管理器守护进程</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../mgr/dashboard/">Ceph 仪表盘</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api/">API 文档</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../architecture/">体系结构</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../dev/developer_guide/">开发者指南</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../dev/internals/">Ceph 内幕</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../governance/">项目管理</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../foundation/">Ceph 基金会</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../ceph-volume/">ceph-volume</a></li>
<li class="toctree-l1"><a class="reference internal" href="../general/">Ceph 版本（总目录）</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../">Ceph 版本（索引）</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../#id1">活跃版本</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../#id2">归档版本</a><ul class="current">
<li class="toctree-l3 current"><a class="reference internal" href="../archived-index/">归档版本目录</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="../luminous/">v12.2.13 Luminous</a></li>
<li class="toctree-l4"><a class="reference internal" href="../luminous/#v12-2-12-luminous">v12.2.12 Luminous</a></li>
<li class="toctree-l4"><a class="reference internal" href="../luminous/#v12-2-11-luminous">v12.2.11 Luminous</a></li>
<li class="toctree-l4"><a class="reference internal" href="../luminous/#v12-2-10-luminous">v12.2.10 Luminous</a></li>
<li class="toctree-l4"><a class="reference internal" href="../luminous/#v12-2-9-luminous">v12.2.9 Luminous</a></li>
<li class="toctree-l4"><a class="reference internal" href="../luminous/#v12-2-8-luminous">v12.2.8 Luminous</a></li>
<li class="toctree-l4"><a class="reference internal" href="../luminous/#v12-2-7-luminous">v12.2.7 Luminous</a></li>
<li class="toctree-l4"><a class="reference internal" href="../luminous/#v12-2-6-luminous">v12.2.6 Luminous</a></li>
<li class="toctree-l4"><a class="reference internal" href="../luminous/#v12-2-5-luminous">v12.2.5 Luminous</a></li>
<li class="toctree-l4"><a class="reference internal" href="../luminous/#v12-2-4-luminous">v12.2.4 Luminous</a></li>
<li class="toctree-l4"><a class="reference internal" href="../luminous/#v12-2-3-luminous">v12.2.3 Luminous</a></li>
<li class="toctree-l4"><a class="reference internal" href="../luminous/#v12-2-2-luminous">v12.2.2 Luminous</a></li>
<li class="toctree-l4"><a class="reference internal" href="../luminous/#v12-2-1-luminous">v12.2.1 Luminous</a></li>
<li class="toctree-l4"><a class="reference internal" href="../luminous/#v12-2-0-luminous">v12.2.0 Luminous</a></li>
<li class="toctree-l4"><a class="reference internal" href="../kraken/">v11.2.1 Kraken</a></li>
<li class="toctree-l4"><a class="reference internal" href="../kraken/#v11-2-0-kraken">v11.2.0 Kraken</a></li>
<li class="toctree-l4"><a class="reference internal" href="../kraken/#v11-0-2-kraken">v11.0.2 Kraken</a></li>
<li class="toctree-l4"><a class="reference internal" href="../jewel/">v10.2.11 Jewel</a></li>
<li class="toctree-l4"><a class="reference internal" href="../jewel/#v10-2-10-jewel">v10.2.10 Jewel</a></li>
<li class="toctree-l4"><a class="reference internal" href="../jewel/#v10-2-9-jewel">v10.2.9 Jewel</a></li>
<li class="toctree-l4"><a class="reference internal" href="../jewel/#v10-2-8-jewel">v10.2.8 Jewel</a></li>
<li class="toctree-l4"><a class="reference internal" href="../jewel/#v10-2-7-jewel">v10.2.7 Jewel</a></li>
<li class="toctree-l4"><a class="reference internal" href="../jewel/#v10-2-6-jewel">v10.2.6 Jewel</a></li>
<li class="toctree-l4"><a class="reference internal" href="../jewel/#v10-2-5-jewel">v10.2.5 Jewel</a></li>
<li class="toctree-l4"><a class="reference internal" href="../jewel/#v10-2-4-jewel">v10.2.4 Jewel</a></li>
<li class="toctree-l4"><a class="reference internal" href="../jewel/#v10-2-3-jewel">v10.2.3 Jewel</a></li>
<li class="toctree-l4"><a class="reference internal" href="../jewel/#v10-2-2-jewel">v10.2.2 Jewel</a></li>
<li class="toctree-l4"><a class="reference internal" href="../jewel/#v10-2-1-jewel">v10.2.1 Jewel</a></li>
<li class="toctree-l4"><a class="reference internal" href="../jewel/#v10-2-0-jewel">v10.2.0 Jewel</a></li>
<li class="toctree-l4"><a class="reference internal" href="../infernalis/">v9.2.1 Infernalis</a></li>
<li class="toctree-l4"><a class="reference internal" href="../infernalis/#v9-2-0-infernalis">v9.2.0 Infernalis</a></li>
<li class="toctree-l4"><a class="reference internal" href="../infernalis/#v9-1-0-infernalis-release-candidate">v9.1.0 Infernalis release candidate</a></li>
<li class="toctree-l4"><a class="reference internal" href="../infernalis/#v9-0-3">v9.0.3</a></li>
<li class="toctree-l4"><a class="reference internal" href="../infernalis/#v9-0-2">v9.0.2</a></li>
<li class="toctree-l4"><a class="reference internal" href="../infernalis/#v9-0-1">v9.0.1</a></li>
<li class="toctree-l4"><a class="reference internal" href="../infernalis/#v9-0-0">v9.0.0</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">v0.94.10 Hammer</a><ul>
<li class="toctree-l5"><a class="reference internal" href="#new-features">New Features</a></li>
<li class="toctree-l5"><a class="reference internal" href="#other-notable-changes">Other Notable Changes</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="#v0-94-9-hammer">v0.94.9 Hammer</a><ul>
<li class="toctree-l5"><a class="reference internal" href="#notable-changes">Notable Changes</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="#v0-94-8-hammer">v0.94.8 Hammer</a><ul>
<li class="toctree-l5"><a class="reference internal" href="#id2">Notable Changes</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="#v0-94-7-hammer">v0.94.7 Hammer</a><ul>
<li class="toctree-l5"><a class="reference internal" href="#id5">Notable Changes</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="#v0-94-6-hammer">v0.94.6 Hammer</a><ul>
<li class="toctree-l5"><a class="reference internal" href="#id7">Notable Changes</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="#v0-94-5-hammer">v0.94.5 Hammer</a><ul>
<li class="toctree-l5"><a class="reference internal" href="#id13">Notable Changes</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="#v0-94-4-hammer">v0.94.4 Hammer</a><ul>
<li class="toctree-l5"><a class="reference internal" href="#id14">Notable Changes</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="#v0-94-3-hammer">v0.94.3 Hammer</a><ul>
<li class="toctree-l5"><a class="reference internal" href="#upgrading">Upgrading</a></li>
<li class="toctree-l5"><a class="reference internal" href="#id26">Notable Changes</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="#v0-94-2-hammer">v0.94.2 Hammer</a><ul>
<li class="toctree-l5"><a class="reference internal" href="#upgrading-from-previous-hammer-release">Upgrading from previous Hammer release</a></li>
<li class="toctree-l5"><a class="reference internal" href="#id27">Notable changes</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="#v0-94-1-hammer">v0.94.1 Hammer</a><ul>
<li class="toctree-l5"><a class="reference internal" href="#id28">Notable changes</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="#v0-94-hammer">v0.94 Hammer</a><ul>
<li class="toctree-l5"><a class="reference internal" href="#dedication">Dedication</a></li>
<li class="toctree-l5"><a class="reference internal" href="#id29">Upgrading</a></li>
<li class="toctree-l5"><a class="reference internal" href="#upgrading-from-v0-87-x-giant">Upgrading from v0.87.x Giant</a></li>
<li class="toctree-l5"><a class="reference internal" href="#upgrading-from-v0-80x-firefly-additional-notes">Upgrading from v0.80x Firefly (additional notes)</a></li>
<li class="toctree-l5"><a class="reference internal" href="#notable-changes-since-v0-93">Notable changes since v0.93</a></li>
<li class="toctree-l5"><a class="reference internal" href="#notable-changes-since-v0-87-x-giant">Notable changes since v0.87.x Giant</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="#v0-93">v0.93</a><ul>
<li class="toctree-l5"><a class="reference internal" href="#id30">Upgrading</a></li>
<li class="toctree-l5"><a class="reference internal" href="#id31">Notable Changes</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="#v0-92">v0.92</a><ul>
<li class="toctree-l5"><a class="reference internal" href="#id32">Upgrading</a></li>
<li class="toctree-l5"><a class="reference internal" href="#id33">Notable Changes</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="#v0-91">v0.91</a><ul>
<li class="toctree-l5"><a class="reference internal" href="#id34">Upgrading</a></li>
<li class="toctree-l5"><a class="reference internal" href="#id35">Notable Changes</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="#v0-90">v0.90</a><ul>
<li class="toctree-l5"><a class="reference internal" href="#id36">Upgrading</a></li>
<li class="toctree-l5"><a class="reference internal" href="#id37">Notable Changes</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="#v0-89">v0.89</a><ul>
<li class="toctree-l5"><a class="reference internal" href="#id38">Upgrading</a></li>
<li class="toctree-l5"><a class="reference internal" href="#id39">Notable Changes</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="#v0-88">v0.88</a><ul>
<li class="toctree-l5"><a class="reference internal" href="#id40">Notable Changes</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="../giant/">v0.87.2 Giant</a></li>
<li class="toctree-l4"><a class="reference internal" href="../giant/#v0-87-1-giant">v0.87.1 Giant</a></li>
<li class="toctree-l4"><a class="reference internal" href="../giant/#v0-87-giant">v0.87 Giant</a></li>
<li class="toctree-l4"><a class="reference internal" href="../giant/#v0-86">v0.86</a></li>
<li class="toctree-l4"><a class="reference internal" href="../giant/#v0-85">v0.85</a></li>
<li class="toctree-l4"><a class="reference internal" href="../giant/#v0-84">v0.84</a></li>
<li class="toctree-l4"><a class="reference internal" href="../giant/#v0-83">v0.83</a></li>
<li class="toctree-l4"><a class="reference internal" href="../giant/#v0-82">v0.82</a></li>
<li class="toctree-l4"><a class="reference internal" href="../giant/#v0-81">v0.81</a></li>
<li class="toctree-l4"><a class="reference internal" href="../firefly/">v0.80.11 Firefly</a></li>
<li class="toctree-l4"><a class="reference internal" href="../firefly/#v0-80-10-firefly">v0.80.10 Firefly</a></li>
<li class="toctree-l4"><a class="reference internal" href="../firefly/#v0-80-9-firefly">v0.80.9 Firefly</a></li>
<li class="toctree-l4"><a class="reference internal" href="../firefly/#v0-80-8-firefly">v0.80.8 Firefly</a></li>
<li class="toctree-l4"><a class="reference internal" href="../firefly/#v0-80-7-firefly">v0.80.7 Firefly</a></li>
<li class="toctree-l4"><a class="reference internal" href="../firefly/#v0-80-6-firefly">v0.80.6 Firefly</a></li>
<li class="toctree-l4"><a class="reference internal" href="../firefly/#v0-80-5-firefly">v0.80.5 Firefly</a></li>
<li class="toctree-l4"><a class="reference internal" href="../firefly/#v0-80-4-firefly">v0.80.4 Firefly</a></li>
<li class="toctree-l4"><a class="reference internal" href="../firefly/#v0-80-3-firefly">v0.80.3 Firefly</a></li>
<li class="toctree-l4"><a class="reference internal" href="../firefly/#v0-80-2-firefly">v0.80.2 Firefly</a></li>
<li class="toctree-l4"><a class="reference internal" href="../firefly/#v0-80-1-firefly">v0.80.1 Firefly</a></li>
<li class="toctree-l4"><a class="reference internal" href="../firefly/#v0-80-firefly">v0.80 Firefly</a></li>
<li class="toctree-l4"><a class="reference internal" href="../firefly/#v0-79">v0.79</a></li>
<li class="toctree-l4"><a class="reference internal" href="../firefly/#v0-78">v0.78</a></li>
<li class="toctree-l4"><a class="reference internal" href="../firefly/#v0-77">v0.77</a></li>
<li class="toctree-l4"><a class="reference internal" href="../firefly/#v0-76">v0.76</a></li>
<li class="toctree-l4"><a class="reference internal" href="../firefly/#v0-75">v0.75</a></li>
<li class="toctree-l4"><a class="reference internal" href="../firefly/#v0-74">v0.74</a></li>
<li class="toctree-l4"><a class="reference internal" href="../firefly/#v0-73">v0.73</a></li>
<li class="toctree-l4"><a class="reference internal" href="../emperor/">v0.72.3 Emperor (pending release)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../emperor/#v0-72-2-emperor">v0.72.2 Emperor</a></li>
<li class="toctree-l4"><a class="reference internal" href="../emperor/#v0-72-1-emperor">v0.72.1 Emperor</a></li>
<li class="toctree-l4"><a class="reference internal" href="../emperor/#v0-72-emperor">v0.72 Emperor</a></li>
<li class="toctree-l4"><a class="reference internal" href="../emperor/#v0-71">v0.71</a></li>
<li class="toctree-l4"><a class="reference internal" href="../emperor/#v0-70">v0.70</a></li>
<li class="toctree-l4"><a class="reference internal" href="../emperor/#v0-69">v0.69</a></li>
<li class="toctree-l4"><a class="reference internal" href="../emperor/#v0-68">v0.68</a></li>
<li class="toctree-l4"><a class="reference internal" href="../dumpling/">v0.67.12 “Dumpling” (draft)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../dumpling/#v0-67-11-dumpling">v0.67.11 “Dumpling”</a></li>
<li class="toctree-l4"><a class="reference internal" href="../dumpling/#v0-67-10-dumpling">v0.67.10 “Dumpling”</a></li>
<li class="toctree-l4"><a class="reference internal" href="../dumpling/#v0-67-9-dumpling">v0.67.9 “Dumpling”</a></li>
<li class="toctree-l4"><a class="reference internal" href="../dumpling/#v0-67-8-dumpling">v0.67.8 “Dumpling”</a></li>
<li class="toctree-l4"><a class="reference internal" href="../dumpling/#v0-67-7-dumpling">v0.67.7 “Dumpling”</a></li>
<li class="toctree-l4"><a class="reference internal" href="../dumpling/#v0-67-6-dumpling">v0.67.6 “Dumpling”</a></li>
<li class="toctree-l4"><a class="reference internal" href="../dumpling/#v0-67-5-dumpling">v0.67.5 “Dumpling”</a></li>
<li class="toctree-l4"><a class="reference internal" href="../dumpling/#v0-67-4-dumpling">v0.67.4 “Dumpling”</a></li>
<li class="toctree-l4"><a class="reference internal" href="../dumpling/#v0-67-3-dumpling">v0.67.3 “Dumpling”</a></li>
<li class="toctree-l4"><a class="reference internal" href="../dumpling/#v0-67-2-dumpling">v0.67.2 “Dumpling”</a></li>
<li class="toctree-l4"><a class="reference internal" href="../dumpling/#v0-67-1-dumpling">v0.67.1 “Dumpling”</a></li>
<li class="toctree-l4"><a class="reference internal" href="../dumpling/#v0-67-dumpling">v0.67 “Dumpling”</a></li>
<li class="toctree-l4"><a class="reference internal" href="../dumpling/#v0-66">v0.66</a></li>
<li class="toctree-l4"><a class="reference internal" href="../dumpling/#v0-65">v0.65</a></li>
<li class="toctree-l4"><a class="reference internal" href="../dumpling/#v0-64">v0.64</a></li>
<li class="toctree-l4"><a class="reference internal" href="../dumpling/#v0-63">v0.63</a></li>
<li class="toctree-l4"><a class="reference internal" href="../dumpling/#v0-62">v0.62</a></li>
<li class="toctree-l4"><a class="reference internal" href="../cuttlefish/">v0.61.9 “Cuttlefish”</a></li>
<li class="toctree-l4"><a class="reference internal" href="../cuttlefish/#v0-61-8-cuttlefish">v0.61.8 “Cuttlefish”</a></li>
<li class="toctree-l4"><a class="reference internal" href="../cuttlefish/#v0-61-7-cuttlefish">v0.61.7 “Cuttlefish”</a></li>
<li class="toctree-l4"><a class="reference internal" href="../cuttlefish/#v0-61-6-cuttlefish">v0.61.6 “Cuttlefish”</a></li>
<li class="toctree-l4"><a class="reference internal" href="../cuttlefish/#v0-61-5-cuttlefish">v0.61.5 “Cuttlefish”</a></li>
<li class="toctree-l4"><a class="reference internal" href="../cuttlefish/#v0-61-4-cuttlefish">v0.61.4 “Cuttlefish”</a></li>
<li class="toctree-l4"><a class="reference internal" href="../cuttlefish/#v0-61-3-cuttlefish">v0.61.3 “Cuttlefish”</a></li>
<li class="toctree-l4"><a class="reference internal" href="../cuttlefish/#v0-61-2-cuttlefish">v0.61.2 “Cuttlefish”</a></li>
<li class="toctree-l4"><a class="reference internal" href="../cuttlefish/#v0-61-1-cuttlefish">v0.61.1 “Cuttlefish”</a></li>
<li class="toctree-l4"><a class="reference internal" href="../cuttlefish/#v0-61-cuttlefish">v0.61 “Cuttlefish”</a></li>
<li class="toctree-l4"><a class="reference internal" href="../cuttlefish/#v0-60">v0.60</a></li>
<li class="toctree-l4"><a class="reference internal" href="../cuttlefish/#v0-59">v0.59</a></li>
<li class="toctree-l4"><a class="reference internal" href="../cuttlefish/#v0-58">v0.58</a></li>
<li class="toctree-l4"><a class="reference internal" href="../cuttlefish/#v0-57">v0.57</a></li>
<li class="toctree-l4"><a class="reference internal" href="../bobtail/">v0.56.7 “bobtail”</a></li>
<li class="toctree-l4"><a class="reference internal" href="../bobtail/#v0-56-6-bobtail">v0.56.6 “bobtail”</a></li>
<li class="toctree-l4"><a class="reference internal" href="../bobtail/#v0-56-5-bobtail">v0.56.5 “bobtail”</a></li>
<li class="toctree-l4"><a class="reference internal" href="../bobtail/#v0-56-4-bobtail">v0.56.4 “bobtail”</a></li>
<li class="toctree-l4"><a class="reference internal" href="../bobtail/#v0-56-3-bobtail">v0.56.3 “bobtail”</a></li>
<li class="toctree-l4"><a class="reference internal" href="../bobtail/#v0-56-2-bobtail">v0.56.2 “bobtail”</a></li>
<li class="toctree-l4"><a class="reference internal" href="../bobtail/#v0-56-1-bobtail">v0.56.1 “bobtail”</a></li>
<li class="toctree-l4"><a class="reference internal" href="../bobtail/#v0-56-bobtail">v0.56 “bobtail”</a></li>
<li class="toctree-l4"><a class="reference internal" href="../bobtail/#v0-54">v0.54</a></li>
<li class="toctree-l4"><a class="reference internal" href="../argonaut/">v0.48.3 “argonaut”</a></li>
<li class="toctree-l4"><a class="reference internal" href="../argonaut/#v0-48-2-argonaut">v0.48.2 “argonaut”</a></li>
<li class="toctree-l4"><a class="reference internal" href="../argonaut/#v0-48-1-argonaut">v0.48.1 “argonaut”</a></li>
<li class="toctree-l4"><a class="reference internal" href="../argonaut/#v0-48-argonaut">v0.48 “argonaut”</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../glossary/">Ceph 术语</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../translation_cn/">中文版翻译资源</a></li>
</ul>


<!-- ugly kludge to make genindex look like it's part of the toc -->
<ul style="margin-top: -10px"><li class="toctree-l1"><a class="reference internal" href="../../genindex/">Index</a></li></ul>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search/" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex/" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../../py-modindex/" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="../giant/" title="v0.87.2 Giant"
             >next</a> |</li>
        <li class="right" >
          <a href="../infernalis/" title="v9.2.1 Infernalis"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../">Ceph Documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../" >Ceph 版本（索引）</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="../archived-index/" >归档的版本</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2016, Ceph authors and contributors. Licensed under Creative Commons Attribution Share Alike 3.0 (CC-BY-SA-3.0).
    </div>
  </body>
</html>