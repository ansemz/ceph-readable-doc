
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Install Ceph Object Gateway &mdash; Ceph Documentation</title>
    
    <link rel="stylesheet" href="../../_static/nature.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     'dev',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
    <link rel="top" title="Ceph Documentation" href="../../" />
    <link rel="up" title="Ceph Object Gateway" href="../../radosgw/" />
    <link rel="next" title="Configuring Ceph Object Gateway with Apache/FastCGI" href="../../radosgw/config-fcgi/" />
    <link rel="prev" title="Ceph Object Gateway" href="../../radosgw/" />
    <script type="text/javascript" src="http://ayni.ceph.com/public/js/ceph.js"></script>

  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex/" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../py-modindex/" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="../../radosgw/config-fcgi/" title="Configuring Ceph Object Gateway with Apache/FastCGI"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="../../radosgw/" title="Ceph Object Gateway"
             accesskey="P">previous</a> |</li>
        <li><a href="../../">Ceph Documentation</a> &raquo;</li>
          <li><a href="../../radosgw/" accesskey="U">Ceph Object Gateway</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="install-ceph-object-gateway">
<h1>Install Ceph Object Gateway<a class="headerlink" href="#install-ceph-object-gateway" title="Permalink to this headline">¶</a></h1>
<p>As of <cite>firefly</cite> (v0.80), Ceph Object Gateway is running on Civetweb (embedded
into the <tt class="docutils literal"><span class="pre">ceph-radosgw</span></tt> daemon) instead of Apache and FastCGI. Using Civetweb
simplifies the Ceph Object Gateway installation and configuration.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">To run the Ceph Object Gateway service, you should have a running
Ceph storage cluster, and the gateway host should have access to the
public network.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">In version 0.80, the Ceph Object Gateway does not support SSL. You
may setup a reverse proxy server with SSL to dispatch HTTPS requests
as HTTP requests to CivetWeb.</p>
</div>
<div class="section" id="execute-the-pre-installation-procedure">
<h2>Execute the Pre-Installation Procedure<a class="headerlink" href="#execute-the-pre-installation-procedure" title="Permalink to this headline">¶</a></h2>
<p>See <a class="reference external" href="../../start/quick-start-preflight">Preflight</a> and execute the pre-installation procedures on your Ceph Object
Gateway node. Specifically, you should disable <tt class="docutils literal"><span class="pre">requiretty</span></tt> on your Ceph
Deploy user, set SELinux to <tt class="docutils literal"><span class="pre">Permissive</span></tt> and set up a Ceph Deploy user with
password-less <tt class="docutils literal"><span class="pre">sudo</span></tt>. For Ceph Object Gateways, you will need to open the
port that Civetweb will use in production.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Civetweb runs on port <tt class="docutils literal"><span class="pre">7480</span></tt> by default.</p>
</div>
</div>
<div class="section" id="id1">
<h2>Install Ceph Object Gateway<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h2>
<p>From the working directory of your administration server, install the Ceph
Object Gateway package on the Ceph Object Gateway node. For example:</p>
<div class="highlight-python"><pre>ceph-deploy install --rgw &lt;gateway-node1&gt; [&lt;gateway-node2&gt; ...]</pre>
</div>
<p>The <tt class="docutils literal"><span class="pre">ceph-common</span></tt> package is a dependency, so <tt class="docutils literal"><span class="pre">ceph-deploy</span></tt> will install
this too. The <tt class="docutils literal"><span class="pre">ceph</span></tt> CLI tools are intended for administrators. To make your
Ceph Object Gateway node an administrator node, execute the following from the
working directory of your administration server:</p>
<div class="highlight-python"><pre>ceph-deploy admin &lt;node-name&gt;</pre>
</div>
</div>
<div class="section" id="create-a-gateway-instance">
<h2>Create a Gateway Instance<a class="headerlink" href="#create-a-gateway-instance" title="Permalink to this headline">¶</a></h2>
<p>From the working directory of your administration server, create an instance of
the Ceph Object Gateway on the Ceph Object Gateway. For example:</p>
<div class="highlight-python"><pre>ceph-deploy rgw create &lt;gateway-node1&gt;</pre>
</div>
<p>Once the gateway is running, you should be able to access it on port <tt class="docutils literal"><span class="pre">7480</span></tt>
with an unauthenticated request like this:</p>
<div class="highlight-python"><pre>http://client-node:7480</pre>
</div>
<p>If the gateway instance is working properly, you should receive a response like
this:</p>
<div class="highlight-python"><pre>&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;ListAllMyBucketsResult xmlns="http://s3.amazonaws.com/doc/2006-03-01/"&gt;
       &lt;Owner&gt;
               &lt;ID&gt;anonymous&lt;/ID&gt;
               &lt;DisplayName&gt;&lt;/DisplayName&gt;
       &lt;/Owner&gt;
       &lt;Buckets&gt;
       &lt;/Buckets&gt;
&lt;/ListAllMyBucketsResult&gt;</pre>
</div>
<p>If at any point you run into trouble and you want to start over, execute the
following to purge the configuration:</p>
<div class="highlight-python"><pre>ceph-deploy purge &lt;gateway-node1&gt; [&lt;gateway-node2&gt;]
ceph-deploy purgedata &lt;gateway-node1&gt; [&lt;gateway-node2&gt;]</pre>
</div>
<p>If you execute <tt class="docutils literal"><span class="pre">purge</span></tt>, you must re-install Ceph.</p>
</div>
<div class="section" id="change-the-default-port">
<h2>Change the Default Port<a class="headerlink" href="#change-the-default-port" title="Permalink to this headline">¶</a></h2>
<p>Civetweb runs on port <tt class="docutils literal"><span class="pre">7480</span></tt> by default. To change the default port (e.g., to
port <tt class="docutils literal"><span class="pre">80</span></tt>), modify your Ceph configuration file in the working directory of
your administration server. Add a section entitled
<tt class="docutils literal"><span class="pre">[client.rgw.&lt;gateway-node&gt;]</span></tt>, replacing <tt class="docutils literal"><span class="pre">&lt;gateway-node&gt;</span></tt> with the short
node name of your Ceph Object Gateway node (i.e., <tt class="docutils literal"><span class="pre">hostname</span> <span class="pre">-s</span></tt>).</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">As of version 11.0.1, the Ceph Object Gateway <strong>does</strong> support SSL.
See <a class="reference internal" href="#id2">Using SSL with Civetweb</a> for information on how to set that up.</p>
</div>
<p>For example, if your node name is <tt class="docutils literal"><span class="pre">gateway-node1</span></tt>, add a section like this
after the <tt class="docutils literal"><span class="pre">[global]</span></tt> section:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">client</span><span class="o">.</span><span class="n">rgw</span><span class="o">.</span><span class="n">gateway</span><span class="o">-</span><span class="n">node1</span><span class="p">]</span>
<span class="n">rgw_frontends</span> <span class="o">=</span> <span class="s2">&quot;civetweb port=80&quot;</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Ensure that you leave no whitespace between <tt class="docutils literal"><span class="pre">port=&lt;port-number&gt;</span></tt> in
the <tt class="docutils literal"><span class="pre">rgw_frontends</span></tt> key/value pair. The <tt class="docutils literal"><span class="pre">[client.rgw.gateway-node1]</span></tt>
heading identifies this portion of the Ceph configuration file as
configuring a Ceph Storage Cluster client where the client type is a Ceph
Object Gateway (i.e., <tt class="docutils literal"><span class="pre">rgw</span></tt>), and the name of the instance is
<tt class="docutils literal"><span class="pre">gateway-node1</span></tt>.</p>
</div>
<p>Push the updated configuration file to your Ceph Object Gateway node
(and other Ceph nodes):</p>
<div class="highlight-python"><pre>ceph-deploy --overwrite-conf config push &lt;gateway-node&gt; [&lt;other-nodes&gt;]</pre>
</div>
<p>To make the new port setting take effect, restart the Ceph Object
Gateway:</p>
<div class="highlight-python"><pre>sudo systemctl restart ceph-radosgw.service</pre>
</div>
<p>Finally, check to ensure that the port you selected is open on the node&#8217;s
firewall (e.g., port <tt class="docutils literal"><span class="pre">80</span></tt>). If it is not open, add the port and reload the
firewall configuration. If you use the <tt class="docutils literal"><span class="pre">firewalld</span></tt> daemon, execute:</p>
<div class="highlight-python"><pre>sudo firewall-cmd --list-all
sudo firewall-cmd --zone=public --add-port 80/tcp --permanent
sudo firewall-cmd --reload</pre>
</div>
<p>If you use <tt class="docutils literal"><span class="pre">iptables</span></tt>, execute:</p>
<div class="highlight-python"><pre>sudo iptables --list
sudo iptables -I INPUT 1 -i &lt;iface&gt; -p tcp -s &lt;ip-address&gt;/&lt;netmask&gt; --dport 80 -j ACCEPT</pre>
</div>
<p>Replace <tt class="docutils literal"><span class="pre">&lt;iface&gt;</span></tt> and <tt class="docutils literal"><span class="pre">&lt;ip-address&gt;/&lt;netmask&gt;</span></tt> with the relevant values for
your Ceph Object Gateway node.</p>
<p>Once you have finished configuring <tt class="docutils literal"><span class="pre">iptables</span></tt>, ensure that you make the
change persistent so that it will be in effect when your Ceph Object Gateway
node reboots. Execute:</p>
<div class="highlight-python"><pre>sudo apt-get install iptables-persistent</pre>
</div>
<p>A terminal UI will open up. Select <tt class="docutils literal"><span class="pre">yes</span></tt> for the prompts to save current
<tt class="docutils literal"><span class="pre">IPv4</span></tt> iptables rules to <tt class="docutils literal"><span class="pre">/etc/iptables/rules.v4</span></tt> and current <tt class="docutils literal"><span class="pre">IPv6</span></tt>
iptables rules to <tt class="docutils literal"><span class="pre">/etc/iptables/rules.v6</span></tt>.</p>
<p>The <tt class="docutils literal"><span class="pre">IPv4</span></tt> iptables rule that you set in the earlier step will be loaded in
<tt class="docutils literal"><span class="pre">/etc/iptables/rules.v4</span></tt> and will be persistent across reboots.</p>
<p>If you add a new <tt class="docutils literal"><span class="pre">IPv4</span></tt> iptables rule after installing
<tt class="docutils literal"><span class="pre">iptables-persistent</span></tt> you will have to add it to the rule file. In such case,
execute the following as the <tt class="docutils literal"><span class="pre">root</span></tt> user:</p>
<div class="highlight-python"><pre>iptables-save &gt; /etc/iptables/rules.v4</pre>
</div>
</div>
<div class="section" id="using-ssl-with-civetweb">
<h2>Using SSL with Civetweb<a class="headerlink" href="#using-ssl-with-civetweb" title="Permalink to this headline">¶</a></h2>
<p id="id2">Before using SSL with civetweb, you will need a certificate that will match
the host name that that will be used to access the Ceph Object Gateway.
You may wish to obtain one that has <cite>subject alternate name</cite> fields for
more flexibility.  If you intend to use S3-style subdomains
(<a class="reference internal" href="#id3">Add Wildcard to DNS</a>), you will need a <cite>wildcard</cite> certificate.</p>
<p>Civetweb requires that the server key, server certificate, and any other
CA or intermediate certificates be supplied in one file.  Each of these
items must be in <cite>pem</cite> form.  Because the combined file contains the
secret key, it should be protected from unauthorized access.</p>
<p>To configure ssl operation, append <tt class="docutils literal"><span class="pre">s</span></tt> to the port number.  Currently
it is not possible to configure the radosgw to listen on both
http and https, you must pick only one.  So:</p>
<div class="highlight-python"><pre>[client.rgw.gateway-node1]
rgw_frontends = civetweb port=443s ssl_certificate=/etc/ceph/private/keyandcert.pem</pre>
</div>
</div>
<div class="section" id="migrating-from-apache-to-civetweb">
<h2>Migrating from Apache to Civetweb<a class="headerlink" href="#migrating-from-apache-to-civetweb" title="Permalink to this headline">¶</a></h2>
<p>If you&#8217;re running the Ceph Object Gateway on Apache and FastCGI with Ceph
Storage v0.80 or above, you&#8217;re already running Civetweb&#8211;it starts with the
<tt class="docutils literal"><span class="pre">ceph-radosgw</span></tt> daemon and it&#8217;s running on port 7480 by default so that it
doesn&#8217;t conflict with your Apache and FastCGI installation and other commonly
used web service ports. Migrating to use Civetweb basically involves removing
your Apache installation. Then, you must remove Apache and FastCGI settings
from your Ceph configuration file and reset <tt class="docutils literal"><span class="pre">rgw_frontends</span></tt> to Civetweb.</p>
<p>Referring back to the description for installing a Ceph Object Gateway with
<tt class="docutils literal"><span class="pre">ceph-deploy</span></tt>, notice that the configuration file only has one setting
<tt class="docutils literal"><span class="pre">rgw_frontends</span></tt> (and that&#8217;s assuming you elected to change the default port).
The <tt class="docutils literal"><span class="pre">ceph-deploy</span></tt> utility generates the data directory and the keyring for
you&#8211;placing the keyring in <tt class="docutils literal"><span class="pre">/var/lib/ceph/radosgw/{rgw-intance}</span></tt>. The daemon
looks in default locations, whereas you may have specified different settings
in your Ceph configuration file. Since you already have keys and a data
directory, you will want to maintain those paths in your Ceph configuration
file if you used something other than default paths.</p>
<p>A typical Ceph Object Gateway configuration file for an Apache-based deployment
looks something similar as the following:</p>
<p>On Red Hat Enterprise Linux:</p>
<div class="highlight-python"><pre>[client.radosgw.gateway-node1]
host = {hostname}
keyring = /etc/ceph/ceph.client.radosgw.keyring
rgw socket path = ""
log file = /var/log/radosgw/client.radosgw.gateway-node1.log
rgw frontends = fastcgi socket\_port=9000 socket\_host=0.0.0.0
rgw print continue = false</pre>
</div>
<p>On Ubuntu:</p>
<div class="highlight-python"><pre>[client.radosgw.gateway-node]
host = {hostname}
keyring = /etc/ceph/ceph.client.radosgw.keyring
rgw socket path = /var/run/ceph/ceph.radosgw.gateway.fastcgi.sock
log file = /var/log/radosgw/client.radosgw.gateway-node1.log</pre>
</div>
<p>To modify it for use with Civetweb, simply remove the Apache-specific settings
such as <tt class="docutils literal"><span class="pre">rgw_socket_path</span></tt> and <tt class="docutils literal"><span class="pre">rgw_print_continue</span></tt>. Then, change the
<tt class="docutils literal"><span class="pre">rgw_frontends</span></tt> setting to reflect Civetweb rather than the Apache FastCGI
front end and specify the port number you intend to use. For example:</p>
<div class="highlight-python"><pre>[client.radosgw.gateway-node1]
host = {hostname}
keyring = /etc/ceph/ceph.client.radosgw.keyring
log file = /var/log/radosgw/client.radosgw.gateway-node1.log
rgw_frontends = civetweb port=80</pre>
</div>
<p>Finally, restart the Ceph Object Gateway. On Red Hat Enterprise Linux execute:</p>
<div class="highlight-python"><pre>sudo systemctl restart ceph-radosgw.service</pre>
</div>
<p>On Ubuntu execute:</p>
<div class="highlight-python"><pre>sudo service radosgw restart id=rgw.&lt;short-hostname&gt;</pre>
</div>
<p>If you used a port number that is not open, you will also need to open that
port on your firewall.</p>
</div>
<div class="section" id="configure-bucket-sharding">
<h2>Configure Bucket Sharding<a class="headerlink" href="#configure-bucket-sharding" title="Permalink to this headline">¶</a></h2>
<p>A Ceph Object Gateway stores bucket index data in the <tt class="docutils literal"><span class="pre">index_pool</span></tt>, which
defaults to <tt class="docutils literal"><span class="pre">.rgw.buckets.index</span></tt>. Sometimes users like to put many objects
(hundreds of thousands to millions of objects) in a single bucket. If you do
not use the gateway administration interface to set quotas for the maximum
number of objects per bucket, the bucket index can suffer significant
performance degradation when users place large numbers of objects into a
bucket.</p>
<p>In Ceph 0.94, you may shard bucket indices to help prevent performance
bottlenecks when you allow a high number of objects per bucket. The
<tt class="docutils literal"><span class="pre">rgw_override_bucket_index_max_shards</span></tt> setting allows you to set a maximum
number of shards per bucket. The default value is <tt class="docutils literal"><span class="pre">0</span></tt>, which means bucket
index sharding is off by default.</p>
<p>To turn bucket index sharding on, set <tt class="docutils literal"><span class="pre">rgw_override_bucket_index_max_shards</span></tt>
to a value greater than <tt class="docutils literal"><span class="pre">0</span></tt>.</p>
<p>For simple configurations, you may add <tt class="docutils literal"><span class="pre">rgw_override_bucket_index_max_shards</span></tt>
to your Ceph configuration file. Add it under <tt class="docutils literal"><span class="pre">[global]</span></tt> to create a
system-wide value. You can also set it for each instance in your Ceph
configuration file.</p>
<p>Once you have changed your bucket sharding configuration in your Ceph
configuration file, restart your gateway. On Red Hat Enteprise Linux execute:</p>
<div class="highlight-python"><pre>sudo systemctl restart ceph-radosgw.service</pre>
</div>
<p>On Ubuntu execute:</p>
<div class="highlight-python"><pre>sudo service radosgw restart id=rgw.&lt;short-hostname&gt;</pre>
</div>
<p>For federated configurations, each zone may have a different <tt class="docutils literal"><span class="pre">index_pool</span></tt>
setting for failover. To make the value consistent for a region&#8217;s zones, you
may set <tt class="docutils literal"><span class="pre">rgw_override_bucket_index_max_shards</span></tt> in a gateway&#8217;s region
configuration. For example:</p>
<div class="highlight-python"><pre>radosgw-admin region get &gt; region.json</pre>
</div>
<p>Open the <tt class="docutils literal"><span class="pre">region.json</span></tt> file and edit the <tt class="docutils literal"><span class="pre">bucket_index_max_shards</span></tt> setting
for each named zone. Save the <tt class="docutils literal"><span class="pre">region.json</span></tt> file and reset the region. For
example:</p>
<div class="highlight-python"><pre>radosgw-admin region set &lt; region.json</pre>
</div>
<p>Once you&#8217;ve updated your region, update the region map. For example:</p>
<div class="highlight-python"><pre>radosgw-admin regionmap update --name client.rgw.ceph-client</pre>
</div>
<p>Where <tt class="docutils literal"><span class="pre">client.rgw.ceph-client</span></tt> is the name of the gateway user.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Mapping the index pool (for each zone, if applicable) to a CRUSH
ruleset of SSD-based OSDs may also help with bucket index performance.</p>
</div>
</div>
<div class="section" id="add-wildcard-to-dns">
<h2>Add Wildcard to DNS<a class="headerlink" href="#add-wildcard-to-dns" title="Permalink to this headline">¶</a></h2>
<p id="id3">To use Ceph with S3-style subdomains (e.g., bucket-name.domain-name.com), you
need to add a wildcard to the DNS record of the DNS server you use with the
<tt class="docutils literal"><span class="pre">ceph-radosgw</span></tt> daemon.</p>
<p>The address of the DNS must also be specified in the Ceph configuration file
with the <tt class="docutils literal"><span class="pre">rgw</span> <span class="pre">dns</span> <span class="pre">name</span> <span class="pre">=</span> <span class="pre">{hostname}</span></tt> setting.</p>
<p>For <tt class="docutils literal"><span class="pre">dnsmasq</span></tt>, add the following address setting with a dot (.) prepended to
the host name:</p>
<div class="highlight-python"><pre>address=/.{hostname-or-fqdn}/{host-ip-address}</pre>
</div>
<p>For example:</p>
<div class="highlight-python"><pre>address=/.gateway-node1/192.168.122.75</pre>
</div>
<p>For <tt class="docutils literal"><span class="pre">bind</span></tt>, add a wildcard to the DNS record. For example:</p>
<div class="highlight-python"><pre>$TTL    604800
@       IN      SOA     gateway-node1. root.gateway-node1. (
                              2         ; Serial
                         604800         ; Refresh
                          86400         ; Retry
                        2419200         ; Expire
                         604800 )       ; Negative Cache TTL
;
@       IN      NS      gateway-node1.
@       IN      A       192.168.122.113
*       IN      CNAME   @</pre>
</div>
<p>Restart your DNS server and ping your server with a subdomain to ensure that
your DNS configuration works as expected:</p>
<div class="highlight-python"><pre>ping mybucket.{hostname}</pre>
</div>
<p>For example:</p>
<div class="highlight-python"><pre>ping mybucket.gateway-node1</pre>
</div>
</div>
<div class="section" id="add-debugging-if-needed">
<h2>Add Debugging (if needed)<a class="headerlink" href="#add-debugging-if-needed" title="Permalink to this headline">¶</a></h2>
<p>Once you finish the setup procedure, if you encounter issues with your
configuration, you can add debugging to the <tt class="docutils literal"><span class="pre">[global]</span></tt> section of your Ceph
configuration file and restart the gateway(s) to help troubleshoot any
configuration issues. For example:</p>
<div class="highlight-python"><pre>[global]
#append the following in the global section.
debug ms = 1
debug rgw = 20</pre>
</div>
</div>
<div class="section" id="using-the-gateway">
<h2>Using the Gateway<a class="headerlink" href="#using-the-gateway" title="Permalink to this headline">¶</a></h2>
<p>To use the REST interfaces, first create an initial Ceph Object Gateway user
for the S3 interface. Then, create a subuser for the Swift interface. You then
need to verify if the created users are able to access the gateway.</p>
<div class="section" id="create-a-radosgw-user-for-s3-access">
<h3>Create a RADOSGW User for S3 Access<a class="headerlink" href="#create-a-radosgw-user-for-s3-access" title="Permalink to this headline">¶</a></h3>
<p>A <tt class="docutils literal"><span class="pre">radosgw</span></tt> user needs to be created and granted access. The command <tt class="docutils literal"><span class="pre">man</span>
<span class="pre">radosgw-admin</span></tt> will provide information on additional command options.</p>
<p>To create the user, execute the following on the <tt class="docutils literal"><span class="pre">gateway</span> <span class="pre">host</span></tt>:</p>
<div class="highlight-python"><pre>sudo radosgw-admin user create --uid="testuser" --display-name="First User"</pre>
</div>
<p>The output of the command will be something like the following:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="p">{</span>
        <span class="s2">&quot;user_id&quot;</span><span class="p">:</span> <span class="s2">&quot;testuser&quot;</span><span class="p">,</span>
        <span class="s2">&quot;display_name&quot;</span><span class="p">:</span> <span class="s2">&quot;First User&quot;</span><span class="p">,</span>
        <span class="s2">&quot;email&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
        <span class="s2">&quot;suspended&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
        <span class="s2">&quot;max_buckets&quot;</span><span class="p">:</span> <span class="mi">1000</span><span class="p">,</span>
        <span class="s2">&quot;auid&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
        <span class="s2">&quot;subusers&quot;</span><span class="p">:</span> <span class="p">[],</span>
        <span class="s2">&quot;keys&quot;</span><span class="p">:</span> <span class="p">[{</span>
                <span class="s2">&quot;user&quot;</span><span class="p">:</span> <span class="s2">&quot;testuser&quot;</span><span class="p">,</span>
                <span class="s2">&quot;access_key&quot;</span><span class="p">:</span> <span class="s2">&quot;I0PJDPCIYZ665MW88W9R&quot;</span><span class="p">,</span>
                <span class="s2">&quot;secret_key&quot;</span><span class="p">:</span> <span class="s2">&quot;dxaXZ8U90SXydYzyS5ivamEP20hkLSUViiaR+ZDA&quot;</span>
        <span class="p">}],</span>
        <span class="s2">&quot;swift_keys&quot;</span><span class="p">:</span> <span class="p">[],</span>
        <span class="s2">&quot;caps&quot;</span><span class="p">:</span> <span class="p">[],</span>
        <span class="s2">&quot;op_mask&quot;</span><span class="p">:</span> <span class="s2">&quot;read, write, delete&quot;</span><span class="p">,</span>
        <span class="s2">&quot;default_placement&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
        <span class="s2">&quot;placement_tags&quot;</span><span class="p">:</span> <span class="p">[],</span>
        <span class="s2">&quot;bucket_quota&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;enabled&quot;</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>
                <span class="s2">&quot;max_size_kb&quot;</span><span class="p">:</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span>
                <span class="s2">&quot;max_objects&quot;</span><span class="p">:</span> <span class="o">-</span><span class="mi">1</span>
        <span class="p">},</span>
        <span class="s2">&quot;user_quota&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;enabled&quot;</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>
                <span class="s2">&quot;max_size_kb&quot;</span><span class="p">:</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span>
                <span class="s2">&quot;max_objects&quot;</span><span class="p">:</span> <span class="o">-</span><span class="mi">1</span>
        <span class="p">},</span>
        <span class="s2">&quot;temp_url_keys&quot;</span><span class="p">:</span> <span class="p">[]</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The values of <tt class="docutils literal"><span class="pre">keys-&gt;access_key</span></tt> and <tt class="docutils literal"><span class="pre">keys-&gt;secret_key</span></tt> are
needed for access validation.</p>
</div>
<div class="admonition important">
<p class="first admonition-title">Important</p>
<p class="last">Check the key output. Sometimes <tt class="docutils literal"><span class="pre">radosgw-admin</span></tt> generates a
JSON escape character <tt class="docutils literal"><span class="pre">\</span></tt> in <tt class="docutils literal"><span class="pre">access_key</span></tt> or <tt class="docutils literal"><span class="pre">secret_key</span></tt>
and some clients do not know how to handle JSON escape
characters. Remedies include removing the JSON escape character
<tt class="docutils literal"><span class="pre">\</span></tt>, encapsulating the string in quotes, regenerating the key
and ensuring that it does not have a JSON escape character or
specify the key and secret manually. Also, if <tt class="docutils literal"><span class="pre">radosgw-admin</span></tt>
generates a JSON escape character <tt class="docutils literal"><span class="pre">\</span></tt> and a forward slash <tt class="docutils literal"><span class="pre">/</span></tt>
together in a key, like <tt class="docutils literal"><span class="pre">\/</span></tt>, only remove the JSON escape
character <tt class="docutils literal"><span class="pre">\</span></tt>. Do not remove the forward slash <tt class="docutils literal"><span class="pre">/</span></tt> as it is
a valid character in the key.</p>
</div>
</div>
<div class="section" id="create-a-swift-user">
<h3>Create a Swift User<a class="headerlink" href="#create-a-swift-user" title="Permalink to this headline">¶</a></h3>
<p>A Swift subuser needs to be created if this kind of access is needed. Creating
a Swift user is a two step process. The first step is to create the user. The
second is to create the secret key.</p>
<p>Execute the following steps on the <tt class="docutils literal"><span class="pre">gateway</span> <span class="pre">host</span></tt>:</p>
<p>Create the Swift user:</p>
<div class="highlight-python"><pre>sudo radosgw-admin subuser create --uid=testuser --subuser=testuser:swift --access=full</pre>
</div>
<p>The output will be something like the following:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="p">{</span>
        <span class="s2">&quot;user_id&quot;</span><span class="p">:</span> <span class="s2">&quot;testuser&quot;</span><span class="p">,</span>
        <span class="s2">&quot;display_name&quot;</span><span class="p">:</span> <span class="s2">&quot;First User&quot;</span><span class="p">,</span>
        <span class="s2">&quot;email&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
        <span class="s2">&quot;suspended&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
        <span class="s2">&quot;max_buckets&quot;</span><span class="p">:</span> <span class="mi">1000</span><span class="p">,</span>
        <span class="s2">&quot;auid&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
        <span class="s2">&quot;subusers&quot;</span><span class="p">:</span> <span class="p">[{</span>
                <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;testuser:swift&quot;</span><span class="p">,</span>
                <span class="s2">&quot;permissions&quot;</span><span class="p">:</span> <span class="s2">&quot;full-control&quot;</span>
        <span class="p">}],</span>
        <span class="s2">&quot;keys&quot;</span><span class="p">:</span> <span class="p">[{</span>
                <span class="s2">&quot;user&quot;</span><span class="p">:</span> <span class="s2">&quot;testuser:swift&quot;</span><span class="p">,</span>
                <span class="s2">&quot;access_key&quot;</span><span class="p">:</span> <span class="s2">&quot;3Y1LNW4Q6X0Y53A52DET&quot;</span><span class="p">,</span>
                <span class="s2">&quot;secret_key&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span>
        <span class="p">},</span> <span class="p">{</span>
                <span class="s2">&quot;user&quot;</span><span class="p">:</span> <span class="s2">&quot;testuser&quot;</span><span class="p">,</span>
                <span class="s2">&quot;access_key&quot;</span><span class="p">:</span> <span class="s2">&quot;I0PJDPCIYZ665MW88W9R&quot;</span><span class="p">,</span>
                <span class="s2">&quot;secret_key&quot;</span><span class="p">:</span> <span class="s2">&quot;dxaXZ8U90SXydYzyS5ivamEP20hkLSUViiaR+ZDA&quot;</span>
        <span class="p">}],</span>
        <span class="s2">&quot;swift_keys&quot;</span><span class="p">:</span> <span class="p">[],</span>
        <span class="s2">&quot;caps&quot;</span><span class="p">:</span> <span class="p">[],</span>
        <span class="s2">&quot;op_mask&quot;</span><span class="p">:</span> <span class="s2">&quot;read, write, delete&quot;</span><span class="p">,</span>
        <span class="s2">&quot;default_placement&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
        <span class="s2">&quot;placement_tags&quot;</span><span class="p">:</span> <span class="p">[],</span>
        <span class="s2">&quot;bucket_quota&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;enabled&quot;</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>
                <span class="s2">&quot;max_size_kb&quot;</span><span class="p">:</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span>
                <span class="s2">&quot;max_objects&quot;</span><span class="p">:</span> <span class="o">-</span><span class="mi">1</span>
        <span class="p">},</span>
        <span class="s2">&quot;user_quota&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;enabled&quot;</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>
                <span class="s2">&quot;max_size_kb&quot;</span><span class="p">:</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span>
                <span class="s2">&quot;max_objects&quot;</span><span class="p">:</span> <span class="o">-</span><span class="mi">1</span>
        <span class="p">},</span>
        <span class="s2">&quot;temp_url_keys&quot;</span><span class="p">:</span> <span class="p">[]</span>
 <span class="p">}</span>
</pre></div>
</div>
<p>Create the secret key:</p>
<div class="highlight-python"><pre>sudo radosgw-admin key create --subuser=testuser:swift --key-type=swift --gen-secret</pre>
</div>
<p>The output will be something like the following:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="p">{</span>
        <span class="s2">&quot;user_id&quot;</span><span class="p">:</span> <span class="s2">&quot;testuser&quot;</span><span class="p">,</span>
        <span class="s2">&quot;display_name&quot;</span><span class="p">:</span> <span class="s2">&quot;First User&quot;</span><span class="p">,</span>
        <span class="s2">&quot;email&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
        <span class="s2">&quot;suspended&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
        <span class="s2">&quot;max_buckets&quot;</span><span class="p">:</span> <span class="mi">1000</span><span class="p">,</span>
        <span class="s2">&quot;auid&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
        <span class="s2">&quot;subusers&quot;</span><span class="p">:</span> <span class="p">[{</span>
                <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;testuser:swift&quot;</span><span class="p">,</span>
                <span class="s2">&quot;permissions&quot;</span><span class="p">:</span> <span class="s2">&quot;full-control&quot;</span>
        <span class="p">}],</span>
        <span class="s2">&quot;keys&quot;</span><span class="p">:</span> <span class="p">[{</span>
                <span class="s2">&quot;user&quot;</span><span class="p">:</span> <span class="s2">&quot;testuser:swift&quot;</span><span class="p">,</span>
                <span class="s2">&quot;access_key&quot;</span><span class="p">:</span> <span class="s2">&quot;3Y1LNW4Q6X0Y53A52DET&quot;</span><span class="p">,</span>
                <span class="s2">&quot;secret_key&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span>
        <span class="p">},</span> <span class="p">{</span>
                <span class="s2">&quot;user&quot;</span><span class="p">:</span> <span class="s2">&quot;testuser&quot;</span><span class="p">,</span>
                <span class="s2">&quot;access_key&quot;</span><span class="p">:</span> <span class="s2">&quot;I0PJDPCIYZ665MW88W9R&quot;</span><span class="p">,</span>
                <span class="s2">&quot;secret_key&quot;</span><span class="p">:</span> <span class="s2">&quot;dxaXZ8U90SXydYzyS5ivamEP20hkLSUViiaR+ZDA&quot;</span>
        <span class="p">}],</span>
        <span class="s2">&quot;swift_keys&quot;</span><span class="p">:</span> <span class="p">[{</span>
                <span class="s2">&quot;user&quot;</span><span class="p">:</span> <span class="s2">&quot;testuser:swift&quot;</span><span class="p">,</span>
                <span class="s2">&quot;secret_key&quot;</span><span class="p">:</span> <span class="s2">&quot;244+fz2gSqoHwR3lYtSbIyomyPHf3i7rgSJrF\/IA&quot;</span>
        <span class="p">}],</span>
        <span class="s2">&quot;caps&quot;</span><span class="p">:</span> <span class="p">[],</span>
        <span class="s2">&quot;op_mask&quot;</span><span class="p">:</span> <span class="s2">&quot;read, write, delete&quot;</span><span class="p">,</span>
        <span class="s2">&quot;default_placement&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
        <span class="s2">&quot;placement_tags&quot;</span><span class="p">:</span> <span class="p">[],</span>
        <span class="s2">&quot;bucket_quota&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;enabled&quot;</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>
                <span class="s2">&quot;max_size_kb&quot;</span><span class="p">:</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span>
                <span class="s2">&quot;max_objects&quot;</span><span class="p">:</span> <span class="o">-</span><span class="mi">1</span>
        <span class="p">},</span>
        <span class="s2">&quot;user_quota&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;enabled&quot;</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>
                <span class="s2">&quot;max_size_kb&quot;</span><span class="p">:</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span>
                <span class="s2">&quot;max_objects&quot;</span><span class="p">:</span> <span class="o">-</span><span class="mi">1</span>
        <span class="p">},</span>
        <span class="s2">&quot;temp_url_keys&quot;</span><span class="p">:</span> <span class="p">[]</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="access-verification">
<h3>Access Verification<a class="headerlink" href="#access-verification" title="Permalink to this headline">¶</a></h3>
<div class="section" id="test-s3-access">
<h4>Test S3 Access<a class="headerlink" href="#test-s3-access" title="Permalink to this headline">¶</a></h4>
<p>You need to write and run a Python test script for verifying S3 access. The S3
access test script will connect to the <tt class="docutils literal"><span class="pre">radosgw</span></tt>, create a new bucket and
list all buckets. The values for <tt class="docutils literal"><span class="pre">aws_access_key_id</span></tt> and
<tt class="docutils literal"><span class="pre">aws_secret_access_key</span></tt> are taken from the values of <tt class="docutils literal"><span class="pre">access_key</span></tt> and
<tt class="docutils literal"><span class="pre">secret_key</span></tt> returned by the <tt class="docutils literal"><span class="pre">radosgw-admin</span></tt> command.</p>
<p>Execute the following steps:</p>
<ol class="arabic">
<li><p class="first">You will need to install the <tt class="docutils literal"><span class="pre">python-boto</span></tt> package:</p>
<div class="highlight-python"><pre>sudo yum install python-boto</pre>
</div>
</li>
<li><p class="first">Create the Python script:</p>
<div class="highlight-python"><pre>vi s3test.py</pre>
</div>
</li>
<li><p class="first">Add the following contents to the file:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">boto.s3.connection</span>

<span class="n">access_key</span> <span class="o">=</span> <span class="s1">&#39;I0PJDPCIYZ665MW88W9R&#39;</span>
<span class="n">secret_key</span> <span class="o">=</span> <span class="s1">&#39;dxaXZ8U90SXydYzyS5ivamEP20hkLSUViiaR+ZDA&#39;</span>
<span class="n">conn</span> <span class="o">=</span> <span class="n">boto</span><span class="o">.</span><span class="n">connect_s3</span><span class="p">(</span>
        <span class="n">aws_access_key_id</span><span class="o">=</span><span class="n">access_key</span><span class="p">,</span>
        <span class="n">aws_secret_access_key</span><span class="o">=</span><span class="n">secret_key</span><span class="p">,</span>
        <span class="n">host</span><span class="o">=</span><span class="s1">&#39;{hostname}&#39;</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="p">{</span><span class="n">port</span><span class="p">},</span>
        <span class="n">is_secure</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">calling_format</span><span class="o">=</span><span class="n">boto</span><span class="o">.</span><span class="n">s3</span><span class="o">.</span><span class="n">connection</span><span class="o">.</span><span class="n">OrdinaryCallingFormat</span><span class="p">(),</span>
       <span class="p">)</span>

<span class="n">bucket</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">create_bucket</span><span class="p">(</span><span class="s1">&#39;my-new-bucket&#39;</span><span class="p">)</span>
<span class="k">for</span> <span class="n">bucket</span> <span class="ow">in</span> <span class="n">conn</span><span class="o">.</span><span class="n">get_all_buckets</span><span class="p">():</span>
    <span class="k">print</span> <span class="s2">&quot;{name} {created}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
        <span class="n">name</span><span class="o">=</span><span class="n">bucket</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
        <span class="n">created</span><span class="o">=</span><span class="n">bucket</span><span class="o">.</span><span class="n">creation_date</span><span class="p">,</span>
    <span class="p">)</span>
</pre></div>
</div>
<p>Replace <tt class="docutils literal"><span class="pre">{hostname}</span></tt> with the hostname of the host where you have
configured the gateway service i.e., the <tt class="docutils literal"><span class="pre">gateway</span> <span class="pre">host</span></tt>. Replace <tt class="docutils literal"><span class="pre">{port}</span></tt>
with the port number you are using with Civetweb.</p>
</li>
<li><p class="first">Run the script:</p>
<div class="highlight-python"><pre>python s3test.py</pre>
</div>
<p>The output will be something like the following:</p>
<div class="highlight-python"><pre>my-new-bucket 2015-02-16T17:09:10.000Z</pre>
</div>
</li>
</ol>
</div>
<div class="section" id="test-swift-access">
<h4>Test swift access<a class="headerlink" href="#test-swift-access" title="Permalink to this headline">¶</a></h4>
<p>Swift access can be verified via the <tt class="docutils literal"><span class="pre">swift</span></tt> command line client. The command
<tt class="docutils literal"><span class="pre">man</span> <span class="pre">swift</span></tt> will provide more information on available command line options.</p>
<p>To install <tt class="docutils literal"><span class="pre">swift</span></tt> client, execute the following commands. On Red Hat
Enterprise Linux:</p>
<div class="highlight-python"><pre>sudo yum install python-setuptools
sudo easy_install pip
sudo pip install --upgrade setuptools
sudo pip install --upgrade python-swiftclient</pre>
</div>
<p>On Debian-based distributions:</p>
<div class="highlight-python"><pre>sudo apt-get install python-setuptools
sudo easy_install pip
sudo pip install --upgrade setuptools
sudo pip install --upgrade python-swiftclient</pre>
</div>
<p>To test swift access, execute the following:</p>
<div class="highlight-python"><pre>swift -A http://{IP ADDRESS}:{port}/auth/1.0 -U testuser:swift -K '{swift_secret_key}' list</pre>
</div>
<p>Replace <tt class="docutils literal"><span class="pre">{IP</span> <span class="pre">ADDRESS}</span></tt> with the public IP address of the gateway server and
<tt class="docutils literal"><span class="pre">{swift_secret_key}</span></tt> with its value from the output of <tt class="docutils literal"><span class="pre">radosgw-admin</span> <span class="pre">key</span>
<span class="pre">create</span></tt> command executed for the <tt class="docutils literal"><span class="pre">swift</span></tt> user. Replace {port} with the port
number you are using with Civetweb (e.g., <tt class="docutils literal"><span class="pre">7480</span></tt> is the default). If you
don&#8217;t replace the port, it will default to port <tt class="docutils literal"><span class="pre">80</span></tt>.</p>
<p>For example:</p>
<div class="highlight-python"><pre>swift -A http://10.19.143.116:7480/auth/1.0 -U testuser:swift -K '244+fz2gSqoHwR3lYtSbIyomyPHf3i7rgSJrF/IA' list</pre>
</div>
<p>The output should be:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">my</span><span class="o">-</span><span class="n">new</span><span class="o">-</span><span class="n">bucket</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../../">
              <img class="logo" src="../../_static/logo.png" alt="Logo"/>
            </a></p>
<h3><a href="../../">Table Of Contents</a></h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../start/intro/">Intro to Ceph</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../start/">Installation (Quick)</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../">Installation (Manual)</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../#get-software">Get Software</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../#install-software">Install Software</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../install-ceph-deploy/">     Install ceph-deploy</a></li>
<li class="toctree-l3"><a class="reference internal" href="../install-storage-cluster/">Install Ceph Storage Cluster</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="">     Install Ceph Object Gateway</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#execute-the-pre-installation-procedure">Execute the Pre-Installation Procedure</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id1">Install Ceph Object Gateway</a></li>
<li class="toctree-l4"><a class="reference internal" href="#create-a-gateway-instance">Create a Gateway Instance</a></li>
<li class="toctree-l4"><a class="reference internal" href="#change-the-default-port">Change the Default Port</a></li>
<li class="toctree-l4"><a class="reference internal" href="#using-ssl-with-civetweb">Using SSL with Civetweb</a></li>
<li class="toctree-l4"><a class="reference internal" href="#migrating-from-apache-to-civetweb">Migrating from Apache to Civetweb</a></li>
<li class="toctree-l4"><a class="reference internal" href="#configure-bucket-sharding">Configure Bucket Sharding</a></li>
<li class="toctree-l4"><a class="reference internal" href="#add-wildcard-to-dns">Add Wildcard to DNS</a></li>
<li class="toctree-l4"><a class="reference internal" href="#add-debugging-if-needed">Add Debugging (if needed)</a></li>
<li class="toctree-l4"><a class="reference internal" href="#using-the-gateway">Using the Gateway</a><ul>
<li class="toctree-l5"><a class="reference internal" href="#create-a-radosgw-user-for-s3-access">Create a RADOSGW User for S3 Access</a></li>
<li class="toctree-l5"><a class="reference internal" href="#create-a-swift-user">Create a Swift User</a></li>
<li class="toctree-l5"><a class="reference internal" href="#access-verification">Access Verification</a><ul>
<li class="toctree-l6"><a class="reference internal" href="#test-s3-access">Test S3 Access</a></li>
<li class="toctree-l6"><a class="reference internal" href="#test-swift-access">Test swift access</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../install-vm-cloud/">     Install Virtualization for Block</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../#deploy-a-cluster-manually">Deploy a Cluster Manually</a></li>
<li class="toctree-l2"><a class="reference internal" href="../#upgrade-software">Upgrade Software</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../rados/">Ceph Storage Cluster</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../cephfs/">Ceph Filesystem</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../rbd/rbd/">Ceph Block Device</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../radosgw/">Ceph Object Gateway</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="">Manual Install w/Civetweb</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#execute-the-pre-installation-procedure">Execute the Pre-Installation Procedure</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id1">Install Ceph Object Gateway</a></li>
<li class="toctree-l3"><a class="reference internal" href="#create-a-gateway-instance">Create a Gateway Instance</a></li>
<li class="toctree-l3"><a class="reference internal" href="#change-the-default-port">Change the Default Port</a></li>
<li class="toctree-l3"><a class="reference internal" href="#using-ssl-with-civetweb">Using SSL with Civetweb</a></li>
<li class="toctree-l3"><a class="reference internal" href="#migrating-from-apache-to-civetweb">Migrating from Apache to Civetweb</a></li>
<li class="toctree-l3"><a class="reference internal" href="#configure-bucket-sharding">Configure Bucket Sharding</a></li>
<li class="toctree-l3"><a class="reference internal" href="#add-wildcard-to-dns">Add Wildcard to DNS</a></li>
<li class="toctree-l3"><a class="reference internal" href="#add-debugging-if-needed">Add Debugging (if needed)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#using-the-gateway">Using the Gateway</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#create-a-radosgw-user-for-s3-access">Create a RADOSGW User for S3 Access</a></li>
<li class="toctree-l4"><a class="reference internal" href="#create-a-swift-user">Create a Swift User</a></li>
<li class="toctree-l4"><a class="reference internal" href="#access-verification">Access Verification</a><ul>
<li class="toctree-l5"><a class="reference internal" href="#test-s3-access">Test S3 Access</a></li>
<li class="toctree-l5"><a class="reference internal" href="#test-swift-access">Test swift access</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../radosgw/config-fcgi/">Simple Configuration w/Apache/FastCGI</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../radosgw/federated-config/">Federated Configuration (Deprecated)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../radosgw/multisite/">Multisite Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../radosgw/config-ref/">Config Reference</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../radosgw/admin/">Admin Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../radosgw/s3/">S3 API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../radosgw/swift/">Swift API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../radosgw/adminops/">Admin Ops API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../radosgw/api/">Python binding</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../radosgw/keystone/">OpenStack Keystone Integration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../radosgw/barbican/">OpenStack Barbican Integration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../radosgw/multitenancy/">Multi-tenancy</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../radosgw/compression/">Compression</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../radosgw/encryption/">Server-Side Encryption</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../radosgw/layout/">Data Layout in RADOS</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../radosgw/upgrade_to_jewel/">Upgrade to Older Versions of Jewel</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../radosgw/troubleshooting/">Troubleshooting</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../man/8/radosgw/">Manpage radosgw</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../man/8/radosgw-admin/">Manpage radosgw-admin</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../mgr/">Ceph Manager Daemon</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api/">API Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../architecture/">Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../dev/">Development</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../release-notes/">Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../releases/">Ceph Releases</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../glossary/">Glossary</a></li>
</ul>


<!-- ugly kludge to make genindex look like it's part of the toc -->
<ul style="margin-top: -10px"><li class="toctree-l1"><a class="reference internal" href="../../genindex/">Index</a></li></ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../../search/" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex/" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../../py-modindex/" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="../../radosgw/config-fcgi/" title="Configuring Ceph Object Gateway with Apache/FastCGI"
             >next</a> |</li>
        <li class="right" >
          <a href="../../radosgw/" title="Ceph Object Gateway"
             >previous</a> |</li>
        <li><a href="../../">Ceph Documentation</a> &raquo;</li>
          <li><a href="../../radosgw/" >Ceph Object Gateway</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2016, Red Hat, Inc, and contributors. Licensed under Creative Commons BY-SA.
    </div>
  </body>
</html>