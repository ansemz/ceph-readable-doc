.\" Man page generated from reStructuredText.
.
.TH "CEPH-OBJECTSTORE-TOOL" "8" "Jan 02, 2022" "dev" "Ceph"
.SH NAME
ceph-objectstore-tool \- modify or examine the state of an OSD
.
.nr rst2man-indent-level 0
.
.de1 rstReportMargin
\\$1 \\n[an-margin]
level \\n[rst2man-indent-level]
level margin: \\n[rst2man-indent\\n[rst2man-indent-level]]
-
\\n[rst2man-indent0]
\\n[rst2man-indent1]
\\n[rst2man-indent2]
..
.de1 INDENT
.\" .rstReportMargin pre:
. RS \\$1
. nr rst2man-indent\\n[rst2man-indent-level] \\n[an-margin]
. nr rst2man-indent-level +1
.\" .rstReportMargin post:
..
.de UNINDENT
. RE
.\" indent \\n[an-margin]
.\" old: \\n[rst2man-indent\\n[rst2man-indent-level]]
.nr rst2man-indent-level -1
.\" new: \\n[rst2man-indent\\n[rst2man-indent-level]]
.in \\n[rst2man-indent\\n[rst2man-indent-level]]u
..
.SH 提纲
.nf
\fBceph\-objectstore\-tool\fP \-\-data\-path \fIpath to osd\fP [\-\-op \fIlist\fP ]
.fi
.sp
.sp
支持的对象操作：
.INDENT 0.0
.IP \(bu 2
(get|set)\-bytes [file]
.IP \(bu 2
set\-(attr|omap) [file]
.IP \(bu 2
(get|rm)\-attr|omap)
.IP \(bu 2
get\-omaphdr
.IP \(bu 2
set\-omaphdr [file]
.IP \(bu 2
list\-attrs
.IP \(bu 2
list\-omap
.IP \(bu 2
remove|removeall
.IP \(bu 2
dump
.IP \(bu 2
set\-size
.IP \(bu 2
clear\-data\-digest
.IP \(bu 2
remove\-clone\-metadata
.UNINDENT
.SH 描述
.sp
\fBceph\-objectstore\-tool\fP is a tool for modifying the state of an OSD. It facilitates manipulating an object\(aqs content, removing an object, listing the omap, manipulating the omap header, manipulating the omap key, listing object attributes, and manipulating object attribute keys.
.sp
\fBceph\-objectstore\-tool\fP provides two main modes: (1) a mode that specifies the "\-\-op" argument (for example, \fBceph\-objectstore\-tool\fP \-\-data\-path $PATH_TO_OSD \-\-op $SELECT_OPERATION [\-\-pgid $PGID] [\-\-dry\-run]), and (2) a mode for positional object operations. If the second mode is used, the object can be specified by ID or by the JSON output of the \-\-op list.
.nf
\fBceph\-objectstore\-tool\fP \-\-data\-path \fIpath to osd\fP [\-\-pgid \fI$PG_ID\fP ][\-\-op \fIcommand\fP]
\fBceph\-objectstore\-tool\fP \-\-data\-path \fIpath to osd\fP [ \-\-op \fIlist $OBJECT_ID\fP]
.fi
.sp
.sp
支持的 \-\-op 命令：
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
* info
* log
* remove
* mkfs
* fsck
* repair
* fuse
* dup
* export
* export\-remove
* import
* list
* list\-slow\-omap
* fix\-lost
* list\-pgs
* dump\-journal
* dump\-super
* meta\-list
* get\-osdmap
* set\-osdmap
* get\-inc\-osdmap
* set\-inc\-osdmap
* mark\-complete
* reset\-last\-complete
* apply\-layour\-settings
* update\-mon\-db
* dump\-export
* trim\-pg\-log
.ft P
.fi
.UNINDENT
.UNINDENT
.SH 安装
.sp
\fBceph\-objectstore\-tool\fP 在 \fIceph\-osd\fP 软件包里。
.SH 实例
.SS 对象的修改
.sp
这些命令可修改一个 OSD 的状态，使用 ceph\-objectstore\-tool 时这个 OSD 一定不能运行。
.SS 罗列对象和归置组
.sp
确保目标 OSD 处于停机状态:
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
systemctl status ceph\-osd@$OSD_NUMBER
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
用 ceph\-objectstore\-tool 罗列对象:
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
systemctl status ceph\-osd@$OSD_NUMBER
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
找出一个 OSD 内的所有对象:
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
ceph\-objectstore\-tool \-\-data\-path $PATH_TO_OSD \-\-op list
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
找出一个归置组内的所有对象:
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
ceph\-objectstore\-tool \-\-data\-path $PATH_TO_OSD \-\-pgid $PG_ID \-\-op list
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
找出一个对象所属的归置组（ PG ）:
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
ceph\-objectstore\-tool \-\-data\-path $PATH_TO_OSD \-\-op list $OBJECT_ID
.ft P
.fi
.UNINDENT
.UNINDENT
.SS 丢失对象的修正
.sp
确保此 OSD 处于停机状态:
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
systemctl status ceph\-osd@OSD_NUMBER
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
修正所有丢失的对象:
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
ceph\-objectstore\-tool \-\-data\-path $PATH_TO_OSD \-\-op fix\-lost
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
修正指定归置组内、所有丢失的对象:
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
ceph\-objectstore\-tool \-\-data\-path $PATH_TO_OSD \-\-pgid $PG_ID \-\-op fix\-lost
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
根据标识符修正一个丢失的对象:
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
ceph\-objectstore\-tool \-\-data\-path $PATH_TO_OSD \-\-op fix\-lost $OBJECT_ID
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
修正以前丢失的对象:
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
ceph\-objectstore\-tool \-\-data\-path $PATH_TO_OSD \-\-op fix\-lost
.ft P
.fi
.UNINDENT
.UNINDENT
.SS 修改一个对象的内容
.INDENT 0.0
.IP 1. 3
确保目标 OSD 处于停机状态:
.INDENT 3.0
.INDENT 3.5
.sp
.nf
.ft C
systemctl status ceph\-osd@$OSD_NUMBER
.ft P
.fi
.UNINDENT
.UNINDENT
.IP 2. 3
通过罗列此 OSD 或归置组内的对象找到要修改的对象。
.IP 3. 3
在对象中写入字节串之前，先做此对象的备份和工作副本。下面是此命令的语法格式:
.INDENT 3.0
.INDENT 3.5
.sp
.nf
.ft C
ceph\-objectstore\-tool \-\-data\-path $PATH_TO_OSD \-\-pgid $PG_ID $OBJECT get\-bytes > $OBJECT_FILE_NAME
.ft P
.fi
.UNINDENT
.UNINDENT
.UNINDENT
.sp
例如:
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
[root@osd ~]# ceph\-objectstore\-tool \-\-data\-path /var/lib/ceph/osd/ceph\-0 \-\-pgid 0.1c \(aq{"oid":"zone_info.default","key":"","snapid":\-2,"hash":235010478,"max":0,"pool":11,"namespace":""}\(aq get\-bytes > zone_info.default.backup

[root@osd ~]# ceph\-objectstore\-tool \-\-data\-path /var/lib/ceph/osd/ceph\-0 \-\-pgid 0.1c \(aq{"oid":"zone_info.default","key":"","snapid":\-2,"hash":235010478,"max":0,"pool":11,"namespace":""}\(aq get\-bytes > zone_info.default.working\-copy
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
第一个命令创建了备份副本，而第二个命令创建的是工作副本。
.INDENT 0.0
.IP 4. 3
编辑工作副本那个对象文件。
.IP 5. 3
填入此对象的变更字节:
.INDENT 3.0
.INDENT 3.5
.sp
.nf
.ft C
ceph\-objectstore\-tool \-\-data\-path $PATH_TO_OSD \-\-pgid $PG_ID $OBJECT set\-bytes < $OBJECT_FILE_NAME
.ft P
.fi
.UNINDENT
.UNINDENT
.UNINDENT
.sp
例如:
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
[root@osd ~]# ceph\-objectstore\-tool \-\-data\-path /var/lib/ceph/osd/ceph\-0 \-\-pgid 0.1c \(aq{"oid":"zone_info.default","key":"","snapid":\-2,"hash":235010478,"max":0,"pool":11,"namespace":""}\(aq set\-bytes < zone_info.default.working\-copy
.ft P
.fi
.UNINDENT
.UNINDENT
.SS 对象的删除
.sp
用 \fBceph\-objectstore\-tool\fP 删除对象。对象被删除后，其内容以及引用都会从归置组（ PG ）删除。
.sp
删除一个对象（语法）:
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
ceph\-objectstore\-tool \-\-data\-path $PATH_TO_OSD \-\-pgid $PG_ID $OBJECT remove
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
删除一个对象（实例）:
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
[root@osd ~]# ceph\-objectstore\-tool \-\-data\-path /var/lib/ceph/osd/ceph\-0 \-\-pgid 0.1c \(aq{"oid":"zone_info.default","key":"","snapid":\-2,"hash":235010478,"max":0,"pool":11,"namespace":""}\(aq remove
.ft P
.fi
.UNINDENT
.UNINDENT
.SS 罗列对象图
.sp
用 ceph\-objectstore\-tool 罗列对象图（ OMAP ）的内容。其输出是一系列键名。
.INDENT 0.0
.IP 1. 3
确认此 OSD 处于停机状态：
.sp
语法:
.INDENT 3.0
.INDENT 3.5
.sp
.nf
.ft C
systemctl status ceph\-osd@$OSD_NUMBER
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
实例:
.INDENT 3.0
.INDENT 3.5
.sp
.nf
.ft C
[root@osd ~]# systemctl status ceph\-osd@1
.ft P
.fi
.UNINDENT
.UNINDENT
.IP 2. 3
罗列其对象图：
.sp
语法:
.INDENT 3.0
.INDENT 3.5
.sp
.nf
.ft C
ceph\-objectstore\-tool \-\-data\-path $PATH_TO_OSD \-\-pgid $PG_ID $OBJECT list\-omap
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
实例:
.INDENT 3.0
.INDENT 3.5
.sp
.nf
.ft C
[root@osd ~]# ceph\-objectstore\-tool \-\-data\-path /var/lib/ceph/osd/ceph\-0 \-\-pgid 0.1c \(aq{"oid":"zone_info.default","key":"","snapid":\-2,"hash":235010478,"max":0,"pool":11,"namespace":""}\(aq list\-omap
.ft P
.fi
.UNINDENT
.UNINDENT
.UNINDENT
.SS Manipulating the Object Map Header
.sp
The \fBceph\-objectstore\-tool\fP utility will output the object map (OMAP) header with the values associated with the object\(aqs keys.
.sp
Note: If using FileStore as the OSD backend object store, then add the \fI\-\-journal\-path $PATH_TO_JOURNAL\fP argument when getting or setting the object map header, where the \fI$PATH_TO_JOURNAL\fP variable is the absolute path to the OSD journal; for example \fI/var/lib/ceph/osd/ceph\-0/journal\fP\&.
.SS Prerequisites
.INDENT 0.0
.INDENT 3.5
.INDENT 0.0
.IP \(bu 2
Having root access to the Ceph OSD node.
.IP \(bu 2
Stopping the ceph\-osd daemon.
.UNINDENT
.UNINDENT
.UNINDENT
.SS Procedure
.INDENT 0.0
.INDENT 3.5
Verify that the target OSD is down:
.sp
语法:
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
systemctl status ceph\-osd@$OSD_NUMBER
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
实例:
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
[root@osd ~]# systemctl status ceph\-osd@1
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
Get the object map header:
.sp
语法:
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
ceph\-objectstore\-tool \-\-data\-path $PATH_TO_OSD \-\-pgid $PG_ID $OBJECT get\-omaphdr > $OBJECT_MAP_FILE_NAME
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
实例:
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
[root@osd ~]# ceph\-objectstore\-tool \-\-data\-path /var/lib/ceph/osd/ceph\-0 \-\-pgid 0.1c \(aq{"oid":"zone_info.default","key":"","snapid":\-2,"hash":235010478,"max":0,"pool":11,"namespace":""}\(aq  get\-omaphdr > zone_info.default.omaphdr.txt
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
Set the object map header:
.sp
语法:
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
ceph\-objectstore\-tool \-\-data\-path $PATH_TO_OSD \-\-pgid $PG_ID $OBJECT get\-omaphdr < $OBJECT_MAP_FILE_NAME
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
实例:
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
[root@osd ~]# ceph\-objectstore\-tool \-\-data\-path /var/lib/ceph/osd/ceph\-0 \-\-pgid 0.1c \(aq{"oid":"zone_info.default","key":"","snapid":\-2,"hash":235010478,"max":0,"pool":11,"namespace":""}\(aq  set\-omaphdr < zone_info.default.omaphdr.txt
.ft P
.fi
.UNINDENT
.UNINDENT
.UNINDENT
.UNINDENT
.SS Manipulating the Object Map Key
.sp
Use the \fBceph\-objectstore\-tool\fP utility to change the object map (OMAP) key. You need to provide the data path, the placement group identifier (PG ID), the object, and the key in the OMAP.
Note
.sp
If using FileStore as the OSD backend object store, then add the \fI\-\-journal\-path $PATH_TO_JOURNAL\fP argument when getting, setting or removing the object map key, where the \fI$PATH_TO_JOURNAL\fP variable is the absolute path to the OSD journal; for example \fI/var/lib/ceph/osd/ceph\-0/journal\fP\&.
.sp
Prerequisites
.INDENT 0.0
.INDENT 3.5
.INDENT 0.0
.IP \(bu 2
Having root access to the Ceph OSD node.
.IP \(bu 2
Stopping the ceph\-osd daemon.
.UNINDENT
.UNINDENT
.UNINDENT
.sp
Procedure
.INDENT 0.0
.INDENT 3.5
.INDENT 0.0
.INDENT 3.5
Get the object map key:
.sp
语法:
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
ceph\-objectstore\-tool \-\-data\-path $PATH_TO_OSD \-\-pgid $PG_ID $OBJECT get\-omap $KEY > $OBJECT_MAP_FILE_NAME
.ft P
.fi
.UNINDENT
.UNINDENT
.UNINDENT
.UNINDENT
.sp
实例:
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
[root@osd ~]# ceph\-objectstore\-tool \-\-data\-path /var/lib/ceph/osd/ceph\-0 \-\-pgid 0.1c \(aq{"oid":"zone_info.default","key":"","snapid":\-2,"hash":235010478,"max":0,"pool":11,"namespace":""}\(aq  get\-omap "" > zone_info.default.omap.txt
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
Set the object map key:
.sp
语法:
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
ceph\-objectstore\-tool \-\-data\-path $PATH_TO_OSD \-\-pgid $PG_ID $OBJECT set\-omap $KEY < $OBJECT_MAP_FILE_NAME
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
实例:
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
[root@osd ~]# ceph\-objectstore\-tool \-\-data\-path /var/lib/ceph/osd/ceph\-0 \-\-pgid 0.1c \(aq{"oid":"zone_info.default","key":"","snapid":\-2,"hash":235010478,"max":0,"pool":11,"namespace":""}\(aq set\-omap "" < zone_info.default.omap.txt
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
Remove the object map key:
.sp
语法:
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
ceph\-objectstore\-tool \-\-data\-path $PATH_TO_OSD \-\-pgid $PG_ID $OBJECT rm\-omap $KEY
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
实例:
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
[root@osd ~]# ceph\-objectstore\-tool \-\-data\-path /var/lib/ceph/osd/ceph\-0 \-\-pgid 0.1c \(aq{"oid":"zone_info.default","key":"","snapid":\-2,"hash":235010478,"max":0,"pool":11,"namespace":""}\(aq rm\-omap ""
.ft P
.fi
.UNINDENT
.UNINDENT
.UNINDENT
.UNINDENT
.SS Listing an Object\(aqs Attributes
.sp
Use the \fBceph\-objectstore\-tool\fP utility to list an object\(aqs attributes. The output provides you with the object\(aqs keys and values.
Note
.sp
If you are using FileStore as the OSD backend object store and the journal is on a different disk, you must add the \fI\-\-journal\-path $PATH_TO_JOURNAL\fP argument when listing an object\(aqs attributes, where the \fI$PATH_TO_JOURNAL\fP variable is the absolute path to the OSD journal; for example \fI/var/lib/ceph/osd/ceph\-0/journal\fP\&.
.SS Prerequisites
.INDENT 0.0
.INDENT 3.5
.INDENT 0.0
.IP \(bu 2
Having root access to the Ceph OSD node.
.IP \(bu 2
Stopping the ceph\-osd daemon.
.UNINDENT
.UNINDENT
.UNINDENT
.SS Procedure
.INDENT 0.0
.INDENT 3.5
Verify that the target OSD is down:
.sp
语法:
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
systemctl status ceph\-osd@$OSD_NUMBER
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
实例:
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
[root@osd ~]# systemctl status ceph\-osd@1
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
List the object\(aqs attributes:
.sp
语法:
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
ceph\-objectstore\-tool \-\-data\-path $PATH_TO_OSD \-\-pgid $PG_ID $OBJECT list\-attrs
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
实例:
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
[root@osd ~]# ceph\-objectstore\-tool \-\-data\-path /var/lib/ceph/osd/ceph\-0 \-\-pgid 0.1c \(aq{"oid":"zone_info.default","key":"","snapid":\-2,"hash":235010478,"max":0,"pool":11,"namespace":""}\(aq list\-attrs
.ft P
.fi
.UNINDENT
.UNINDENT
.UNINDENT
.UNINDENT
.SS MANIPULATING THE OBJECT ATTRIBUTE KEY
.sp
Use the ceph\-objectstore\-tool utility to change an object\(aqs attributes. To manipulate the object\(aqs attributes you need the data and journal paths, the placement group identifier (PG ID), the object, and the key in the object\(aqs attribute.
Note
.sp
If you are using FileStore as the OSD backend object store and the journal is on a different disk, you must add the \fI\-\-journal\-path $PATH_TO_JOURNAL\fP argument when getting, setting or removing the object\(aqs attributes. Where the \fI$PATH_TO_JOURNAL\fP variable is the absolute path to the OSD journal, for example \fI/var/lib/ceph/osd/ceph\-0/journal\fP\&.
.sp
Prerequisites
.INDENT 0.0
.INDENT 3.5
.INDENT 0.0
.IP \(bu 2
Having root access to the Ceph OSD node.
.IP \(bu 2
Stopping the ceph\-osd daemon.
.UNINDENT
.UNINDENT
.UNINDENT
.sp
Procedure
.INDENT 0.0
.INDENT 3.5
.INDENT 0.0
.INDENT 3.5
Verify that the target OSD is down.
.UNINDENT
.UNINDENT
.sp
语法:
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
systemctl status ceph\-osd@$OSD_NUMBER
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
实例:
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
[root@osd ~]# systemctl status ceph\-osd@1
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
Get the object\(aqs attributes:
.sp
语法:
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
ceph\-objectstore\-tool \-\-data\-path $PATH_TO_OSD \-\-pgid $PG_ID $OBJECT get\-attrs $KEY > $OBJECT_ATTRS_FILE_NAME
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
实例:
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
[root@osd ~]# ceph\-objectstore\-tool \-\-data\-path /var/lib/ceph/osd/ceph\-0  \-\-pgid 0.1c \(aq{"oid":"zone_info.default","key":"","snapid":\-2,"hash":235010478,"max":0,"pool":11,"namespace":""}\(aq get\-attrs "oid" > zone_info.default.attr.txt
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
Set an object\(aqs attributes:
.sp
语法:
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
ceph\-objectstore\-tool \-\-data\-path $PATH_TO_OSD \-\-pgid $PG_ID $OBJECT  set\-attrs $KEY < $OBJECT_ATTRS_FILE_NAME
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
实例:
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
[root@osd ~]# ceph\-objectstore\-tool \-\-data\-path /var/lib/ceph/osd/ceph\-0 \-\-pgid 0.1c \(aq{"oid":"zone_info.default","key":"","snapid":\-2,"hash":235010478,"max":0,"pool":11,"namespace":""}\(aq set\-attrs "oid" < zone_info.default.attr.txt
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
Remove an object\(aqs attributes:
.sp
语法:
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
ceph\-objectstore\-tool \-\-data\-path $PATH_TO_OSD \-\-pgid $PG_ID $OBJECT rm\-attrs $KEY
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
实例:
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
[root@osd ~]# ceph\-objectstore\-tool \-\-data\-path /var/lib/ceph/osd/ceph\-0 \-\-pgid 0.1c \(aq{"oid":"zone_info.default","key":"","snapid":\-2,"hash":235010478,"max":0,"pool":11,"namespace":""}\(aq rm\-attrs "oid"
.ft P
.fi
.UNINDENT
.UNINDENT
.UNINDENT
.UNINDENT
.SH 选项
.INDENT 0.0
.TP
.B \-\-help
输出帮助消息
.UNINDENT
.INDENT 0.0
.TP
.B \-\-type arg
Arg is one of [bluestore (default), filestore, memstore]. This option is needed only if the tool can\(aqt tell the type from \-\-data\-path.
.UNINDENT
.INDENT 0.0
.TP
.B \-\-data\-path arg
path to object store, mandatory
.UNINDENT
.INDENT 0.0
.TP
.B \-\-journal\-path arg
path to journal, use if tool can\(aqt find it
.UNINDENT
.INDENT 0.0
.TP
.B \-\-pgid arg
PG id, mandatory for info, log, remove, export, export\-remove, mark\-complete, trim\-pg\-log, and mandatory for apply\-layout\-settings if \-\-pool is not specified
.UNINDENT
.INDENT 0.0
.TP
.B \-\-pool arg
Pool name, mandatory for apply\-layout\-settings if \-\-pgid is not specified
.UNINDENT
.INDENT 0.0
.TP
.B \-\-op arg
Arg is one of [info, log, remove, mkfs, fsck, repair, fuse, dup, export, export\-remove, import, list, fix\-lost, list\-pgs, dump\-journal, dump\-super, meta\-list, get\-osdmap, set\-osdmap, get\-inc\-osdmap, set\-inc\-osdmap, mark\-complete, reset\-last\-complete, apply\-layout\-settings, update\-mon\-db, dump\-export, trim\-pg\-log]
.UNINDENT
.INDENT 0.0
.TP
.B \-\-epoch arg
epoch# for get\-osdmap and get\-inc\-osdmap, the current epoch in use if not specified
.UNINDENT
.INDENT 0.0
.TP
.B \-\-file arg
path of file to export, export\-remove, import, get\-osdmap, set\-osdmap, get\-inc\-osdmap or set\-inc\-osdmap
.UNINDENT
.INDENT 0.0
.TP
.B \-\-mon\-store\-path arg
path of monstore to update\-mon\-db
.UNINDENT
.INDENT 0.0
.TP
.B \-\-fsid arg
fsid for new store created by mkfs
.UNINDENT
.INDENT 0.0
.TP
.B \-\-target\-data\-path arg
path of target object store (for \-\-op dup)
.UNINDENT
.INDENT 0.0
.TP
.B \-\-mountpoint arg
fuse mountpoint
.UNINDENT
.INDENT 0.0
.TP
.B \-\-format arg (=json\-pretty)
Output format which may be json, json\-pretty, xml, xml\-pretty
.UNINDENT
.INDENT 0.0
.TP
.B \-\-debug
Enable diagnostic output to stderr
.UNINDENT
.INDENT 0.0
.TP
.B \-\-force
Ignore some types of errors and proceed with operation \- USE WITH CAUTION: CORRUPTION POSSIBLE NOW OR IN THE FUTURE
.UNINDENT
.INDENT 0.0
.TP
.B \-\-skip\-journal\-replay
Disable journal replay
.UNINDENT
.INDENT 0.0
.TP
.B \-\-skip\-mount\-omap
Disable mounting of omap
.UNINDENT
.INDENT 0.0
.TP
.B \-\-head
Find head/snapdir when searching for objects by name
.UNINDENT
.INDENT 0.0
.TP
.B \-\-dry\-run
Don\(aqt modify the objectstore
.UNINDENT
.INDENT 0.0
.TP
.B \-\-namespace arg
Specify namespace when searching for objects
.UNINDENT
.INDENT 0.0
.TP
.B \-\-rmtype arg
Specify corrupting object removal \(aqsnapmap\(aq or \(aqnosnapmap\(aq \- TESTING USE ONLY
.UNINDENT
.SH 错误码
.sp
"Mount failed with \(aq(11) Resource temporarily unavailable" \- 可能是你试图在一个运行着的 OSD 上运行 \fBceph\-objectstore\-tool\fP 。
.SH 使用范围
.sp
\fBrgw\-orphan\-list\fP 是 Ceph 的一部分，这是个伸缩力强、开源、
分布式的存储系统，更多信息参见 \fI\%https://docs.ceph.com\fP 。
.SH COPYRIGHT
2010-2014, Inktank Storage, Inc. and contributors. Licensed under Creative Commons Attribution Share Alike 3.0 (CC-BY-SA-3.0)
.\" Generated by docutils manpage writer.
.
