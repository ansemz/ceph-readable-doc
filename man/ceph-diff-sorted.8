.\" Man page generated from reStructuredText.
.
.TH "CEPH-DIFF-SORTED" "8" "Jan 23, 2022" "dev" "Ceph"
.SH NAME
ceph-diff-sorted \- compare two sorted files line by line
.
.nr rst2man-indent-level 0
.
.de1 rstReportMargin
\\$1 \\n[an-margin]
level \\n[rst2man-indent-level]
level margin: \\n[rst2man-indent\\n[rst2man-indent-level]]
-
\\n[rst2man-indent0]
\\n[rst2man-indent1]
\\n[rst2man-indent2]
..
.de1 INDENT
.\" .rstReportMargin pre:
. RS \\$1
. nr rst2man-indent\\n[rst2man-indent-level] \\n[an-margin]
. nr rst2man-indent-level +1
.\" .rstReportMargin post:
..
.de UNINDENT
. RE
.\" indent \\n[an-margin]
.\" old: \\n[rst2man-indent\\n[rst2man-indent-level]]
.nr rst2man-indent-level -1
.\" new: \\n[rst2man-indent\\n[rst2man-indent-level]]
.in \\n[rst2man-indent\\n[rst2man-indent-level]]u
..
.SH 提纲
.nf
\fBceph\-diff\-sorted\fP \fIfile1\fP \fIfile2\fP
.fi
.sp
.SH 描述
.sp
\fBceph\-diff\-sorted\fP 是个简单的 \fIdiff\fP 工具，
对已经按字典排序过的两个文件的比较做过针对性的优化。
.sp
与 POSIX 系统里的标准 \fIdiff\fP 工具相比，它的输出简化了。
尖括号（ < 和 > ）用于展示在一个文件却不在另一个文件里的行。
这个输出与 \fIpatch\fP 工具不兼容。
.sp
这个工具的出现是为了比较巨型文件（例如包含数十亿行的），
而标准的 \fIdiff\fP 工具不能高效地处理。已知行是排序过的，
此工具才能在内存开销最低的情况下高效地处理。
.sp
每个文件都需要先完成按字典排序。大多数 POSIX 系统都用 \fILANG\fP 环境变量来确定 \fIsort\fP 工具的排序方式。
要按字典顺序排序，我们需要这样：
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
$ LANG=C sort some\-file.txt >some\-file\-sorted.txt
.ft P
.fi
.UNINDENT
.UNINDENT
.SH 实例
.sp
比较两个文件:
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
$ ceph\-diff\-sorted fileA.txt fileB.txt
.ft P
.fi
.UNINDENT
.UNINDENT
.SH 退出状态
.sp
完成时，退出码会设置成下列之一：
.INDENT 0.0
.TP
.B 0
文件相同
.TP
.B 1
文件不同
.TP
.B 2
用法问题（例如命令行参数个数不对）
.TP
.B 3
打开输入文件遇到问题
.TP
.B 4
文件内容有问题（例如没排序过、或遇到空行）
.UNINDENT
.SH 使用范围
.sp
\fBceph\-diff\-sorted\fP 是 Ceph 的一部分，这是个伸缩力强、开源、
分布式的存储系统，更多信息参见 \fI\%https://docs.ceph.com\fP 。
.SH 参考
.sp
rgw\-orphan\-list(8)
.SH COPYRIGHT
2010-2014, Inktank Storage, Inc. and contributors. Licensed under Creative Commons Attribution Share Alike 3.0 (CC-BY-SA-3.0)
.\" Generated by docutils manpage writer.
.
