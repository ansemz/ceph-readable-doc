.\" Man page generated from reStructuredText.
.
.TH "RADOSGW-ADMIN" "8" "Dec 12, 2021" "dev" "Ceph"
.SH NAME
radosgw-admin \- rados REST gateway user administration utility
.
.nr rst2man-indent-level 0
.
.de1 rstReportMargin
\\$1 \\n[an-margin]
level \\n[rst2man-indent-level]
level margin: \\n[rst2man-indent\\n[rst2man-indent-level]]
-
\\n[rst2man-indent0]
\\n[rst2man-indent1]
\\n[rst2man-indent2]
..
.de1 INDENT
.\" .rstReportMargin pre:
. RS \\$1
. nr rst2man-indent\\n[rst2man-indent-level] \\n[an-margin]
. nr rst2man-indent-level +1
.\" .rstReportMargin post:
..
.de UNINDENT
. RE
.\" indent \\n[an-margin]
.\" old: \\n[rst2man-indent\\n[rst2man-indent-level]]
.nr rst2man-indent-level -1
.\" new: \\n[rst2man-indent\\n[rst2man-indent-level]]
.in \\n[rst2man-indent\\n[rst2man-indent-level]]u
..
.SH 提纲
.nf
\fBradosgw\-admin\fP \fIcommand\fP [ \fIoptions\fP \fI\&...\fP ]
.fi
.sp
.SH 描述
.sp
\fBradosgw\-admin\fP 是 RADOS 网关用户管理工具，可用于创建和修改用户。
.SH 命令
.sp
\fBradosgw\-admin\fP 工具有很多命令，可完成各种管理任务：
.INDENT 0.0
.TP
\fBuser create\fP
创建一个新用户。
.TP
\fBuser modify\fP
修改一个用户。
.TP
\fBuser info\fP
显示用户信息，以及可能存在的子用户和密钥。
.TP
\fBuser rename\fP
重命名一个用户。
.TP
\fBuser rm\fP
删除一个用户。
.TP
\fBuser suspend\fP
暂停某用户。
.TP
\fBuser enable\fP
重新允许暂停的用户。
.TP
\fBuser check\fP
检查用户信息。
.TP
\fBuser stats\fP
显示配额子系统统计的用户状态。
.TP
\fBuser list\fP
罗列出所有用户。
.TP
\fBcaps add\fP
给用户分配能力。
.TP
\fBcaps rm\fP
删除用户能力。
.TP
\fBsubuser create\fP
新建一个子用户（适合使用 Swift API 的客户端）。
.TP
\fBsubuser modify\fP
修改子用户。
.TP
\fBsubuser rm\fP
删除子用户
.TP
\fBkey create\fP
新建访问密钥。
.TP
\fBkey rm\fP
删除访问密钥。
.TP
\fBbucket list\fP
罗列所有桶，或者，如果给桶加 \-\-bucket=<bucket> 选项就罗列其内的对象；如果给桶加 \-\-allow\-unordered 选项、就不再排序，对于有海量对象的桶生成结果的速度可能快得多。
.TP
\fBbucket limit check\fP
显示桶的分片统计信息。
.TP
\fBbucket link\fP
把桶关联到指定用户。
.TP
\fBbucket unlink\fP
取消指定用户和桶的关联。
.TP
\fBbucket chown\fP
Link bucket to specified user and update object ACLs.
Use \-\-marker to resume if command gets interrupted.
.TP
\fBbucket stats\fP
返回桶的统计信息。
.TP
\fBbucket rm\fP
删除一个桶。
.TP
\fBbucket check\fP
检查桶的索引信息。
.TP
\fBbucket rewrite\fP
重写指定桶内的所有对象。
.TP
\fBbucket radoslist\fP
List the rados objects that contain the data for all objects is
the designated bucket, if \-\-bucket=<bucket> is specified, or
otherwise all buckets.
.TP
\fBbucket reshard\fP
对桶进行重分片。
.TP
\fBbucket sync disable\fP
禁用桶同步。
.TP
\fBbucket sync enable\fP
允许桶同步。
.TP
\fBbi get\fP
检出桶索引对象条目。
.TP
\fBbi put\fP
存入桶索引对象条目。
.TP
\fBbi list\fP
罗列原始的桶索引条目。
.TP
\fBbi purge\fP
清除桶索引条目。
.TP
\fBobject rm\fP
删除一个对象。
.TP
\fBobject stat\fP
对某一对象执行 stat 操作，查看其元数据。
.TP
\fBobject unlink\fP
从桶索引里去掉对象。
.TP
\fBobject rewrite\fP
重写指定对象。
.TP
\fBobjects expire\fP
启动过期对象的清理。
.TP
\fBperiod rm\fP
删除一个 period 。
.TP
\fBperiod get\fP
查看指定 period 的信息。
.TP
\fBperiod get\-current\fP
查看当前 period 的信息。
.TP
\fBperiod pull\fP
拉取一个 period 。
.TP
\fBperiod push\fP
推送一个 period 。
.TP
\fBperiod list\fP
罗列所有 period 。
.TP
\fBperiod update\fP
更新暂存的 period 。
.TP
\fBperiod commit\fP
提交暂存的 period 。
.TP
\fBquota set\fP
设置配额参数。
.TP
\fBquota enable\fP
启用配额。
.TP
\fBquota disable\fP
禁用配额。
.TP
\fBglobal quota get\fP
查看全局配额参数。
.TP
\fBglobal quota set\fP
配置全局配额参数。
.TP
\fBglobal quota enable\fP
启用全局配额。
.TP
\fBglobal quota disable\fP
禁用全局配额。
.TP
\fBrealm create\fP
新建一个 realm 。
.TP
\fBrealm rm\fP
删除一个 realm 。
.TP
\fBrealm get\fP
显示此 realm 的信息。
.TP
\fBrealm get\-default\fP
查看默认的 realm 名。
.TP
\fBrealm list\fP
罗列所有 realm 。
.TP
\fBrealm list\-periods\fP
罗列所有 realm 的 period 。
.TP
\fBrealm rename\fP
重命名一个 realm 。
.TP
\fBrealm set\fP
设置 realm 信息（需要信息源 infile ）。
.TP
\fBrealm default\fP
把此 realm 设置为默认的。
.TP
\fBrealm pull\fP
拉取一个 realm 、及其当前的 period 。
.TP
\fBzonegroup add\fP
把一个域加入域组。
.TP
\fBzonegroup create\fP
新建一条域组信息。
.TP
\fBzonegroup default\fP
设置默认域组。
.TP
\fBzonegroup rm\fP
删除一条域组信息。
.TP
\fBzonegroup get\fP
显示域组信息。
.TP
\fBzonegroup modify\fP
更改现有域组。
.TP
\fBzonegroup set\fP
设置域组信息（需要信息源 infile ）。
.TP
\fBzonegroup remove\fP
从一域组中删除一个域。
.TP
\fBzonegroup rename\fP
重命名一个域组。
.TP
\fBzonegroup list\fP
罗列此集群内配置的所有域组。
.TP
\fBzonegroup placement list\fP
罗列域组的归置靶。
.TP
\fBzonegroup placement add\fP
把一个归置靶 id 加进一个域组。
.TP
\fBzonegroup placement modify\fP
更改某一特定域组内的一个归置靶。
.TP
\fBzonegroup placement rm\fP
删除一个域组的一个归置靶。
.TP
\fBzonegroup placement default\fP
设置一域组的默认归置靶。
.TP
\fBzone create\fP
新建一个域。
.TP
\fBzone rm\fP
删除一个域。
.TP
\fBzone get\fP
显示区域集群参数。
.TP
\fBzone set\fP
设置区域集群参数（需要输入文件）。
.TP
\fBzone modify\fP
更改现有域。
.TP
\fBzone list\fP
列出本集群内配置的所有区域。
.TP
\fBmetadata sync status\fP
查看元数据同步状态。
.TP
\fBmetadata sync init\fP
初始化元数据同步。
.TP
\fBmetadata sync run\fP
启动元数据同步。
.TP
\fBdata sync status\fP
查看指定源 zone 的数据同步状态。
.TP
\fBdata sync init\fP
初始化指定源 zone 的数据同步。
.TP
\fBdata sync run\fP
启动指定源 zone 的数据同步。
.TP
\fBsync error list\fP
罗列同步错误。
.TP
\fBsync error trim\fP
清理同步错误。
.TP
\fBzone rename\fP
重命名一个 zone 。
.TP
\fBzone placement list\fP
罗列 zone 的归置靶。
.TP
\fBzone placement add\fP
新增一个 zone 归置靶。
.TP
\fBzone placement modify\fP
更改一个 zone 的归置靶。
.TP
\fBzone placement rm\fP
删除一个 zone 的归置靶。
.TP
\fBpool add\fP
增加一个已有存储池用于数据归置。
.TP
\fBpool rm\fP
从数据归置集删除一个已有存储池。
.TP
\fBpools list\fP
罗列归置活跃集。
.TP
\fBpolicy\fP
显示桶或对象相关的策略。
.TP
\fBlog list\fP
罗列日志对象。
.TP
\fBlog show\fP
显示指定对象内（或指定桶、日期、桶标识符）的日志。
（注意：日期格式必须是 YYYY\-MM\-DD\-hh ）
.TP
\fBlog rm\fP
删除日志对象。
.TP
\fBusage show\fP
查看使用率信息（可选选项有用户和数据范围）。
.TP
\fBusage trim\fP
修剪使用率信息（可选选项有用户和数据范围）。
.TP
\fBgc list\fP
显示过期的垃圾回收对象（加 \-\-include\-all 选项罗列所有条目，包括未过期的）。
.TP
\fBgc process\fP
手动处理垃圾。
.TP
\fBlc list\fP
罗列所有桶的生命周期进度。
.TP
\fBlc process\fP
手动处理生命周期。
.TP
\fBmetadata get\fP
读取元数据信息。
.TP
\fBmetadata put\fP
设置元数据信息。
.TP
\fBmetadata rm\fP
删除元数据信息。
.TP
\fBmetadata list\fP
罗列元数据信息。
.TP
\fBmdlog list\fP
罗列元数据日志，多站部署需要。
.TP
\fBmdlog trim\fP
手动裁截元数据日志，而不是依赖 RGW 集成的日志同步机制。
裁截前，罗列几次查验一下，确保最后一个同步已完成，
否则它会重新开始一个同步。
.TP
\fBmdlog status\fP
读取元数据日志状态。
.TP
\fBbilog list\fP
罗列桶索引日志，多站部署需要。
.TP
\fBbilog trim\fP
手动裁截桶索引日志（要用到起始标记、结束标记），
而不是依赖 RGW 自带的日志同步机制。
裁截前，罗列几次查验一下，确保最后一个同步已完成，
否则它会重新开始一个同步。
.TP
\fBdatalog list\fP
罗列数据日志，多站部署需要。
.TP
\fBdatalog trim\fP
手动裁截数据日志，而不是依赖 RGW 自带的日志同步机制。
裁截前，罗列几次查验一下，确保最后一个同步已完成，
否则它会重新开始一个同步。
.TP
\fBdatalog status\fP
读取数据日志状态。
.TP
\fBorphans find\fP
初始化、并开始检索遗漏的 RADOS 对象。
\fB已废弃\fP，改用 rgw\-orphan\-list 工具吧。
.TP
\fBorphans finish\fP
清理遗漏 RADOS 对象的检索结果。
\fB已废弃\fP，改用 rgw\-orphan\-list 工具吧。
.TP
\fBorphans list\-jobs\fP
罗列当前正在进行的遗漏对象检索作业号。
\fB已废弃\fP，改用 rgw\-orphan\-list 工具吧。
.TP
\fBrole create\fP
新建一个用于 STS 的 AWS 角色。
.TP
\fBrole rm\fP
删除一个角色。
.TP
\fBrole get\fP
获取一个角色。
.TP
\fBrole list\fP
罗列带有指定路径前缀的角色。
.TP
\fBrole modify\fP
修改现有角色的 assume role 策略。
.TP
\fBrole\-policy put\fP
新增、更新角色的权限策略。
.TP
\fBrole\-policy list\fP
罗列与一个角色相关的策略。
.TP
\fBrole\-policy get\fP
获取给定角色内嵌的指定内联策略文档。
.TP
\fBrole\-policy rm\fP
删除与一个角色相关的策略。
.TP
\fBreshard add\fP
安排一个桶进行重分片。
.TP
\fBreshard list\fP
罗列所有正在进行的桶重分片、或已安排准备重分片的作业。
.TP
\fBreshard process\fP
已安排重分片作业的进度。
.TP
\fBreshard status\fP
一个桶的重分片状态。
.TP
\fBreshard cancel\fP
取消一个桶的重分片。
.TP
\fBtopic list\fP
List bucket notifications/pubsub topics
.TP
\fBtopic get\fP
Get a bucket notifications/pubsub topic
.TP
\fBtopic rm\fP
Remove a bucket notifications/pubsub topic
.TP
\fBsubscription get\fP
Get a pubsub subscription definition
.TP
\fBsubscription rm\fP
Remove a pubsub subscription
.TP
\fBsubscription pull\fP
Show events in a pubsub subscription
.TP
\fBsubscription ack\fP
Ack (remove) an events in a pubsub subscription
.UNINDENT
.SH 选项
.INDENT 0.0
.TP
.B \-c ceph.conf, \-\-conf=ceph.conf
用指定的 \fBceph.conf\fP 配置文件而非默认的
\fB/etc/ceph/ceph.conf\fP 来确定启动时所需的监视器地址。
.UNINDENT
.INDENT 0.0
.TP
.B \-m monaddress[:port]
连接到指定监视器，而非通过 ceph.conf 查询。
.UNINDENT
.INDENT 0.0
.TP
.B \-\-tenant=<tenant>
租户的名字。
.UNINDENT
.INDENT 0.0
.TP
.B \-\-uid=uid
radosgw 用户的 ID 。
.UNINDENT
.INDENT 0.0
.TP
.B \-\-new\-uid=uid
ID of the new user. Used with \(aquser rename\(aq command.
.UNINDENT
.INDENT 0.0
.TP
.B \-\-subuser=<name>
子用户名字。
.UNINDENT
.INDENT 0.0
.TP
.B \-\-access\-key=<key>
S3 访问密钥。
.UNINDENT
.INDENT 0.0
.TP
.B \-\-email=email
用户的电子邮件地址。
.UNINDENT
.INDENT 0.0
.TP
.B \-\-secret/\-\-secret\-key=<key>
私钥。
.UNINDENT
.INDENT 0.0
.TP
.B \-\-gen\-access\-key
生成随机访问密钥（给 S3 ）。
.UNINDENT
.INDENT 0.0
.TP
.B \-\-gen\-secret
生成随机私钥。
.UNINDENT
.INDENT 0.0
.TP
.B \-\-key\-type=<type>
密钥类型，可用的有： swift 、 s3 。
.UNINDENT
.INDENT 0.0
.TP
.B \-\-temp\-url\-key[\-2]=<key>
临时 URL 密钥。
.UNINDENT
.INDENT 0.0
.TP
.B \-\-max\-buckets
一用户的最大桶数量（ 0 意为不限制，负值意为禁止创建桶）。
默认为 1000 。
.UNINDENT
.INDENT 0.0
.TP
.B \-\-access=<access>
为子用户设置访问权限。可用的访问权限有读、写、读写和完全。
.UNINDENT
.INDENT 0.0
.TP
.B \-\-display\-name=<name>
此用户的显示名字（昵称）。
.UNINDENT
.INDENT 0.0
.TP
.B \-\-admin
给用户设置管理标志。
.UNINDENT
.INDENT 0.0
.TP
.B \-\-system
给用户设置系统标识。
.UNINDENT
.INDENT 0.0
.TP
.B \-\-bucket=[tenant\-id/]bucket
指定桶名。如果未指定 tenant\-id ，那就用用户（ \-\-uid ）的
tenant\-id 。
.UNINDENT
.INDENT 0.0
.TP
.B \-\-pool=<pool>
指定存储池名字。也可以用于 \fIorphans find\fP 指定数据存储池，以扫描泄露的 rados 对象。
.UNINDENT
.INDENT 0.0
.TP
.B \-\-object=object
指定对象名
.UNINDENT
.INDENT 0.0
.TP
.B \-\-date=yyyy\-mm\-dd
格式为 yyyy\-mm\-dd 的日期。
.UNINDENT
.INDENT 0.0
.TP
.B \-\-start\-date=yyyy\-mm\-dd
格式为 yyyy\-mm\-dd 的起始日期。
.UNINDENT
.INDENT 0.0
.TP
.B \-\-end\-date=yyyy\-mm\-dd
格式为 yyyy\-mm\-dd 的终结日期。
.UNINDENT
.INDENT 0.0
.TP
.B \-\-bucket\-id=<bucket\-id>
指定桶 id 。
.UNINDENT
.INDENT 0.0
.TP
.B \-\-bucket\-new\-name=[tenant\-id/]<bucket>
\fIbucket link\fP 命令的可选项，用于重命名一个桶。 tenant\-id/
可加可不加，常规操作一般没必要管。
.UNINDENT
.INDENT 0.0
.TP
.B \-\-shard\-id=<shard\-id>
\fBmdlog list\fP 、 \fBbi list\fP 、 \fBdata sync status\fP 命令的可选项。对 \fBmdlog trim\fP 来说是必需的。
.UNINDENT
.INDENT 0.0
.TP
.B \-\-max\-entries=<entries>
罗列操作的可选参数，用于指定最大条数。
.UNINDENT
.INDENT 0.0
.TP
.B \-\-purge\-data
若加了此选项，删除用户时也一并删除用户的所有数据。
.UNINDENT
.INDENT 0.0
.TP
.B \-\-purge\-keys
若加了此选项，删除子用户时将一起删除其所有密钥。
.UNINDENT
.INDENT 0.0
.TP
.B \-\-purge\-objects
若加了此选项，删除此桶时也一并删除其内所有对象。
.UNINDENT
.INDENT 0.0
.TP
.B \-\-metadata\-key=<key>
用 \fBmetadata get\fP 检索元数据时用的密钥。
.UNINDENT
.INDENT 0.0
.TP
.B \-\-remote=<remote>
远程网关的域或域组 id 。
.UNINDENT
.INDENT 0.0
.TP
.B \-\-period=<id>
Period id.
.UNINDENT
.INDENT 0.0
.TP
.B \-\-url=<url>
用于推送、拉取 period 或 realm 的 URL 。
.UNINDENT
.INDENT 0.0
.TP
.B \-\-epoch=<number>
Period epoch.
.UNINDENT
.INDENT 0.0
.TP
.B \-\-commit
在执行 \fBperiod update\fP 期间提交此 period 。
.UNINDENT
.INDENT 0.0
.TP
.B \-\-staging
查看暂存的 period 信息。
.UNINDENT
.INDENT 0.0
.TP
.B \-\-master
设置为 master 。
.UNINDENT
.INDENT 0.0
.TP
.B \-\-master\-zone=<id>
主域的 id 。
.UNINDENT
.INDENT 0.0
.TP
.B \-\-rgw\-realm=<name>
realm 的名字。
.UNINDENT
.INDENT 0.0
.TP
.B \-\-realm\-id=<id>
realm 的 id 。
.UNINDENT
.INDENT 0.0
.TP
.B \-\-realm\-new\-name=<name>
realm 的新名字。
.UNINDENT
.INDENT 0.0
.TP
.B \-\-rgw\-zonegroup=<name>
域组的名字。
.UNINDENT
.INDENT 0.0
.TP
.B \-\-zonegroup\-id=<id>
域组的 id 。
.UNINDENT
.INDENT 0.0
.TP
.B \-\-zonegroup\-new\-name=<name>
域组的新名字。
.UNINDENT
.INDENT 0.0
.TP
.B \-\-rgw\-zone=<zone>
radosgw 所在的区域。
.UNINDENT
.INDENT 0.0
.TP
.B \-\-zone\-id=<id>
域的 id 。
.UNINDENT
.INDENT 0.0
.TP
.B \-\-zone\-new\-name=<name>
此域的新名字。
.UNINDENT
.INDENT 0.0
.TP
.B \-\-source\-zone
数据同步的源 zone 。
.UNINDENT
.INDENT 0.0
.TP
.B \-\-default
Set the entity (realm, zonegroup, zone) as default.
.UNINDENT
.INDENT 0.0
.TP
.B \-\-read\-only
Set the zone as read\-only when adding to the zonegroup.
.UNINDENT
.INDENT 0.0
.TP
.B \-\-placement\-id
Placement id for the zonegroup placement commands.
.UNINDENT
.INDENT 0.0
.TP
.B \-\-tags=<list>
The list of tags for zonegroup placement add and modify commands.
.UNINDENT
.INDENT 0.0
.TP
.B \-\-tags\-add=<list>
The list of tags to add for zonegroup placement modify command.
.UNINDENT
.INDENT 0.0
.TP
.B \-\-tags\-rm=<list>
The list of tags to remove for zonegroup placement modify command.
.UNINDENT
.INDENT 0.0
.TP
.B \-\-endpoints=<list>
The zone endpoints.
.UNINDENT
.INDENT 0.0
.TP
.B \-\-index\-pool=<pool>
The placement target index pool.
.UNINDENT
.INDENT 0.0
.TP
.B \-\-data\-pool=<pool>
The placement target data pool.
.UNINDENT
.INDENT 0.0
.TP
.B \-\-data\-extra\-pool=<pool>
The placement target data extra (non\-ec) pool.
.UNINDENT
.INDENT 0.0
.TP
.B \-\-placement\-index\-type=<type>
The placement target index type (normal, indexless, or #id).
.UNINDENT
.INDENT 0.0
.TP
.B \-\-tier\-type=<type>
The zone tier type.
.UNINDENT
.INDENT 0.0
.TP
.B \-\-tier\-config=<k>=<v>[,...]
Set zone tier config keys, values.
.UNINDENT
.INDENT 0.0
.TP
.B \-\-tier\-config\-rm=<k>[,...]
Unset zone tier config keys.
.UNINDENT
.INDENT 0.0
.TP
.B \-\-sync\-from\-all[=false]
Set/reset whether zone syncs from all zonegroup peers.
.UNINDENT
.INDENT 0.0
.TP
.B \-\-sync\-from=[zone\-name][,...]
Set the list of zones to sync from.
.UNINDENT
.INDENT 0.0
.TP
.B \-\-sync\-from\-rm=[zone\-name][,...]
Remove the zones from list of zones to sync from.
.UNINDENT
.INDENT 0.0
.TP
.B \-\-bucket\-index\-max\-shards
Override a zone\(aqs or zonegroup\(aqs default number of bucket index shards. This
option is accepted by the \(aqzone create\(aq, \(aqzone modify\(aq, \(aqzonegroup add\(aq,
and \(aqzonegroup modify\(aq commands, and applies to buckets that are created
after the zone/zonegroup changes take effect.
.UNINDENT
.INDENT 0.0
.TP
.B \-\-fix
除了检查桶索引，还修复它。
.UNINDENT
.INDENT 0.0
.TP
.B \-\-check\-objects
检查桶：根据对象的实际状态重建桶索引。
.UNINDENT
.INDENT 0.0
.TP
.B \-\-format=<format>
为某些操作指定输出格式： xml 、 json 。
.UNINDENT
.INDENT 0.0
.TP
.B \-\-sync\-stats
\fBuser stats\fP 的选项。若加了此选项，它就会用当前来自用户桶索引的统计信息更新用户的统计信息。
.UNINDENT
.INDENT 0.0
.TP
.B \-\-show\-config
展示出配置内容。
.UNINDENT
.INDENT 0.0
.TP
.B \-\-show\-log\-entries=<flag>
执行 \fBlog show\fP 时，显示或不显示日志条目。
.UNINDENT
.INDENT 0.0
.TP
.B \-\-show\-log\-sum=<flag>
执行 \fBlog show\fP 时，显示或不显示日志汇总。
.UNINDENT
.INDENT 0.0
.TP
.B \-\-skip\-zero\-entries
让 \fBlog show\fP 只显示数字字段非零的日志。
.UNINDENT
.INDENT 0.0
.TP
.B \-\-infile
设置时指定要读取的文件。
.UNINDENT
.INDENT 0.0
.TP
.B \-\-categories=<list>
逗号分隔的一系列类目，显示使用情况时需要。
.UNINDENT
.INDENT 0.0
.TP
.B \-\-caps=<caps>
一系列能力，如 "usage=read, write; user=read" 。
.UNINDENT
.INDENT 0.0
.TP
.B \-\-compression=<compression\-algorithm>
归置靶的压缩算法（ lz4|snappy|zlib|zstd ）
.UNINDENT
.INDENT 0.0
.TP
.B \-\-yes\-i\-really\-mean\-it
某些特定操作需要。
.UNINDENT
.INDENT 0.0
.TP
.B \-\-min\-rewrite\-size
指定桶重写时的最小对象尺寸（默认 4M ）。
.UNINDENT
.INDENT 0.0
.TP
.B \-\-max\-rewrite\-size
指定桶重写时的最大对象尺寸（默认 ULLONG_MAX ）。
.UNINDENT
.INDENT 0.0
.TP
.B \-\-min\-rewrite\-stripe\-size
指定对象重写时的最小条带尺寸（默认 0 ）。如果此值设置为 0 ，那么被指定对象被重写后还需重新条带化。
.UNINDENT
.INDENT 0.0
.TP
.B \-\-warnings\-only
进行桶超限检查时若加了此选项，仅罗列出那些当前分片内最大对象数接近或超过的桶。
.UNINDENT
.INDENT 0.0
.TP
.B \-\-bypass\-gc
删除桶时若加了此选项，则跳过 GC 直接触发对象删除。
.UNINDENT
.INDENT 0.0
.TP
.B \-\-inconsistent\-index
删除桶时若加了此选项、且加了 \fB\-\-bypass\-gc\fP 选项，则无视桶索引的一致性。
.UNINDENT
.INDENT 0.0
.TP
.B \-\-max\-concurrent\-ios
进行桶操作时的最大并行 IO 数。影响的操作诸如扫描桶索引，如罗列、删除；还有所有的扫描、搜索操作，比如捡漏或检查桶索引。默认值为 32 。
.UNINDENT
.SH 配额选项
.INDENT 0.0
.TP
.B \-\-max\-objects
指定最大对象数（负数为禁用）。
.UNINDENT
.INDENT 0.0
.TP
.B \-\-max\-size
指定最大尺寸（单位为 B/K/M/G/T ，负数为禁用）。
.UNINDENT
.INDENT 0.0
.TP
.B \-\-quota\-scope
配额有效范围（桶、用户）。
.UNINDENT
.SH 捡漏（ ORPHANS ）选项
.INDENT 0.0
.TP
.B \-\-num\-shards
用多少个分片临时保存扫描信息。
.UNINDENT
.INDENT 0.0
.TP
.B \-\-orphan\-stale\-secs
对象被遗漏多久才被当作孤儿，单位是秒。
默认是 86400 （ 24 小时）。
.UNINDENT
.INDENT 0.0
.TP
.B \-\-job\-id
设置作业标识符（适用于 \fBorphans find\fP ）。
.UNINDENT
.SH ORPHANS LIST-JOBS 选项
.INDENT 0.0
.TP
.B \-\-extra\-info
在作业列表中展示额外信息。
.UNINDENT
.SH 角色选项
.INDENT 0.0
.TP
.B \-\-role\-name
要创建角色的名字。
.UNINDENT
.INDENT 0.0
.TP
.B \-\-path
角色的路径。
.UNINDENT
.INDENT 0.0
.TP
.B \-\-assume\-role\-policy\-doc
信任关系策略文档，用于授予一个实体权限，以担任此角色。
.UNINDENT
.INDENT 0.0
.TP
.B \-\-policy\-name
策略文档的名字。
.UNINDENT
.INDENT 0.0
.TP
.B \-\-policy\-doc
权限策略文档。
.UNINDENT
.INDENT 0.0
.TP
.B \-\-path\-prefix
用于过滤角色的路径前缀。
.UNINDENT
.SH 桶的通知、发布订阅（PUBSUB）选项
.INDENT 0.0
.TP
.B \-\-topic
The bucket notifications/pubsub topic name.
.UNINDENT
.INDENT 0.0
.TP
.B \-\-subscription
The pubsub subscription name.
.UNINDENT
.INDENT 0.0
.TP
.B \-\-event\-id
The event id in a pubsub subscription.
.UNINDENT
.SH 实例
.sp
生成一新用户：
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
$ radosgw\-admin user create \-\-display\-name="johnny rotten" \-\-uid=johnny
{ "user_id": "johnny",
  "rados_uid": 0,
  "display_name": "johnny rotten",
  "email": "",
  "suspended": 0,
  "subusers": [],
  "keys": [
        { "user": "johnny",
          "access_key": "TCICW53D9BQ2VGC46I44",
          "secret_key": "tfm9aHMI8X76L3UdgE+ZQaJag1vJQmE6HDb5Lbrz"}],
  "swift_keys": []}
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
删除一用户：
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
$ radosgw\-admin user rm \-\-uid=johnny
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
重命名用户（改名）：
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
$ radosgw\-admin user rename \-\-uid=johny \-\-new\-uid=joe
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
删除一个用户和与他相关的桶及内容：
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
$ radosgw\-admin user rm \-\-uid=johnny \-\-purge\-data
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
删除一个桶：
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
$ radosgw\-admin bucket rm \-\-bucket=foo
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
把桶链接到指定用户：
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
$ radosgw\-admin bucket link \-\-bucket=foo \-\-bucket_id=<bucket id> \-\-uid=johnny
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
切断桶与指定用户的链接：
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
$ radosgw\-admin bucket unlink \-\-bucket=foo \-\-uid=johnny
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
重命名一个桶：
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
$ radosgw\-admin bucket link \-\-bucket=foo \-\-bucket\-new\-name=bar \-\-uid=johnny
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
把一个桶从原来的全局租户空间挪到指定租户：
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
$ radosgw\-admin bucket link \-\-bucket=/foo \-\-uid=12345678$12345678\(aq
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
把桶链接到指定用户、并更改对象的 ACL ：
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
$ radosgw\-admin bucket chown \-\-bucket=/foo \-\-uid=12345678$12345678\(aq
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
显示一个桶从 2012 年 4 月 1 日起的日志：
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
$ radosgw\-admin log show \-\-bucket=foo \-\-date=2012\-04\-01\-01 \-\-bucket\-id=default.14193.1
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
显示某用户 2012 年 3 月 1 日（不含）到 4 月 1 日期间的使用情况：
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
$ radosgw\-admin usage show \-\-uid=johnny \e
                \-\-start\-date=2012\-03\-01 \-\-end\-date=2012\-04\-01
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
只显示所有用户的使用情况汇总：
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
$ radosgw\-admin usage show \-\-show\-log\-entries=false
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
裁剪掉某用户 2012 年 4 月 1 日之前的使用信息：
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
$ radosgw\-admin usage trim \-\-uid=johnny \-\-end\-date=2012\-04\-01
.ft P
.fi
.UNINDENT
.UNINDENT
.SH 使用范围
.sp
\fBradosgw\-admin\fP 是 Ceph 的一部分，这是个伸缩力强、开源、分布式的存储系统，更多信息参见 \fI\%https://docs.ceph.com\fP 。
.SH 参考
.sp
ceph(8)
radosgw(8)
.SH COPYRIGHT
2010-2014, Inktank Storage, Inc. and contributors. Licensed under Creative Commons Attribution Share Alike 3.0 (CC-BY-SA-3.0)
.\" Generated by docutils manpage writer.
.
